{"version":3,"file":"all_components.js","sources":["../../node_modules/.pnpm/svelte@3.42.5/node_modules/svelte/internal/index.mjs","../../src/components/embedded-block.svelte","../../src/lib/md2website.global.ts","../../src/components/block-ref.svelte","../../src/lib/scroll_into_view.ts","../../node_modules/.pnpm/vditor@3.8.6/node_modules/vditor/dist/index.min.js","../../src/lib/vditor.ts","../../src/render.ts"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root && root.host) {\n        return root;\n    }\n    return node.ownerDocument;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentElement !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element_base(nodes, name, attributes, create_element) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => create_element(name));\n}\nfunction claim_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, element);\n}\nfunction claim_svg_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, svg_element);\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration();\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n    select.selectedIndex = -1; // no option should be selected\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, bubbles = false) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor() {\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes) {\n        super();\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = append_empty_stylesheet(node).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction escape_attribute_value(value) {\n    return typeof value === 'string' ? escape(value) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : context || []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : options.context || []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.42.5' }, detail), true));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_html_tag, claim_space, claim_svg_element, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, src_url_equal, start_hydrating, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","<svelte:options tag=\"oceanpress-embedded-block\" />\r\n\r\n<script lang=\"ts\">\r\n  export let src: string;\r\n  export let title: string;\r\n</script>\r\n\r\n<article class=\"embedded_block\">\r\n  <header class=\"embedded_block-header\">\r\n    <a href={src} title=\"打开 [{title}]({src})\" style=\"display: flex;align-items: center;\">\r\n      <svg viewBox=\"0 0 32 32\" style=\"height: 26px;width: 18px;fill: #fff\">\r\n        <path\r\n          d=\"M24.038 7.962q3.305 0 5.634 2.366t2.329 5.671-2.329 5.671-5.634 2.366h-6.46v-3.080h6.46q2.028 0 3.493-1.465t1.465-3.493-1.465-3.493-3.493-1.465h-6.46v-3.080h6.46zM9.615 17.577v-3.155h12.77v3.155h-12.77zM3.005 16q0 2.028 1.465 3.493t3.493 1.465h6.46v3.080h-6.46q-3.305 0-5.634-2.366t-2.329-5.671 2.329-5.671 5.634-2.366h6.46v3.080h-6.46q-2.028 0-3.493 1.465t-1.465 3.493z\"\r\n        />\r\n      </svg>\r\n    </a>\r\n  </header>\r\n\r\n  <div class=\"embedded_block-content\">\r\n    <slot />\r\n  </div>\r\n</article>\r\n\r\n<style>\r\n  /** 嵌入块的样式 */\r\n  .embedded_block {\r\n    display: block;\r\n    border: 1px solid var(--b3-border-color);\r\n    border-radius: 4px;\r\n    margin-bottom: 8px;\r\n    box-sizing: border-box;\r\n    white-space: initial;\r\n    position: relative;\r\n  }\r\n  .embedded_block-header {\r\n    position: absolute;\r\n    right: 6px;\r\n    top: 6px;\r\n    height:22px;\r\n    padding: 2px 4px;\r\n    background-color: var(--b3-theme-on-surface);\r\n    transition: var(--b3-transition);\r\n    border-radius: 4px;\r\n    display: none;\r\n  }\r\n  .embedded_block:hover .embedded_block-header{\r\n    display: flex;\r\n  }\r\n  .embedded_block-content {\r\n    padding: 8px 16px;\r\n    background-color: var(--b3-theme-surface);\r\n    border-left: 1px dashed var(--b3-border-color);\r\n  }\r\n</style>\r\n","/** 暴露到全局的一些配置 */\nexport const md2website = {\n    gotoClick(e) {\n        console.log(\"gotoClick\");\n    },\n    fragment: document\n};\nglobalThis[\"md2website\"] = md2website;\n","<svelte:options tag=\"oceanpress-block-ref\" />\r\n\r\n<script lang=\"ts\" context=\"module\">\r\n  import { md2website } from \"../lib/md2website.global\";\r\n  //@ts-expect-error\r\n  export const gotoClick = (...arg:unknown[]) => md2website.gotoClick(...arg);\r\n</script>\r\n\r\n<script lang=\"ts\">\r\n  /** ═════════🏳‍🌈 块引用 => 超链接 🏳‍🌈═════════  */\r\n  export let src: string;\r\n  export let title: string;\r\n</script>\r\n\r\n<a\r\n  class=\"c-block-ref\"\r\n  data-type=\"NodeBlockRef\"\r\n  href={src}\r\n  on:click={gotoClick}\r\n>\r\n  {title}\r\n</a>\r\n\r\n<style>\r\n  [data-type=\"NodeBlockRef\"] {\r\n    color: var(--b3-protyle-inline-blockref-color);\r\n  }\r\n</style>\r\n","import { md2website } from \"./md2website.global\";\nexport function scrollIntoView(url) {\n    const hash = url.split(\"#\").pop();\n    const target = md2website.fragment.querySelector(`[data-n-id=\"${hash}\"]`);\n    if (target) {\n        location.hash = hash;\n        var highlightClassName = [\"hash_selected\", \"hash_selected-highlight\"];\n        target.classList.add(...highlightClassName);\n        target.scrollIntoView();\n        setTimeout(() => {\n            target.classList.remove(...highlightClassName);\n        }, 2000);\n    }\n    else {\n        console.warn(\"无法定位到\", hash, \"所指向的元素\");\n    }\n}\n","/*!\n * Vditor v3.8.6 - A markdown editor written in TypeScript.\n *\n * MIT License\n *\n * Copyright (c) 2018-present B3log 开源, b3log.org\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Vditor\"] = factory();\n\telse\n\t\troot[\"Vditor\"] = factory();\n})(this, function() {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 694:\n/***/ ((module) => {\n\n/**\n * Diff Match and Patch\n * Copyright 2018 The diff-match-patch Authors.\n * https://github.com/google/diff-match-patch\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Computes the difference between two texts to create a patch.\n * Applies the patch onto another text, allowing for errors.\n * @author fraser@google.com (Neil Fraser)\n */\n\n/**\n * Class containing the diff, match and patch methods.\n * @constructor\n */\nvar diff_match_patch = function () {\n  // Defaults.\n  // Redefine these in your program to override the defaults.\n  // Number of seconds to map a diff before giving up (0 for infinity).\n  this.Diff_Timeout = 1.0; // Cost of an empty edit operation in terms of edit characters.\n\n  this.Diff_EditCost = 4; // At what point is no match declared (0.0 = perfection, 1.0 = very loose).\n\n  this.Match_Threshold = 0.5; // How far to search for a match (0 = exact location, 1000+ = broad match).\n  // A match this many characters away from the expected location will add\n  // 1.0 to the score (0.0 is a perfect match).\n\n  this.Match_Distance = 1000; // When deleting a large block of text (over ~64 characters), how close do\n  // the contents have to be to match the expected contents. (0.0 = perfection,\n  // 1.0 = very loose).  Note that Match_Threshold controls how closely the\n  // end points of a delete need to match.\n\n  this.Patch_DeleteThreshold = 0.5; // Chunk size for context length.\n\n  this.Patch_Margin = 4; // The number of bits in an int.\n\n  this.Match_MaxBits = 32;\n}; //  DIFF FUNCTIONS\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\n\n\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n/**\n * Class representing one diff tuple.\n * ~Attempts to look like a two-element array (which is what this used to be).~\n * Constructor returns an actual two-element array, to allow destructing @JackuB\n * See https://github.com/JackuB/diff-match-patch/issues/14 for details\n * @param {number} op Operation, one of: DIFF_DELETE, DIFF_INSERT, DIFF_EQUAL.\n * @param {string} text Text to be deleted, inserted, or retained.\n * @constructor\n */\n\ndiff_match_patch.Diff = function (op, text) {\n  return [op, text];\n};\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean=} opt_checklines Optional speedup flag. If present and false,\n *     then don't run a line-level diff first to identify the changed areas.\n *     Defaults to true, which does a faster, slightly less optimal diff.\n * @param {number=} opt_deadline Optional time when the diff should be complete\n *     by.  Used internally for recursive calls.  Users should set DiffTimeout\n *     instead.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_main = function (text1, text2, opt_checklines, opt_deadline) {\n  // Set a deadline by which time the diff must be complete.\n  if (typeof opt_deadline == 'undefined') {\n    if (this.Diff_Timeout <= 0) {\n      opt_deadline = Number.MAX_VALUE;\n    } else {\n      opt_deadline = new Date().getTime() + this.Diff_Timeout * 1000;\n    }\n  }\n\n  var deadline = opt_deadline; // Check for null inputs.\n\n  if (text1 == null || text2 == null) {\n    throw new Error('Null input. (diff_main)');\n  } // Check for equality (speedup).\n\n\n  if (text1 == text2) {\n    if (text1) {\n      return [new diff_match_patch.Diff(DIFF_EQUAL, text1)];\n    }\n\n    return [];\n  }\n\n  if (typeof opt_checklines == 'undefined') {\n    opt_checklines = true;\n  }\n\n  var checklines = opt_checklines; // Trim off common prefix (speedup).\n\n  var commonlength = this.diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength); // Trim off common suffix (speedup).\n\n  commonlength = this.diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength); // Compute the diff on the middle block.\n\n  var diffs = this.diff_compute_(text1, text2, checklines, deadline); // Restore the prefix and suffix.\n\n  if (commonprefix) {\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, commonprefix));\n  }\n\n  if (commonsuffix) {\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, commonsuffix));\n  }\n\n  this.diff_cleanupMerge(diffs);\n  return diffs;\n};\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean} checklines Speedup flag.  If false, then don't run a\n *     line-level diff first to identify the changed areas.\n *     If true, then run a faster, slightly less optimal diff.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_compute_ = function (text1, text2, checklines, deadline) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1)];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [new diff_match_patch.Diff(DIFF_INSERT, longtext.substring(0, i)), new diff_match_patch.Diff(DIFF_EQUAL, shorttext), new diff_match_patch.Diff(DIFF_INSERT, longtext.substring(i + shorttext.length))]; // Swap insertions for deletions if diff is reversed.\n\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n\n    return diffs;\n  }\n\n  if (shorttext.length == 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1), new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  } // Check to see if the problem can be split in two.\n\n\n  var hm = this.diff_halfMatch_(text1, text2);\n\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4]; // Send both pairs off for separate processing.\n\n    var diffs_a = this.diff_main(text1_a, text2_a, checklines, deadline);\n    var diffs_b = this.diff_main(text1_b, text2_b, checklines, deadline); // Merge the results.\n\n    return diffs_a.concat([new diff_match_patch.Diff(DIFF_EQUAL, mid_common)], diffs_b);\n  }\n\n  if (checklines && text1.length > 100 && text2.length > 100) {\n    return this.diff_lineMode_(text1, text2, deadline);\n  }\n\n  return this.diff_bisect_(text1, text2, deadline);\n};\n/**\n * Do a quick line-level diff on both strings, then rediff the parts for\n * greater accuracy.\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_lineMode_ = function (text1, text2, deadline) {\n  // Scan the text on a line-by-line basis first.\n  var a = this.diff_linesToChars_(text1, text2);\n  text1 = a.chars1;\n  text2 = a.chars2;\n  var linearray = a.lineArray;\n  var diffs = this.diff_main(text1, text2, false, deadline); // Convert the diff back to original text.\n\n  this.diff_charsToLines_(diffs, linearray); // Eliminate freak matches (e.g. blank lines)\n\n  this.diff_cleanupSemantic(diffs); // Rediff any replacement blocks, this time character-by-character.\n  // Add a dummy entry at the end.\n\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        break;\n\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        break;\n\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete >= 1 && count_insert >= 1) {\n          // Delete the offending records and add the merged ones.\n          diffs.splice(pointer - count_delete - count_insert, count_delete + count_insert);\n          pointer = pointer - count_delete - count_insert;\n          var subDiff = this.diff_main(text_delete, text_insert, false, deadline);\n\n          for (var j = subDiff.length - 1; j >= 0; j--) {\n            diffs.splice(pointer, 0, subDiff[j]);\n          }\n\n          pointer = pointer + subDiff.length;\n        }\n\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n\n    pointer++;\n  }\n\n  diffs.pop(); // Remove the dummy entry at the end.\n\n  return diffs;\n};\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_bisect_ = function (text1, text2, deadline) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length); // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length; // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n\n  var front = delta % 2 != 0; // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n\n  for (var d = 0; d < max_d; d++) {\n    // Bail out if deadline is reached.\n    if (new Date().getTime() > deadline) {\n      break;\n    } // Walk the front path one step.\n\n\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n\n      if (k1 == -d || k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1]) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n\n      var y1 = x1 - k1;\n\n      while (x1 < text1_length && y1 < text2_length && text1.charAt(x1) == text2.charAt(y1)) {\n        x1++;\n        y1++;\n      }\n\n      v1[k1_offset] = x1;\n\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    } // Walk the reverse path one step.\n\n\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n\n      if (k2 == -d || k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1]) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n\n      var y2 = x2 - k2;\n\n      while (x2 < text1_length && y2 < text2_length && text1.charAt(text1_length - x2 - 1) == text2.charAt(text2_length - y2 - 1)) {\n        x2++;\n        y2++;\n      }\n\n      v2[k2_offset] = x2;\n\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset; // Mirror x2 onto top-left coordinate system.\n\n          x2 = text1_length - x2;\n\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    }\n  } // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n\n\n  return [new diff_match_patch.Diff(DIFF_DELETE, text1), new diff_match_patch.Diff(DIFF_INSERT, text2)];\n};\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_bisectSplit_ = function (text1, text2, x, y, deadline) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y); // Compute both diffs serially.\n\n  var diffs = this.diff_main(text1a, text2a, false, deadline);\n  var diffsb = this.diff_main(text1b, text2b, false, deadline);\n  return diffs.concat(diffsb);\n};\n/**\n * Split two texts into an array of strings.  Reduce the texts to a string of\n * hashes where each Unicode character represents one line.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {{chars1: string, chars2: string, lineArray: !Array.<string>}}\n *     An object containing the encoded text1, the encoded text2 and\n *     the array of unique strings.\n *     The zeroth element of the array of unique strings is intentionally blank.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_linesToChars_ = function (text1, text2) {\n  var lineArray = []; // e.g. lineArray[4] == 'Hello\\n'\n\n  var lineHash = {}; // e.g. lineHash['Hello\\n'] == 4\n  // '\\x00' is a valid character, but various debuggers don't like it.\n  // So we'll insert a junk entry to avoid generating a null character.\n\n  lineArray[0] = '';\n  /**\n   * Split a text into an array of strings.  Reduce the texts to a string of\n   * hashes where each Unicode character represents one line.\n   * Modifies linearray and linehash through being a closure.\n   * @param {string} text String to encode.\n   * @return {string} Encoded string.\n   * @private\n   */\n\n  function diff_linesToCharsMunge_(text) {\n    var chars = ''; // Walk the text, pulling out a substring for each line.\n    // text.split('\\n') would would temporarily double our memory footprint.\n    // Modifying text would create many large strings to garbage collect.\n\n    var lineStart = 0;\n    var lineEnd = -1; // Keeping our own length variable is faster than looking it up.\n\n    var lineArrayLength = lineArray.length;\n\n    while (lineEnd < text.length - 1) {\n      lineEnd = text.indexOf('\\n', lineStart);\n\n      if (lineEnd == -1) {\n        lineEnd = text.length - 1;\n      }\n\n      var line = text.substring(lineStart, lineEnd + 1);\n\n      if (lineHash.hasOwnProperty ? lineHash.hasOwnProperty(line) : lineHash[line] !== undefined) {\n        chars += String.fromCharCode(lineHash[line]);\n      } else {\n        if (lineArrayLength == maxLines) {\n          // Bail out at 65535 because\n          // String.fromCharCode(65536) == String.fromCharCode(0)\n          line = text.substring(lineStart);\n          lineEnd = text.length;\n        }\n\n        chars += String.fromCharCode(lineArrayLength);\n        lineHash[line] = lineArrayLength;\n        lineArray[lineArrayLength++] = line;\n      }\n\n      lineStart = lineEnd + 1;\n    }\n\n    return chars;\n  } // Allocate 2/3rds of the space for text1, the rest for text2.\n\n\n  var maxLines = 40000;\n  var chars1 = diff_linesToCharsMunge_(text1);\n  maxLines = 65535;\n  var chars2 = diff_linesToCharsMunge_(text2);\n  return {\n    chars1: chars1,\n    chars2: chars2,\n    lineArray: lineArray\n  };\n};\n/**\n * Rehydrate the text in a diff from a string of line hashes to real lines of\n * text.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {!Array.<string>} lineArray Array of unique strings.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_charsToLines_ = function (diffs, lineArray) {\n  for (var i = 0; i < diffs.length; i++) {\n    var chars = diffs[i][1];\n    var text = [];\n\n    for (var j = 0; j < chars.length; j++) {\n      text[j] = lineArray[chars.charCodeAt(j)];\n    }\n\n    diffs[i][1] = text.join('');\n  }\n};\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\n\n\ndiff_match_patch.prototype.diff_commonPrefix = function (text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  } // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n\n\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) == text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  return pointermid;\n};\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\n\n\ndiff_match_patch.prototype.diff_commonSuffix = function (text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\n    return 0;\n  } // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n\n\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) == text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  return pointermid;\n};\n/**\n * Determine if the suffix of one string is the prefix of another.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of the first\n *     string and the start of the second string.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_commonOverlap_ = function (text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length; // Eliminate the null case.\n\n  if (text1_length == 0 || text2_length == 0) {\n    return 0;\n  } // Truncate the longer string.\n\n\n  if (text1_length > text2_length) {\n    text1 = text1.substring(text1_length - text2_length);\n  } else if (text1_length < text2_length) {\n    text2 = text2.substring(0, text1_length);\n  }\n\n  var text_length = Math.min(text1_length, text2_length); // Quick check for the worst case.\n\n  if (text1 == text2) {\n    return text_length;\n  } // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: https://neil.fraser.name/news/2010/11/04/\n\n\n  var best = 0;\n  var length = 1;\n\n  while (true) {\n    var pattern = text1.substring(text_length - length);\n    var found = text2.indexOf(pattern);\n\n    if (found == -1) {\n      return best;\n    }\n\n    length += found;\n\n    if (found == 0 || text1.substring(text_length - length) == text2.substring(0, length)) {\n      best = length;\n      length++;\n    }\n  }\n};\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_halfMatch_ = function (text1, text2) {\n  if (this.Diff_Timeout <= 0) {\n    // Don't risk returning a non-optimal diff if we have unlimited time.\n    return null;\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null; // Pointless.\n  }\n\n  var dmp = this; // 'this' becomes 'window' in a closure.\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = dmp.diff_commonPrefix(longtext.substring(i), shorttext.substring(j));\n      var suffixLength = dmp.diff_commonSuffix(longtext.substring(0, i), shorttext.substring(0, j));\n\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) + shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n\n    if (best_common.length * 2 >= longtext.length) {\n      return [best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  } // First check if the second quarter is the seed for a half-match.\n\n\n  var hm1 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 4)); // Check again based on the third quarter.\n\n  var hm2 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 2));\n  var hm;\n\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  } // A half-match was found, sort out the return data.\n\n\n  var text1_a, text1_b, text2_a, text2_b;\n\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_cleanupSemantic = function (diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n\n  /** @type {?string} */\n\n  var lastEquality = null; // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n\n  var pointer = 0; // Index of current position.\n  // Number of characters that changed prior to the equality.\n\n  var length_insertions1 = 0;\n  var length_deletions1 = 0; // Number of characters that changed after the equality.\n\n  var length_insertions2 = 0;\n  var length_deletions2 = 0;\n\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      equalities[equalitiesLength++] = pointer;\n      length_insertions1 = length_insertions2;\n      length_deletions1 = length_deletions2;\n      length_insertions2 = 0;\n      length_deletions2 = 0;\n      lastEquality = diffs[pointer][1];\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_INSERT) {\n        length_insertions2 += diffs[pointer][1].length;\n      } else {\n        length_deletions2 += diffs[pointer][1].length;\n      } // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n\n\n      if (lastEquality && lastEquality.length <= Math.max(length_insertions1, length_deletions1) && lastEquality.length <= Math.max(length_insertions2, length_deletions2)) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, new diff_match_patch.Diff(DIFF_DELETE, lastEquality)); // Change second copy to insert.\n\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT; // Throw away the equality we just deleted.\n\n        equalitiesLength--; // Throw away the previous equality (it needs to be reevaluated).\n\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_insertions1 = 0; // Reset the counters.\n\n        length_deletions1 = 0;\n        length_insertions2 = 0;\n        length_deletions2 = 0;\n        lastEquality = null;\n        changes = true;\n      }\n    }\n\n    pointer++;\n  } // Normalize the diff.\n\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n\n  this.diff_cleanupSemanticLossless(diffs); // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n\n  pointer = 1;\n\n  while (pointer < diffs.length) {\n    if (diffs[pointer - 1][0] == DIFF_DELETE && diffs[pointer][0] == DIFF_INSERT) {\n      var deletion = diffs[pointer - 1][1];\n      var insertion = diffs[pointer][1];\n      var overlap_length1 = this.diff_commonOverlap_(deletion, insertion);\n      var overlap_length2 = this.diff_commonOverlap_(insertion, deletion);\n\n      if (overlap_length1 >= overlap_length2) {\n        if (overlap_length1 >= deletion.length / 2 || overlap_length1 >= insertion.length / 2) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL, insertion.substring(0, overlap_length1)));\n          diffs[pointer - 1][1] = deletion.substring(0, deletion.length - overlap_length1);\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\n          pointer++;\n        }\n      } else {\n        if (overlap_length2 >= deletion.length / 2 || overlap_length2 >= insertion.length / 2) {\n          // Reverse overlap found.\n          // Insert an equality and swap and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL, deletion.substring(0, overlap_length2)));\n          diffs[pointer - 1][0] = DIFF_INSERT;\n          diffs[pointer - 1][1] = insertion.substring(0, insertion.length - overlap_length2);\n          diffs[pointer + 1][0] = DIFF_DELETE;\n          diffs[pointer + 1][1] = deletion.substring(overlap_length2);\n          pointer++;\n        }\n      }\n\n      pointer++;\n    }\n\n    pointer++;\n  }\n};\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_cleanupSemanticLossless = function (diffs) {\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   * @private\n   */\n  function diff_cleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6;\n    } // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n\n\n    var char1 = one.charAt(one.length - 1);\n    var char2 = two.charAt(0);\n    var nonAlphaNumeric1 = char1.match(diff_match_patch.nonAlphaNumericRegex_);\n    var nonAlphaNumeric2 = char2.match(diff_match_patch.nonAlphaNumericRegex_);\n    var whitespace1 = nonAlphaNumeric1 && char1.match(diff_match_patch.whitespaceRegex_);\n    var whitespace2 = nonAlphaNumeric2 && char2.match(diff_match_patch.whitespaceRegex_);\n    var lineBreak1 = whitespace1 && char1.match(diff_match_patch.linebreakRegex_);\n    var lineBreak2 = whitespace2 && char2.match(diff_match_patch.linebreakRegex_);\n    var blankLine1 = lineBreak1 && one.match(diff_match_patch.blanklineEndRegex_);\n    var blankLine2 = lineBreak2 && two.match(diff_match_patch.blanklineStartRegex_);\n\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5;\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4;\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3;\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2;\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1;\n    }\n\n    return 0;\n  }\n\n  var pointer = 1; // Intentionally ignore the first and last element (don't need checking).\n\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL && diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1]; // First, shift the edit as far left as possible.\n\n      var commonOffset = this.diff_commonSuffix(equality1, edit);\n\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      } // Second, step character by character right, looking for the best fit.\n\n\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore = diff_cleanupSemanticScore_(equality1, edit) + diff_cleanupSemanticScore_(edit, equality2);\n\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score = diff_cleanupSemanticScore_(equality1, edit) + diff_cleanupSemanticScore_(edit, equality2); // The >= encourages trailing rather than leading whitespace on edits.\n\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n\n        diffs[pointer][1] = bestEdit;\n\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n\n    pointer++;\n  }\n}; // Define some regex patterns for matching boundaries.\n\n\ndiff_match_patch.nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\ndiff_match_patch.whitespaceRegex_ = /\\s/;\ndiff_match_patch.linebreakRegex_ = /[\\r\\n]/;\ndiff_match_patch.blanklineEndRegex_ = /\\n\\r?\\n$/;\ndiff_match_patch.blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\n/**\n * Reduce the number of edits by eliminating operationally trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\ndiff_match_patch.prototype.diff_cleanupEfficiency = function (diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n\n  /** @type {?string} */\n\n  var lastEquality = null; // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n\n  var pointer = 0; // Index of current position.\n  // Is there an insertion operation before the last equality.\n\n  var pre_ins = false; // Is there a deletion operation before the last equality.\n\n  var pre_del = false; // Is there an insertion operation after the last equality.\n\n  var post_ins = false; // Is there a deletion operation after the last equality.\n\n  var post_del = false;\n\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      if (diffs[pointer][1].length < this.Diff_EditCost && (post_ins || post_del)) {\n        // Candidate found.\n        equalities[equalitiesLength++] = pointer;\n        pre_ins = post_ins;\n        pre_del = post_del;\n        lastEquality = diffs[pointer][1];\n      } else {\n        // Not a candidate, and can never become one.\n        equalitiesLength = 0;\n        lastEquality = null;\n      }\n\n      post_ins = post_del = false;\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_DELETE) {\n        post_del = true;\n      } else {\n        post_ins = true;\n      }\n      /*\n       * Five types to be split:\n       * <ins>A</ins><del>B</del>XY<ins>C</ins><del>D</del>\n       * <ins>A</ins>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<ins>C</ins>\n       * <ins>A</del>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<del>C</del>\n       */\n\n\n      if (lastEquality && (pre_ins && pre_del && post_ins && post_del || lastEquality.length < this.Diff_EditCost / 2 && pre_ins + pre_del + post_ins + post_del == 3)) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, new diff_match_patch.Diff(DIFF_DELETE, lastEquality)); // Change second copy to insert.\n\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        equalitiesLength--; // Throw away the equality we just deleted;\n\n        lastEquality = null;\n\n        if (pre_ins && pre_del) {\n          // No changes made which could affect previous entry, keep going.\n          post_ins = post_del = true;\n          equalitiesLength = 0;\n        } else {\n          equalitiesLength--; // Throw away the previous equality.\n\n          pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n          post_ins = post_del = false;\n        }\n\n        changes = true;\n      }\n    }\n\n    pointer++;\n  }\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_cleanupMerge = function (diffs) {\n  // Add a dummy entry at the end.\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete + count_insert > 1) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = this.diff_commonPrefix(text_insert, text_delete);\n\n            if (commonlength !== 0) {\n              if (pointer - count_delete - count_insert > 0 && diffs[pointer - count_delete - count_insert - 1][0] == DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] += text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, new diff_match_patch.Diff(DIFF_EQUAL, text_insert.substring(0, commonlength)));\n                pointer++;\n              }\n\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            } // Factor out any common suffixies.\n\n\n            commonlength = this.diff_commonSuffix(text_insert, text_delete);\n\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length - commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length - commonlength);\n              text_delete = text_delete.substring(0, text_delete.length - commonlength);\n            }\n          } // Delete the offending records and add the merged ones.\n\n\n          pointer -= count_delete + count_insert;\n          diffs.splice(pointer, count_delete + count_insert);\n\n          if (text_delete.length) {\n            diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_DELETE, text_delete));\n            pointer++;\n          }\n\n          if (text_insert.length) {\n            diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_INSERT, text_insert));\n            pointer++;\n          }\n\n          pointer++;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop(); // Remove the dummy entry at the end.\n  } // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n\n\n  var changes = false;\n  pointer = 1; // Intentionally ignore the first and last element (don't need checking).\n\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL && diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length - diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] + diffs[pointer][1].substring(0, diffs[pointer][1].length - diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) == diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] = diffs[pointer][1].substring(diffs[pointer + 1][1].length) + diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n\n    pointer++;\n  } // If shifts were made, the diff needs reordering and another shift sweep.\n\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n/**\n * loc is a location in text1, compute and return the equivalent location in\n * text2.\n * e.g. 'The cat' vs 'The big cat', 1->1, 5->8\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {number} loc Location within text1.\n * @return {number} Location within text2.\n */\n\n\ndiff_match_patch.prototype.diff_xIndex = function (diffs, loc) {\n  var chars1 = 0;\n  var chars2 = 0;\n  var last_chars1 = 0;\n  var last_chars2 = 0;\n  var x;\n\n  for (x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      // Equality or deletion.\n      chars1 += diffs[x][1].length;\n    }\n\n    if (diffs[x][0] !== DIFF_DELETE) {\n      // Equality or insertion.\n      chars2 += diffs[x][1].length;\n    }\n\n    if (chars1 > loc) {\n      // Overshot the location.\n      break;\n    }\n\n    last_chars1 = chars1;\n    last_chars2 = chars2;\n  } // Was the location was deleted?\n\n\n  if (diffs.length != x && diffs[x][0] === DIFF_DELETE) {\n    return last_chars2;\n  } // Add the remaining character length.\n\n\n  return last_chars2 + (loc - last_chars1);\n};\n/**\n * Convert a diff array into a pretty HTML report.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} HTML representation.\n */\n\n\ndiff_match_patch.prototype.diff_prettyHtml = function (diffs) {\n  var html = [];\n  var pattern_amp = /&/g;\n  var pattern_lt = /</g;\n  var pattern_gt = />/g;\n  var pattern_para = /\\n/g;\n\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0]; // Operation (insert, delete, equal)\n\n    var data = diffs[x][1]; // Text of change.\n\n    var text = data.replace(pattern_amp, '&amp;').replace(pattern_lt, '&lt;').replace(pattern_gt, '&gt;').replace(pattern_para, '&para;<br>');\n\n    switch (op) {\n      case DIFF_INSERT:\n        html[x] = '<ins style=\"background:#e6ffe6;\">' + text + '</ins>';\n        break;\n\n      case DIFF_DELETE:\n        html[x] = '<del style=\"background:#ffe6e6;\">' + text + '</del>';\n        break;\n\n      case DIFF_EQUAL:\n        html[x] = '<span>' + text + '</span>';\n        break;\n    }\n  }\n\n  return html.join('');\n};\n/**\n * Compute and return the source text (all equalities and deletions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Source text.\n */\n\n\ndiff_match_patch.prototype.diff_text1 = function (diffs) {\n  var text = [];\n\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      text[x] = diffs[x][1];\n    }\n  }\n\n  return text.join('');\n};\n/**\n * Compute and return the destination text (all equalities and insertions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Destination text.\n */\n\n\ndiff_match_patch.prototype.diff_text2 = function (diffs) {\n  var text = [];\n\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_DELETE) {\n      text[x] = diffs[x][1];\n    }\n  }\n\n  return text.join('');\n};\n/**\n * Compute the Levenshtein distance; the number of inserted, deleted or\n * substituted characters.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {number} Number of changes.\n */\n\n\ndiff_match_patch.prototype.diff_levenshtein = function (diffs) {\n  var levenshtein = 0;\n  var insertions = 0;\n  var deletions = 0;\n\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0];\n    var data = diffs[x][1];\n\n    switch (op) {\n      case DIFF_INSERT:\n        insertions += data.length;\n        break;\n\n      case DIFF_DELETE:\n        deletions += data.length;\n        break;\n\n      case DIFF_EQUAL:\n        // A deletion and an insertion is one substitution.\n        levenshtein += Math.max(insertions, deletions);\n        insertions = 0;\n        deletions = 0;\n        break;\n    }\n  }\n\n  levenshtein += Math.max(insertions, deletions);\n  return levenshtein;\n};\n/**\n * Crush the diff into an encoded string which describes the operations\n * required to transform text1 into text2.\n * E.g. =3\\t-2\\t+ing  -> Keep 3 chars, delete 2 chars, insert 'ing'.\n * Operations are tab-separated.  Inserted text is escaped using %xx notation.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Delta text.\n */\n\n\ndiff_match_patch.prototype.diff_toDelta = function (diffs) {\n  var text = [];\n\n  for (var x = 0; x < diffs.length; x++) {\n    switch (diffs[x][0]) {\n      case DIFF_INSERT:\n        text[x] = '+' + encodeURI(diffs[x][1]);\n        break;\n\n      case DIFF_DELETE:\n        text[x] = '-' + diffs[x][1].length;\n        break;\n\n      case DIFF_EQUAL:\n        text[x] = '=' + diffs[x][1].length;\n        break;\n    }\n  }\n\n  return text.join('\\t').replace(/%20/g, ' ');\n};\n/**\n * Given the original text1, and an encoded string which describes the\n * operations required to transform text1 into text2, compute the full diff.\n * @param {string} text1 Source string for the diff.\n * @param {string} delta Delta text.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @throws {!Error} If invalid input.\n */\n\n\ndiff_match_patch.prototype.diff_fromDelta = function (text1, delta) {\n  var diffs = [];\n  var diffsLength = 0; // Keeping our own length var is faster in JS.\n\n  var pointer = 0; // Cursor in text1\n\n  var tokens = delta.split(/\\t/g);\n\n  for (var x = 0; x < tokens.length; x++) {\n    // Each token begins with a one character parameter which specifies the\n    // operation of this token (delete, insert, equality).\n    var param = tokens[x].substring(1);\n\n    switch (tokens[x].charAt(0)) {\n      case '+':\n        try {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_INSERT, decodeURI(param));\n        } catch (ex) {\n          // Malformed URI sequence.\n          throw new Error('Illegal escape in diff_fromDelta: ' + param);\n        }\n\n        break;\n\n      case '-': // Fall through.\n\n      case '=':\n        var n = parseInt(param, 10);\n\n        if (isNaN(n) || n < 0) {\n          throw new Error('Invalid number in diff_fromDelta: ' + param);\n        }\n\n        var text = text1.substring(pointer, pointer += n);\n\n        if (tokens[x].charAt(0) == '=') {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_EQUAL, text);\n        } else {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_DELETE, text);\n        }\n\n        break;\n\n      default:\n        // Blank tokens are ok (from a trailing \\t).\n        // Anything else is an error.\n        if (tokens[x]) {\n          throw new Error('Invalid diff operation in diff_fromDelta: ' + tokens[x]);\n        }\n\n    }\n  }\n\n  if (pointer != text1.length) {\n    throw new Error('Delta length (' + pointer + ') does not equal source text length (' + text1.length + ').');\n  }\n\n  return diffs;\n}; //  MATCH FUNCTIONS\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc'.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n */\n\n\ndiff_match_patch.prototype.match_main = function (text, pattern, loc) {\n  // Check for null inputs.\n  if (text == null || pattern == null || loc == null) {\n    throw new Error('Null input. (match_main)');\n  }\n\n  loc = Math.max(0, Math.min(loc, text.length));\n\n  if (text == pattern) {\n    // Shortcut (potentially not guaranteed by the algorithm)\n    return 0;\n  } else if (!text.length) {\n    // Nothing to match.\n    return -1;\n  } else if (text.substring(loc, loc + pattern.length) == pattern) {\n    // Perfect match at the perfect spot!  (Includes case of null pattern)\n    return loc;\n  } else {\n    // Do a fuzzy compare.\n    return this.match_bitap_(text, pattern, loc);\n  }\n};\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc' using the\n * Bitap algorithm.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n * @private\n */\n\n\ndiff_match_patch.prototype.match_bitap_ = function (text, pattern, loc) {\n  if (pattern.length > this.Match_MaxBits) {\n    throw new Error('Pattern too long for this browser.');\n  } // Initialise the alphabet.\n\n\n  var s = this.match_alphabet_(pattern);\n  var dmp = this; // 'this' becomes 'window' in a closure.\n\n  /**\n   * Compute and return the score for a match with e errors and x location.\n   * Accesses loc and pattern through being a closure.\n   * @param {number} e Number of errors in match.\n   * @param {number} x Location of match.\n   * @return {number} Overall score for match (0.0 = good, 1.0 = bad).\n   * @private\n   */\n\n  function match_bitapScore_(e, x) {\n    var accuracy = e / pattern.length;\n    var proximity = Math.abs(loc - x);\n\n    if (!dmp.Match_Distance) {\n      // Dodge divide by zero error.\n      return proximity ? 1.0 : accuracy;\n    }\n\n    return accuracy + proximity / dmp.Match_Distance;\n  } // Highest score beyond which we give up.\n\n\n  var score_threshold = this.Match_Threshold; // Is there a nearby exact match? (speedup)\n\n  var best_loc = text.indexOf(pattern, loc);\n\n  if (best_loc != -1) {\n    score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold); // What about in the other direction? (speedup)\n\n    best_loc = text.lastIndexOf(pattern, loc + pattern.length);\n\n    if (best_loc != -1) {\n      score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold);\n    }\n  } // Initialise the bit arrays.\n\n\n  var matchmask = 1 << pattern.length - 1;\n  best_loc = -1;\n  var bin_min, bin_mid;\n  var bin_max = pattern.length + text.length;\n  var last_rd;\n\n  for (var d = 0; d < pattern.length; d++) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from 'loc' we can stray at this\n    // error level.\n    bin_min = 0;\n    bin_mid = bin_max;\n\n    while (bin_min < bin_mid) {\n      if (match_bitapScore_(d, loc + bin_mid) <= score_threshold) {\n        bin_min = bin_mid;\n      } else {\n        bin_max = bin_mid;\n      }\n\n      bin_mid = Math.floor((bin_max - bin_min) / 2 + bin_min);\n    } // Use the result from this iteration as the maximum for the next.\n\n\n    bin_max = bin_mid;\n    var start = Math.max(1, loc - bin_mid + 1);\n    var finish = Math.min(loc + bin_mid, text.length) + pattern.length;\n    var rd = Array(finish + 2);\n    rd[finish + 1] = (1 << d) - 1;\n\n    for (var j = finish; j >= start; j--) {\n      // The alphabet (s) is a sparse hash, so the following line generates\n      // warnings.\n      var charMatch = s[text.charAt(j - 1)];\n\n      if (d === 0) {\n        // First pass: exact match.\n        rd[j] = (rd[j + 1] << 1 | 1) & charMatch;\n      } else {\n        // Subsequent passes: fuzzy match.\n        rd[j] = (rd[j + 1] << 1 | 1) & charMatch | ((last_rd[j + 1] | last_rd[j]) << 1 | 1) | last_rd[j + 1];\n      }\n\n      if (rd[j] & matchmask) {\n        var score = match_bitapScore_(d, j - 1); // This match will almost certainly be better than any existing match.\n        // But check anyway.\n\n        if (score <= score_threshold) {\n          // Told you so.\n          score_threshold = score;\n          best_loc = j - 1;\n\n          if (best_loc > loc) {\n            // When passing loc, don't exceed our current distance from loc.\n            start = Math.max(1, 2 * loc - best_loc);\n          } else {\n            // Already passed loc, downhill from here on in.\n            break;\n          }\n        }\n      }\n    } // No hope for a (better) match at greater error levels.\n\n\n    if (match_bitapScore_(d + 1, loc) > score_threshold) {\n      break;\n    }\n\n    last_rd = rd;\n  }\n\n  return best_loc;\n};\n/**\n * Initialise the alphabet for the Bitap algorithm.\n * @param {string} pattern The text to encode.\n * @return {!Object} Hash of character locations.\n * @private\n */\n\n\ndiff_match_patch.prototype.match_alphabet_ = function (pattern) {\n  var s = {};\n\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] = 0;\n  }\n\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] |= 1 << pattern.length - i - 1;\n  }\n\n  return s;\n}; //  PATCH FUNCTIONS\n\n/**\n * Increase the context until it is unique,\n * but don't let the pattern expand beyond Match_MaxBits.\n * @param {!diff_match_patch.patch_obj} patch The patch to grow.\n * @param {string} text Source text.\n * @private\n */\n\n\ndiff_match_patch.prototype.patch_addContext_ = function (patch, text) {\n  if (text.length == 0) {\n    return;\n  }\n\n  if (patch.start2 === null) {\n    throw Error('patch not initialized');\n  }\n\n  var pattern = text.substring(patch.start2, patch.start2 + patch.length1);\n  var padding = 0; // Look for the first and last matches of pattern in text.  If two different\n  // matches are found, increase the pattern length.\n\n  while (text.indexOf(pattern) != text.lastIndexOf(pattern) && pattern.length < this.Match_MaxBits - this.Patch_Margin - this.Patch_Margin) {\n    padding += this.Patch_Margin;\n    pattern = text.substring(patch.start2 - padding, patch.start2 + patch.length1 + padding);\n  } // Add one chunk for good luck.\n\n\n  padding += this.Patch_Margin; // Add the prefix.\n\n  var prefix = text.substring(patch.start2 - padding, patch.start2);\n\n  if (prefix) {\n    patch.diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, prefix));\n  } // Add the suffix.\n\n\n  var suffix = text.substring(patch.start2 + patch.length1, patch.start2 + patch.length1 + padding);\n\n  if (suffix) {\n    patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, suffix));\n  } // Roll back the start points.\n\n\n  patch.start1 -= prefix.length;\n  patch.start2 -= prefix.length; // Extend the lengths.\n\n  patch.length1 += prefix.length + suffix.length;\n  patch.length2 += prefix.length + suffix.length;\n};\n/**\n * Compute a list of patches to turn text1 into text2.\n * Use diffs if provided, otherwise compute it ourselves.\n * There are four ways to call this function, depending on what data is\n * available to the caller:\n * Method 1:\n * a = text1, b = text2\n * Method 2:\n * a = diffs\n * Method 3 (optimal):\n * a = text1, b = diffs\n * Method 4 (deprecated, use method 3):\n * a = text1, b = text2, c = diffs\n *\n * @param {string|!Array.<!diff_match_patch.Diff>} a text1 (methods 1,3,4) or\n * Array of diff tuples for text1 to text2 (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_b text2 (methods 1,4) or\n * Array of diff tuples for text1 to text2 (method 3) or undefined (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_c Array of diff tuples\n * for text1 to text2 (method 4) or undefined (methods 1,2,3).\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\n\n\ndiff_match_patch.prototype.patch_make = function (a, opt_b, opt_c) {\n  var text1, diffs;\n\n  if (typeof a == 'string' && typeof opt_b == 'string' && typeof opt_c == 'undefined') {\n    // Method 1: text1, text2\n    // Compute diffs from text1 and text2.\n    text1 =\n    /** @type {string} */\n    a;\n    diffs = this.diff_main(text1,\n    /** @type {string} */\n    opt_b, true);\n\n    if (diffs.length > 2) {\n      this.diff_cleanupSemantic(diffs);\n      this.diff_cleanupEfficiency(diffs);\n    }\n  } else if (a && typeof a == 'object' && typeof opt_b == 'undefined' && typeof opt_c == 'undefined') {\n    // Method 2: diffs\n    // Compute text1 from diffs.\n    diffs =\n    /** @type {!Array.<!diff_match_patch.Diff>} */\n    a;\n    text1 = this.diff_text1(diffs);\n  } else if (typeof a == 'string' && opt_b && typeof opt_b == 'object' && typeof opt_c == 'undefined') {\n    // Method 3: text1, diffs\n    text1 =\n    /** @type {string} */\n    a;\n    diffs =\n    /** @type {!Array.<!diff_match_patch.Diff>} */\n    opt_b;\n  } else if (typeof a == 'string' && typeof opt_b == 'string' && opt_c && typeof opt_c == 'object') {\n    // Method 4: text1, text2, diffs\n    // text2 is not used.\n    text1 =\n    /** @type {string} */\n    a;\n    diffs =\n    /** @type {!Array.<!diff_match_patch.Diff>} */\n    opt_c;\n  } else {\n    throw new Error('Unknown call format to patch_make.');\n  }\n\n  if (diffs.length === 0) {\n    return []; // Get rid of the null case.\n  }\n\n  var patches = [];\n  var patch = new diff_match_patch.patch_obj();\n  var patchDiffLength = 0; // Keeping our own length var is faster in JS.\n\n  var char_count1 = 0; // Number of characters into the text1 string.\n\n  var char_count2 = 0; // Number of characters into the text2 string.\n  // Start with text1 (prepatch_text) and apply the diffs until we arrive at\n  // text2 (postpatch_text).  We recreate the patches one by one to determine\n  // context info.\n\n  var prepatch_text = text1;\n  var postpatch_text = text1;\n\n  for (var x = 0; x < diffs.length; x++) {\n    var diff_type = diffs[x][0];\n    var diff_text = diffs[x][1];\n\n    if (!patchDiffLength && diff_type !== DIFF_EQUAL) {\n      // A new patch starts here.\n      patch.start1 = char_count1;\n      patch.start2 = char_count2;\n    }\n\n    switch (diff_type) {\n      case DIFF_INSERT:\n        patch.diffs[patchDiffLength++] = diffs[x];\n        patch.length2 += diff_text.length;\n        postpatch_text = postpatch_text.substring(0, char_count2) + diff_text + postpatch_text.substring(char_count2);\n        break;\n\n      case DIFF_DELETE:\n        patch.length1 += diff_text.length;\n        patch.diffs[patchDiffLength++] = diffs[x];\n        postpatch_text = postpatch_text.substring(0, char_count2) + postpatch_text.substring(char_count2 + diff_text.length);\n        break;\n\n      case DIFF_EQUAL:\n        if (diff_text.length <= 2 * this.Patch_Margin && patchDiffLength && diffs.length != x + 1) {\n          // Small equality inside a patch.\n          patch.diffs[patchDiffLength++] = diffs[x];\n          patch.length1 += diff_text.length;\n          patch.length2 += diff_text.length;\n        } else if (diff_text.length >= 2 * this.Patch_Margin) {\n          // Time for a new patch.\n          if (patchDiffLength) {\n            this.patch_addContext_(patch, prepatch_text);\n            patches.push(patch);\n            patch = new diff_match_patch.patch_obj();\n            patchDiffLength = 0; // Unlike Unidiff, our patch lists have a rolling context.\n            // https://github.com/google/diff-match-patch/wiki/Unidiff\n            // Update prepatch text & pos to reflect the application of the\n            // just completed patch.\n\n            prepatch_text = postpatch_text;\n            char_count1 = char_count2;\n          }\n        }\n\n        break;\n    } // Update the current character count.\n\n\n    if (diff_type !== DIFF_INSERT) {\n      char_count1 += diff_text.length;\n    }\n\n    if (diff_type !== DIFF_DELETE) {\n      char_count2 += diff_text.length;\n    }\n  } // Pick up the leftover patch if not empty.\n\n\n  if (patchDiffLength) {\n    this.patch_addContext_(patch, prepatch_text);\n    patches.push(patch);\n  }\n\n  return patches;\n};\n/**\n * Given an array of patches, return another array that is identical.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\n\n\ndiff_match_patch.prototype.patch_deepCopy = function (patches) {\n  // Making deep copies is hard in JavaScript.\n  var patchesCopy = [];\n\n  for (var x = 0; x < patches.length; x++) {\n    var patch = patches[x];\n    var patchCopy = new diff_match_patch.patch_obj();\n    patchCopy.diffs = [];\n\n    for (var y = 0; y < patch.diffs.length; y++) {\n      patchCopy.diffs[y] = new diff_match_patch.Diff(patch.diffs[y][0], patch.diffs[y][1]);\n    }\n\n    patchCopy.start1 = patch.start1;\n    patchCopy.start2 = patch.start2;\n    patchCopy.length1 = patch.length1;\n    patchCopy.length2 = patch.length2;\n    patchesCopy[x] = patchCopy;\n  }\n\n  return patchesCopy;\n};\n/**\n * Merge a set of patches onto the text.  Return a patched text, as well\n * as a list of true/false values indicating which patches were applied.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @param {string} text Old text.\n * @return {!Array.<string|!Array.<boolean>>} Two element Array, containing the\n *      new text and an array of boolean values.\n */\n\n\ndiff_match_patch.prototype.patch_apply = function (patches, text) {\n  if (patches.length == 0) {\n    return [text, []];\n  } // Deep copy the patches so that no changes are made to originals.\n\n\n  patches = this.patch_deepCopy(patches);\n  var nullPadding = this.patch_addPadding(patches);\n  text = nullPadding + text + nullPadding;\n  this.patch_splitMax(patches); // delta keeps track of the offset between the expected and actual location\n  // of the previous patch.  If there are patches expected at positions 10 and\n  // 20, but the first patch was found at 12, delta is 2 and the second patch\n  // has an effective expected position of 22.\n\n  var delta = 0;\n  var results = [];\n\n  for (var x = 0; x < patches.length; x++) {\n    var expected_loc = patches[x].start2 + delta;\n    var text1 = this.diff_text1(patches[x].diffs);\n    var start_loc;\n    var end_loc = -1;\n\n    if (text1.length > this.Match_MaxBits) {\n      // patch_splitMax will only provide an oversized pattern in the case of\n      // a monster delete.\n      start_loc = this.match_main(text, text1.substring(0, this.Match_MaxBits), expected_loc);\n\n      if (start_loc != -1) {\n        end_loc = this.match_main(text, text1.substring(text1.length - this.Match_MaxBits), expected_loc + text1.length - this.Match_MaxBits);\n\n        if (end_loc == -1 || start_loc >= end_loc) {\n          // Can't find valid trailing context.  Drop this patch.\n          start_loc = -1;\n        }\n      }\n    } else {\n      start_loc = this.match_main(text, text1, expected_loc);\n    }\n\n    if (start_loc == -1) {\n      // No match found.  :(\n      results[x] = false; // Subtract the delta for this failed patch from subsequent patches.\n\n      delta -= patches[x].length2 - patches[x].length1;\n    } else {\n      // Found a match.  :)\n      results[x] = true;\n      delta = start_loc - expected_loc;\n      var text2;\n\n      if (end_loc == -1) {\n        text2 = text.substring(start_loc, start_loc + text1.length);\n      } else {\n        text2 = text.substring(start_loc, end_loc + this.Match_MaxBits);\n      }\n\n      if (text1 == text2) {\n        // Perfect match, just shove the replacement text in.\n        text = text.substring(0, start_loc) + this.diff_text2(patches[x].diffs) + text.substring(start_loc + text1.length);\n      } else {\n        // Imperfect match.  Run a diff to get a framework of equivalent\n        // indices.\n        var diffs = this.diff_main(text1, text2, false);\n\n        if (text1.length > this.Match_MaxBits && this.diff_levenshtein(diffs) / text1.length > this.Patch_DeleteThreshold) {\n          // The end points match, but the content is unacceptably bad.\n          results[x] = false;\n        } else {\n          this.diff_cleanupSemanticLossless(diffs);\n          var index1 = 0;\n          var index2;\n\n          for (var y = 0; y < patches[x].diffs.length; y++) {\n            var mod = patches[x].diffs[y];\n\n            if (mod[0] !== DIFF_EQUAL) {\n              index2 = this.diff_xIndex(diffs, index1);\n            }\n\n            if (mod[0] === DIFF_INSERT) {\n              // Insertion\n              text = text.substring(0, start_loc + index2) + mod[1] + text.substring(start_loc + index2);\n            } else if (mod[0] === DIFF_DELETE) {\n              // Deletion\n              text = text.substring(0, start_loc + index2) + text.substring(start_loc + this.diff_xIndex(diffs, index1 + mod[1].length));\n            }\n\n            if (mod[0] !== DIFF_DELETE) {\n              index1 += mod[1].length;\n            }\n          }\n        }\n      }\n    }\n  } // Strip the padding off.\n\n\n  text = text.substring(nullPadding.length, text.length - nullPadding.length);\n  return [text, results];\n};\n/**\n * Add some padding on text start and end so that edges can match something.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} The padding string added to each side.\n */\n\n\ndiff_match_patch.prototype.patch_addPadding = function (patches) {\n  var paddingLength = this.Patch_Margin;\n  var nullPadding = '';\n\n  for (var x = 1; x <= paddingLength; x++) {\n    nullPadding += String.fromCharCode(x);\n  } // Bump all the patches forward.\n\n\n  for (var x = 0; x < patches.length; x++) {\n    patches[x].start1 += paddingLength;\n    patches[x].start2 += paddingLength;\n  } // Add some padding on start of first diff.\n\n\n  var patch = patches[0];\n  var diffs = patch.diffs;\n\n  if (diffs.length == 0 || diffs[0][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.start1 -= paddingLength; // Should be 0.\n\n    patch.start2 -= paddingLength; // Should be 0.\n\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[0][1].length) {\n    // Grow first equality.\n    var extraLength = paddingLength - diffs[0][1].length;\n    diffs[0][1] = nullPadding.substring(diffs[0][1].length) + diffs[0][1];\n    patch.start1 -= extraLength;\n    patch.start2 -= extraLength;\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  } // Add some padding on end of last diff.\n\n\n  patch = patches[patches.length - 1];\n  diffs = patch.diffs;\n\n  if (diffs.length == 0 || diffs[diffs.length - 1][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[diffs.length - 1][1].length) {\n    // Grow last equality.\n    var extraLength = paddingLength - diffs[diffs.length - 1][1].length;\n    diffs[diffs.length - 1][1] += nullPadding.substring(0, extraLength);\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  }\n\n  return nullPadding;\n};\n/**\n * Look through the patches and break up any which are longer than the maximum\n * limit of the match algorithm.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n */\n\n\ndiff_match_patch.prototype.patch_splitMax = function (patches) {\n  var patch_size = this.Match_MaxBits;\n\n  for (var x = 0; x < patches.length; x++) {\n    if (patches[x].length1 <= patch_size) {\n      continue;\n    }\n\n    var bigpatch = patches[x]; // Remove the big old patch.\n\n    patches.splice(x--, 1);\n    var start1 = bigpatch.start1;\n    var start2 = bigpatch.start2;\n    var precontext = '';\n\n    while (bigpatch.diffs.length !== 0) {\n      // Create one of several smaller patches.\n      var patch = new diff_match_patch.patch_obj();\n      var empty = true;\n      patch.start1 = start1 - precontext.length;\n      patch.start2 = start2 - precontext.length;\n\n      if (precontext !== '') {\n        patch.length1 = patch.length2 = precontext.length;\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, precontext));\n      }\n\n      while (bigpatch.diffs.length !== 0 && patch.length1 < patch_size - this.Patch_Margin) {\n        var diff_type = bigpatch.diffs[0][0];\n        var diff_text = bigpatch.diffs[0][1];\n\n        if (diff_type === DIFF_INSERT) {\n          // Insertions are harmless.\n          patch.length2 += diff_text.length;\n          start2 += diff_text.length;\n          patch.diffs.push(bigpatch.diffs.shift());\n          empty = false;\n        } else if (diff_type === DIFF_DELETE && patch.diffs.length == 1 && patch.diffs[0][0] == DIFF_EQUAL && diff_text.length > 2 * patch_size) {\n          // This is a large deletion.  Let it pass in one chunk.\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n          empty = false;\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n          bigpatch.diffs.shift();\n        } else {\n          // Deletion or equality.  Only take as much as we can stomach.\n          diff_text = diff_text.substring(0, patch_size - patch.length1 - this.Patch_Margin);\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n\n          if (diff_type === DIFF_EQUAL) {\n            patch.length2 += diff_text.length;\n            start2 += diff_text.length;\n          } else {\n            empty = false;\n          }\n\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n\n          if (diff_text == bigpatch.diffs[0][1]) {\n            bigpatch.diffs.shift();\n          } else {\n            bigpatch.diffs[0][1] = bigpatch.diffs[0][1].substring(diff_text.length);\n          }\n        }\n      } // Compute the head context for the next patch.\n\n\n      precontext = this.diff_text2(patch.diffs);\n      precontext = precontext.substring(precontext.length - this.Patch_Margin); // Append the end context for this patch.\n\n      var postcontext = this.diff_text1(bigpatch.diffs).substring(0, this.Patch_Margin);\n\n      if (postcontext !== '') {\n        patch.length1 += postcontext.length;\n        patch.length2 += postcontext.length;\n\n        if (patch.diffs.length !== 0 && patch.diffs[patch.diffs.length - 1][0] === DIFF_EQUAL) {\n          patch.diffs[patch.diffs.length - 1][1] += postcontext;\n        } else {\n          patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, postcontext));\n        }\n      }\n\n      if (!empty) {\n        patches.splice(++x, 0, patch);\n      }\n    }\n  }\n};\n/**\n * Take a list of patches and return a textual representation.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} Text representation of patches.\n */\n\n\ndiff_match_patch.prototype.patch_toText = function (patches) {\n  var text = [];\n\n  for (var x = 0; x < patches.length; x++) {\n    text[x] = patches[x];\n  }\n\n  return text.join('');\n};\n/**\n * Parse a textual representation of patches and return a list of Patch objects.\n * @param {string} textline Text representation of patches.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n * @throws {!Error} If invalid input.\n */\n\n\ndiff_match_patch.prototype.patch_fromText = function (textline) {\n  var patches = [];\n\n  if (!textline) {\n    return patches;\n  }\n\n  var text = textline.split('\\n');\n  var textPointer = 0;\n  var patchHeader = /^@@ -(\\d+),?(\\d*) \\+(\\d+),?(\\d*) @@$/;\n\n  while (textPointer < text.length) {\n    var m = text[textPointer].match(patchHeader);\n\n    if (!m) {\n      throw new Error('Invalid patch string: ' + text[textPointer]);\n    }\n\n    var patch = new diff_match_patch.patch_obj();\n    patches.push(patch);\n    patch.start1 = parseInt(m[1], 10);\n\n    if (m[2] === '') {\n      patch.start1--;\n      patch.length1 = 1;\n    } else if (m[2] == '0') {\n      patch.length1 = 0;\n    } else {\n      patch.start1--;\n      patch.length1 = parseInt(m[2], 10);\n    }\n\n    patch.start2 = parseInt(m[3], 10);\n\n    if (m[4] === '') {\n      patch.start2--;\n      patch.length2 = 1;\n    } else if (m[4] == '0') {\n      patch.length2 = 0;\n    } else {\n      patch.start2--;\n      patch.length2 = parseInt(m[4], 10);\n    }\n\n    textPointer++;\n\n    while (textPointer < text.length) {\n      var sign = text[textPointer].charAt(0);\n\n      try {\n        var line = decodeURI(text[textPointer].substring(1));\n      } catch (ex) {\n        // Malformed URI sequence.\n        throw new Error('Illegal escape in patch_fromText: ' + line);\n      }\n\n      if (sign == '-') {\n        // Deletion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_DELETE, line));\n      } else if (sign == '+') {\n        // Insertion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_INSERT, line));\n      } else if (sign == ' ') {\n        // Minor equality.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, line));\n      } else if (sign == '@') {\n        // Start of next patch.\n        break;\n      } else if (sign === '') {// Blank line?  Whatever.\n      } else {\n        // WTF?\n        throw new Error('Invalid patch mode \"' + sign + '\" in: ' + line);\n      }\n\n      textPointer++;\n    }\n  }\n\n  return patches;\n};\n/**\n * Class representing one patch operation.\n * @constructor\n */\n\n\ndiff_match_patch.patch_obj = function () {\n  /** @type {!Array.<!diff_match_patch.Diff>} */\n  this.diffs = [];\n  /** @type {?number} */\n\n  this.start1 = null;\n  /** @type {?number} */\n\n  this.start2 = null;\n  /** @type {number} */\n\n  this.length1 = 0;\n  /** @type {number} */\n\n  this.length2 = 0;\n};\n/**\n * Emulate GNU diff's format.\n * Header: @@ -382,8 +481,9 @@\n * Indices are printed as 1-based, not 0-based.\n * @return {string} The GNU diff string.\n */\n\n\ndiff_match_patch.patch_obj.prototype.toString = function () {\n  var coords1, coords2;\n\n  if (this.length1 === 0) {\n    coords1 = this.start1 + ',0';\n  } else if (this.length1 == 1) {\n    coords1 = this.start1 + 1;\n  } else {\n    coords1 = this.start1 + 1 + ',' + this.length1;\n  }\n\n  if (this.length2 === 0) {\n    coords2 = this.start2 + ',0';\n  } else if (this.length2 == 1) {\n    coords2 = this.start2 + 1;\n  } else {\n    coords2 = this.start2 + 1 + ',' + this.length2;\n  }\n\n  var text = ['@@ -' + coords1 + ' +' + coords2 + ' @@\\n'];\n  var op; // Escape the body of the patch with %xx notation.\n\n  for (var x = 0; x < this.diffs.length; x++) {\n    switch (this.diffs[x][0]) {\n      case DIFF_INSERT:\n        op = '+';\n        break;\n\n      case DIFF_DELETE:\n        op = '-';\n        break;\n\n      case DIFF_EQUAL:\n        op = ' ';\n        break;\n    }\n\n    text[x + 1] = op + encodeURI(this.diffs[x][1]) + '\\n';\n  }\n\n  return text.join('').replace(/%20/g, ' ');\n}; // The following export code was added by @ForbesLindesay\n\n\nmodule.exports = diff_match_patch;\nmodule.exports.diff_match_patch = diff_match_patch;\nmodule.exports.DIFF_DELETE = DIFF_DELETE;\nmodule.exports.DIFF_INSERT = DIFF_INSERT;\nmodule.exports.DIFF_EQUAL = DIFF_EQUAL;\n\n/***/ }),\n\n/***/ 157:\n/***/ (() => {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 857:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ method)\n});\n\n// EXTERNAL MODULE: ./src/ts/markdown/abcRender.ts\nvar abcRender = __webpack_require__(369);\n// EXTERNAL MODULE: ./src/ts/markdown/adapterRender.ts\nvar adapterRender = __webpack_require__(46);\n// EXTERNAL MODULE: ./src/ts/markdown/chartRender.ts\nvar chartRender = __webpack_require__(726);\n// EXTERNAL MODULE: ./src/ts/markdown/codeRender.ts\nvar codeRender = __webpack_require__(23);\n// EXTERNAL MODULE: ./src/ts/markdown/flowchartRender.ts\nvar flowchartRender = __webpack_require__(383);\n// EXTERNAL MODULE: ./src/ts/markdown/graphvizRender.ts\nvar graphvizRender = __webpack_require__(890);\n// EXTERNAL MODULE: ./src/ts/markdown/highlightRender.ts\nvar highlightRender = __webpack_require__(93);\n;// CONCATENATED MODULE: ./src/ts/markdown/lazyLoadImageRender.ts\nvar lazyLoadImageRender = function (element) {\n    if (element === void 0) { element = document; }\n    var loadImg = function (it) {\n        var testImage = document.createElement(\"img\");\n        testImage.src = it.getAttribute(\"data-src\");\n        testImage.addEventListener(\"load\", function () {\n            if (!it.getAttribute(\"style\") && !it.getAttribute(\"class\") &&\n                !it.getAttribute(\"width\") && !it.getAttribute(\"height\")) {\n                if (testImage.naturalHeight > testImage.naturalWidth &&\n                    testImage.naturalWidth / testImage.naturalHeight <\n                        document.querySelector(\".vditor-reset\").clientWidth / (window.innerHeight - 40) &&\n                    testImage.naturalHeight > (window.innerHeight - 40)) {\n                    it.style.height = (window.innerHeight - 40) + \"px\";\n                }\n            }\n            it.src = testImage.src;\n        });\n        it.removeAttribute(\"data-src\");\n    };\n    if (!(\"IntersectionObserver\" in window)) {\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            if (imgElement.getAttribute(\"data-src\")) {\n                loadImg(imgElement);\n            }\n        });\n        return false;\n    }\n    if (window.vditorImageIntersectionObserver) {\n        window.vditorImageIntersectionObserver.disconnect();\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            window.vditorImageIntersectionObserver.observe(imgElement);\n        });\n    }\n    else {\n        window.vditorImageIntersectionObserver = new IntersectionObserver(function (entries) {\n            entries.forEach(function (entrie) {\n                if ((typeof entrie.isIntersecting === \"undefined\"\n                    ? entrie.intersectionRatio !== 0\n                    : entrie.isIntersecting)\n                    && entrie.target.getAttribute(\"data-src\")) {\n                    loadImg(entrie.target);\n                }\n            });\n        });\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            window.vditorImageIntersectionObserver.observe(imgElement);\n        });\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/mathRender.ts\nvar mathRender = __webpack_require__(323);\n// EXTERNAL MODULE: ./src/ts/markdown/mediaRender.ts\nvar mediaRender = __webpack_require__(207);\n// EXTERNAL MODULE: ./src/ts/markdown/mermaidRender.ts\nvar mermaidRender = __webpack_require__(765);\n// EXTERNAL MODULE: ./src/ts/markdown/mindmapRender.ts\nvar mindmapRender = __webpack_require__(894);\n// EXTERNAL MODULE: ./src/ts/markdown/outlineRender.ts\nvar outlineRender = __webpack_require__(198);\n// EXTERNAL MODULE: ./src/ts/markdown/plantumlRender.ts\nvar plantumlRender = __webpack_require__(583);\n// EXTERNAL MODULE: ./src/ts/constants.ts\nvar constants = __webpack_require__(260);\n// EXTERNAL MODULE: ./src/ts/ui/setContentTheme.ts\nvar setContentTheme = __webpack_require__(958);\n// EXTERNAL MODULE: ./src/ts/util/addScript.ts\nvar addScript = __webpack_require__(228);\n// EXTERNAL MODULE: ./src/ts/util/hasClosest.ts\nvar hasClosest = __webpack_require__(713);\n// EXTERNAL MODULE: ./src/ts/util/merge.ts\nvar merge = __webpack_require__(224);\n;// CONCATENATED MODULE: ./src/ts/markdown/anchorRender.ts\nvar anchorRender = function (type) {\n    document.querySelectorAll(\".vditor-anchor\").forEach(function (anchor) {\n        if (type === 1) {\n            anchor.classList.add(\"vditor-anchor--left\");\n        }\n        anchor.onclick = function () {\n            var id = anchor.getAttribute(\"href\").substr(1);\n            var top = document.getElementById(\"vditorAnchor-\" + id).offsetTop;\n            document.querySelector(\"html\").scrollTop = top;\n        };\n    });\n    window.onhashchange = function () {\n        var element = document.getElementById(\"vditorAnchor-\" + decodeURIComponent(window.location.hash.substr(1)));\n        if (element) {\n            document.querySelector(\"html\").scrollTop = element.offsetTop;\n        }\n    };\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/setLute.ts\nvar setLute = __webpack_require__(792);\n// EXTERNAL MODULE: ./src/ts/util/selection.ts\nvar selection = __webpack_require__(187);\n;// CONCATENATED MODULE: ./src/ts/markdown/speechRender.ts\n\nvar speechRender = function (element, lang) {\n    if (lang === void 0) { lang = \"zh_CN\"; }\n    if (typeof speechSynthesis === \"undefined\" || typeof SpeechSynthesisUtterance === \"undefined\") {\n        return;\n    }\n    var playSVG = '<svg><use xlink:href=\"#vditor-icon-play\"></use></svg>';\n    var pauseSVG = '<svg><use xlink:href=\"#vditor-icon-pause\"></use></svg>';\n    var speechDom = document.querySelector(\".vditor-speech\");\n    if (!speechDom) {\n        speechDom = document.createElement(\"div\");\n        speechDom.className = \"vditor-speech\";\n        document.body.insertAdjacentElement(\"beforeend\", speechDom);\n        var getVoice = function () {\n            var voices = speechSynthesis.getVoices();\n            var currentVoice;\n            var defaultVoice;\n            voices.forEach(function (item) {\n                if (item.lang === lang.replace(\"_\", \"-\")) {\n                    currentVoice = item;\n                }\n                if (item.default) {\n                    defaultVoice = item;\n                }\n            });\n            if (!currentVoice) {\n                currentVoice = defaultVoice;\n            }\n            return currentVoice;\n        };\n        if (speechSynthesis.onvoiceschanged !== undefined) {\n            speechSynthesis.onvoiceschanged = getVoice;\n        }\n        var voice_1 = getVoice();\n        speechDom.onclick = function () {\n            if (speechDom.className === \"vditor-speech\") {\n                var utterThis = new SpeechSynthesisUtterance(speechDom.getAttribute(\"data-text\"));\n                utterThis.voice = voice_1;\n                utterThis.onend = function () {\n                    speechDom.className = \"vditor-speech\";\n                    speechSynthesis.cancel();\n                    speechDom.innerHTML = playSVG;\n                };\n                speechSynthesis.speak(utterThis);\n                speechDom.className = \"vditor-speech vditor-speech--current\";\n                speechDom.innerHTML = pauseSVG;\n            }\n            else {\n                if (speechSynthesis.speaking) {\n                    if (speechSynthesis.paused) {\n                        speechSynthesis.resume();\n                        speechDom.innerHTML = pauseSVG;\n                    }\n                    else {\n                        speechSynthesis.pause();\n                        speechDom.innerHTML = playSVG;\n                    }\n                }\n            }\n            (0,selection/* setSelectionFocus */.Hc)(window.vditorSpeechRange);\n        };\n        document.body.addEventListener(\"click\", function () {\n            if (getSelection().toString().trim() === \"\" && speechDom.style.display === \"block\") {\n                speechDom.className = \"vditor-speech\";\n                speechSynthesis.cancel();\n                speechDom.style.display = \"none\";\n            }\n        });\n    }\n    element.addEventListener(\"mouseup\", function (event) {\n        var text = getSelection().toString().trim();\n        speechSynthesis.cancel();\n        if (getSelection().toString().trim() === \"\") {\n            if (speechDom.style.display === \"block\") {\n                speechDom.className = \"vditor-speech\";\n                speechDom.style.display = \"none\";\n            }\n            return;\n        }\n        window.vditorSpeechRange = getSelection().getRangeAt(0).cloneRange();\n        var rect = getSelection().getRangeAt(0).getBoundingClientRect();\n        speechDom.innerHTML = playSVG;\n        speechDom.style.display = \"block\";\n        speechDom.style.top = (rect.top + rect.height + document.querySelector(\"html\").scrollTop - 20) + \"px\";\n        speechDom.style.left = (event.screenX + 2) + \"px\";\n        speechDom.setAttribute(\"data-text\", text);\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/markdown/previewRender.ts\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar mergeOptions = function (options) {\n    var defaultOption = {\n        anchor: 0,\n        cdn: constants/* Constants.CDN */.g.CDN,\n        customEmoji: {},\n        emojiPath: ((options && options.emojiPath) || constants/* Constants.CDN */.g.CDN) + \"/dist/images/emoji\",\n        hljs: constants/* Constants.HLJS_OPTIONS */.g.HLJS_OPTIONS,\n        icon: \"ant\",\n        lang: \"zh_CN\",\n        markdown: constants/* Constants.MARKDOWN_OPTIONS */.g.MARKDOWN_OPTIONS,\n        math: constants/* Constants.MATH_OPTIONS */.g.MATH_OPTIONS,\n        mode: \"light\",\n        speech: {\n            enable: false,\n        },\n        theme: constants/* Constants.THEME_OPTIONS */.g.THEME_OPTIONS,\n    };\n    return (0,merge/* merge */.T)(defaultOption, options);\n};\nvar md2html = function (mdText, options) {\n    var mergedOptions = mergeOptions(options);\n    return (0,addScript/* addScript */.G)(mergedOptions.cdn + \"/dist/js/lute/lute.min.js\", \"vditorLuteScript\").then(function () {\n        var lute = (0,setLute/* setLute */.X)({\n            autoSpace: mergedOptions.markdown.autoSpace,\n            codeBlockPreview: mergedOptions.markdown.codeBlockPreview,\n            emojiSite: mergedOptions.emojiPath,\n            emojis: mergedOptions.customEmoji,\n            fixTermTypo: mergedOptions.markdown.fixTermTypo,\n            footnotes: mergedOptions.markdown.footnotes,\n            headingAnchor: mergedOptions.anchor !== 0,\n            inlineMathDigit: mergedOptions.math.inlineDigit,\n            lazyLoadImage: mergedOptions.lazyLoadImage,\n            linkBase: mergedOptions.markdown.linkBase,\n            linkPrefix: mergedOptions.markdown.linkPrefix,\n            listStyle: mergedOptions.markdown.listStyle,\n            mark: mergedOptions.markdown.mark,\n            mathBlockPreview: mergedOptions.markdown.mathBlockPreview,\n            paragraphBeginningSpace: mergedOptions.markdown.paragraphBeginningSpace,\n            sanitize: mergedOptions.markdown.sanitize,\n            toc: mergedOptions.markdown.toc,\n        });\n        if (options === null || options === void 0 ? void 0 : options.renderers) {\n            lute.SetJSRenderers({\n                renderers: {\n                    Md2HTML: options.renderers,\n                },\n            });\n        }\n        lute.SetHeadingID(true);\n        return lute.Md2HTML(mdText);\n    });\n};\nvar previewRender = function (previewElement, markdown, options) { return __awaiter(void 0, void 0, void 0, function () {\n    var mergedOptions, html;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                mergedOptions = mergeOptions(options);\n                return [4 /*yield*/, md2html(markdown, mergedOptions)];\n            case 1:\n                html = _a.sent();\n                if (mergedOptions.transform) {\n                    html = mergedOptions.transform(html);\n                }\n                previewElement.innerHTML = html;\n                previewElement.classList.add(\"vditor-reset\");\n                if (!mergedOptions.i18n) {\n                    if (![\"en_US\", \"ja_JP\", \"ko_KR\", \"ru_RU\", \"zh_CN\", \"zh_TW\"].includes(mergedOptions.lang)) {\n                        throw new Error(\"options.lang error, see https://ld246.com/article/1549638745630#options\");\n                    }\n                    else {\n                        (0,addScript/* addScriptSync */.J)(mergedOptions.cdn + \"/dist/js/i18n/\" + mergedOptions.lang + \".js\", \"vditorI18nScript\");\n                    }\n                }\n                else {\n                    window.VditorI18n = mergedOptions.i18n;\n                }\n                (0,setContentTheme/* setContentTheme */.Z)(mergedOptions.theme.current, mergedOptions.theme.path);\n                if (mergedOptions.anchor === 1) {\n                    previewElement.classList.add(\"vditor-reset--anchor\");\n                }\n                (0,codeRender/* codeRender */.O)(previewElement);\n                (0,highlightRender/* highlightRender */.s)(mergedOptions.hljs, previewElement, mergedOptions.cdn);\n                (0,mathRender/* mathRender */.H)(previewElement, {\n                    cdn: mergedOptions.cdn,\n                    math: mergedOptions.math,\n                });\n                (0,mermaidRender/* mermaidRender */.i)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,flowchartRender/* flowchartRender */.P)(previewElement, mergedOptions.cdn);\n                (0,graphvizRender/* graphvizRender */.v)(previewElement, mergedOptions.cdn);\n                (0,chartRender/* chartRender */.p)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,mindmapRender/* mindmapRender */.P)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,plantumlRender/* plantumlRender */.B)(previewElement, mergedOptions.cdn);\n                (0,abcRender/* abcRender */.Q)(previewElement, mergedOptions.cdn);\n                (0,mediaRender/* mediaRender */.Y)(previewElement);\n                if (mergedOptions.speech.enable) {\n                    speechRender(previewElement);\n                }\n                if (mergedOptions.anchor !== 0) {\n                    anchorRender(mergedOptions.anchor);\n                }\n                if (mergedOptions.after) {\n                    mergedOptions.after();\n                }\n                if (mergedOptions.lazyLoadImage) {\n                    lazyLoadImageRender(previewElement);\n                }\n                if (mergedOptions.icon) {\n                    (0,addScript/* addScript */.G)(mergedOptions.cdn + \"/dist/js/icons/\" + mergedOptions.icon + \".js\", \"vditorIconScript\");\n                }\n                previewElement.addEventListener(\"click\", function (event) {\n                    var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n                    if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n                        var headingElement = previewElement.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n                        if (headingElement) {\n                            window.scrollTo(window.scrollX, headingElement.offsetTop);\n                        }\n                        return;\n                    }\n                });\n                return [2 /*return*/];\n        }\n    });\n}); };\n\n// EXTERNAL MODULE: ./src/ts/preview/image.ts\nvar preview_image = __webpack_require__(264);\n// EXTERNAL MODULE: ./src/ts/ui/setCodeTheme.ts\nvar setCodeTheme = __webpack_require__(968);\n;// CONCATENATED MODULE: ./src/method.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Vditor = /** @class */ (function () {\n    function Vditor() {\n    }\n    /** 点击图片放大 */\n    Vditor.adapterRender = adapterRender;\n    /** 点击图片放大 */\n    Vditor.previewImage = preview_image/* previewImage */.E;\n    /** 为 element 中的代码块添加复制按钮 */\n    Vditor.codeRender = codeRender/* codeRender */.O;\n    /** 对 graphviz 进行渲染 */\n    Vditor.graphvizRender = graphvizRender/* graphvizRender */.v;\n    /** 为 element 中的代码块进行高亮渲染 */\n    Vditor.highlightRender = highlightRender/* highlightRender */.s;\n    /** 对数学公式进行渲染 */\n    Vditor.mathRender = mathRender/* mathRender */.H;\n    /** 流程图/时序图/甘特图渲染 */\n    Vditor.mermaidRender = mermaidRender/* mermaidRender */.i;\n    /** flowchart.js 渲染 */\n    Vditor.flowchartRender = flowchartRender/* flowchartRender */.P;\n    /** 图表渲染 */\n    Vditor.chartRender = chartRender/* chartRender */.p;\n    /** 五线谱渲染 */\n    Vditor.abcRender = abcRender/* abcRender */.Q;\n    /** 脑图渲染 */\n    Vditor.mindmapRender = mindmapRender/* mindmapRender */.P;\n    /** plantuml渲染 */\n    Vditor.plantumlRender = plantumlRender/* plantumlRender */.B;\n    /** 大纲渲染 */\n    Vditor.outlineRender = outlineRender/* outlineRender */.k;\n    /** 为[特定链接](https://github.com/Vanessa219/vditor/issues/7)分别渲染为视频、音频、嵌入的 iframe */\n    Vditor.mediaRender = mediaRender/* mediaRender */.Y;\n    /** 对选中的文字进行阅读 */\n    Vditor.speechRender = speechRender;\n    /** 对图片进行懒加载 */\n    Vditor.lazyLoadImageRender = lazyLoadImageRender;\n    /** Markdown 文本转换为 HTML，该方法需使用[异步编程](https://ld246.com/article/1546828434083?r=Vaness) */\n    Vditor.md2html = md2html;\n    /** 页面 Markdown 文章渲染 */\n    Vditor.preview = previewRender;\n    /** 设置代码主题 */\n    Vditor.setCodeTheme = setCodeTheme/* setCodeTheme */.Y;\n    /** 设置内容主题 */\n    Vditor.setContentTheme = setContentTheme/* setContentTheme */.Z;\n    return Vditor;\n}());\n/* harmony default export */ const method = (Vditor);\n\n\n/***/ }),\n\n/***/ 260:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"H\": () => (/* binding */ _VDITOR_VERSION),\n/* harmony export */   \"g\": () => (/* binding */ Constants)\n/* harmony export */ });\nvar _VDITOR_VERSION = \"3.8.6\";\n\nvar Constants = /** @class */ (function () {\n    function Constants() {\n    }\n    Constants.ZWSP = \"\\u200b\";\n    Constants.DROP_EDITOR = \"application/editor\";\n    Constants.MOBILE_WIDTH = 520;\n    Constants.CLASS_MENU_DISABLED = \"vditor-menu--disabled\";\n    Constants.EDIT_TOOLBARS = [\"emoji\", \"headings\", \"bold\", \"italic\", \"strike\", \"link\", \"list\",\n        \"ordered-list\", \"outdent\", \"indent\", \"check\", \"line\", \"quote\", \"code\", \"inline-code\", \"insert-after\",\n        \"insert-before\", \"upload\", \"record\", \"table\"];\n    Constants.CODE_THEME = [\"abap\", \"algol\", \"algol_nu\", \"arduino\", \"autumn\", \"borland\", \"bw\",\n        \"colorful\", \"dracula\", \"emacs\", \"friendly\", \"fruity\", \"github\", \"igor\", \"lovelace\", \"manni\", \"monokai\",\n        \"monokailight\", \"murphy\", \"native\", \"paraiso-dark\", \"paraiso-light\", \"pastie\", \"perldoc\", \"pygments\",\n        \"rainbow_dash\", \"rrt\", \"solarized-dark\", \"solarized-dark256\", \"solarized-light\", \"swapoff\", \"tango\", \"trac\",\n        \"vim\", \"vs\", \"xcode\", \"ant-design\"];\n    Constants.CODE_LANGUAGES = [\"mermaid\", \"echarts\", \"mindmap\", \"plantuml\", \"abc\", \"graphviz\", \"flowchart\", \"apache\",\n        \"js\", \"ts\", \"html\",\n        // common\n        \"properties\", \"apache\", \"bash\", \"c\", \"csharp\", \"cpp\", \"css\", \"coffeescript\", \"diff\", \"go\", \"xml\", \"http\",\n        \"json\", \"java\", \"javascript\", \"kotlin\", \"less\", \"lua\", \"makefile\", \"markdown\", \"nginx\", \"objectivec\", \"php\",\n        \"php-template\", \"perl\", \"plaintext\", \"python\", \"python-repl\", \"r\", \"ruby\", \"rust\", \"scss\", \"sql\", \"shell\",\n        \"swift\", \"ini\", \"typescript\", \"vbnet\", \"yaml\",\n        \"ada\", \"clojure\", \"dart\", \"erb\", \"fortran\", \"gradle\", \"haskell\", \"julia\", \"julia-repl\", \"lisp\", \"matlab\",\n        \"pgsql\", \"powershell\", \"sql_more\", \"stata\", \"cmake\", \"mathematica\"];\n    Constants.CDN = \"https://cdn.jsdelivr.net/npm/vditor@\" + \"3.8.6\";\n    Constants.MARKDOWN_OPTIONS = {\n        autoSpace: false,\n        codeBlockPreview: true,\n        fixTermTypo: false,\n        footnotes: true,\n        linkBase: \"\",\n        linkPrefix: \"\",\n        listStyle: false,\n        mark: false,\n        mathBlockPreview: true,\n        paragraphBeginningSpace: false,\n        sanitize: true,\n        toc: false,\n    };\n    Constants.HLJS_OPTIONS = {\n        enable: true,\n        lineNumber: false,\n        style: \"github\",\n    };\n    Constants.MATH_OPTIONS = {\n        engine: \"KaTeX\",\n        inlineDigit: false,\n        macros: {},\n    };\n    Constants.THEME_OPTIONS = {\n        current: \"light\",\n        list: {\n            \"ant-design\": \"Ant Design\",\n            \"dark\": \"Dark\",\n            \"light\": \"Light\",\n            \"wechat\": \"WeChat\",\n        },\n        path: Constants.CDN + \"/dist/css/content-theme\",\n    };\n    return Constants;\n}());\n\n\n\n/***/ }),\n\n/***/ 369:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Q\": () => (/* binding */ abcRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar abcRender = function (element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var abcElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.abcRenderAdapter.getElements(element);\n    if (abcElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/abcjs/abcjs_basic.min.js\", \"vditorAbcjsScript\").then(function () {\n            abcElements.forEach(function (item) {\n                if (item.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    item.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                if (item.getAttribute(\"data-processed\") === \"true\") {\n                    return;\n                }\n                ABCJS.renderAbc(item, _adapterRender__WEBPACK_IMPORTED_MODULE_1__.abcRenderAdapter.getCode(item).trim());\n                item.style.overflowX = \"auto\";\n                item.setAttribute(\"data-processed\", \"true\");\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 46:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"mathRenderAdapter\": () => (/* binding */ mathRenderAdapter),\n/* harmony export */   \"mermaidRenderAdapter\": () => (/* binding */ mermaidRenderAdapter),\n/* harmony export */   \"mindmapRenderAdapter\": () => (/* binding */ mindmapRenderAdapter),\n/* harmony export */   \"chartRenderAdapter\": () => (/* binding */ chartRenderAdapter),\n/* harmony export */   \"abcRenderAdapter\": () => (/* binding */ abcRenderAdapter),\n/* harmony export */   \"graphvizRenderAdapter\": () => (/* binding */ graphvizRenderAdapter),\n/* harmony export */   \"flowchartRenderAdapter\": () => (/* binding */ flowchartRenderAdapter),\n/* harmony export */   \"plantumlRenderAdapter\": () => (/* binding */ plantumlRenderAdapter)\n/* harmony export */ });\nvar mathRenderAdapter = {\n    getCode: function (mathElement) { return mathElement.textContent; },\n    getElements: function (element) { return element.querySelectorAll(\".language-math\"); },\n};\nvar mermaidRenderAdapter = {\n    /** 不仅要返回code，并且需要将 code 设置为 el 的 innerHTML */\n    getCode: function (el) { return el.textContent; },\n    getElements: function (element) { return element.querySelectorAll(\".language-mermaid\"); },\n};\nvar mindmapRenderAdapter = {\n    getCode: function (el) { return el.getAttribute(\"data-code\"); },\n    getElements: function (el) { return el.querySelectorAll(\".language-mindmap\"); },\n};\nvar chartRenderAdapter = {\n    getCode: function (el) { return el.innerText; },\n    getElements: function (el) { return el.querySelectorAll(\".language-echarts\"); },\n};\nvar abcRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-abc\"); },\n};\nvar graphvizRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-graphviz\"); },\n};\nvar flowchartRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-flowchart\"); },\n};\nvar plantumlRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-plantuml\"); },\n};\n\n\n/***/ }),\n\n/***/ 726:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"p\": () => (/* binding */ chartRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar chartRender = function (element, cdn, theme) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var echartsElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.chartRenderAdapter.getElements(element);\n    if (echartsElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/echarts/echarts.min.js\", \"vditorEchartsScript\").then(function () {\n            echartsElements.forEach(function (e) {\n                if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                var text = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.chartRenderAdapter.getCode(e).trim();\n                if (!text) {\n                    return;\n                }\n                try {\n                    if (e.getAttribute(\"data-processed\") === \"true\") {\n                        return;\n                    }\n                    var option = JSON.parse(text);\n                    echarts.init(e, theme === \"dark\" ? \"dark\" : undefined).setOption(option);\n                    e.setAttribute(\"data-processed\", \"true\");\n                }\n                catch (error) {\n                    e.className = \"vditor-reset--error\";\n                    e.innerHTML = \"echarts render error: <br>\" + error;\n                }\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 23:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"O\": () => (/* binding */ codeRender)\n/* harmony export */ });\n/* harmony import */ var _util_code160to32__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(769);\n\nvar codeRender = function (element) {\n    element.querySelectorAll(\"pre > code\").forEach(function (e, index) {\n        if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n            e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n            return;\n        }\n        if (e.classList.contains(\"language-mermaid\") || e.classList.contains(\"language-flowchart\") ||\n            e.classList.contains(\"language-echarts\") || e.classList.contains(\"language-mindmap\") ||\n            e.classList.contains(\"language-plantuml\") ||\n            e.classList.contains(\"language-abc\") || e.classList.contains(\"language-graphviz\") ||\n            e.classList.contains(\"language-math\")) {\n            return;\n        }\n        if (e.style.maxHeight.indexOf(\"px\") > -1) {\n            return;\n        }\n        // 避免预览区在渲染后由于代码块过多产生性能问题 https://github.com/b3log/vditor/issues/67\n        if (element.classList.contains(\"vditor-preview\") && index > 5) {\n            return;\n        }\n        var codeText = e.innerText;\n        if (e.classList.contains(\"highlight-chroma\")) {\n            var codeElement = document.createElement(\"code\");\n            codeElement.innerHTML = e.innerHTML;\n            codeElement.querySelectorAll(\".highlight-ln\").forEach(function (item) {\n                item.remove();\n            });\n            codeText = codeElement.innerText;\n        }\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-copy\";\n        divElement.innerHTML = \"<span aria-label=\\\"\" + window.VditorI18n.copy + \"\\\"\\nonmouseover=\\\"this.setAttribute('aria-label', '\" + window.VditorI18n.copy + \"')\\\"\\nclass=\\\"vditor-tooltipped vditor-tooltipped__w\\\"\\nonclick=\\\"this.previousElementSibling.select();document.execCommand('copy');\" +\n            (\"this.setAttribute('aria-label', '\" + window.VditorI18n.copied + \"')\\\"><svg><use xlink:href=\\\"#vditor-icon-copy\\\"></use></svg></span>\");\n        var textarea = document.createElement(\"textarea\");\n        textarea.value = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_0__/* .code160to32 */ .X)(codeText);\n        divElement.insertAdjacentElement(\"afterbegin\", textarea);\n        e.before(divElement);\n        e.style.maxHeight = (window.outerHeight - 40) + \"px\";\n    });\n};\n\n\n/***/ }),\n\n/***/ 383:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"P\": () => (/* binding */ flowchartRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar flowchartRender = function (element, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var flowchartElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.flowchartRenderAdapter.getElements(element);\n    if (flowchartElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/flowchart.js/flowchart.min.js\", \"vditorFlowchartScript\").then(function () {\n        flowchartElements.forEach(function (item) {\n            if (item.getAttribute(\"data-processed\") === \"true\") {\n                return;\n            }\n            var flowchartObj = flowchart.parse(_adapterRender__WEBPACK_IMPORTED_MODULE_1__.flowchartRenderAdapter.getCode(item));\n            item.innerHTML = \"\";\n            flowchartObj.drawSVG(item);\n            item.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 890:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"v\": () => (/* binding */ graphvizRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar graphvizRender = function (element, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var graphvizElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.graphvizRenderAdapter.getElements(element);\n    if (graphvizElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/graphviz/viz.js\", \"vditorGraphVizScript\").then(function () {\n        graphvizElements.forEach(function (e) {\n            var code = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.graphvizRenderAdapter.getCode(e);\n            if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                return;\n            }\n            if (e.getAttribute(\"data-processed\") === \"true\" || code.trim() === \"\") {\n                return;\n            }\n            try {\n                var blob = new Blob([\"importScripts('\" + document.getElementById(\"vditorGraphVizScript\").src.replace(\"viz.js\", \"full.render.js\") + \"');\"], { type: \"application/javascript\" });\n                var url = window.URL || window.webkitURL;\n                var blobUrl = url.createObjectURL(blob);\n                var worker = new Worker(blobUrl);\n                new Viz({ worker: worker })\n                    .renderSVGElement(code).then(function (result) {\n                    e.innerHTML = result.outerHTML;\n                }).catch(function (error) {\n                    e.innerHTML = \"graphviz render error: <br>\" + error;\n                    e.className = \"vditor-reset--error\";\n                });\n            }\n            catch (e) {\n                console.error(\"graphviz error\", e);\n            }\n            e.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 93:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"s\": () => (/* binding */ highlightRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(946);\n\n\n\nvar highlightRender = function (hljsOption, element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var style = hljsOption.style;\n    if (!_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CODE_THEME.includes */ .g.CODE_THEME.includes(style)) {\n        style = \"github\";\n    }\n    var vditorHljsStyle = document.getElementById(\"vditorHljsStyle\");\n    var href = cdn + \"/dist/js/highlight.js/styles/\" + style + \".css\";\n    if (vditorHljsStyle && vditorHljsStyle.href !== href) {\n        vditorHljsStyle.remove();\n    }\n    (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(cdn + \"/dist/js/highlight.js/styles/\" + style + \".css\", \"vditorHljsStyle\");\n    if (hljsOption.enable === false) {\n        return;\n    }\n    var codes = element.querySelectorAll(\"pre > code\");\n    if (codes.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/highlight.js/highlight.pack.js\", \"vditorHljsScript\").then(function () {\n        element.querySelectorAll(\"pre > code\").forEach(function (block) {\n            // ir & wysiwyg 区域不渲染\n            if (block.parentElement.classList.contains(\"vditor-ir__marker--pre\") ||\n                block.parentElement.classList.contains(\"vditor-wysiwyg__pre\")) {\n                return;\n            }\n            if (block.classList.contains(\"language-mermaid\") || block.classList.contains(\"language-flowchart\") ||\n                block.classList.contains(\"language-echarts\") || block.classList.contains(\"language-mindmap\") ||\n                block.classList.contains(\"language-plantuml\") ||\n                block.classList.contains(\"language-abc\") || block.classList.contains(\"language-graphviz\") ||\n                block.classList.contains(\"language-math\")) {\n                return;\n            }\n            hljs.highlightElement(block);\n            if (!hljsOption.lineNumber) {\n                return;\n            }\n            block.classList.add(\"vditor-linenumber\");\n            var linenNumberTemp = block.querySelector(\".vditor-linenumber__temp\");\n            if (!linenNumberTemp) {\n                linenNumberTemp = document.createElement(\"div\");\n                linenNumberTemp.className = \"vditor-linenumber__temp\";\n                block.insertAdjacentElement(\"beforeend\", linenNumberTemp);\n            }\n            var whiteSpace = getComputedStyle(block).whiteSpace;\n            var isSoftWrap = false;\n            if (whiteSpace === \"pre-wrap\" || whiteSpace === \"pre-line\") {\n                isSoftWrap = true;\n            }\n            var lineNumberHTML = \"\";\n            var lineList = block.textContent.split(/\\r\\n|\\r|\\n/g);\n            lineList.pop();\n            lineList.map(function (line) {\n                var lineHeight = \"\";\n                if (isSoftWrap) {\n                    linenNumberTemp.textContent = line || \"\\n\";\n                    lineHeight = \" style=\\\"height:\" + linenNumberTemp.getBoundingClientRect().height + \"px\\\"\";\n                }\n                lineNumberHTML += \"<span\" + lineHeight + \"></span>\";\n            });\n            linenNumberTemp.style.display = \"none\";\n            lineNumberHTML = \"<span class=\\\"vditor-linenumber__rows\\\">\" + lineNumberHTML + \"</span>\";\n            block.insertAdjacentHTML(\"beforeend\", lineNumberHTML);\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 323:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"H\": () => (/* binding */ mathRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(228);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(946);\n/* harmony import */ var _util_code160to32__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(769);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\n\n\nvar mathRender = function (element, options) {\n    var mathElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mathRenderAdapter.getElements(element);\n    if (mathElements.length === 0) {\n        return;\n    }\n    var defaultOptions = {\n        cdn: _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN,\n        math: {\n            engine: \"KaTeX\",\n            inlineDigit: false,\n            macros: {},\n        },\n    };\n    if (options && options.math) {\n        options.math =\n            Object.assign({}, defaultOptions.math, options.math);\n    }\n    options = Object.assign({}, defaultOptions, options);\n    if (options.math.engine === \"KaTeX\") {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_2__/* .addStyle */ .c)(options.cdn + \"/dist/js/katex/katex.min.css\", \"vditorKatexStyle\");\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_3__/* .addScript */ .G)(options.cdn + \"/dist/js/katex/katex.min.js\", \"vditorKatexScript\").then(function () {\n            mathElements.forEach(function (mathElement) {\n                if (mathElement.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    mathElement.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                if (mathElement.getAttribute(\"data-math\")) {\n                    return;\n                }\n                var math = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_4__/* .code160to32 */ .X)(_adapterRender__WEBPACK_IMPORTED_MODULE_1__.mathRenderAdapter.getCode(mathElement));\n                mathElement.setAttribute(\"data-math\", math);\n                try {\n                    mathElement.innerHTML = katex.renderToString(math, {\n                        displayMode: mathElement.tagName === \"DIV\",\n                        output: \"html\",\n                    });\n                }\n                catch (e) {\n                    mathElement.innerHTML = e.message;\n                    mathElement.className = \"language-math vditor-reset--error\";\n                }\n                mathElement.addEventListener(\"copy\", function (event) {\n                    event.stopPropagation();\n                    event.preventDefault();\n                    var vditorMathElement = event.currentTarget.closest(\".language-math\");\n                    event.clipboardData.setData(\"text/html\", vditorMathElement.innerHTML);\n                    event.clipboardData.setData(\"text/plain\", vditorMathElement.getAttribute(\"data-math\"));\n                });\n            });\n        });\n    }\n    else if (options.math.engine === \"MathJax\") {\n        var chainAsync_1 = function (fns) {\n            if (fns.length === 0) {\n                return;\n            }\n            var curr = 0;\n            var last = fns[fns.length - 1];\n            var next = function () {\n                var fn = fns[curr++];\n                fn === last ? fn() : fn(next);\n            };\n            next();\n        };\n        if (!window.MathJax) {\n            window.MathJax = {\n                loader: {\n                    paths: { mathjax: options.cdn + \"/dist/js/mathjax\" },\n                },\n                startup: {\n                    typeset: false,\n                },\n                tex: {\n                    macros: options.math.macros,\n                },\n            };\n        }\n        // 循环加载会抛异常\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_3__/* .addScriptSync */ .J)(options.cdn + \"/dist/js/mathjax/tex-svg-full.js\", \"protyleMathJaxScript\");\n        var renderMath_1 = function (mathElement, next) {\n            var math = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_4__/* .code160to32 */ .X)(mathElement.textContent).trim();\n            var mathOptions = window.MathJax.getMetricsFor(mathElement);\n            mathOptions.display = mathElement.tagName === \"DIV\";\n            window.MathJax.tex2svgPromise(math, mathOptions).then(function (node) {\n                mathElement.innerHTML = \"\";\n                mathElement.setAttribute(\"data-math\", math);\n                mathElement.append(node);\n                window.MathJax.startup.document.clear();\n                window.MathJax.startup.document.updateDocument();\n                var errorTextElement = node.querySelector('[data-mml-node=\"merror\"]');\n                if (errorTextElement && errorTextElement.textContent.trim() !== \"\") {\n                    mathElement.innerHTML = errorTextElement.textContent.trim();\n                    mathElement.className = \"vditor-reset--error\";\n                }\n                if (next) {\n                    next();\n                }\n            });\n        };\n        window.MathJax.startup.promise.then(function () {\n            var chains = [];\n            var _loop_1 = function (i) {\n                var mathElement = mathElements[i];\n                if (!mathElement.parentElement.classList.contains(\"vditor-wysiwyg__pre\") &&\n                    !mathElement.parentElement.classList.contains(\"vditor-ir__marker--pre\") &&\n                    !mathElement.getAttribute(\"data-math\") && (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_4__/* .code160to32 */ .X)(mathElement.textContent).trim()) {\n                    chains.push(function (next) {\n                        if (i === mathElements.length - 1) {\n                            renderMath_1(mathElement);\n                        }\n                        else {\n                            renderMath_1(mathElement, next);\n                        }\n                    });\n                }\n            };\n            for (var i = 0; i < mathElements.length; i++) {\n                _loop_1(i);\n            }\n            chainAsync_1(chains);\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 207:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Y\": () => (/* binding */ mediaRender)\n/* harmony export */ });\nvar videoRender = function (element, url) {\n    element.insertAdjacentHTML(\"afterend\", \"<video controls=\\\"controls\\\" src=\\\"\" + url + \"\\\"></video>\");\n    element.remove();\n};\nvar audioRender = function (element, url) {\n    element.insertAdjacentHTML(\"afterend\", \"<audio controls=\\\"controls\\\" src=\\\"\" + url + \"\\\"></audio>\");\n    element.remove();\n};\nvar iframeRender = function (element, url) {\n    var youtubeMatch = url.match(/\\/\\/(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))([\\w|-]{11})(?:(?:[\\?&]t=)(\\S+))?/);\n    var youkuMatch = url.match(/\\/\\/v\\.youku\\.com\\/v_show\\/id_(\\w+)=*\\.html/);\n    var qqMatch = url.match(/\\/\\/v\\.qq\\.com\\/x\\/cover\\/.*\\/([^\\/]+)\\.html\\??.*/);\n    var coubMatch = url.match(/(?:www\\.|\\/\\/)coub\\.com\\/view\\/(\\w+)/);\n    var facebookMatch = url.match(/(?:www\\.|\\/\\/)facebook\\.com\\/([^\\/]+)\\/videos\\/([0-9]+)/);\n    var dailymotionMatch = url.match(/.+dailymotion.com\\/(video|hub)\\/(\\w+)\\?/);\n    var bilibiliMatch = url.match(/(?:www\\.|\\/\\/)bilibili\\.com\\/video\\/(\\w+)/);\n    var tedMatch = url.match(/(?:www\\.|\\/\\/)ted\\.com\\/talks\\/(\\w+)/);\n    if (youtubeMatch && youtubeMatch[1].length === 11) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//www.youtube.com/embed/\" + (youtubeMatch[1] +\n            (youtubeMatch[2] ? \"?start=\" + youtubeMatch[2] : \"\")) + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (youkuMatch && youkuMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//player.youku.com/embed/\" + youkuMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (qqMatch && qqMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"https://v.qq.com/txp/iframe/player.html?vid=\" + qqMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (coubMatch && coubMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"//coub.com/embed/\" + coubMatch[1] + \"?muted=false&autostart=false&originalSize=true&startWithHD=true\\\"></iframe>\");\n        element.remove();\n    }\n    else if (facebookMatch && facebookMatch[0]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"https://www.facebook.com/plugins/video.php?href=\" + encodeURIComponent(facebookMatch[0]) + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (dailymotionMatch && dailymotionMatch[2]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"https://www.dailymotion.com/embed/video/\" + dailymotionMatch[2] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (bilibiliMatch && bilibiliMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"//player.bilibili.com/player.html?bvid=\" + bilibiliMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (tedMatch && tedMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//embed.ted.com/talks/\" + tedMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n};\nvar mediaRender = function (element) {\n    if (!element) {\n        return;\n    }\n    element.querySelectorAll(\"a\").forEach(function (aElement) {\n        var url = aElement.getAttribute(\"href\");\n        if (!url) {\n            return;\n        }\n        if (url.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)) {\n            videoRender(aElement, url);\n        }\n        else if (url.match(/^.+.(mp3|wav|flac)$/)) {\n            audioRender(aElement, url);\n        }\n        else {\n            iframeRender(aElement, url);\n        }\n    });\n};\n\n\n/***/ }),\n\n/***/ 765:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"i\": () => (/* binding */ mermaidRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar mermaidRender = function (element, cdn, theme) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var mermaidElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mermaidRenderAdapter.getElements(element);\n    if (mermaidElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/mermaid/mermaid.min.js\", \"vditorMermaidScript\").then(function () {\n        var config = {\n            altFontFamily: \"sans-serif\",\n            flowchart: {\n                htmlLabels: true,\n                useMaxWidth: true,\n            },\n            fontFamily: \"sans-serif\",\n            gantt: {\n                leftPadding: 75,\n                rightPadding: 20,\n            },\n            securityLevel: \"loose\",\n            sequence: {\n                boxMargin: 8,\n                diagramMarginX: 8,\n                diagramMarginY: 8,\n                useMaxWidth: true,\n            },\n            startOnLoad: false,\n        };\n        if (theme === \"dark\") {\n            config.theme = \"dark\";\n            config.themeVariables = {\n                activationBkgColor: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                activationBorderColor: \"#81B1DB\",\n                activeTaskBkgColor: \"#81B1DB\",\n                activeTaskBorderColor: \"#ffffff\",\n                actorBkg: \"#1f2020\",\n                actorBorder: \"#81B1DB\",\n                actorLineColor: \"lightgrey\",\n                actorTextColor: \"lightgrey\",\n                altBackground: \"hsl(0, 0%, 40%)\",\n                altSectionBkgColor: \"#333\",\n                arrowheadColor: \"lightgrey\",\n                background: \"#333\",\n                border1: \"#81B1DB\",\n                border2: \"rgba(255, 255, 255, 0.25)\",\n                classText: \"#e0dfdf\",\n                clusterBkg: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                clusterBorder: \"rgba(255, 255, 255, 0.25)\",\n                critBkgColor: \"#E83737\",\n                critBorderColor: \"#E83737\",\n                darkTextColor: \"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)\",\n                defaultLinkColor: \"lightgrey\",\n                doneTaskBkgColor: \"lightgrey\",\n                doneTaskBorderColor: \"grey\",\n                edgeLabelBackground: \"hsl(0, 0%, 34.4117647059%)\",\n                errorBkgColor: \"#a44141\",\n                errorTextColor: \"#ddd\",\n                fillType0: \"#1f2020\",\n                fillType1: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                fillType2: \"hsl(244, 1.5873015873%, 12.3529411765%)\",\n                fillType3: \"hsl(244, 1.5873015873%, 28.3529411765%)\",\n                fillType4: \"hsl(116, 1.5873015873%, 12.3529411765%)\",\n                fillType5: \"hsl(116, 1.5873015873%, 28.3529411765%)\",\n                fillType6: \"hsl(308, 1.5873015873%, 12.3529411765%)\",\n                fillType7: \"hsl(308, 1.5873015873%, 28.3529411765%)\",\n                fontFamily: \"\\\"trebuchet ms\\\", verdana, arial\",\n                fontSize: \"16px\",\n                gridColor: \"lightgrey\",\n                labelBackground: \"#181818\",\n                labelBoxBkgColor: \"#1f2020\",\n                labelBoxBorderColor: \"#81B1DB\",\n                labelColor: \"#ccc\",\n                labelTextColor: \"lightgrey\",\n                lineColor: \"lightgrey\",\n                loopTextColor: \"lightgrey\",\n                mainBkg: \"#1f2020\",\n                mainContrastColor: \"lightgrey\",\n                nodeBkg: \"#1f2020\",\n                nodeBorder: \"#81B1DB\",\n                noteBkgColor: \"#fff5ad\",\n                noteBorderColor: \"rgba(255, 255, 255, 0.25)\",\n                noteTextColor: \"#1f2020\",\n                primaryBorderColor: \"hsl(180, 0%, 2.3529411765%)\",\n                primaryColor: \"#1f2020\",\n                primaryTextColor: \"#e0dfdf\",\n                secondBkg: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                secondaryBorderColor: \"hsl(180, 0%, 18.3529411765%)\",\n                secondaryColor: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                secondaryTextColor: \"rgb(183.8476190475, 181.5523809523, 181.5523809523)\",\n                sectionBkgColor: \"hsl(52.9411764706, 28.813559322%, 58.431372549%)\",\n                sectionBkgColor2: \"#EAE8D9\",\n                sequenceNumberColor: \"black\",\n                signalColor: \"lightgrey\",\n                signalTextColor: \"lightgrey\",\n                taskBkgColor: \"hsl(180, 1.5873015873%, 35.3529411765%)\",\n                taskBorderColor: \"#ffffff\",\n                taskTextClickableColor: \"#003163\",\n                taskTextColor: \"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)\",\n                taskTextDarkColor: \"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)\",\n                taskTextLightColor: \"lightgrey\",\n                taskTextOutsideColor: \"lightgrey\",\n                tertiaryBorderColor: \"hsl(20, 0%, 2.3529411765%)\",\n                tertiaryColor: \"hsl(20, 1.5873015873%, 12.3529411765%)\",\n                tertiaryTextColor: \"rgb(222.9999999999, 223.6666666666, 223.9999999999)\",\n                textColor: \"#ccc\",\n                titleColor: \"#F9FFFE\",\n                todayLineColor: \"#DB5757\",\n            };\n        }\n        mermaid.initialize(config);\n        mermaidElements.forEach(function (item) {\n            var code = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mermaidRenderAdapter.getCode(item);\n            if (item.getAttribute(\"data-processed\") === \"true\" || code.trim() === \"\") {\n                return;\n            }\n            mermaid.init(undefined, item);\n            item.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 894:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"P\": () => (/* binding */ mindmapRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar mindmapRender = function (element, cdn, theme) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var mindmapElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mindmapRenderAdapter.getElements(element);\n    if (mindmapElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/echarts/echarts.min.js\", \"vditorEchartsScript\").then(function () {\n            mindmapElements.forEach(function (e) {\n                if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                var text = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mindmapRenderAdapter.getCode(e);\n                if (!text) {\n                    return;\n                }\n                try {\n                    if (e.getAttribute(\"data-processed\") === \"true\") {\n                        return;\n                    }\n                    echarts.init(e, theme === \"dark\" ? \"dark\" : undefined).setOption({\n                        series: [\n                            {\n                                data: [JSON.parse(decodeURIComponent(text))],\n                                initialTreeDepth: -1,\n                                itemStyle: {\n                                    borderWidth: 0,\n                                    color: \"#4285f4\",\n                                },\n                                label: {\n                                    backgroundColor: \"#f6f8fa\",\n                                    borderColor: \"#d1d5da\",\n                                    borderRadius: 5,\n                                    borderWidth: 0.5,\n                                    color: \"#586069\",\n                                    lineHeight: 20,\n                                    offset: [-5, 0],\n                                    padding: [0, 5],\n                                    position: \"insideRight\",\n                                },\n                                lineStyle: {\n                                    color: \"#d1d5da\",\n                                    width: 1,\n                                },\n                                roam: true,\n                                symbol: function (value, params) {\n                                    var _a;\n                                    if ((_a = params === null || params === void 0 ? void 0 : params.data) === null || _a === void 0 ? void 0 : _a.children) {\n                                        return \"circle\";\n                                    }\n                                    else {\n                                        return \"path://\";\n                                    }\n                                },\n                                type: \"tree\",\n                            },\n                        ],\n                        tooltip: {\n                            trigger: \"item\",\n                            triggerOn: \"mousemove\",\n                        },\n                    });\n                    e.setAttribute(\"data-processed\", \"true\");\n                }\n                catch (error) {\n                    e.className = \"vditor-reset--error\";\n                    e.innerHTML = \"mindmap render error: <br>\" + error;\n                }\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 198:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"k\": () => (/* binding */ outlineRender)\n/* harmony export */ });\n/* harmony import */ var _util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(615);\n/* harmony import */ var _mathRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(323);\n\n\nvar outlineRender = function (contentElement, targetElement, vditor) {\n    var tocHTML = \"\";\n    var ids = [];\n    Array.from(contentElement.children).forEach(function (item, index) {\n        if ((0,_util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestByHeadings */ .W)(item)) {\n            if (vditor) {\n                var lastIndex = item.id.lastIndexOf(\"_\");\n                item.id = item.id.substring(0, lastIndex === -1 ? undefined : lastIndex) + \"_\" + index;\n            }\n            ids.push(item.id);\n            tocHTML += item.outerHTML.replace(\"<wbr>\", \"\");\n        }\n    });\n    if (tocHTML === \"\") {\n        targetElement.innerHTML = \"\";\n        return \"\";\n    }\n    var tempElement = document.createElement(\"div\");\n    if (vditor) {\n        vditor.lute.SetToC(true);\n        if (vditor.currentMode === \"wysiwyg\" && !vditor.preview.element.contains(contentElement)) {\n            tempElement.innerHTML = vditor.lute.SpinVditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        else if (vditor.currentMode === \"ir\" && !vditor.preview.element.contains(contentElement)) {\n            tempElement.innerHTML = vditor.lute.SpinVditorIRDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        else {\n            tempElement.innerHTML = vditor.lute.HTML2VditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        vditor.lute.SetToC(vditor.options.preview.markdown.toc);\n    }\n    else {\n        targetElement.classList.add(\"vditor-outline\");\n        var lute = Lute.New();\n        lute.SetToC(true);\n        tempElement.innerHTML = lute.HTML2VditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n    }\n    var headingsElement = tempElement.firstElementChild.querySelectorAll(\"li > span[data-target-id]\");\n    headingsElement.forEach(function (item, index) {\n        if (item.nextElementSibling && item.nextElementSibling.tagName === \"UL\") {\n            item.innerHTML = \"<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg><span>\" + item.innerHTML + \"</span>\";\n        }\n        else {\n            item.innerHTML = \"<svg></svg><span>\" + item.innerHTML + \"</span>\";\n        }\n        item.setAttribute(\"data-target-id\", ids[index]);\n    });\n    tocHTML = tempElement.firstElementChild.innerHTML;\n    if (headingsElement.length === 0) {\n        targetElement.innerHTML = \"\";\n        return tocHTML;\n    }\n    targetElement.innerHTML = tocHTML;\n    if (vditor) {\n        (0,_mathRender__WEBPACK_IMPORTED_MODULE_0__/* .mathRender */ .H)(targetElement, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    }\n    targetElement.firstElementChild.addEventListener(\"click\", function (event) {\n        var target = event.target;\n        while (target && !target.isEqualNode(targetElement)) {\n            if (target.classList.contains(\"vditor-outline__action\")) {\n                if (target.classList.contains(\"vditor-outline__action--close\")) {\n                    target.classList.remove(\"vditor-outline__action--close\");\n                    target.parentElement.nextElementSibling.setAttribute(\"style\", \"display:block\");\n                }\n                else {\n                    target.classList.add(\"vditor-outline__action--close\");\n                    target.parentElement.nextElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n                event.preventDefault();\n                event.stopPropagation();\n                break;\n            }\n            else if (target.getAttribute(\"data-target-id\")) {\n                event.preventDefault();\n                event.stopPropagation();\n                var idElement = document.getElementById(target.getAttribute(\"data-target-id\"));\n                if (!idElement) {\n                    return;\n                }\n                if (vditor) {\n                    if (vditor.options.height === \"auto\") {\n                        var windowScrollY = idElement.offsetTop + vditor.element.offsetTop;\n                        if (!vditor.options.toolbarConfig.pin) {\n                            windowScrollY += vditor.toolbar.element.offsetHeight;\n                        }\n                        window.scrollTo(window.scrollX, windowScrollY);\n                    }\n                    else {\n                        if (vditor.element.offsetTop < window.scrollY) {\n                            window.scrollTo(window.scrollX, vditor.element.offsetTop);\n                        }\n                        if (vditor.preview.element.contains(contentElement)) {\n                            contentElement.parentElement.scrollTop = idElement.offsetTop;\n                        }\n                        else {\n                            contentElement.scrollTop = idElement.offsetTop;\n                        }\n                    }\n                }\n                else {\n                    window.scrollTo(window.scrollX, idElement.offsetTop);\n                }\n                break;\n            }\n            target = target.parentElement;\n        }\n    });\n    return tocHTML;\n};\n\n\n/***/ }),\n\n/***/ 583:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"B\": () => (/* binding */ plantumlRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar plantumlRender = function (element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var plantumlElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.plantumlRenderAdapter.getElements(element);\n    if (plantumlElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/plantuml/plantuml-encoder.min.js\", \"vditorPlantumlScript\").then(function () {\n        plantumlElements.forEach(function (e) {\n            if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                return;\n            }\n            var text = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.plantumlRenderAdapter.getCode(e).trim();\n            if (!text) {\n                return;\n            }\n            try {\n                e.innerHTML = \"<img src=\\\"http://www.plantuml.com/plantuml/svg/~1\" + plantumlEncoder.encode(text) + \"\\\">\";\n            }\n            catch (error) {\n                e.className = \"vditor-reset--error\";\n                e.innerHTML = \"plantuml render error: <br>\" + error;\n            }\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 792:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"X\": () => (/* binding */ setLute)\n/* harmony export */ });\nvar setLute = function (options) {\n    var lute = Lute.New();\n    lute.PutEmojis(options.emojis);\n    lute.SetEmojiSite(options.emojiSite);\n    lute.SetHeadingAnchor(options.headingAnchor);\n    lute.SetInlineMathAllowDigitAfterOpenMarker(options.inlineMathDigit);\n    lute.SetAutoSpace(options.autoSpace);\n    lute.SetToC(options.toc);\n    lute.SetFootnotes(options.footnotes);\n    lute.SetFixTermTypo(options.fixTermTypo);\n    lute.SetVditorCodeBlockPreview(options.codeBlockPreview);\n    lute.SetVditorMathBlockPreview(options.mathBlockPreview);\n    lute.SetSanitize(options.sanitize);\n    lute.SetChineseParagraphBeginningSpace(options.paragraphBeginningSpace);\n    lute.SetRenderListStyle(options.listStyle);\n    lute.SetLinkBase(options.linkBase);\n    lute.SetLinkPrefix(options.linkPrefix);\n    lute.SetMark(options.mark);\n    if (options.lazyLoadImage) {\n        lute.SetImageLazyLoading(options.lazyLoadImage);\n    }\n    return lute;\n};\n\n\n/***/ }),\n\n/***/ 264:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"E\": () => (/* binding */ previewImage)\n/* harmony export */ });\nvar previewImage = function (oldImgElement, lang, theme) {\n    if (lang === void 0) { lang = \"zh_CN\"; }\n    if (theme === void 0) { theme = \"classic\"; }\n    var oldImgRect = oldImgElement.getBoundingClientRect();\n    var height = 36;\n    document.body.insertAdjacentHTML(\"beforeend\", \"<div class=\\\"vditor vditor-img\" + (theme === \"dark\" ? \" vditor--dark\" : \"\") + \"\\\">\\n    <div class=\\\"vditor-img__bar\\\">\\n      <span class=\\\"vditor-img__btn\\\" data-deg=\\\"0\\\">\\n        <svg><use xlink:href=\\\"#vditor-icon-redo\\\"></use></svg>\\n        \" + window.VditorI18n.spin + \"\\n      </span>\\n      <span class=\\\"vditor-img__btn\\\"  onclick=\\\"this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''\\\">\\n        X &nbsp;\" + window.VditorI18n.close + \"\\n      </span>\\n    </div>\\n    <div class=\\\"vditor-img__img\\\" onclick=\\\"this.parentElement.outerHTML = '';document.body.style.overflow = ''\\\">\\n      <img style=\\\"width: \" + oldImgElement.width + \"px;height:\" + oldImgElement.height + \"px;transform: translate3d(\" + oldImgRect.left + \"px, \" + (oldImgRect.top - height) + \"px, 0)\\\" src=\\\"\" + oldImgElement.getAttribute(\"src\") + \"\\\">\\n    </div>\\n</div>\");\n    document.body.style.overflow = \"hidden\";\n    // 图片从原始位置移动到预览正中间的动画效果\n    var imgElement = document.querySelector(\".vditor-img img\");\n    var translate3d = \"translate3d(\" + Math.max(0, window.innerWidth - oldImgElement.naturalWidth) / 2 + \"px, \" + Math.max(0, window.innerHeight - height - oldImgElement.naturalHeight) / 2 + \"px, 0)\";\n    setTimeout(function () {\n        imgElement.setAttribute(\"style\", \"transition: transform .3s ease-in-out;transform: \" + translate3d);\n        setTimeout(function () {\n            imgElement.parentElement.scrollTo((imgElement.parentElement.scrollWidth - imgElement.parentElement.clientWidth) / 2, (imgElement.parentElement.scrollHeight - imgElement.parentElement.clientHeight) / 2);\n        }, 400);\n    });\n    // 旋转\n    var btnElement = document.querySelector(\".vditor-img__btn\");\n    btnElement.addEventListener(\"click\", function () {\n        var deg = parseInt(btnElement.getAttribute(\"data-deg\"), 10) + 90;\n        if ((deg / 90) % 2 === 1 && oldImgElement.naturalWidth > imgElement.parentElement.clientHeight) {\n            imgElement.style.transform = \"translate3d(\" + Math.max(0, window.innerWidth - oldImgElement.naturalWidth) / 2 + \"px, \" + (oldImgElement.naturalWidth / 2 - oldImgElement.naturalHeight / 2) + \"px, 0) rotateZ(\" + deg + \"deg)\";\n        }\n        else {\n            imgElement.style.transform = translate3d + \" rotateZ(\" + deg + \"deg)\";\n        }\n        btnElement.setAttribute(\"data-deg\", deg.toString());\n        setTimeout(function () {\n            imgElement.parentElement.scrollTo((imgElement.parentElement.scrollWidth - imgElement.parentElement.clientWidth) / 2, (imgElement.parentElement.scrollHeight - imgElement.parentElement.clientHeight) / 2);\n        }, 400);\n    });\n};\n\n\n/***/ }),\n\n/***/ 968:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Y\": () => (/* binding */ setCodeTheme)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(946);\n\n\nvar setCodeTheme = function (codeTheme, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    if (!_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CODE_THEME.includes */ .g.CODE_THEME.includes(codeTheme)) {\n        codeTheme = \"github\";\n    }\n    var vditorHljsStyle = document.getElementById(\"vditorHljsStyle\");\n    var href = cdn + \"/dist/js/highlight.js/styles/\" + codeTheme + \".css\";\n    if (!vditorHljsStyle) {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(href, \"vditorHljsStyle\");\n    }\n    else if (vditorHljsStyle.href !== href) {\n        vditorHljsStyle.remove();\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(href, \"vditorHljsStyle\");\n    }\n};\n\n\n/***/ }),\n\n/***/ 958:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Z\": () => (/* binding */ setContentTheme)\n/* harmony export */ });\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(946);\n\nvar setContentTheme = function (contentTheme, path) {\n    if (!contentTheme || !path) {\n        return;\n    }\n    var vditorContentTheme = document.getElementById(\"vditorContentTheme\");\n    var cssPath = path + \"/\" + contentTheme + \".css\";\n    if (!vditorContentTheme) {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_0__/* .addStyle */ .c)(cssPath, \"vditorContentTheme\");\n    }\n    else if (vditorContentTheme.href !== cssPath) {\n        vditorContentTheme.remove();\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_0__/* .addStyle */ .c)(cssPath, \"vditorContentTheme\");\n    }\n};\n\n\n/***/ }),\n\n/***/ 228:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"J\": () => (/* binding */ addScriptSync),\n/* harmony export */   \"G\": () => (/* binding */ addScript)\n/* harmony export */ });\nvar addScriptSync = function (path, id) {\n    if (document.getElementById(id)) {\n        return false;\n    }\n    var xhrObj = new XMLHttpRequest();\n    xhrObj.open(\"GET\", path, false);\n    xhrObj.setRequestHeader(\"Accept\", \"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01\");\n    xhrObj.send(\"\");\n    var scriptElement = document.createElement(\"script\");\n    scriptElement.type = \"text/javascript\";\n    scriptElement.text = xhrObj.responseText;\n    scriptElement.id = id;\n    document.head.appendChild(scriptElement);\n};\nvar addScript = function (path, id) {\n    return new Promise(function (resolve, reject) {\n        if (document.getElementById(id)) {\n            // 脚本加载后再次调用直接返回\n            resolve();\n            return false;\n        }\n        var scriptElement = document.createElement(\"script\");\n        scriptElement.src = path;\n        scriptElement.async = true;\n        // 循环调用时 Chrome 不会重复请求 js\n        document.head.appendChild(scriptElement);\n        scriptElement.onload = function () {\n            if (document.getElementById(id)) {\n                // 循环调用需清除 DOM 中的 script 标签\n                scriptElement.remove();\n                resolve();\n                return false;\n            }\n            scriptElement.id = id;\n            resolve();\n        };\n    });\n};\n\n\n/***/ }),\n\n/***/ 946:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"c\": () => (/* binding */ addStyle)\n/* harmony export */ });\nvar addStyle = function (url, id) {\n    if (!document.getElementById(id)) {\n        var styleElement = document.createElement(\"link\");\n        styleElement.id = id;\n        styleElement.rel = \"stylesheet\";\n        styleElement.type = \"text/css\";\n        styleElement.href = url;\n        document.getElementsByTagName(\"head\")[0].appendChild(styleElement);\n    }\n};\n\n\n/***/ }),\n\n/***/ 769:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"X\": () => (/* binding */ code160to32)\n/* harmony export */ });\nvar code160to32 = function (text) {\n    // 非打断空格转换为空格\n    return text.replace(/\\u00a0/g, \" \");\n};\n\n\n/***/ }),\n\n/***/ 931:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"G6\": () => (/* binding */ isSafari),\n/* harmony export */   \"vU\": () => (/* binding */ isFirefox),\n/* harmony export */   \"pK\": () => (/* binding */ accessLocalStorage),\n/* harmony export */   \"Le\": () => (/* binding */ getEventName),\n/* harmony export */   \"yl\": () => (/* binding */ isCtrl),\n/* harmony export */   \"ns\": () => (/* binding */ updateHotkeyTip),\n/* harmony export */   \"i7\": () => (/* binding */ isChrome)\n/* harmony export */ });\nvar isSafari = function () {\n    return navigator.userAgent.indexOf(\"Safari\") > -1 && navigator.userAgent.indexOf(\"Chrome\") === -1;\n};\nvar isFirefox = function () {\n    return navigator.userAgent.toLowerCase().indexOf(\"firefox\") > -1;\n};\nvar accessLocalStorage = function () {\n    try {\n        return typeof localStorage !== \"undefined\";\n    }\n    catch (e) {\n        return false;\n    }\n};\n// 用户 iPhone 点击延迟/需要双击的处理\nvar getEventName = function () {\n    if (navigator.userAgent.indexOf(\"iPhone\") > -1) {\n        return \"touchstart\";\n    }\n    else {\n        return \"click\";\n    }\n};\n// 区别 mac 上的 ctrl 和 meta\nvar isCtrl = function (event) {\n    if (navigator.platform.toUpperCase().indexOf(\"MAC\") >= 0) {\n        // mac\n        if (event.metaKey && !event.ctrlKey) {\n            return true;\n        }\n        return false;\n    }\n    else {\n        if (!event.metaKey && event.ctrlKey) {\n            return true;\n        }\n        return false;\n    }\n};\n// Mac，Windows 快捷键展示\nvar updateHotkeyTip = function (hotkey) {\n    if (/Mac/.test(navigator.platform) || navigator.platform === \"iPhone\") {\n        if (hotkey.indexOf(\"⇧\") > -1 && isFirefox()) {\n            // Mac Firefox 按下 shift 后，key 同 windows 系统\n            hotkey = hotkey.replace(\";\", \":\").replace(\"=\", \"+\").replace(\"-\", \"_\");\n        }\n    }\n    else {\n        if (hotkey.startsWith(\"⌘\")) {\n            hotkey = hotkey.replace(\"⌘\", \"⌘+\");\n        }\n        else if (hotkey.startsWith(\"⌥\") && hotkey.substr(1, 1) !== \"⌘\") {\n            hotkey = hotkey.replace(\"⌥\", \"⌥+\");\n        }\n        else {\n            hotkey = hotkey.replace(\"⇧⌘\", \"⌘+⇧+\").replace(\"⌥⌘\", \"⌥+⌘+\");\n        }\n        hotkey = hotkey.replace(\"⌘\", \"Ctrl\").replace(\"⇧\", \"Shift\")\n            .replace(\"⌥\", \"Alt\");\n        if (hotkey.indexOf(\"Shift\") > -1) {\n            hotkey = hotkey.replace(\";\", \":\").replace(\"=\", \"+\").replace(\"-\", \"_\");\n        }\n    }\n    return hotkey;\n};\nvar isChrome = function () {\n    return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n};\n\n\n/***/ }),\n\n/***/ 713:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"JQ\": () => (/* binding */ hasTopClosestByClassName),\n/* harmony export */   \"E2\": () => (/* binding */ hasTopClosestByTag),\n/* harmony export */   \"O9\": () => (/* binding */ getTopList),\n/* harmony export */   \"a1\": () => (/* binding */ hasClosestByAttribute),\n/* harmony export */   \"F9\": () => (/* binding */ hasClosestBlock),\n/* harmony export */   \"lG\": () => (/* binding */ hasClosestByMatchTag),\n/* harmony export */   \"fb\": () => (/* binding */ hasClosestByClassName),\n/* harmony export */   \"DX\": () => (/* binding */ getLastNode)\n/* harmony export */ });\n/* unused harmony export hasTopClosestByAttribute */\n/* harmony import */ var _hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(615);\n\nvar hasTopClosestByClassName = function (element, className) {\n    var closest = hasClosestByClassName(element, className);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = hasClosestByClassName(closest.parentElement, className);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar hasTopClosestByAttribute = function (element, attr, value) {\n    var closest = hasClosestByAttribute(element, attr, value);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = hasClosestByAttribute(closest.parentElement, attr, value);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar hasTopClosestByTag = function (element, nodeName) {\n    var closest = (0,_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__/* .hasClosestByTag */ .S)(element, nodeName);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = (0,_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__/* .hasClosestByTag */ .S)(closest.parentElement, nodeName);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar getTopList = function (element) {\n    var topUlElement = hasTopClosestByTag(element, \"UL\");\n    var topOlElement = hasTopClosestByTag(element, \"OL\");\n    var topListElement = topUlElement;\n    if (topOlElement && (!topUlElement || (topUlElement && topOlElement.contains(topUlElement)))) {\n        topListElement = topOlElement;\n    }\n    return topListElement;\n};\nvar hasClosestByAttribute = function (element, attr, value) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.getAttribute(attr) === value) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestBlock = function (element) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    var blockElement = hasClosestByAttribute(element, \"data-block\", \"0\");\n    if (blockElement) {\n        return blockElement;\n    }\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.tagName === \"H1\" ||\n            e.tagName === \"H2\" ||\n            e.tagName === \"H3\" ||\n            e.tagName === \"H4\" ||\n            e.tagName === \"H5\" ||\n            e.tagName === \"H6\" ||\n            e.tagName === \"P\" ||\n            e.tagName === \"BLOCKQUOTE\" ||\n            e.tagName === \"OL\" ||\n            e.tagName === \"UL\") {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByMatchTag = function (element, nodeName) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.nodeName === nodeName) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByClassName = function (element, className) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.classList.contains(className)) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar getLastNode = function (node) {\n    while (node && node.lastChild) {\n        node = node.lastChild;\n    }\n    return node;\n};\n\n\n/***/ }),\n\n/***/ 615:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"S\": () => (/* binding */ hasClosestByTag),\n/* harmony export */   \"W\": () => (/* binding */ hasClosestByHeadings)\n/* harmony export */ });\n// NOTE: 减少 method.ts 打包，故从 hasClosest.ts 中拆分\nvar hasClosestByTag = function (element, nodeName) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.nodeName.indexOf(nodeName) === 0) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByHeadings = function (element) {\n    var headingElement = hasClosestByTag(element, \"H\");\n    if (headingElement && headingElement.tagName.length === 2 && headingElement.tagName !== \"HR\") {\n        return headingElement;\n    }\n    return false;\n};\n\n\n/***/ }),\n\n/***/ 224:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"T\": () => (/* binding */ merge)\n/* harmony export */ });\nvar merge = function () {\n    var options = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        options[_i] = arguments[_i];\n    }\n    var target = {};\n    var merger = function (obj) {\n        for (var prop in obj) {\n            if (obj.hasOwnProperty(prop)) {\n                if (Object.prototype.toString.call(obj[prop]) === \"[object Object]\") {\n                    target[prop] = merge(target[prop], obj[prop]);\n                }\n                else {\n                    target[prop] = obj[prop];\n                }\n            }\n        }\n    };\n    for (var i = 0; i < options.length; i++) {\n        merger(options[i]);\n    }\n    return target;\n};\n\n\n/***/ }),\n\n/***/ 187:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"zh\": () => (/* binding */ getEditorRange),\n/* harmony export */   \"Ny\": () => (/* binding */ getCursorPosition),\n/* harmony export */   \"Gb\": () => (/* binding */ selectIsEditor),\n/* harmony export */   \"Hc\": () => (/* binding */ setSelectionFocus),\n/* harmony export */   \"im\": () => (/* binding */ getSelectPosition),\n/* harmony export */   \"$j\": () => (/* binding */ setSelectionByPosition),\n/* harmony export */   \"ib\": () => (/* binding */ setRangeByWbr),\n/* harmony export */   \"oC\": () => (/* binding */ insertHTML)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _compatibility__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(931);\n/* harmony import */ var _hasClosest__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(713);\n\n\n\nvar getEditorRange = function (vditor) {\n    var range;\n    var element = vditor[vditor.currentMode].element;\n    if (getSelection().rangeCount > 0) {\n        range = getSelection().getRangeAt(0);\n        if (element.isEqualNode(range.startContainer) || element.contains(range.startContainer)) {\n            return range;\n        }\n    }\n    if (vditor[vditor.currentMode].range) {\n        return vditor[vditor.currentMode].range;\n    }\n    element.focus();\n    range = element.ownerDocument.createRange();\n    range.setStart(element, 0);\n    range.collapse(true);\n    return range;\n};\nvar getCursorPosition = function (editor) {\n    var range = window.getSelection().getRangeAt(0);\n    if (!editor.contains(range.startContainer) && !(0,_hasClosest__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestByClassName */ .fb)(range.startContainer, \"vditor-panel--none\")) {\n        return {\n            left: 0,\n            top: 0,\n        };\n    }\n    var parentRect = editor.parentElement.getBoundingClientRect();\n    var cursorRect;\n    if (range.getClientRects().length === 0) {\n        if (range.startContainer.nodeType === 3) {\n            // 空行时，会出现没有 br 的情况，需要根据父元素 <p> 获取位置信息\n            var parent_1 = range.startContainer.parentElement;\n            if (parent_1 && parent_1.getClientRects().length > 0) {\n                cursorRect = parent_1.getClientRects()[0];\n            }\n            else {\n                return {\n                    left: 0,\n                    top: 0,\n                };\n            }\n        }\n        else {\n            var children = range.startContainer.children;\n            if (children[range.startOffset] &&\n                children[range.startOffset].getClientRects().length > 0) {\n                // markdown 模式回车\n                cursorRect = children[range.startOffset].getClientRects()[0];\n            }\n            else if (range.startContainer.childNodes.length > 0) {\n                // in table or code block\n                var cloneRange = range.cloneRange();\n                range.selectNode(range.startContainer.childNodes[Math.max(0, range.startOffset - 1)]);\n                cursorRect = range.getClientRects()[0];\n                range.setEnd(cloneRange.endContainer, cloneRange.endOffset);\n                range.setStart(cloneRange.startContainer, cloneRange.startOffset);\n            }\n            else {\n                cursorRect = range.startContainer.getClientRects()[0];\n            }\n            if (!cursorRect) {\n                var parentElement = range.startContainer.childNodes[range.startOffset];\n                while (!parentElement.getClientRects ||\n                    (parentElement.getClientRects && parentElement.getClientRects().length === 0)) {\n                    parentElement = parentElement.parentElement;\n                }\n                cursorRect = parentElement.getClientRects()[0];\n            }\n        }\n    }\n    else {\n        cursorRect = range.getClientRects()[0];\n    }\n    return {\n        left: cursorRect.left - parentRect.left,\n        top: cursorRect.top - parentRect.top,\n    };\n};\nvar selectIsEditor = function (editor, range) {\n    if (!range) {\n        if (getSelection().rangeCount === 0) {\n            return false;\n        }\n        else {\n            range = getSelection().getRangeAt(0);\n        }\n    }\n    var container = range.commonAncestorContainer;\n    return editor.isEqualNode(container) || editor.contains(container);\n};\nvar setSelectionFocus = function (range) {\n    var selection = window.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(range);\n};\nvar getSelectPosition = function (selectElement, editorElement, range) {\n    var position = {\n        end: 0,\n        start: 0,\n    };\n    if (!range) {\n        if (getSelection().rangeCount === 0) {\n            return position;\n        }\n        range = window.getSelection().getRangeAt(0);\n    }\n    if (selectIsEditor(editorElement, range)) {\n        var preSelectionRange = range.cloneRange();\n        if (selectElement.childNodes[0] && selectElement.childNodes[0].childNodes[0]) {\n            preSelectionRange.setStart(selectElement.childNodes[0].childNodes[0], 0);\n        }\n        else {\n            preSelectionRange.selectNodeContents(selectElement);\n        }\n        preSelectionRange.setEnd(range.startContainer, range.startOffset);\n        position.start = preSelectionRange.toString().length;\n        position.end = position.start + range.toString().length;\n    }\n    return position;\n};\nvar setSelectionByPosition = function (start, end, editor) {\n    var charIndex = 0;\n    var line = 0;\n    var pNode = editor.childNodes[line];\n    var foundStart = false;\n    var stop = false;\n    start = Math.max(0, start);\n    end = Math.max(0, end);\n    var range = editor.ownerDocument.createRange();\n    range.setStart(pNode || editor, 0);\n    range.collapse(true);\n    while (!stop && pNode) {\n        var nextCharIndex = charIndex + pNode.textContent.length;\n        if (!foundStart && start >= charIndex && start <= nextCharIndex) {\n            if (start === 0) {\n                range.setStart(pNode, 0);\n            }\n            else {\n                if (pNode.childNodes[0].nodeType === 3) {\n                    range.setStart(pNode.childNodes[0], start - charIndex);\n                }\n                else if (pNode.nextSibling) {\n                    range.setStartBefore(pNode.nextSibling);\n                }\n                else {\n                    range.setStartAfter(pNode);\n                }\n            }\n            foundStart = true;\n            if (start === end) {\n                stop = true;\n                break;\n            }\n        }\n        if (foundStart && end >= charIndex && end <= nextCharIndex) {\n            if (end === 0) {\n                range.setEnd(pNode, 0);\n            }\n            else {\n                if (pNode.childNodes[0].nodeType === 3) {\n                    range.setEnd(pNode.childNodes[0], end - charIndex);\n                }\n                else if (pNode.nextSibling) {\n                    range.setEndBefore(pNode.nextSibling);\n                }\n                else {\n                    range.setEndAfter(pNode);\n                }\n            }\n            stop = true;\n        }\n        charIndex = nextCharIndex;\n        pNode = editor.childNodes[++line];\n    }\n    if (!stop && editor.childNodes[line - 1]) {\n        range.setStartBefore(editor.childNodes[line - 1]);\n    }\n    setSelectionFocus(range);\n    return range;\n};\nvar setRangeByWbr = function (element, range) {\n    var wbrElement = element.querySelector(\"wbr\");\n    if (!wbrElement) {\n        return;\n    }\n    if (!wbrElement.previousElementSibling) {\n        if (wbrElement.previousSibling) {\n            // text<wbr>\n            range.setStart(wbrElement.previousSibling, wbrElement.previousSibling.textContent.length);\n        }\n        else if (wbrElement.nextSibling) {\n            if (wbrElement.nextSibling.nodeType === 3) {\n                // <wbr>text\n                range.setStart(wbrElement.nextSibling, 0);\n            }\n            else {\n                // <wbr><br> https://github.com/Vanessa219/vditor/issues/400\n                range.setStartBefore(wbrElement.nextSibling);\n            }\n        }\n        else {\n            // 内容为空\n            range.setStart(wbrElement.parentElement, 0);\n        }\n    }\n    else {\n        if (wbrElement.previousElementSibling.isSameNode(wbrElement.previousSibling)) {\n            if (wbrElement.previousElementSibling.lastChild) {\n                // <em>text</em><wbr>\n                range.setStartBefore(wbrElement);\n                range.collapse(true);\n                setSelectionFocus(range);\n                // fix Chrome set range bug: **c**\n                if ((0,_compatibility__WEBPACK_IMPORTED_MODULE_2__/* .isChrome */ .i7)() && (wbrElement.previousElementSibling.tagName === \"EM\" ||\n                    wbrElement.previousElementSibling.tagName === \"STRONG\" ||\n                    wbrElement.previousElementSibling.tagName === \"S\")) {\n                    range.insertNode(document.createTextNode(_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.ZWSP */ .g.ZWSP));\n                    range.collapse(false);\n                }\n                wbrElement.remove();\n                return;\n            }\n            else {\n                // <br><wbr>\n                range.setStartAfter(wbrElement.previousElementSibling);\n            }\n        }\n        else {\n            // <em>text</em>text<wbr>\n            range.setStart(wbrElement.previousSibling, wbrElement.previousSibling.textContent.length);\n        }\n    }\n    range.collapse(true);\n    wbrElement.remove();\n    setSelectionFocus(range);\n};\nvar insertHTML = function (html, vditor) {\n    // 使用 lute 方法会添加 p 元素，只有一个 p 元素的时候进行删除\n    var tempElement = document.createElement(\"div\");\n    tempElement.innerHTML = html;\n    var tempBlockElement = tempElement.querySelectorAll(\"p\");\n    if (tempBlockElement.length === 1 && !tempBlockElement[0].previousSibling && !tempBlockElement[0].nextSibling &&\n        vditor[vditor.currentMode].element.children.length > 0 && tempElement.firstElementChild.tagName === \"P\") {\n        html = tempBlockElement[0].innerHTML.trim();\n    }\n    var pasteElement = document.createElement(\"div\");\n    pasteElement.innerHTML = html;\n    var range = getEditorRange(vditor);\n    if (range.toString() !== \"\") {\n        vditor[vditor.currentMode].preventInput = true;\n        document.execCommand(\"delete\", false, \"\");\n    }\n    if (pasteElement.firstElementChild &&\n        pasteElement.firstElementChild.getAttribute(\"data-block\") === \"0\") {\n        // 粘贴内容为块元素时，应在下一段落中插入\n        pasteElement.lastElementChild.insertAdjacentHTML(\"beforeend\", \"<wbr>\");\n        var blockElement = (0,_hasClosest__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestBlock */ .F9)(range.startContainer);\n        if (!blockElement) {\n            vditor[vditor.currentMode].element.insertAdjacentHTML(\"beforeend\", pasteElement.innerHTML);\n        }\n        else {\n            blockElement.insertAdjacentHTML(\"afterend\", pasteElement.innerHTML);\n        }\n        setRangeByWbr(vditor[vditor.currentMode].element, range);\n    }\n    else {\n        var pasteTemplate = document.createElement(\"template\");\n        pasteTemplate.innerHTML = html;\n        range.insertNode(pasteTemplate.content.cloneNode(true));\n        range.collapse(false);\n        setSelectionFocus(range);\n    }\n};\n\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t(() => {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__webpack_require__.r = (exports) => {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/************************************************************************/\nvar __webpack_exports__ = {};\n// This entry need to be wrapped in an IIFE because it need to be in strict mode.\n(() => {\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ src)\n});\n\n// EXTERNAL MODULE: ./src/assets/scss/index.scss\nvar scss = __webpack_require__(157);\n// EXTERNAL MODULE: ./src/method.ts + 4 modules\nvar method = __webpack_require__(857);\n// EXTERNAL MODULE: ./src/ts/constants.ts\nvar constants = __webpack_require__(260);\n// EXTERNAL MODULE: ./src/ts/util/code160to32.ts\nvar code160to32 = __webpack_require__(769);\n;// CONCATENATED MODULE: ./src/ts/markdown/getMarkdown.ts\n\nvar getMarkdown = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return (0,code160to32/* code160to32 */.X)((vditor.sv.element.textContent + \"\\n\").replace(/\\n\\n$/, \"\\n\"));\n    }\n    else if (vditor.currentMode === \"wysiwyg\") {\n        return vditor.lute.VditorDOM2Md(vditor.wysiwyg.element.innerHTML);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        return vditor.lute.VditorIRDOM2Md(vditor.ir.element.innerHTML);\n    }\n    return \"\";\n};\n\n// EXTERNAL MODULE: ./src/ts/util/addScript.ts\nvar addScript = __webpack_require__(228);\n;// CONCATENATED MODULE: ./src/ts/devtools/index.ts\n\n\nvar DevTools = /** @class */ (function () {\n    function DevTools() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-devtools\";\n        this.element.innerHTML = '<div class=\"vditor-reset--error\"></div><div style=\"height: 100%;\"></div>';\n    }\n    DevTools.prototype.renderEchart = function (vditor) {\n        var _this = this;\n        if (vditor.devtools.element.style.display !== \"block\") {\n            return;\n        }\n        (0,addScript/* addScript */.G)(vditor.options.cdn + \"/dist/js/echarts/echarts.min.js\", \"vditorEchartsScript\").then(function () {\n            if (!_this.ASTChart) {\n                _this.ASTChart = echarts.init(vditor.devtools.element.lastElementChild);\n            }\n            try {\n                _this.element.lastElementChild.style.display = \"block\";\n                _this.element.firstElementChild.innerHTML = \"\";\n                _this.ASTChart.setOption({\n                    series: [\n                        {\n                            data: JSON.parse(vditor.lute.RenderEChartsJSON(getMarkdown(vditor))),\n                            initialTreeDepth: -1,\n                            label: {\n                                align: \"left\",\n                                backgroundColor: \"rgba(68, 77, 86, .68)\",\n                                borderRadius: 3,\n                                color: \"#d1d5da\",\n                                fontSize: 12,\n                                lineHeight: 12,\n                                offset: [9, 12],\n                                padding: [2, 4, 2, 4],\n                                position: \"top\",\n                                verticalAlign: \"middle\",\n                            },\n                            lineStyle: {\n                                color: \"#4285f4\",\n                                type: \"curve\",\n                                width: 1,\n                            },\n                            orient: \"vertical\",\n                            roam: true,\n                            type: \"tree\",\n                        },\n                    ],\n                    toolbox: {\n                        bottom: 25,\n                        emphasis: {\n                            iconStyle: {\n                                color: \"#4285f4\",\n                            },\n                        },\n                        feature: {\n                            restore: {\n                                show: true,\n                            },\n                            saveAsImage: {\n                                show: true,\n                            },\n                        },\n                        right: 15,\n                        show: true,\n                    },\n                });\n                _this.ASTChart.resize();\n            }\n            catch (e) {\n                _this.element.lastElementChild.style.display = \"none\";\n                _this.element.firstElementChild.innerHTML = e;\n            }\n        });\n    };\n    return DevTools;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/util/compatibility.ts\nvar compatibility = __webpack_require__(931);\n;// CONCATENATED MODULE: ./src/ts/toolbar/setToolbar.ts\n\n\nvar removeCurrentToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && itemElement.classList.contains(\"vditor-menu--current\")) {\n            itemElement.classList.remove(\"vditor-menu--current\");\n        }\n    });\n};\nvar setCurrentToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && !itemElement.classList.contains(\"vditor-menu--current\")) {\n            itemElement.classList.add(\"vditor-menu--current\");\n        }\n    });\n};\nvar enableToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && itemElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            itemElement.classList.remove(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED);\n        }\n    });\n};\nvar disableToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && !itemElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            itemElement.classList.add(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED);\n        }\n    });\n};\nvar hideToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        if (toolbar[name]) {\n            toolbar[name].style.display = \"none\";\n        }\n    });\n};\nvar showToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        if (toolbar[name]) {\n            toolbar[name].style.display = \"block\";\n        }\n    });\n};\n// \"subToolbar\", \"hint\", \"popover\"\nvar hidePanel = function (vditor, panels, exceptElement) {\n    if (panels.includes(\"subToolbar\")) {\n        vditor.toolbar.element.querySelectorAll(\".vditor-hint\").forEach(function (item) {\n            if (exceptElement && item.isEqualNode(exceptElement)) {\n                return;\n            }\n            item.style.display = \"none\";\n        });\n        if (vditor.toolbar.elements.emoji) {\n            vditor.toolbar.elements.emoji.lastElementChild.style.display = \"none\";\n        }\n    }\n    if (panels.includes(\"hint\")) {\n        vditor.hint.element.style.display = \"none\";\n    }\n    if (vditor.wysiwyg.popover && panels.includes(\"popover\")) {\n        vditor.wysiwyg.popover.style.display = \"none\";\n    }\n};\nvar toggleSubMenu = function (vditor, panelElement, actionBtn, level) {\n    actionBtn.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (actionBtn.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            return;\n        }\n        vditor.toolbar.element.querySelectorAll(\".vditor-hint--current\").forEach(function (item) {\n            item.classList.remove(\"vditor-hint--current\");\n        });\n        if (panelElement.style.display === \"block\") {\n            panelElement.style.display = \"none\";\n        }\n        else {\n            hidePanel(vditor, [\"subToolbar\", \"hint\", \"popover\"], actionBtn.parentElement.parentElement);\n            if (!actionBtn.classList.contains(\"vditor-tooltipped\")) {\n                actionBtn.classList.add(\"vditor-hint--current\");\n            }\n            panelElement.style.display = \"block\";\n            if (vditor.toolbar.element.getBoundingClientRect().right - actionBtn.getBoundingClientRect().right < 250) {\n                panelElement.classList.add(\"vditor-panel--left\");\n            }\n            else {\n                panelElement.classList.remove(\"vditor-panel--left\");\n            }\n        }\n    });\n};\n\n// EXTERNAL MODULE: ./src/ts/util/hasClosest.ts\nvar hasClosest = __webpack_require__(713);\n// EXTERNAL MODULE: ./src/ts/util/hasClosestByHeadings.ts\nvar hasClosestByHeadings = __webpack_require__(615);\n;// CONCATENATED MODULE: ./src/ts/util/log.ts\nvar log = function (method, content, type, print) {\n    if (print) {\n        // @ts-ignore\n        console.log(method + \" - \" + type + \": \" + content);\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/abcRender.ts\nvar abcRender = __webpack_require__(369);\n// EXTERNAL MODULE: ./src/ts/markdown/chartRender.ts\nvar chartRender = __webpack_require__(726);\n// EXTERNAL MODULE: ./src/ts/markdown/codeRender.ts\nvar codeRender = __webpack_require__(23);\n// EXTERNAL MODULE: ./src/ts/markdown/flowchartRender.ts\nvar flowchartRender = __webpack_require__(383);\n// EXTERNAL MODULE: ./src/ts/markdown/graphvizRender.ts\nvar graphvizRender = __webpack_require__(890);\n// EXTERNAL MODULE: ./src/ts/markdown/highlightRender.ts\nvar highlightRender = __webpack_require__(93);\n// EXTERNAL MODULE: ./src/ts/markdown/mathRender.ts\nvar mathRender = __webpack_require__(323);\n// EXTERNAL MODULE: ./src/ts/markdown/mermaidRender.ts\nvar mermaidRender = __webpack_require__(765);\n// EXTERNAL MODULE: ./src/ts/markdown/mindmapRender.ts\nvar mindmapRender = __webpack_require__(894);\n// EXTERNAL MODULE: ./src/ts/markdown/plantumlRender.ts\nvar plantumlRender = __webpack_require__(583);\n;// CONCATENATED MODULE: ./src/ts/util/processCode.ts\n\n\n\n\n\n\n\n\n\n\nvar processPasteCode = function (html, text, type) {\n    if (type === void 0) { type = \"sv\"; }\n    var tempElement = document.createElement(\"div\");\n    tempElement.innerHTML = html;\n    var isCode = false;\n    if (tempElement.childElementCount === 1 &&\n        tempElement.lastElementChild.style.fontFamily.indexOf(\"monospace\") > -1) {\n        // VS Code\n        isCode = true;\n    }\n    var pres = tempElement.querySelectorAll(\"pre\");\n    if (tempElement.childElementCount === 1 && pres.length === 1\n        && pres[0].className !== \"vditor-wysiwyg\"\n        && pres[0].className !== \"vditor-sv\") {\n        // IDE\n        isCode = true;\n    }\n    if (html.indexOf('\\n<p class=\"p1\">') === 0) {\n        // Xcode\n        isCode = true;\n    }\n    if (tempElement.childElementCount === 1 && tempElement.firstElementChild.tagName === \"TABLE\" &&\n        tempElement.querySelector(\".line-number\") && tempElement.querySelector(\".line-content\")) {\n        // 网页源码\n        isCode = true;\n    }\n    if (isCode) {\n        var code = text || html;\n        if (/\\n/.test(code) || pres.length === 1) {\n            if (type === \"wysiwyg\") {\n                return \"<div class=\\\"vditor-wysiwyg__block\\\" data-block=\\\"0\\\" data-type=\\\"code-block\\\"><pre><code>\" + code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"<wbr></code></pre></div>\";\n            }\n            return \"\\n```\\n\" + code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"\\n```\";\n        }\n        else {\n            if (type === \"wysiwyg\") {\n                return \"<code>\" + code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"</code><wbr>\";\n            }\n            return \"`\" + code + \"`\";\n        }\n    }\n    return false;\n};\nvar processCodeRender = function (previewPanel, vditor) {\n    if (!previewPanel) {\n        return;\n    }\n    if (previewPanel.parentElement.getAttribute(\"data-type\") === \"html-block\") {\n        previewPanel.setAttribute(\"data-render\", \"1\");\n        return;\n    }\n    var language = previewPanel.firstElementChild.className.replace(\"language-\", \"\");\n    if (!language) {\n        return;\n    }\n    if (language === \"abc\") {\n        (0,abcRender/* abcRender */.Q)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"mermaid\") {\n        (0,mermaidRender/* mermaidRender */.i)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"flowchart\") {\n        (0,flowchartRender/* flowchartRender */.P)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"echarts\") {\n        (0,chartRender/* chartRender */.p)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"mindmap\") {\n        (0,mindmapRender/* mindmapRender */.P)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"plantuml\") {\n        (0,plantumlRender/* plantumlRender */.B)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"graphviz\") {\n        (0,graphvizRender/* graphvizRender */.v)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"math\") {\n        (0,mathRender/* mathRender */.H)(previewPanel, { cdn: vditor.options.cdn, math: vditor.options.preview.math });\n    }\n    else {\n        (0,highlightRender/* highlightRender */.s)(Object.assign({}, vditor.options.preview.hljs), previewPanel, vditor.options.cdn);\n        (0,codeRender/* codeRender */.O)(previewPanel);\n    }\n    previewPanel.setAttribute(\"data-render\", \"1\");\n};\n\n// EXTERNAL MODULE: ./src/ts/util/selection.ts\nvar selection = __webpack_require__(187);\n;// CONCATENATED MODULE: ./src/ts/util/toc.ts\n\n\n\n\nvar renderToc = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return;\n    }\n    var editorElement = vditor[vditor.currentMode].element;\n    var tocHTML = vditor.outline.render(vditor);\n    if (tocHTML === \"\") {\n        tocHTML = \"[ToC]\";\n    }\n    editorElement.querySelectorAll('[data-type=\"toc-block\"]').forEach(function (item) {\n        item.innerHTML = tocHTML;\n        (0,mathRender/* mathRender */.H)(item, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    });\n};\nvar clickToc = function (event, vditor) {\n    var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n    if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n        var headingElement = vditor[vditor.currentMode].element.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n        if (headingElement) {\n            if (vditor.options.height === \"auto\") {\n                var windowScrollY = headingElement.offsetTop + vditor.element.offsetTop;\n                if (!vditor.options.toolbarConfig.pin) {\n                    windowScrollY += vditor.toolbar.element.offsetHeight;\n                }\n                window.scrollTo(window.scrollX, windowScrollY);\n            }\n            else {\n                if (vditor.element.offsetTop < window.scrollY) {\n                    window.scrollTo(window.scrollX, vditor.element.offsetTop);\n                }\n                vditor[vditor.currentMode].element.scrollTop = headingElement.offsetTop;\n            }\n        }\n        return;\n    }\n};\nvar keydownToc = function (blockElement, vditor, event, range) {\n    // toc 前无元素，插入空块\n    if (blockElement.previousElementSibling &&\n        blockElement.previousElementSibling.classList.contains(\"vditor-toc\")) {\n        if (event.key === \"Backspace\" &&\n            (0,selection/* getSelectPosition */.im)(blockElement, vditor[vditor.currentMode].element, range).start === 0) {\n            blockElement.previousElementSibling.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n        if (insertBeforeBlock(vditor, event, range, blockElement, blockElement.previousElementSibling)) {\n            return true;\n        }\n    }\n    // toc 后无元素，插入空块\n    if (blockElement.nextElementSibling &&\n        blockElement.nextElementSibling.classList.contains(\"vditor-toc\")) {\n        if (event.key === \"Delete\" &&\n            (0,selection/* getSelectPosition */.im)(blockElement, vditor[vditor.currentMode].element, range).start\n                >= blockElement.textContent.trimRight().length) {\n            blockElement.nextElementSibling.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n        if (insertAfterBlock(vditor, event, range, blockElement, blockElement.nextElementSibling)) {\n            return true;\n        }\n    }\n    // toc 删除\n    if (event.key === \"Backspace\" || event.key === \"Delete\") {\n        var tocElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-toc\");\n        if (tocElement) {\n            tocElement.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/input.ts\n\n\n\n\n\n\n\n\n\nvar input = function (vditor, range, ignoreSpace, event) {\n    if (ignoreSpace === void 0) { ignoreSpace = false; }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    // 前后可以输入空格\n    if (blockElement && !ignoreSpace && blockElement.getAttribute(\"data-type\") !== \"code-block\") {\n        if ((isHrMD(blockElement.innerHTML) && blockElement.previousElementSibling) ||\n            isHeadingMD(blockElement.innerHTML)) {\n            return;\n        }\n        // 前后空格处理\n        var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.ir.element, range).start;\n        // 开始可以输入空格\n        var startSpace = true;\n        for (var i = startOffset - 1; \n        // 软换行后有空格\n        i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n            if (blockElement.textContent.charAt(i) !== \" \" &&\n                // 多个 tab 前删除不形成代码块 https://github.com/Vanessa219/vditor/issues/162 1\n                blockElement.textContent.charAt(i) !== \"\\t\") {\n                startSpace = false;\n                break;\n            }\n        }\n        if (startOffset === 0) {\n            startSpace = false;\n        }\n        // 结尾可以输入空格\n        var endSpace = true;\n        for (var i = startOffset - 1; i < blockElement.textContent.length; i++) {\n            if (blockElement.textContent.charAt(i) !== \" \" && blockElement.textContent.charAt(i) !== \"\\n\") {\n                endSpace = false;\n                break;\n            }\n        }\n        if (startSpace) {\n            return;\n        }\n        if (endSpace) {\n            var markerElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__marker\");\n            if (markerElement) {\n                // inline marker space https://github.com/Vanessa219/vditor/issues/239\n            }\n            else {\n                var previousNode = range.startContainer.previousSibling;\n                if (previousNode && previousNode.nodeType !== 3 && previousNode.classList.contains(\"vditor-ir__node--expand\")) {\n                    // FireFox https://github.com/Vanessa219/vditor/issues/239\n                    previousNode.classList.remove(\"vditor-ir__node--expand\");\n                }\n                return;\n            }\n        }\n    }\n    vditor.ir.element.querySelectorAll(\".vditor-ir__node--expand\").forEach(function (item) {\n        item.classList.remove(\"vditor-ir__node--expand\");\n    });\n    if (!blockElement) {\n        // 使用顶级块元素，应使用 innerHTML\n        blockElement = vditor.ir.element;\n    }\n    // document.exeComment insertHTML 会插入 wbr\n    if (!blockElement.querySelector(\"wbr\")) {\n        var previewRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n        if (previewRenderElement) {\n            previewRenderElement.previousElementSibling.insertAdjacentHTML(\"beforeend\", \"<wbr>\");\n        }\n        else {\n            range.insertNode(document.createElement(\"wbr\"));\n        }\n    }\n    // 清除浏览器自带的样式\n    blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n        item.removeAttribute(\"style\");\n    });\n    if (blockElement.getAttribute(\"data-type\") === \"link-ref-defs-block\") {\n        // 修改链接引用\n        blockElement = vditor.ir.element;\n    }\n    var isIRElement = blockElement.isEqualNode(vditor.ir.element);\n    var footnoteElement = (0,hasClosest/* hasClosestByAttribute */.a1)(blockElement, \"data-type\", \"footnotes-block\");\n    var html = \"\";\n    if (!isIRElement) {\n        var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"BLOCKQUOTE\");\n        // 列表需要到最顶层\n        var topListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (topListElement) {\n            blockElement = topListElement;\n        }\n        // 应到引用层，否则 > --- 会解析为 front-matter；列表中有 blockquote 则解析 blockquote；blockquote 中有列表则解析列表\n        if (blockquoteElement && (!topListElement || (topListElement && !blockquoteElement.contains(topListElement)))) {\n            blockElement = blockquoteElement;\n        }\n        // 修改脚注\n        if (footnoteElement) {\n            blockElement = footnoteElement;\n        }\n        html = blockElement.outerHTML;\n        if (blockElement.tagName === \"UL\" || blockElement.tagName === \"OL\") {\n            // 如果为列表的话，需要把上下的列表都重绘\n            var listPrevElement = blockElement.previousElementSibling;\n            var listNextElement = blockElement.nextElementSibling;\n            if (listPrevElement && (listPrevElement.tagName === \"UL\" || listPrevElement.tagName === \"OL\")) {\n                html = listPrevElement.outerHTML + html;\n                listPrevElement.remove();\n            }\n            if (listNextElement && (listNextElement.tagName === \"UL\" || listNextElement.tagName === \"OL\")) {\n                html = html + listNextElement.outerHTML;\n                listNextElement.remove();\n            }\n            // firefox 列表回车不会产生新的 list item https://github.com/Vanessa219/vditor/issues/194\n            html = html.replace(\"<div><wbr><br></div>\", \"<li><p><wbr><br></p></li>\");\n        }\n        else if (blockElement.previousElementSibling &&\n            blockElement.previousElementSibling.textContent.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") !== \"\" &&\n            event && event.inputType === \"insertParagraph\") {\n            // 换行时需要处理上一段落\n            html = blockElement.previousElementSibling.outerHTML + html;\n            blockElement.previousElementSibling.remove();\n        }\n        // 添加链接引用\n        vditor.ir.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item) {\n            if (item && !blockElement.isEqualNode(item)) {\n                html += item.outerHTML;\n                item.remove();\n            }\n        });\n        // 添加脚注\n        vditor.ir.element.querySelectorAll(\"[data-type='footnotes-block']\").forEach(function (item) {\n            if (item && !blockElement.isEqualNode(item)) {\n                html += item.outerHTML;\n                item.remove();\n            }\n        });\n    }\n    else {\n        html = blockElement.innerHTML;\n    }\n    log(\"SpinVditorIRDOM\", html, \"argument\", vditor.options.debugger);\n    html = vditor.lute.SpinVditorIRDOM(html);\n    log(\"SpinVditorIRDOM\", html, \"result\", vditor.options.debugger);\n    if (isIRElement) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n        // 更新正文中的 tip\n        if (footnoteElement) {\n            var footnoteItemElement = (0,hasClosest/* hasClosestByAttribute */.a1)(vditor.ir.element.querySelector(\"wbr\"), \"data-type\", \"footnotes-def\");\n            if (footnoteItemElement) {\n                var footnoteItemText = footnoteItemElement.textContent;\n                var marker = footnoteItemText.substring(1, footnoteItemText.indexOf(\"]:\"));\n                var footnoteRefElement = vditor.ir.element.querySelector(\"sup[data-type=\\\"footnotes-ref\\\"][data-footnotes-label=\\\"\" + marker + \"\\\"]\");\n                if (footnoteRefElement) {\n                    footnoteRefElement.setAttribute(\"aria-label\", footnoteItemText.substr(marker.length + 3).trim().substr(0, 24));\n                }\n            }\n        }\n    }\n    //  linkref 合并及添加\n    var firstLinkRefDefElement;\n    var allLinkRefDefsElement = vditor.ir.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n    allLinkRefDefsElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstLinkRefDefElement = item;\n        }\n        else {\n            firstLinkRefDefElement.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n            item.remove();\n        }\n    });\n    if (allLinkRefDefsElement.length > 0) {\n        vditor.ir.element.insertAdjacentElement(\"beforeend\", allLinkRefDefsElement[0]);\n    }\n    // 脚注合并后添加的末尾\n    var firstFootnoteElement;\n    var allFootnoteElement = vditor.ir.element.querySelectorAll(\"[data-type='footnotes-block']\");\n    allFootnoteElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstFootnoteElement = item;\n        }\n        else {\n            firstFootnoteElement.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n            item.remove();\n        }\n    });\n    if (allFootnoteElement.length > 0) {\n        vditor.ir.element.insertAdjacentElement(\"beforeend\", allFootnoteElement[0]);\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    vditor.ir.element.querySelectorAll(\".vditor-ir__preview[data-render='2']\").forEach(function (item) {\n        processCodeRender(item, vditor);\n    });\n    renderToc(vditor);\n    process_processAfterRender(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/hotKey.ts\n\n// 是否匹配 ⇧⌘[] / ⌘[] / ⌥[] / ⌥⌘[] / ⇧Tab / []\nvar matchHotKey = function (hotKey, event) {\n    if (hotKey === \"\") {\n        return false;\n    }\n    // []\n    if (hotKey.indexOf(\"⇧\") === -1 && hotKey.indexOf(\"⌘\") === -1 && hotKey.indexOf(\"⌥\") === -1) {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && event.code === hotKey) {\n            return true;\n        }\n        return false;\n    }\n    // 是否匹配 ⇧Tab\n    if (hotKey === \"⇧Tab\") {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.shiftKey && event.code === \"Tab\") {\n            return true;\n        }\n        return false;\n    }\n    var hotKeys = hotKey.split(\"\");\n    if (hotKey.startsWith(\"⌥\")) {\n        // 是否匹配 ⌥[] / ⌥⌘[]\n        var keyCode = hotKeys.length === 3 ? hotKeys[2] : hotKeys[1];\n        if ((hotKeys.length === 3 ? (0,compatibility/* isCtrl */.yl)(event) : !(0,compatibility/* isCtrl */.yl)(event)) && event.altKey && !event.shiftKey &&\n            event.code === (/^[0-9]$/.test(keyCode) ? \"Digit\" : \"Key\") + keyCode) {\n            return true;\n        }\n        return false;\n    }\n    // 是否匹配 ⇧⌘[] / ⌘[]\n    if (hotKey === \"⌘Enter\") {\n        hotKeys = [\"⌘\", \"Enter\"];\n    }\n    var hasShift = hotKeys.length > 2 && (hotKeys[0] === \"⇧\");\n    var key = (hasShift ? hotKeys[2] : hotKeys[1]);\n    if (hasShift && ((0,compatibility/* isFirefox */.vU)() || !/Mac/.test(navigator.platform))) {\n        if (key === \"-\") {\n            key = \"_\";\n        }\n        else if (key === \"=\") {\n            key = \"+\";\n        }\n    }\n    if ((0,compatibility/* isCtrl */.yl)(event) && event.key.toLowerCase() === key.toLowerCase() && !event.altKey\n        && ((!hasShift && !event.shiftKey) || (hasShift && event.shiftKey))) {\n        return true;\n    }\n    return false;\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/expandMarker.ts\n\n\nvar nextIsNode = function (range) {\n    var startContainer = range.startContainer;\n    if (startContainer.nodeType === 3 && startContainer.nodeValue.length !== range.startOffset) {\n        return false;\n    }\n    var nextNode = startContainer.nextSibling;\n    while (nextNode && nextNode.textContent === \"\") {\n        nextNode = nextNode.nextSibling;\n    }\n    if (!nextNode) {\n        // *em*|**string**\n        var markerElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-ir__marker\");\n        if (markerElement && !markerElement.nextSibling) {\n            var parentNextNode = startContainer.parentElement.parentElement.nextSibling;\n            if (parentNextNode && parentNextNode.nodeType !== 3 &&\n                parentNextNode.classList.contains(\"vditor-ir__node\")) {\n                return parentNextNode;\n            }\n        }\n        return false;\n    }\n    else if (nextNode && nextNode.nodeType !== 3 && nextNode.classList.contains(\"vditor-ir__node\") &&\n        !nextNode.getAttribute(\"data-block\")) {\n        // test|*em*\n        return nextNode;\n    }\n    return false;\n};\nvar previousIsNode = function (range) {\n    var startContainer = range.startContainer;\n    var previousNode = startContainer.previousSibling;\n    if (startContainer.nodeType === 3 && range.startOffset === 0 && previousNode && previousNode.nodeType !== 3 &&\n        // *em*|text\n        previousNode.classList.contains(\"vditor-ir__node\") && !previousNode.getAttribute(\"data-block\")) {\n        return previousNode;\n    }\n    return false;\n};\nvar expandMarker = function (range, vditor) {\n    vditor.ir.element.querySelectorAll(\".vditor-ir__node--expand\").forEach(function (item) {\n        item.classList.remove(\"vditor-ir__node--expand\");\n    });\n    var nodeElement = (0,hasClosest/* hasTopClosestByClassName */.JQ)(range.startContainer, \"vditor-ir__node\");\n    var nodeElementEnd = !range.collapsed && (0,hasClosest/* hasTopClosestByClassName */.JQ)(range.endContainer, \"vditor-ir__node\");\n    // 选中文本为同一个 nodeElement 内时，需要展开\n    if (!range.collapsed && (!nodeElement || nodeElement !== nodeElementEnd)) {\n        return;\n    }\n    if (nodeElement) {\n        nodeElement.classList.add(\"vditor-ir__node--expand\");\n        nodeElement.classList.remove(\"vditor-ir__node--hidden\");\n        // https://github.com/Vanessa219/vditor/issues/615 safari中光标位置跳动\n        (0,selection/* setSelectionFocus */.Hc)(range);\n    }\n    var nextNode = nextIsNode(range);\n    if (nextNode) {\n        nextNode.classList.add(\"vditor-ir__node--expand\");\n        nextNode.classList.remove(\"vditor-ir__node--hidden\");\n        return;\n    }\n    var previousNode = previousIsNode(range);\n    if (previousNode) {\n        previousNode.classList.add(\"vditor-ir__node--expand\");\n        previousNode.classList.remove(\"vditor-ir__node--hidden\");\n        return;\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/processKeydown.ts\n\n\n\n\n\n\n\n\n\n\n\nvar processKeydown = function (vditor, event) {\n    vditor.ir.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    // 添加第一次记录 undo 的光标\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (!fixGSKeyBackspace(event, vditor, startContainer)) {\n        return false;\n    }\n    fixCJKPosition(range, vditor, event);\n    fixHR(range);\n    // 仅处理以下快捷键操作\n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\" && event.key !== \"Delete\") {\n        return false;\n    }\n    // 斜体、粗体、内联代码块中换行\n    var newlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-newline\", \"1\");\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && event.key === \"Enter\" && newlineElement\n        && range.startOffset < newlineElement.textContent.length) {\n        var beforeMarkerElement = newlineElement.previousElementSibling;\n        if (beforeMarkerElement) {\n            range.insertNode(document.createTextNode(beforeMarkerElement.textContent));\n            range.collapse(false);\n        }\n        var afterMarkerElement = newlineElement.nextSibling;\n        if (afterMarkerElement) {\n            range.insertNode(document.createTextNode(afterMarkerElement.textContent));\n            range.collapse(true);\n        }\n    }\n    var pElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"P\");\n    // md 处理\n    if (fixMarkdown(event, vditor, pElement, range)) {\n        return true;\n    }\n    // li\n    if (fixList(range, vditor, pElement, event)) {\n        return true;\n    }\n    // blockquote\n    if (fixBlockquote(vditor, range, event, pElement)) {\n        return true;\n    }\n    // 代码块\n    var preRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-ir__marker--pre\");\n    if (preRenderElement && preRenderElement.tagName === \"PRE\") {\n        var codeRenderElement = preRenderElement.firstChild;\n        if (fixCodeBlock(vditor, event, preRenderElement, range)) {\n            return true;\n        }\n        // 数学公式上无元素，按上或左将添加新块\n        if ((codeRenderElement.getAttribute(\"data-type\") === \"math-block\"\n            || codeRenderElement.getAttribute(\"data-type\") === \"html-block\") &&\n            insertBeforeBlock(vditor, event, range, codeRenderElement, preRenderElement.parentElement)) {\n            return true;\n        }\n        // 代码块下无元素或者为代码块/table 元素，添加空块\n        if (insertAfterBlock(vditor, event, range, codeRenderElement, preRenderElement.parentElement)) {\n            return true;\n        }\n    }\n    // 代码块语言\n    var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-info\");\n    if (preBeforeElement) {\n        if (event.key === \"Enter\" || event.key === \"Tab\") {\n            range.selectNodeContents(preBeforeElement.nextElementSibling.firstChild);\n            range.collapse(true);\n            event.preventDefault();\n            hidePanel(vditor, [\"hint\"]);\n            return true;\n        }\n        if (event.key === \"Backspace\") {\n            var start = (0,selection/* getSelectPosition */.im)(preBeforeElement, vditor.ir.element).start;\n            if (start === 1) { // 删除零宽空格\n                range.setStart(startContainer, 0);\n            }\n            if (start === 2) { // 删除时清空自动补全语言\n                vditor.hint.recentLanguage = \"\";\n            }\n        }\n        if (insertBeforeBlock(vditor, event, range, preBeforeElement, preBeforeElement.parentElement)) {\n            // 上无元素，按上或左将添加新块\n            hidePanel(vditor, [\"hint\"]);\n            return true;\n        }\n    }\n    // table\n    var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n    if (event.key.indexOf(\"Arrow\") > -1 && cellElement) {\n        var tableElement = isFirstCell(cellElement);\n        if (tableElement && insertBeforeBlock(vditor, event, range, cellElement, tableElement)) {\n            return true;\n        }\n        var table2Element = isLastCell(cellElement);\n        if (table2Element && insertAfterBlock(vditor, event, range, cellElement, table2Element)) {\n            return true;\n        }\n    }\n    if (fixTable(vditor, event, range)) {\n        return true;\n    }\n    // task list\n    if (fixTask(vditor, range, event)) {\n        return true;\n    }\n    // tab\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(startContainer);\n    if (headingElement) {\n        // enter++: 标题变大\n        if (matchHotKey(\"⌘=\", event)) {\n            var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n            if (headingMarkerElement && headingMarkerElement.textContent.trim().length > 1) {\n                process_processHeading(vditor, headingMarkerElement.textContent.substr(1));\n            }\n            event.preventDefault();\n            return true;\n        }\n        // enter++: 标题变小\n        if (matchHotKey(\"⌘-\", event)) {\n            var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n            if (headingMarkerElement && headingMarkerElement.textContent.trim().length < 6) {\n                process_processHeading(vditor, headingMarkerElement.textContent.trim() + \"# \");\n            }\n            event.preventDefault();\n            return true;\n        }\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\") {\n        if (fixDelete(vditor, range, event, pElement)) {\n            return true;\n        }\n        if (blockElement && blockElement.previousElementSibling\n            && blockElement.tagName !== \"UL\" && blockElement.tagName !== \"OL\"\n            && (blockElement.previousElementSibling.getAttribute(\"data-type\") === \"code-block\" ||\n                blockElement.previousElementSibling.getAttribute(\"data-type\") === \"math-block\")) {\n            var rangeStart = (0,selection/* getSelectPosition */.im)(blockElement, vditor.ir.element, range).start;\n            if (rangeStart === 0 || (rangeStart === 1 && blockElement.innerText.startsWith(constants/* Constants.ZWSP */.g.ZWSP))) {\n                // 当前块删除后光标落于代码渲染块上，当前块会被删除，因此需要阻止事件，不能和 keyup 中的代码块处理合并\n                range.selectNodeContents(blockElement.previousElementSibling.querySelector(\".vditor-ir__marker--pre code\"));\n                range.collapse(false);\n                expandMarker(range, vditor);\n                if (blockElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                    // 当前块为空且不是最后一个时，需要删除\n                    blockElement.remove();\n                    process_processAfterRender(vditor);\n                }\n                event.preventDefault();\n                return true;\n            }\n        }\n        // 光标位于标题前，marker 后\n        if (headingElement) {\n            var headingLength = headingElement.firstElementChild.textContent.length;\n            if ((0,selection/* getSelectPosition */.im)(headingElement, vditor.ir.element).start === headingLength) {\n                range.setStart(headingElement.firstElementChild.firstChild, headingLength - 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n        }\n    }\n    if ((event.key === \"ArrowUp\" || event.key === \"ArrowDown\") && blockElement) {\n        // https://github.com/Vanessa219/vditor/issues/358\n        blockElement.querySelectorAll(\".vditor-ir__node\").forEach(function (item) {\n            if (!item.contains(startContainer)) {\n                item.classList.add(\"vditor-ir__node--hidden\");\n            }\n        });\n        if (fixFirefoxArrowUpTable(event, blockElement, range)) {\n            return true;\n        }\n    }\n    fixCursorDownInlineMath(range, event.key);\n    if (blockElement && keydownToc(blockElement, vditor, event, range)) {\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\n\n// EXTERNAL MODULE: ./src/ts/preview/image.ts\nvar preview_image = __webpack_require__(264);\n;// CONCATENATED MODULE: ./src/ts/sv/inputEvent.ts\n\n\n\n\nvar inputEvent = function (vditor, event) {\n    var _a;\n    var range = getSelection().getRangeAt(0).cloneRange();\n    var startContainer = range.startContainer;\n    if (range.startContainer.nodeType !== 3 && range.startContainer.tagName === \"DIV\") {\n        startContainer = range.startContainer.childNodes[range.startOffset - 1];\n    }\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-block\", \"0\");\n    // 不调用 lute 解析\n    if (blockElement && event && (event.inputType === \"deleteContentBackward\" || event.data === \" \")) {\n        // 开始可以输入空格\n        var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element, range).start;\n        var startSpace = true;\n        for (var i = startOffset - 1; \n        // 软换行后有空格\n        i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n            if (blockElement.textContent.charAt(i) !== \" \" &&\n                // 多个 tab 前删除不形成代码块 https://github.com/Vanessa219/vditor/issues/162 1\n                blockElement.textContent.charAt(i) !== \"\\t\") {\n                startSpace = false;\n                break;\n            }\n        }\n        if (startOffset === 0) {\n            startSpace = false;\n        }\n        if (startSpace) {\n            processAfterRender(vditor);\n            return;\n        }\n        if (event.inputType === \"deleteContentBackward\") {\n            // https://github.com/Vanessa219/vditor/issues/584 代码块 marker 删除\n            var codeBlockMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-open-marker\") ||\n                (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-close-marker\");\n            if (codeBlockMarkerElement) {\n                if (codeBlockMarkerElement.getAttribute(\"data-type\") === \"code-block-close-marker\") {\n                    var openMarkerElement = getSideByType(startContainer, \"code-block-open-marker\");\n                    if (openMarkerElement) {\n                        openMarkerElement.textContent = codeBlockMarkerElement.textContent;\n                        processAfterRender(vditor);\n                        return;\n                    }\n                }\n                if (codeBlockMarkerElement.getAttribute(\"data-type\") === \"code-block-open-marker\") {\n                    var openMarkerElement = getSideByType(startContainer, \"code-block-close-marker\", false);\n                    if (openMarkerElement) {\n                        openMarkerElement.textContent = codeBlockMarkerElement.textContent;\n                        processAfterRender(vditor);\n                        return;\n                    }\n                }\n            }\n            // https://github.com/Vanessa219/vditor/issues/877 数学公式输入删除生成节点\n            var mathBlockMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"math-block-open-marker\");\n            if (mathBlockMarkerElement) {\n                var mathBlockCloseElement = mathBlockMarkerElement.nextElementSibling.nextElementSibling;\n                if (mathBlockCloseElement && mathBlockCloseElement.getAttribute(\"data-type\") === \"math-block-close-marker\") {\n                    mathBlockCloseElement.remove();\n                    processAfterRender(vditor);\n                }\n                return;\n            }\n            blockElement.querySelectorAll('[data-type=\"code-block-open-marker\"]').forEach(function (item) {\n                if (item.textContent.length === 1) {\n                    item.remove();\n                }\n            });\n            blockElement.querySelectorAll('[data-type=\"code-block-close-marker\"]').forEach(function (item) {\n                if (item.textContent.length === 1) {\n                    item.remove();\n                }\n            });\n            // 标题删除\n            var headingElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"heading-marker\");\n            if (headingElement && headingElement.textContent.indexOf(\"#\") === -1) {\n                processAfterRender(vditor);\n                return;\n            }\n        }\n        // 删除或空格不解析，否则会 format 回去\n        if ((event.data === \" \" || event.inputType === \"deleteContentBackward\") &&\n            ((0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"padding\") // 场景：b 前进行删除 [> 1. a\\n>   b]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"li-marker\") // 场景：删除最后一个字符 [* 1\\n* ]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"task-marker\") // 场景：删除最后一个字符 [* [ ] ]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"blockquote-marker\") // 场景：删除最后一个字符 [> ]\n            )) {\n            processAfterRender(vditor);\n            return;\n        }\n    }\n    if (blockElement && blockElement.textContent.trimRight() === \"$$\") {\n        // 内联数学公式\n        processAfterRender(vditor);\n        return;\n    }\n    if (!blockElement) {\n        blockElement = vditor.sv.element;\n    }\n    if (((_a = blockElement.firstElementChild) === null || _a === void 0 ? void 0 : _a.getAttribute(\"data-type\")) === \"link-ref-defs-block\") {\n        // 修改链接引用\n        blockElement = vditor.sv.element;\n    }\n    if ((0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"footnotes-link\")) {\n        // 修改脚注角标\n        blockElement = vditor.sv.element;\n    }\n    // 添加光标位置\n    if (blockElement.textContent.indexOf(Lute.Caret) === -1) {\n        // 点击工具栏会插入 Caret\n        range.insertNode(document.createTextNode(Lute.Caret));\n    }\n    // 清除浏览器自带的样式\n    blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n        item.removeAttribute(\"style\");\n    });\n    blockElement.querySelectorAll(\"font\").forEach(function (item) {\n        item.outerHTML = item.innerHTML;\n    });\n    var html = blockElement.textContent;\n    var isSVElement = blockElement.isEqualNode(vditor.sv.element);\n    if (isSVElement) {\n        html = blockElement.textContent;\n    }\n    else {\n        // 添加前一个块元素\n        if (blockElement.previousElementSibling) {\n            html = blockElement.previousElementSibling.textContent + html;\n            blockElement.previousElementSibling.remove();\n        }\n        if (blockElement.previousElementSibling && html.indexOf(\"---\\n\") === 0) {\n            // 确认 yaml-front 是否为首行\n            html = blockElement.previousElementSibling.textContent + html;\n            blockElement.previousElementSibling.remove();\n        }\n        // 添加链接引用\n        vditor.sv.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item, index) {\n            if (index === 0 && item && !blockElement.isEqualNode(item.parentElement)) {\n                html += \"\\n\" + item.parentElement.textContent;\n                item.parentElement.remove();\n            }\n        });\n        // 添加脚注\n        vditor.sv.element.querySelectorAll(\"[data-type='footnotes-link']\").forEach(function (item, index) {\n            if (index === 0 && item && !blockElement.isEqualNode(item.parentElement)) {\n                html += \"\\n\" + item.parentElement.textContent;\n                item.parentElement.remove();\n            }\n        });\n    }\n    html = processSpinVditorSVDOM(html, vditor);\n    if (isSVElement) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n    }\n    var firstLinkRefDefElement;\n    var allLinkRefDefsElement = vditor.sv.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n    allLinkRefDefsElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstLinkRefDefElement = item.parentElement;\n        }\n        else {\n            firstLinkRefDefElement.lastElementChild.remove();\n            firstLinkRefDefElement.insertAdjacentHTML(\"beforeend\", \"\" + item.parentElement.innerHTML);\n            item.parentElement.remove();\n        }\n    });\n    if (allLinkRefDefsElement.length > 0) {\n        vditor.sv.element.insertAdjacentElement(\"beforeend\", firstLinkRefDefElement);\n    }\n    // 脚注合并后添加的末尾\n    var firstFootnoteElement;\n    var allFootnoteElement = vditor.sv.element.querySelectorAll(\"[data-type='footnotes-link']\");\n    allFootnoteElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstFootnoteElement = item.parentElement;\n        }\n        else {\n            firstFootnoteElement.lastElementChild.remove();\n            firstFootnoteElement.insertAdjacentHTML(\"beforeend\", \"\" + item.parentElement.innerHTML);\n            item.parentElement.remove();\n        }\n    });\n    if (allFootnoteElement.length > 0) {\n        vditor.sv.element.insertAdjacentElement(\"beforeend\", firstFootnoteElement);\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    scrollCenter(vditor);\n    processAfterRender(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/sv/processKeydown.ts\n\n\n\n\n\n\n\nvar processKeydown_processKeydown = function (vditor, event) {\n    var _a, _b, _c, _d, _e;\n    vditor.sv.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    // 仅处理以下快捷键操作\n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\") {\n        return false;\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (range.startContainer.nodeType !== 3 && range.startContainer.tagName === \"DIV\") {\n        startContainer = range.startContainer.childNodes[range.startOffset - 1];\n    }\n    var textElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"text\");\n    // blockquote\n    var blockquoteMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"blockquote-marker\");\n    if (!blockquoteMarkerElement && range.startOffset === 0 && textElement && textElement.previousElementSibling &&\n        textElement.previousElementSibling.getAttribute(\"data-type\") === \"blockquote-marker\") {\n        blockquoteMarkerElement = textElement.previousElementSibling;\n    }\n    // 回车逐个删除 blockquote marker 标记\n    if (blockquoteMarkerElement) {\n        if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey &&\n            blockquoteMarkerElement.nextElementSibling.textContent.trim() === \"\" &&\n            (0,selection/* getSelectPosition */.im)(blockquoteMarkerElement, vditor.sv.element, range).start ===\n                blockquoteMarkerElement.textContent.length) {\n            if (((_a = blockquoteMarkerElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.getAttribute(\"data-type\")) === \"padding\") {\n                // 列表中存在多行 BQ 时，标记回车需跳出列表\n                blockquoteMarkerElement.previousElementSibling.setAttribute(\"data-action\", \"enter-remove\");\n            }\n            blockquoteMarkerElement.remove();\n            processAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // list item\n    var listMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"li-marker\");\n    var taskMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"task-marker\");\n    var listLastMarkerElement = listMarkerElement;\n    if (!listLastMarkerElement) {\n        if (taskMarkerElement && taskMarkerElement.nextElementSibling.getAttribute(\"data-type\") !== \"task-marker\") {\n            listLastMarkerElement = taskMarkerElement;\n        }\n    }\n    if (!listLastMarkerElement && range.startOffset === 0 && textElement && textElement.previousElementSibling &&\n        (textElement.previousElementSibling.getAttribute(\"data-type\") === \"li-marker\" ||\n            textElement.previousElementSibling.getAttribute(\"data-type\") === \"task-marker\")) {\n        listLastMarkerElement = textElement.previousElementSibling;\n    }\n    if (listLastMarkerElement) {\n        var startIndex = (0,selection/* getSelectPosition */.im)(listLastMarkerElement, vditor.sv.element, range).start;\n        var isTask = listLastMarkerElement.getAttribute(\"data-type\") === \"task-marker\";\n        var listFirstMarkerElement = listLastMarkerElement;\n        if (isTask) {\n            listFirstMarkerElement = listLastMarkerElement.previousElementSibling.previousElementSibling\n                .previousElementSibling;\n        }\n        if (startIndex === listLastMarkerElement.textContent.length) {\n            // 回车清空列表标记符\n            if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey &&\n                listLastMarkerElement.nextElementSibling.textContent.trim() === \"\") {\n                if (((_b = listFirstMarkerElement.previousElementSibling) === null || _b === void 0 ? void 0 : _b.getAttribute(\"data-type\")) === \"padding\") {\n                    listFirstMarkerElement.previousElementSibling.remove();\n                    inputEvent(vditor);\n                }\n                else {\n                    if (isTask) {\n                        listFirstMarkerElement.remove();\n                        listLastMarkerElement.previousElementSibling.previousElementSibling.remove();\n                        listLastMarkerElement.previousElementSibling.remove();\n                    }\n                    listLastMarkerElement.nextElementSibling.remove();\n                    listLastMarkerElement.remove();\n                    processAfterRender(vditor);\n                }\n                event.preventDefault();\n                return true;\n            }\n            // 第一个 marker 后 tab 进行缩进\n            if (event.key === \"Tab\") {\n                listFirstMarkerElement.insertAdjacentHTML(\"beforebegin\", \"<span data-type=\\\"padding\\\">\" + listFirstMarkerElement.textContent.replace(/\\S/g, \" \") + \"</span>\");\n                if (/^\\d/.test(listFirstMarkerElement.textContent)) {\n                    listFirstMarkerElement.textContent = listFirstMarkerElement.textContent.replace(/^\\d{1,}/, \"1\");\n                    range.selectNodeContents(listLastMarkerElement.firstChild);\n                    range.collapse(false);\n                }\n                inputEvent(vditor);\n                event.preventDefault();\n                return true;\n            }\n        }\n    }\n    // tab\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-block\", \"0\");\n    var spanElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(startContainer, \"SPAN\");\n    // 回车\n    if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && blockElement) {\n        var isFirst = false;\n        var newLineMatch = blockElement.textContent.match(/^\\n+/);\n        if ((0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element).start <= (newLineMatch ? newLineMatch[0].length : 0)) {\n            // 允许段落开始换行\n            isFirst = true;\n        }\n        var newLineText = \"\\n\";\n        if (spanElement) {\n            if (((_c = spanElement.previousElementSibling) === null || _c === void 0 ? void 0 : _c.getAttribute(\"data-action\")) === \"enter-remove\") {\n                // https://github.com/Vanessa219/vditor/issues/596\n                spanElement.previousElementSibling.remove();\n                processAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                newLineText += processPreviousMarkers(spanElement);\n            }\n        }\n        range.insertNode(document.createTextNode(newLineText));\n        range.collapse(false);\n        if (blockElement && blockElement.textContent.trim() !== \"\" && !isFirst) {\n            inputEvent(vditor);\n        }\n        else {\n            processAfterRender(vditor);\n        }\n        event.preventDefault();\n        return true;\n    }\n    // 删除后光标前有 newline 的处理\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey) {\n        if (spanElement && ((_d = spanElement.previousElementSibling) === null || _d === void 0 ? void 0 : _d.getAttribute(\"data-type\")) === \"newline\" &&\n            (0,selection/* getSelectPosition */.im)(spanElement, vditor.sv.element, range).start === 1 &&\n            // 飘号的处理需在 inputEvent 中，否则上下飘号对不齐\n            spanElement.getAttribute(\"data-type\").indexOf(\"code-block-\") === -1) {\n            // 光标在每一行的第一个字符后\n            range.setStart(spanElement, 0);\n            range.extractContents();\n            if (spanElement.textContent.trim() !== \"\") {\n                inputEvent(vditor);\n            }\n            else {\n                processAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // 每一段第一个字符前\n        if (blockElement && (0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element, range).start === 0 &&\n            blockElement.previousElementSibling) {\n            range.extractContents();\n            var previousLastElement = blockElement.previousElementSibling.lastElementChild;\n            if (previousLastElement.getAttribute(\"data-type\") === \"newline\") {\n                previousLastElement.remove();\n                previousLastElement = blockElement.previousElementSibling.lastElementChild;\n            }\n            // 场景：末尾无法删除 [```\\ntext\\n```\\n\\n]\n            if (previousLastElement.getAttribute(\"data-type\") !== \"newline\") {\n                previousLastElement.insertAdjacentHTML(\"afterend\", blockElement.innerHTML);\n                blockElement.remove();\n            }\n            if (blockElement.textContent.trim() !== \"\" && !((_e = blockElement.previousElementSibling) === null || _e === void 0 ? void 0 : _e.querySelector('[data-type=\"code-block-open-marker\"]'))) {\n                inputEvent(vditor);\n            }\n            else {\n                if (previousLastElement.getAttribute(\"data-type\") !== \"newline\") {\n                    // https://github.com/Vanessa219/vditor/issues/597\n                    range.selectNodeContents(previousLastElement.lastChild);\n                    range.collapse(false);\n                }\n                processAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\n\n// EXTERNAL MODULE: ./src/ts/ui/setContentTheme.ts\nvar setContentTheme = __webpack_require__(958);\n;// CONCATENATED MODULE: ./src/ts/ui/setTheme.ts\nvar setTheme = function (vditor) {\n    if (vditor.options.theme === \"dark\") {\n        vditor.element.classList.add(\"vditor--dark\");\n    }\n    else {\n        vditor.element.classList.remove(\"vditor--dark\");\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ui/initUI.ts\n\n\n\n\n\nvar initUI = function (vditor) {\n    vditor.element.innerHTML = \"\";\n    vditor.element.classList.add(\"vditor\");\n    setTheme(vditor);\n    (0,setContentTheme/* setContentTheme */.Z)(vditor.options.preview.theme.current, vditor.options.preview.theme.path);\n    if (typeof vditor.options.height === \"number\") {\n        vditor.element.style.height = vditor.options.height + \"px\";\n    }\n    if (typeof vditor.options.minHeight === \"number\") {\n        vditor.element.style.minHeight = vditor.options.minHeight + \"px\";\n    }\n    if (typeof vditor.options.width === \"number\") {\n        vditor.element.style.width = vditor.options.width + \"px\";\n    }\n    else {\n        vditor.element.style.width = vditor.options.width;\n    }\n    vditor.element.appendChild(vditor.toolbar.element);\n    var contentElement = document.createElement(\"div\");\n    contentElement.className = \"vditor-content\";\n    if (vditor.options.outline.position === \"left\") {\n        contentElement.appendChild(vditor.outline.element);\n    }\n    contentElement.appendChild(vditor.wysiwyg.element.parentElement);\n    contentElement.appendChild(vditor.sv.element);\n    contentElement.appendChild(vditor.ir.element.parentElement);\n    contentElement.appendChild(vditor.preview.element);\n    if (vditor.toolbar.elements.devtools) {\n        contentElement.appendChild(vditor.devtools.element);\n    }\n    if (vditor.options.outline.position === \"right\") {\n        vditor.outline.element.classList.add(\"vditor-outline--right\");\n        contentElement.appendChild(vditor.outline.element);\n    }\n    if (vditor.upload) {\n        contentElement.appendChild(vditor.upload.element);\n    }\n    if (vditor.options.resize.enable) {\n        contentElement.appendChild(vditor.resize.element);\n    }\n    contentElement.appendChild(vditor.hint.element);\n    contentElement.appendChild(vditor.tip.element);\n    vditor.element.appendChild(contentElement);\n    if (vditor.toolbar.elements.export) {\n        // for export pdf\n        vditor.element.insertAdjacentHTML(\"beforeend\", '<iframe style=\"width: 100%;height: 0;border: 0\"></iframe>');\n    }\n    setEditMode(vditor, vditor.options.mode, afterRender(vditor, contentElement));\n    document.execCommand(\"DefaultParagraphSeparator\", false, \"p\");\n    if (navigator.userAgent.indexOf(\"iPhone\") > -1 && typeof window.visualViewport !== \"undefined\") {\n        // https://github.com/Vanessa219/vditor/issues/379\n        var pendingUpdate_1 = false;\n        var viewportHandler = function (event) {\n            if (pendingUpdate_1) {\n                return;\n            }\n            pendingUpdate_1 = true;\n            requestAnimationFrame(function () {\n                pendingUpdate_1 = false;\n                var layoutViewport = vditor.toolbar.element;\n                layoutViewport.style.transform = \"none\";\n                if (layoutViewport.getBoundingClientRect().top < 0) {\n                    layoutViewport.style.transform = \"translate(0, \" + -layoutViewport.getBoundingClientRect().top + \"px)\";\n                }\n            });\n        };\n        window.visualViewport.addEventListener(\"scroll\", viewportHandler);\n        window.visualViewport.addEventListener(\"resize\", viewportHandler);\n    }\n};\nvar setPadding = function (vditor) {\n    var minPadding = window.innerWidth <= constants/* Constants.MOBILE_WIDTH */.g.MOBILE_WIDTH ? 10 : 35;\n    if (vditor.wysiwyg.element.parentElement.style.display !== \"none\") {\n        var padding = (vditor.wysiwyg.element.parentElement.clientWidth\n            - vditor.options.preview.maxWidth) / 2;\n        vditor.wysiwyg.element.style.padding = \"10px \" + Math.max(minPadding, padding) + \"px\";\n    }\n    if (vditor.ir.element.parentElement.style.display !== \"none\") {\n        var padding = (vditor.ir.element.parentElement.clientWidth\n            - vditor.options.preview.maxWidth) / 2;\n        vditor.ir.element.style.padding = \"10px \" + Math.max(minPadding, padding) + \"px\";\n    }\n    if (vditor.preview.element.style.display !== \"block\" || vditor.currentMode === \"sv\") {\n        vditor.toolbar.element.style.paddingLeft = Math.max(5, parseInt(vditor[vditor.currentMode].element.style.paddingLeft || \"0\", 10) +\n            (vditor.options.outline.position === \"left\" ? vditor.outline.element.offsetWidth : 0)) + \"px\";\n    }\n};\nvar setTypewriterPosition = function (vditor) {\n    if (!vditor.options.typewriterMode) {\n        return;\n    }\n    var height = window.innerHeight;\n    if (typeof vditor.options.height === \"number\") {\n        height = vditor.options.height;\n        if (typeof vditor.options.minHeight === \"number\") {\n            height = Math.max(height, vditor.options.minHeight);\n        }\n        height = Math.min(window.innerHeight, height);\n    }\n    if (vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        height = window.innerHeight;\n    }\n    // 由于 Firefox padding-bottom bug，只能使用 :after\n    vditor[vditor.currentMode].element.style.setProperty(\"--editor-bottom\", ((height - vditor.toolbar.element.offsetHeight) / 2) + \"px\");\n};\nvar afterRender = function (vditor, contentElement) {\n    setTypewriterPosition(vditor);\n    window.addEventListener(\"resize\", function () {\n        setPadding(vditor);\n        setTypewriterPosition(vditor);\n    });\n    // set default value\n    var initValue = (0,compatibility/* accessLocalStorage */.pK)() && localStorage.getItem(vditor.options.cache.id);\n    if (!vditor.options.cache.enable || !initValue) {\n        if (vditor.options.value) {\n            initValue = vditor.options.value;\n        }\n        else if (vditor.originalInnerHTML) {\n            initValue = vditor.lute.HTML2Md(vditor.originalInnerHTML);\n        }\n        else if (!vditor.options.cache.enable) {\n            initValue = \"\";\n        }\n    }\n    return initValue || \"\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/highlightToolbarIR.ts\n\n\n\n\n\nvar highlightToolbarIR = function (vditor) {\n    clearTimeout(vditor[vditor.currentMode].hlToolbarTimeoutId);\n    vditor[vditor.currentMode].hlToolbarTimeoutId = window.setTimeout(function () {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (!(0,selection/* selectIsEditor */.Gb)(vditor[vditor.currentMode].element)) {\n            return;\n        }\n        removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        var typeElement = range.startContainer;\n        if (range.startContainer.nodeType === 3) {\n            typeElement = range.startContainer.parentElement;\n        }\n        if (typeElement.classList.contains(\"vditor-reset\")) {\n            typeElement = typeElement.childNodes[range.startOffset];\n        }\n        var headingElement = vditor.currentMode === \"sv\" ?\n            (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"heading\") : (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(typeElement);\n        if (headingElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"headings\"]);\n        }\n        var quoteElement = vditor.currentMode === \"sv\" ? (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"blockquote\") :\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\");\n        if (quoteElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"quote\"]);\n        }\n        var strongElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"strong\");\n        if (strongElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"bold\"]);\n        }\n        var emElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"em\");\n        if (emElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"italic\"]);\n        }\n        var sElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"s\");\n        if (sElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"strike\"]);\n        }\n        var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"a\");\n        if (aElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"link\"]);\n        }\n        var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"LI\");\n        if (liElement) {\n            if (liElement.classList.contains(\"vditor-task\")) {\n                setCurrentToolbar(vditor.toolbar.elements, [\"check\"]);\n            }\n            else if (liElement.parentElement.tagName === \"OL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"ordered-list\"]);\n            }\n            else if (liElement.parentElement.tagName === \"UL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"list\"]);\n            }\n            enableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        var codeBlockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"code-block\");\n        if (codeBlockElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"bold\", \"italic\", \"strike\", \"line\", \"quote\",\n                \"list\", \"ordered-list\", \"check\", \"code\", \"inline-code\", \"upload\", \"link\", \"table\", \"record\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"code\"]);\n        }\n        var codeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"code\");\n        if (codeElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"bold\", \"italic\", \"strike\", \"line\", \"quote\",\n                \"list\", \"ordered-list\", \"check\", \"code\", \"upload\", \"link\", \"table\", \"record\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"inline-code\"]);\n        }\n        var tableElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"table\");\n        if (tableElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"list\", \"ordered-list\", \"check\", \"line\",\n                \"quote\", \"code\", \"table\"]);\n        }\n    }, 200);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/afterRenderEvent.ts\n\n\nvar afterRenderEvent = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        vditor.hint.render(vditor);\n    }\n    clearTimeout(vditor.wysiwyg.afterRenderTimeoutId);\n    vditor.wysiwyg.afterRenderTimeoutId = window.setTimeout(function () {\n        if (vditor.wysiwyg.composingLock) {\n            return;\n        }\n        var text = getMarkdown(vditor);\n        if (typeof vditor.options.input === \"function\" && options.enableInput) {\n            vditor.options.input(text);\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter.render(vditor, text);\n        }\n        if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n            localStorage.setItem(vditor.options.cache.id, text);\n            if (vditor.options.cache.after) {\n                vditor.options.cache.after(text);\n            }\n        }\n        if (vditor.devtools) {\n            vditor.devtools.renderEchart(vditor);\n        }\n        if (options.enableAddUndoStack) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/inlineTag.ts\n\n\nvar previoueIsEmptyA = function (node) {\n    var previousNode = node.previousSibling;\n    while (previousNode) {\n        if (previousNode.nodeType !== 3 && previousNode.tagName === \"A\" && !previousNode.previousSibling\n            && previousNode.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && previousNode.nextSibling) {\n            return previousNode;\n        }\n        previousNode = previousNode.previousSibling;\n    }\n    return false;\n};\nvar nextIsCode = function (range) {\n    var nextNode = range.startContainer.nextSibling;\n    while (nextNode && nextNode.textContent === \"\") {\n        nextNode = nextNode.nextSibling;\n    }\n    if (nextNode && nextNode.nodeType !== 3 && (nextNode.tagName === \"CODE\" ||\n        nextNode.getAttribute(\"data-type\") === \"math-inline\" ||\n        nextNode.getAttribute(\"data-type\") === \"html-entity\" ||\n        nextNode.getAttribute(\"data-type\") === \"html-inline\")) {\n        return true;\n    }\n    return false;\n};\nvar getNextHTML = function (node) {\n    var html = \"\";\n    var nextNode = node.nextSibling;\n    while (nextNode) {\n        if (nextNode.nodeType === 3) {\n            html += nextNode.textContent;\n        }\n        else {\n            html += nextNode.outerHTML;\n        }\n        nextNode = nextNode.nextSibling;\n    }\n    return html;\n};\nvar getPreviousHTML = function (node) {\n    var html = \"\";\n    var previousNode = node.previousSibling;\n    while (previousNode) {\n        if (previousNode.nodeType === 3) {\n            html = previousNode.textContent + html;\n        }\n        else {\n            html = previousNode.outerHTML + html;\n        }\n        previousNode = previousNode.previousSibling;\n    }\n    return html;\n};\nvar getRenderElementNextNode = function (blockCodeElement) {\n    var nextNode = blockCodeElement;\n    while (nextNode && !nextNode.nextSibling) {\n        nextNode = nextNode.parentElement;\n    }\n    return nextNode.nextSibling;\n};\nvar splitElement = function (range) {\n    var previousHTML = getPreviousHTML(range.startContainer);\n    var nextHTML = getNextHTML(range.startContainer);\n    var text = range.startContainer.textContent;\n    var offset = range.startOffset;\n    var beforeHTML = \"\";\n    var afterHTML = \"\";\n    if (text.substr(0, offset) !== \"\" && text.substr(0, offset) !== constants/* Constants.ZWSP */.g.ZWSP || previousHTML) {\n        beforeHTML = \"\" + previousHTML + text.substr(0, offset);\n    }\n    if (text.substr(offset) !== \"\" && text.substr(offset) !== constants/* Constants.ZWSP */.g.ZWSP || nextHTML) {\n        afterHTML = \"\" + text.substr(offset) + nextHTML;\n    }\n    return {\n        afterHTML: afterHTML,\n        beforeHTML: beforeHTML,\n    };\n};\nvar modifyPre = function (vditor, range) {\n    // 没有被块元素包裹\n    Array.from(vditor.wysiwyg.element.childNodes).find(function (node) {\n        if (node.nodeType === 3) {\n            var pElement = document.createElement(\"p\");\n            pElement.setAttribute(\"data-block\", \"0\");\n            pElement.textContent = node.textContent;\n            // 为空按下 tab 且 tab = '    ' 时，range.startContainer 不为 node\n            var cloneRangeOffset = range.startContainer.nodeType === 3 ? range.startOffset : node.textContent.length;\n            node.parentNode.insertBefore(pElement, node);\n            node.remove();\n            range.setStart(pElement.firstChild, Math.min(pElement.firstChild.textContent.length, cloneRangeOffset));\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        else if (!node.getAttribute(\"data-block\")) {\n            if (node.tagName === \"P\") {\n                node.remove();\n            }\n            else {\n                if (node.tagName === \"DIV\") {\n                    range.insertNode(document.createElement(\"wbr\"));\n                    // firefox 列表换行产生 div\n                    node.outerHTML = \"<p data-block=\\\"0\\\">\" + node.innerHTML + \"</p>\";\n                }\n                else {\n                    if (node.tagName === \"BR\") {\n                        // firefox 空换行产生 BR\n                        node.outerHTML = \"<p data-block=\\\"0\\\">\" + node.outerHTML + \"<wbr></p>\";\n                    }\n                    else {\n                        range.insertNode(document.createElement(\"wbr\"));\n                        node.outerHTML = \"<p data-block=\\\"0\\\">\" + node.outerHTML + \"</p>\";\n                    }\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n                range = getSelection().getRangeAt(0);\n            }\n            return true;\n        }\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/setHeading.ts\n\n\n\nvar setHeading = function (vditor, tagName) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        blockElement = range.startContainer.childNodes[range.startOffset];\n    }\n    if (!blockElement && vditor.wysiwyg.element.children.length === 0) {\n        blockElement = vditor.wysiwyg.element;\n    }\n    if (blockElement && !blockElement.classList.contains(\"vditor-wysiwyg__block\")) {\n        range.insertNode(document.createElement(\"wbr\"));\n        // Firefox 需要 trim https://github.com/Vanessa219/vditor/issues/207\n        if (blockElement.innerHTML.trim() === \"<wbr>\") {\n            // Firefox 光标对不齐 https://github.com/Vanessa219/vditor/issues/199 1\n            blockElement.innerHTML = \"<wbr><br>\";\n        }\n        if (blockElement.tagName === \"BLOCKQUOTE\" || blockElement.classList.contains(\"vditor-reset\")) {\n            blockElement.innerHTML = \"<\" + tagName + \" data-block=\\\"0\\\">\" + blockElement.innerHTML.trim() + \"</\" + tagName + \">\";\n        }\n        else {\n            blockElement.outerHTML = \"<\" + tagName + \" data-block=\\\"0\\\">\" + blockElement.innerHTML.trim() + \"</\" + tagName + \">\";\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        renderToc(vditor);\n    }\n};\nvar removeHeading = function (vditor) {\n    var range = getSelection().getRangeAt(0);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        blockElement = range.startContainer.childNodes[range.startOffset];\n    }\n    if (blockElement) {\n        range.insertNode(document.createElement(\"wbr\"));\n        blockElement.outerHTML = \"<p data-block=\\\"0\\\">\" + blockElement.innerHTML + \"</p>\";\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n    }\n    vditor.wysiwyg.popover.style.display = \"none\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/showCode.ts\n\n\nvar showCode = function (previewElement, vditor, first) {\n    if (first === void 0) { first = true; }\n    var previousElement = previewElement.previousElementSibling;\n    var range = previousElement.ownerDocument.createRange();\n    if (previousElement.tagName === \"CODE\") {\n        previousElement.style.display = \"inline-block\";\n        if (first) {\n            range.setStart(previousElement.firstChild, 1);\n        }\n        else {\n            range.selectNodeContents(previousElement);\n        }\n    }\n    else {\n        previousElement.style.display = \"block\";\n        if (!previousElement.firstChild.firstChild) {\n            previousElement.firstChild.appendChild(document.createTextNode(\"\"));\n        }\n        range.selectNodeContents(previousElement.firstChild);\n    }\n    if (first) {\n        range.collapse(true);\n    }\n    else {\n        range.collapse(false);\n    }\n    (0,selection/* setSelectionFocus */.Hc)(range);\n    if (previewElement.firstElementChild.classList.contains(\"language-mindmap\")) {\n        return;\n    }\n    scrollCenter(vditor);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/processKeydown.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar wysiwyg_processKeydown_processKeydown = function (vditor, event) {\n    // Chrome firefox 触发 compositionend 机制不一致 https://github.com/Vanessa219/vditor/issues/188\n    vditor.wysiwyg.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    // 添加第一次记录 undo 的光标\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (!fixGSKeyBackspace(event, vditor, startContainer)) {\n        return false;\n    }\n    fixCJKPosition(range, vditor, event);\n    fixHR(range);\n    // 仅处理以下快捷键操作\n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\" && event.key !== \"Delete\") {\n        return false;\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n    var pElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"P\");\n    // md 处理\n    if (fixMarkdown(event, vditor, pElement, range)) {\n        return true;\n    }\n    // li\n    if (fixList(range, vditor, pElement, event)) {\n        return true;\n    }\n    // table\n    if (fixTable(vditor, event, range)) {\n        return true;\n    }\n    // code render\n    var codeRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-wysiwyg__block\");\n    if (codeRenderElement) {\n        // esc: 退出编辑，仅展示渲染\n        if (event.key === \"Escape\" && codeRenderElement.children.length === 2) {\n            vditor.wysiwyg.popover.style.display = \"none\";\n            codeRenderElement.firstElementChild.style.display = \"none\";\n            vditor.wysiwyg.element.blur();\n            event.preventDefault();\n            return true;\n        }\n        // alt+enter: 代码块切换到语言 https://github.com/Vanessa219/vditor/issues/54\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && event.altKey && event.key === \"Enter\" &&\n            codeRenderElement.getAttribute(\"data-type\") === \"code-block\") {\n            var inputElemment = vditor.wysiwyg.popover.querySelector(\".vditor-input\");\n            inputElemment.focus();\n            inputElemment.select();\n            event.preventDefault();\n            return true;\n        }\n        if (codeRenderElement.getAttribute(\"data-block\") === \"0\") {\n            if (fixCodeBlock(vditor, event, codeRenderElement.firstElementChild, range)) {\n                return true;\n            }\n            if (insertAfterBlock(vditor, event, range, codeRenderElement.firstElementChild, codeRenderElement)) {\n                return true;\n            }\n            if (codeRenderElement.getAttribute(\"data-type\") !== \"yaml-front-matter\" &&\n                insertBeforeBlock(vditor, event, range, codeRenderElement.firstElementChild, codeRenderElement)) {\n                return true;\n            }\n        }\n    }\n    // blockquote\n    if (fixBlockquote(vditor, range, event, pElement)) {\n        return true;\n    }\n    // 顶层 blockquote\n    var topBQElement = (0,hasClosest/* hasTopClosestByTag */.E2)(startContainer, \"BLOCKQUOTE\");\n    if (topBQElement) {\n        if (!event.shiftKey && event.altKey && event.key === \"Enter\") {\n            if (!(0,compatibility/* isCtrl */.yl)(event)) {\n                // alt+enter: 跳出多层 blockquote 嵌套之后 https://github.com/Vanessa219/vditor/issues/51\n                range.setStartAfter(topBQElement);\n            }\n            else {\n                // ctrl+alt+enter: 跳出多层 blockquote 嵌套之前\n                range.setStartBefore(topBQElement);\n            }\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            var node = document.createElement(\"p\");\n            node.setAttribute(\"data-block\", \"0\");\n            node.innerHTML = \"\\n\";\n            range.insertNode(node);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            afterRenderEvent(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // h1-h6\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(startContainer);\n    if (headingElement) {\n        if (headingElement.tagName === \"H6\" && startContainer.textContent.length === range.startOffset &&\n            !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Enter\") {\n            // enter: H6 回车解析问题 https://github.com/Vanessa219/vditor/issues/48\n            var pTempElement = document.createElement(\"p\");\n            pTempElement.textContent = \"\\n\";\n            pTempElement.setAttribute(\"data-block\", \"0\");\n            startContainer.parentElement.insertAdjacentElement(\"afterend\", pTempElement);\n            range.setStart(pTempElement, 0);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            afterRenderEvent(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // enter++: 标题变大\n        if (matchHotKey(\"⌘=\", event)) {\n            var index = parseInt(headingElement.tagName.substr(1), 10) - 1;\n            if (index > 0) {\n                setHeading(vditor, \"h\" + index);\n                afterRenderEvent(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // enter++: 标题变小\n        if (matchHotKey(\"⌘-\", event)) {\n            var index = parseInt(headingElement.tagName.substr(1), 10) + 1;\n            if (index < 7) {\n                setHeading(vditor, \"h\" + index);\n                afterRenderEvent(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey\n            && headingElement.textContent.length === 1) {\n            // 删除后变为空\n            removeHeading(vditor);\n        }\n    }\n    // task list\n    if (fixTask(vditor, range, event)) {\n        return true;\n    }\n    // alt+enter\n    if (event.altKey && event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey) {\n        // 切换到链接、链接引用、脚注引用弹出的输入框中\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"A\");\n        var linRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"link-ref\");\n        var footnoteRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"footnotes-ref\");\n        if (aElement || linRefElement || footnoteRefElement ||\n            (headingElement && headingElement.tagName.length === 2)) {\n            var inputElement = vditor.wysiwyg.popover.querySelector(\"input\");\n            inputElement.focus();\n            inputElement.select();\n        }\n    }\n    // 删除有子工具栏的块\n    if (removeBlockElement(vditor, event)) {\n        return true;\n    }\n    // 对有子工具栏的块上移\n    if (matchHotKey(\"⇧⌘U\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"up\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n    // 对有子工具栏的块下移\n    if (matchHotKey(\"⇧⌘D\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"down\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    // shift+enter：软换行，但 table/hr/heading 处理、cell 内换行、block render 换行处理单独写在上面，li & p 使用浏览器默认\n    if (!(0,compatibility/* isCtrl */.yl)(event) && event.shiftKey && !event.altKey && event.key === \"Enter\" &&\n        startContainer.parentElement.tagName !== \"LI\" && startContainer.parentElement.tagName !== \"P\") {\n        if ([\"STRONG\", \"STRIKE\", \"S\", \"I\", \"EM\", \"B\"].includes(startContainer.parentElement.tagName)) {\n            // 行内元素软换行需继续 https://github.com/Vanessa219/vditor/issues/170\n            range.insertNode(document.createTextNode(\"\\n\" + constants/* Constants.ZWSP */.g.ZWSP));\n        }\n        else {\n            range.insertNode(document.createTextNode(\"\\n\"));\n        }\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        afterRenderEvent(vditor);\n        scrollCenter(vditor);\n        event.preventDefault();\n        return true;\n    }\n    // 删除\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\") {\n        if (fixDelete(vditor, range, event, pElement)) {\n            return true;\n        }\n        if (blockElement) {\n            if (blockElement.previousElementSibling\n                && blockElement.previousElementSibling.classList.contains(\"vditor-wysiwyg__block\")\n                && blockElement.previousElementSibling.getAttribute(\"data-block\") === \"0\"\n                // https://github.com/Vanessa219/vditor/issues/946\n                && blockElement.tagName !== \"UL\" && blockElement.tagName !== \"OL\") {\n                var rangeStart = (0,selection/* getSelectPosition */.im)(blockElement, vditor.wysiwyg.element, range).start;\n                if ((rangeStart === 0 && range.startOffset === 0) || // https://github.com/Vanessa219/vditor/issues/894\n                    (rangeStart === 1 && blockElement.innerText.startsWith(constants/* Constants.ZWSP */.g.ZWSP))) {\n                    // 当前块删除后光标落于代码渲染块上，当前块会被删除，因此需要阻止事件，不能和 keyup 中的代码块处理合并\n                    showCode(blockElement.previousElementSibling.lastElementChild, vditor, false);\n                    if (blockElement.innerHTML.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        // 当前块为空且不是最后一个时，需要删除\n                        blockElement.remove();\n                        afterRenderEvent(vditor);\n                    }\n                    event.preventDefault();\n                    return true;\n                }\n            }\n            var rangeStartOffset = range.startOffset;\n            if (range.toString() === \"\" && startContainer.nodeType === 3 &&\n                startContainer.textContent.charAt(rangeStartOffset - 2) === \"\\n\" &&\n                startContainer.textContent.charAt(rangeStartOffset - 1) !== constants/* Constants.ZWSP */.g.ZWSP\n                && [\"STRONG\", \"STRIKE\", \"S\", \"I\", \"EM\", \"B\"].includes(startContainer.parentElement.tagName)) {\n                // 保持行内元素软换行需继续的一致性\n                startContainer.textContent = startContainer.textContent.substring(0, rangeStartOffset - 1) +\n                    constants/* Constants.ZWSP */.g.ZWSP;\n                range.setStart(startContainer, rangeStartOffset);\n                range.collapse(true);\n                afterRenderEvent(vditor);\n                event.preventDefault();\n                return true;\n            }\n            // inline code、math、html 行前零宽字符后进行删除\n            if (startContainer.textContent === constants/* Constants.ZWSP */.g.ZWSP && range.startOffset === 1\n                && !startContainer.previousSibling && nextIsCode(range)) {\n                startContainer.textContent = \"\";\n                // 不能返回，其前面为代码渲染块时需进行以下处理：修正光标位于 inline math/html 前，按下删除按钮 code 中内容会被删除\n            }\n            // 修正光标位于 inline math/html, html-entity 前，按下删除按钮 code 中内容会被删除, 不能返回，还需要进行后续处理\n            blockElement.querySelectorAll(\"span.vditor-wysiwyg__block[data-type='math-inline']\").forEach(function (item) {\n                item.firstElementChild.style.display = \"inline\";\n                item.lastElementChild.style.display = \"none\";\n            });\n            blockElement.querySelectorAll(\"span.vditor-wysiwyg__block[data-type='html-entity']\").forEach(function (item) {\n                item.firstElementChild.style.display = \"inline\";\n                item.lastElementChild.style.display = \"none\";\n            });\n        }\n    }\n    if ((0,compatibility/* isFirefox */.vU)() && range.startOffset === 1 && startContainer.textContent.indexOf(constants/* Constants.ZWSP */.g.ZWSP) > -1 &&\n        startContainer.previousSibling && startContainer.previousSibling.nodeType !== 3 &&\n        startContainer.previousSibling.tagName === \"CODE\" &&\n        (event.key === \"Backspace\" || event.key === \"ArrowLeft\")) {\n        // https://github.com/Vanessa219/vditor/issues/410\n        range.selectNodeContents(startContainer.previousSibling);\n        range.collapse(false);\n        event.preventDefault();\n        return true;\n    }\n    if (fixFirefoxArrowUpTable(event, blockElement, range)) {\n        event.preventDefault();\n        return true;\n    }\n    fixCursorDownInlineMath(range, event.key);\n    if (event.key === \"ArrowDown\") {\n        // 光标位于内联数学公式前，按下键无作用\n        var nextElement = startContainer.nextSibling;\n        if (nextElement && nextElement.nodeType !== 3 && nextElement.getAttribute(\"data-type\") === \"math-inline\") {\n            range.setStartAfter(nextElement);\n        }\n    }\n    if (blockElement && keydownToc(blockElement, vditor, event, range)) {\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar removeBlockElement = function (vditor, event) {\n    // 删除有子工具栏的块\n    if (matchHotKey(\"⇧⌘X\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"remove\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/highlightToolbarWYSIWYG.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar highlightToolbarWYSIWYG = function (vditor) {\n    clearTimeout(vditor.wysiwyg.hlToolbarTimeoutId);\n    vditor.wysiwyg.hlToolbarTimeoutId = window.setTimeout(function () {\n        if (vditor.wysiwyg.element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (!(0,selection/* selectIsEditor */.Gb)(vditor.wysiwyg.element)) {\n            return;\n        }\n        removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        var range = getSelection().getRangeAt(0);\n        var typeElement = range.startContainer;\n        if (range.startContainer.nodeType === 3) {\n            typeElement = range.startContainer.parentElement;\n        }\n        else {\n            typeElement = typeElement.childNodes[range.startOffset >= typeElement.childNodes.length\n                ? typeElement.childNodes.length - 1\n                : range.startOffset];\n        }\n        var footnotesElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"footnotes-block\");\n        if (footnotesElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genClose(footnotesElement, vditor);\n            setPopoverPosition(vditor, footnotesElement);\n            return;\n        }\n        // 工具栏高亮和禁用\n        var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"LI\");\n        if (liElement) {\n            if (liElement.classList.contains(\"vditor-task\")) {\n                setCurrentToolbar(vditor.toolbar.elements, [\"check\"]);\n            }\n            else if (liElement.parentElement.tagName === \"OL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"ordered-list\"]);\n            }\n            else if (liElement.parentElement.tagName === \"UL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"list\"]);\n            }\n            enableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"quote\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"B\") ||\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"STRONG\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"bold\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"I\") ||\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"EM\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"italic\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"STRIKE\") ||\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"S\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"strike\"]);\n        }\n        // comments\n        vditor.wysiwyg.element\n            .querySelectorAll(\".vditor-comment--focus\")\n            .forEach(function (item) {\n            item.classList.remove(\"vditor-comment--focus\");\n        });\n        var commentElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-comment\");\n        if (commentElement) {\n            var ids_1 = commentElement.getAttribute(\"data-cmtids\").split(\" \");\n            if (ids_1.length > 1 && commentElement.nextSibling.isSameNode(commentElement.nextElementSibling)) {\n                var nextIds_1 = commentElement.nextElementSibling\n                    .getAttribute(\"data-cmtids\")\n                    .split(\" \");\n                ids_1.find(function (id) {\n                    if (nextIds_1.includes(id)) {\n                        ids_1 = [id];\n                        return true;\n                    }\n                });\n            }\n            vditor.wysiwyg.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(ids_1[0]) > -1) {\n                    item.classList.add(\"vditor-comment--focus\");\n                }\n            });\n        }\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"A\");\n        if (aElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"link\"]);\n        }\n        var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TABLE\");\n        var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(typeElement);\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"CODE\")) {\n            if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"PRE\")) {\n                disableToolbar(vditor.toolbar.elements, [\n                    \"headings\",\n                    \"bold\",\n                    \"italic\",\n                    \"strike\",\n                    \"line\",\n                    \"quote\",\n                    \"list\",\n                    \"ordered-list\",\n                    \"check\",\n                    \"code\",\n                    \"inline-code\",\n                    \"upload\",\n                    \"link\",\n                    \"table\",\n                    \"record\",\n                ]);\n                setCurrentToolbar(vditor.toolbar.elements, [\"code\"]);\n            }\n            else {\n                disableToolbar(vditor.toolbar.elements, [\n                    \"headings\",\n                    \"bold\",\n                    \"italic\",\n                    \"strike\",\n                    \"line\",\n                    \"quote\",\n                    \"list\",\n                    \"ordered-list\",\n                    \"check\",\n                    \"code\",\n                    \"upload\",\n                    \"link\",\n                    \"table\",\n                    \"record\",\n                ]);\n                setCurrentToolbar(vditor.toolbar.elements, [\"inline-code\"]);\n            }\n        }\n        else if (headingElement) {\n            disableToolbar(vditor.toolbar.elements, [\"bold\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"headings\"]);\n        }\n        else if (tableElement) {\n            disableToolbar(vditor.toolbar.elements, [\"table\"]);\n        }\n        // toc popover\n        var tocElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-toc\");\n        if (tocElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genClose(tocElement, vditor);\n            setPopoverPosition(vditor, tocElement);\n            return;\n        }\n        // quote popover\n        var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(typeElement, \"BLOCKQUOTE\");\n        if (blockquoteElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, blockquoteElement, vditor);\n            genDown(range, blockquoteElement, vditor);\n            genClose(blockquoteElement, vditor);\n            setPopoverPosition(vditor, blockquoteElement);\n        }\n        // list item popover\n        if (liElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, liElement, vditor);\n            genDown(range, liElement, vditor);\n            genClose(liElement, vditor);\n            setPopoverPosition(vditor, liElement);\n        }\n        // table popover\n        if (tableElement) {\n            var lang = vditor.options.lang;\n            var options = vditor.options;\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var updateTable_1 = function () {\n                var oldRow = tableElement.rows.length;\n                var oldColumn = tableElement.rows[0].cells.length;\n                var row = parseInt(input_1.value, 10) || oldRow;\n                var column = parseInt(input2_1.value, 10) || oldColumn;\n                if (row === oldRow && oldColumn === column) {\n                    return;\n                }\n                if (oldColumn !== column) {\n                    var columnDiff = column - oldColumn;\n                    for (var i = 0; i < tableElement.rows.length; i++) {\n                        if (columnDiff > 0) {\n                            for (var j = 0; j < columnDiff; j++) {\n                                if (i === 0) {\n                                    tableElement.rows[i].lastElementChild.insertAdjacentHTML(\"afterend\", \"<th> </th>\");\n                                }\n                                else {\n                                    tableElement.rows[i].lastElementChild.insertAdjacentHTML(\"afterend\", \"<td> </td>\");\n                                }\n                            }\n                        }\n                        else {\n                            for (var k = oldColumn - 1; k >= column; k--) {\n                                tableElement.rows[i].cells[k].remove();\n                            }\n                        }\n                    }\n                }\n                if (oldRow !== row) {\n                    var rowDiff = row - oldRow;\n                    if (rowDiff > 0) {\n                        var rowHTML = \"<tr>\";\n                        for (var m = 0; m < column; m++) {\n                            rowHTML += \"<td> </td>\";\n                        }\n                        for (var l = 0; l < rowDiff; l++) {\n                            if (tableElement.querySelector(\"tbody\")) {\n                                tableElement\n                                    .querySelector(\"tbody\")\n                                    .insertAdjacentHTML(\"beforeend\", rowHTML);\n                            }\n                            else {\n                                tableElement\n                                    .querySelector(\"thead\")\n                                    .insertAdjacentHTML(\"afterend\", rowHTML + \"</tr>\");\n                            }\n                        }\n                    }\n                    else {\n                        for (var m = oldRow - 1; m >= row; m--) {\n                            tableElement.rows[m].remove();\n                            if (tableElement.rows.length === 1) {\n                                tableElement.querySelector(\"tbody\").remove();\n                            }\n                        }\n                    }\n                }\n            };\n            var setAlign_1 = function (type) {\n                setTableAlign(tableElement, type);\n                if (type === \"right\") {\n                    left_1.classList.remove(\"vditor-icon--current\");\n                    center_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.add(\"vditor-icon--current\");\n                }\n                else if (type === \"center\") {\n                    left_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.remove(\"vditor-icon--current\");\n                    center_1.classList.add(\"vditor-icon--current\");\n                }\n                else {\n                    center_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.remove(\"vditor-icon--current\");\n                    left_1.classList.add(\"vditor-icon--current\");\n                }\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                afterRenderEvent(vditor);\n            };\n            var td = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TD\");\n            var th = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TH\");\n            var alignType = \"left\";\n            if (td) {\n                alignType = td.getAttribute(\"align\") || \"left\";\n            }\n            else if (th) {\n                alignType = th.getAttribute(\"align\") || \"center\";\n            }\n            var left_1 = document.createElement(\"button\");\n            left_1.setAttribute(\"type\", \"button\");\n            left_1.setAttribute(\"aria-label\", window.VditorI18n.alignLeft + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘L\") + \">\");\n            left_1.setAttribute(\"data-type\", \"left\");\n            left_1.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-align-left\"></use></svg>';\n            left_1.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                    (alignType === \"left\" ? \" vditor-icon--current\" : \"\");\n            left_1.onclick = function () {\n                setAlign_1(\"left\");\n            };\n            var center_1 = document.createElement(\"button\");\n            center_1.setAttribute(\"type\", \"button\");\n            center_1.setAttribute(\"aria-label\", window.VditorI18n.alignCenter + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘C\") + \">\");\n            center_1.setAttribute(\"data-type\", \"center\");\n            center_1.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-align-center\"></use></svg>';\n            center_1.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                    (alignType === \"center\" ? \" vditor-icon--current\" : \"\");\n            center_1.onclick = function () {\n                setAlign_1(\"center\");\n            };\n            var right_1 = document.createElement(\"button\");\n            right_1.setAttribute(\"type\", \"button\");\n            right_1.setAttribute(\"aria-label\", window.VditorI18n.alignRight + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘R\") + \">\");\n            right_1.setAttribute(\"data-type\", \"right\");\n            right_1.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-align-right\"></use></svg>';\n            right_1.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                    (alignType === \"right\" ? \" vditor-icon--current\" : \"\");\n            right_1.onclick = function () {\n                setAlign_1(\"right\");\n            };\n            var insertRowElement = document.createElement(\"button\");\n            insertRowElement.setAttribute(\"type\", \"button\");\n            insertRowElement.setAttribute(\"aria-label\", window.VditorI18n.insertRowBelow + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌘=\") + \">\");\n            insertRowElement.setAttribute(\"data-type\", \"insertRow\");\n            insertRowElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-row\"></use></svg>';\n            insertRowElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertRowElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertRow(vditor, range, cellElement);\n                }\n            };\n            var insertRowBElement = document.createElement(\"button\");\n            insertRowBElement.setAttribute(\"type\", \"button\");\n            insertRowBElement.setAttribute(\"aria-label\", window.VditorI18n.insertRowAbove + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘F\") + \">\");\n            insertRowBElement.setAttribute(\"data-type\", \"insertRow\");\n            insertRowBElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-rowb\"></use></svg>';\n            insertRowBElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertRowBElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertRowAbove(vditor, range, cellElement);\n                }\n            };\n            var insertColumnElement = document.createElement(\"button\");\n            insertColumnElement.setAttribute(\"type\", \"button\");\n            insertColumnElement.setAttribute(\"aria-label\", window.VditorI18n.insertColumnRight + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘=\") + \">\");\n            insertColumnElement.setAttribute(\"data-type\", \"insertColumn\");\n            insertColumnElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-column\"></use></svg>';\n            insertColumnElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertColumnElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertColumn(vditor, tableElement, cellElement);\n                }\n            };\n            var insertColumnBElement = document.createElement(\"button\");\n            insertColumnBElement.setAttribute(\"type\", \"button\");\n            insertColumnBElement.setAttribute(\"aria-label\", window.VditorI18n.insertColumnLeft + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘G\") + \">\");\n            insertColumnBElement.setAttribute(\"data-type\", \"insertColumn\");\n            insertColumnBElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-columnb\"></use></svg>';\n            insertColumnBElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertColumnBElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertColumn(vditor, tableElement, cellElement, \"beforebegin\");\n                }\n            };\n            var deleteRowElement = document.createElement(\"button\");\n            deleteRowElement.setAttribute(\"type\", \"button\");\n            deleteRowElement.setAttribute(\"aria-label\", window.VditorI18n[\"delete-row\"] + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌘-\") + \">\");\n            deleteRowElement.setAttribute(\"data-type\", \"deleteRow\");\n            deleteRowElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-delete-row\"></use></svg>';\n            deleteRowElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            deleteRowElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    deleteRow(vditor, range, cellElement);\n                }\n            };\n            var deleteColumnElement = document.createElement(\"button\");\n            deleteColumnElement.setAttribute(\"type\", \"button\");\n            deleteColumnElement.setAttribute(\"aria-label\", window.VditorI18n[\"delete-column\"] + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘-\") + \">\");\n            deleteColumnElement.setAttribute(\"data-type\", \"deleteColumn\");\n            deleteColumnElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-delete-column\"></use></svg>';\n            deleteColumnElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            deleteColumnElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    deleteColumn(vditor, range, tableElement, cellElement);\n                }\n            };\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", window.VditorI18n.row);\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_1 = document.createElement(\"input\");\n            inputWrap.appendChild(input_1);\n            input_1.type = \"number\";\n            input_1.min = \"1\";\n            input_1.className = \"vditor-input\";\n            input_1.style.width = \"42px\";\n            input_1.style.textAlign = \"center\";\n            input_1.setAttribute(\"placeholder\", window.VditorI18n.row);\n            input_1.value = tableElement.rows.length.toString();\n            input_1.oninput = function () {\n                updateTable_1();\n            };\n            input_1.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (event.key === \"Tab\") {\n                    input2_1.focus();\n                    input2_1.select();\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            var input2Wrap = document.createElement(\"span\");\n            input2Wrap.setAttribute(\"aria-label\", window.VditorI18n.column);\n            input2Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input2_1 = document.createElement(\"input\");\n            input2Wrap.appendChild(input2_1);\n            input2_1.type = \"number\";\n            input2_1.min = \"1\";\n            input2_1.className = \"vditor-input\";\n            input2_1.style.width = \"42px\";\n            input2_1.style.textAlign = \"center\";\n            input2_1.setAttribute(\"placeholder\", window.VditorI18n.column);\n            input2_1.value = tableElement.rows[0].cells.length.toString();\n            input2_1.oninput = function () {\n                updateTable_1();\n            };\n            input2_1.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (event.key === \"Tab\") {\n                    input_1.focus();\n                    input_1.select();\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            genUp(range, tableElement, vditor);\n            genDown(range, tableElement, vditor);\n            genClose(tableElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", left_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", center_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", right_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertRowBElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertRowElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertColumnBElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertColumnElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", deleteRowElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", deleteColumnElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            vditor.wysiwyg.popover.insertAdjacentHTML(\"beforeend\", \" x \");\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input2Wrap);\n            setPopoverPosition(vditor, tableElement);\n        }\n        // link ref popover\n        var linkRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"link-ref\");\n        if (linkRefElement) {\n            genLinkRefPopover(vditor, linkRefElement);\n        }\n        // footnote popover\n        var footnotesRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"footnotes-ref\");\n        if (footnotesRefElement) {\n            var lang = vditor.options.lang;\n            var options = vditor.options;\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", window.VditorI18n.footnoteRef + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_2 = document.createElement(\"input\");\n            inputWrap.appendChild(input_2);\n            input_2.className = \"vditor-input\";\n            input_2.setAttribute(\"placeholder\", window.VditorI18n.footnoteRef + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            input_2.style.width = \"120px\";\n            input_2.value = footnotesRefElement.getAttribute(\"data-footnotes-label\");\n            input_2.oninput = function () {\n                if (input_2.value.trim() !== \"\") {\n                    footnotesRefElement.setAttribute(\"data-footnotes-label\", input_2.value);\n                }\n            };\n            input_2.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (!(0,compatibility/* isCtrl */.yl)(event) &&\n                    !event.shiftKey &&\n                    event.altKey &&\n                    event.key === \"Enter\") {\n                    range.selectNodeContents(footnotesRefElement);\n                    range.collapse(false);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            genClose(footnotesRefElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            setPopoverPosition(vditor, footnotesRefElement);\n        }\n        var blockRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-wysiwyg__block\");\n        // block popover: math-inline, math-block, html-block, html-inline, code-block, html-entity\n        if (blockRenderElement &&\n            blockRenderElement.getAttribute(\"data-type\").indexOf(\"block\") > -1) {\n            var lang = vditor.options.lang;\n            var options = vditor.options;\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, blockRenderElement, vditor);\n            genDown(range, blockRenderElement, vditor);\n            genClose(blockRenderElement, vditor);\n            if (blockRenderElement.getAttribute(\"data-type\") === \"code-block\") {\n                var languageWrap = document.createElement(\"span\");\n                languageWrap.setAttribute(\"aria-label\", window.VditorI18n.language + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n                languageWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n                var language_1 = document.createElement(\"input\");\n                languageWrap.appendChild(language_1);\n                var codeElement_1 = blockRenderElement.firstElementChild.firstElementChild;\n                language_1.className = \"vditor-input\";\n                language_1.setAttribute(\"placeholder\", window.VditorI18n.language + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n                language_1.value =\n                    codeElement_1.className.indexOf(\"language-\") > -1\n                        ? codeElement_1.className.split(\"-\")[1].split(\" \")[0]\n                        : \"\";\n                language_1.oninput = function () {\n                    if (language_1.value.trim() !== \"\") {\n                        codeElement_1.className = \"language-\" + language_1.value;\n                    }\n                    else {\n                        codeElement_1.className = \"\";\n                        vditor.hint.recentLanguage = \"\";\n                    }\n                    if (blockRenderElement.lastElementChild.classList.contains(\"vditor-wysiwyg__preview\")) {\n                        blockRenderElement.lastElementChild.innerHTML =\n                            blockRenderElement.firstElementChild.innerHTML;\n                        processCodeRender(blockRenderElement.lastElementChild, vditor);\n                    }\n                    afterRenderEvent(vditor);\n                };\n                language_1.onkeydown = function (event) {\n                    if (event.isComposing) {\n                        return;\n                    }\n                    if (removeBlockElement(vditor, event)) {\n                        return;\n                    }\n                    if (event.key === \"Escape\" &&\n                        vditor.hint.element.style.display === \"block\") {\n                        vditor.hint.element.style.display = \"none\";\n                        event.preventDefault();\n                        return;\n                    }\n                    if (!(0,compatibility/* isCtrl */.yl)(event) &&\n                        !event.shiftKey &&\n                        event.altKey &&\n                        event.key === \"Enter\") {\n                        range.setStart(codeElement_1.firstChild, 0);\n                        range.collapse(true);\n                        (0,selection/* setSelectionFocus */.Hc)(range);\n                    }\n                    vditor.hint.select(event, vditor);\n                };\n                language_1.onkeyup = function (event) {\n                    if (event.isComposing ||\n                        event.key === \"Enter\" ||\n                        event.key === \"ArrowUp\" ||\n                        event.key === \"Escape\" ||\n                        event.key === \"ArrowDown\") {\n                        return;\n                    }\n                    var matchLangData = [];\n                    var key = language_1.value.substring(0, language_1.selectionStart);\n                    constants/* Constants.CODE_LANGUAGES.forEach */.g.CODE_LANGUAGES.forEach(function (keyName) {\n                        if (keyName.indexOf(key.toLowerCase()) > -1) {\n                            matchLangData.push({\n                                html: keyName,\n                                value: keyName,\n                            });\n                        }\n                    });\n                    vditor.hint.genHTML(matchLangData, key, vditor);\n                    event.preventDefault();\n                };\n                vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", languageWrap);\n            }\n            setPopoverPosition(vditor, blockRenderElement);\n        }\n        else {\n            if (!blockRenderElement) {\n                vditor.wysiwyg.element\n                    .querySelectorAll(\".vditor-wysiwyg__preview\")\n                    .forEach(function (itemElement) {\n                    var previousElement = itemElement.previousElementSibling;\n                    previousElement.style.display = \"none\";\n                });\n            }\n            blockRenderElement = undefined;\n        }\n        if (headingElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", \"ID\" + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_3 = document.createElement(\"input\");\n            inputWrap.appendChild(input_3);\n            input_3.className = \"vditor-input\";\n            input_3.setAttribute(\"placeholder\", \"ID\" + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            input_3.style.width = \"120px\";\n            input_3.value = headingElement.getAttribute(\"data-id\") || \"\";\n            input_3.oninput = function () {\n                headingElement.setAttribute(\"data-id\", input_3.value);\n            };\n            input_3.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (!(0,compatibility/* isCtrl */.yl)(event) &&\n                    !event.shiftKey &&\n                    event.altKey &&\n                    event.key === \"Enter\") {\n                    range.selectNodeContents(headingElement);\n                    range.collapse(false);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            genUp(range, headingElement, vditor);\n            genDown(range, headingElement, vditor);\n            genClose(headingElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            setPopoverPosition(vditor, headingElement);\n        }\n        // a popover\n        if (aElement) {\n            genAPopover(vditor, aElement);\n        }\n        if (!blockquoteElement &&\n            !liElement &&\n            !tableElement &&\n            !blockRenderElement &&\n            !aElement &&\n            !linkRefElement &&\n            !footnotesRefElement &&\n            !headingElement &&\n            !tocElement) {\n            var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-block\", \"0\");\n            if (blockElement &&\n                blockElement.parentElement.isEqualNode(vditor.wysiwyg.element)) {\n                vditor.wysiwyg.popover.innerHTML = \"\";\n                genUp(range, blockElement, vditor);\n                genDown(range, blockElement, vditor);\n                genClose(blockElement, vditor);\n                setPopoverPosition(vditor, blockElement);\n            }\n            else {\n                vditor.wysiwyg.popover.style.display = \"none\";\n            }\n        }\n        // 反斜杠特殊处理\n        vditor.wysiwyg.element\n            .querySelectorAll('span[data-type=\"backslash\"] > span')\n            .forEach(function (item) {\n            item.style.display = \"none\";\n        });\n        var backslashElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"backslash\");\n        if (backslashElement) {\n            backslashElement.querySelector(\"span\").style.display = \"inline\";\n        }\n    }, 200);\n};\nvar setPopoverPosition = function (vditor, element) {\n    var targetElement = element;\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(element, \"TABLE\");\n    if (tableElement) {\n        targetElement = tableElement;\n    }\n    vditor.wysiwyg.popover.style.left = \"0\";\n    vditor.wysiwyg.popover.style.display = \"block\";\n    vditor.wysiwyg.popover.style.top =\n        Math.max(-8, targetElement.offsetTop - 21 - vditor.wysiwyg.element.scrollTop) + \"px\";\n    vditor.wysiwyg.popover.style.left =\n        Math.min(targetElement.offsetLeft, vditor.wysiwyg.element.clientWidth - vditor.wysiwyg.popover.clientWidth) + \"px\";\n    vditor.wysiwyg.popover.setAttribute(\"data-top\", (targetElement.offsetTop - 21).toString());\n};\nvar genLinkRefPopover = function (vditor, linkRefElement) {\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateLinkRef = function () {\n        if (input.value.trim() !== \"\") {\n            if (linkRefElement.tagName === \"IMG\") {\n                linkRefElement.setAttribute(\"alt\", input.value);\n            }\n            else {\n                linkRefElement.textContent = input.value;\n            }\n        }\n        // data-link-label\n        if (input1.value.trim() !== \"\") {\n            linkRefElement.setAttribute(\"data-link-label\", input1.value);\n        }\n    };\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", window.VditorI18n.textIsNotEmpty);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input = document.createElement(\"input\");\n    inputWrap.appendChild(input);\n    input.className = \"vditor-input\";\n    input.setAttribute(\"placeholder\", window.VditorI18n.textIsNotEmpty);\n    input.style.width = \"120px\";\n    input.value =\n        linkRefElement.getAttribute(\"alt\") || linkRefElement.textContent;\n    input.oninput = function () {\n        updateLinkRef();\n    };\n    input.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, linkRefElement, event, input1);\n    };\n    var input1Wrap = document.createElement(\"span\");\n    input1Wrap.setAttribute(\"aria-label\", window.VditorI18n.linkRef);\n    input1Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input1 = document.createElement(\"input\");\n    input1Wrap.appendChild(input1);\n    input1.className = \"vditor-input\";\n    input1.setAttribute(\"placeholder\", window.VditorI18n.linkRef);\n    input1.value = linkRefElement.getAttribute(\"data-link-label\");\n    input1.oninput = function () {\n        updateLinkRef();\n    };\n    input1.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, linkRefElement, event, input);\n    };\n    genClose(linkRefElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input1Wrap);\n    setPopoverPosition(vditor, linkRefElement);\n};\nvar genUp = function (range, element, vditor) {\n    var previousElement = element.previousElementSibling;\n    if (!previousElement ||\n        (!element.parentElement.isEqualNode(vditor.wysiwyg.element) &&\n            element.tagName !== \"LI\")) {\n        return;\n    }\n    var upElement = document.createElement(\"button\");\n    upElement.setAttribute(\"type\", \"button\");\n    upElement.setAttribute(\"data-type\", \"up\");\n    upElement.setAttribute(\"aria-label\", window.VditorI18n.up + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘U\") + \">\");\n    upElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-up\"></use></svg>';\n    upElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    upElement.onclick = function () {\n        range.insertNode(document.createElement(\"wbr\"));\n        previousElement.insertAdjacentElement(\"beforebegin\", element);\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n        scrollCenter(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", upElement);\n};\nvar genDown = function (range, element, vditor) {\n    var nextElement = element.nextElementSibling;\n    if (!nextElement ||\n        (!element.parentElement.isEqualNode(vditor.wysiwyg.element) &&\n            element.tagName !== \"LI\")) {\n        return;\n    }\n    var downElement = document.createElement(\"button\");\n    downElement.setAttribute(\"type\", \"button\");\n    downElement.setAttribute(\"data-type\", \"down\");\n    downElement.setAttribute(\"aria-label\", window.VditorI18n.down + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘D\") + \">\");\n    downElement.innerHTML =\n        '<svg><use xlink:href=\"#vditor-icon-down\"></use></svg>';\n    downElement.className =\n        \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    downElement.onclick = function () {\n        range.insertNode(document.createElement(\"wbr\"));\n        nextElement.insertAdjacentElement(\"afterend\", element);\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n        scrollCenter(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", downElement);\n};\nvar genClose = function (element, vditor) {\n    var close = document.createElement(\"button\");\n    close.setAttribute(\"type\", \"button\");\n    close.setAttribute(\"data-type\", \"remove\");\n    close.setAttribute(\"aria-label\", window.VditorI18n.remove + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘X\") + \">\");\n    close.innerHTML =\n        '<svg><use xlink:href=\"#vditor-icon-trashcan\"></use></svg>';\n    close.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    close.onclick = function () {\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        range.setStartAfter(element);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        element.remove();\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", close);\n};\nvar linkHotkey = function (vditor, element, event, nextInputElement) {\n    if (event.isComposing) {\n        return;\n    }\n    if (event.key === \"Tab\") {\n        nextInputElement.focus();\n        nextInputElement.select();\n        event.preventDefault();\n        return;\n    }\n    if (!(0,compatibility/* isCtrl */.yl)(event) &&\n        !event.shiftKey &&\n        event.altKey &&\n        event.key === \"Enter\") {\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        // firefox 不会打断 link https://github.com/Vanessa219/vditor/issues/193\n        element.insertAdjacentHTML(\"afterend\", constants/* Constants.ZWSP */.g.ZWSP);\n        range.setStartAfter(element.nextSibling);\n        range.collapse(true);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        event.preventDefault();\n    }\n};\nvar genAPopover = function (vditor, aElement) {\n    var lang = vditor.options.lang;\n    var options = vditor.options;\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateA = function () {\n        if (input.value.trim() !== \"\") {\n            aElement.innerHTML = input.value;\n        }\n        aElement.setAttribute(\"href\", input1.value);\n        aElement.setAttribute(\"title\", input2.value);\n    };\n    aElement.querySelectorAll(\"[data-marker]\").forEach(function (item) {\n        item.removeAttribute(\"data-marker\");\n    });\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", window.VditorI18n.textIsNotEmpty);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input = document.createElement(\"input\");\n    inputWrap.appendChild(input);\n    input.className = \"vditor-input\";\n    input.setAttribute(\"placeholder\", window.VditorI18n.textIsNotEmpty);\n    input.style.width = \"120px\";\n    input.value = aElement.innerHTML || \"\";\n    input.oninput = function () {\n        updateA();\n    };\n    input.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input1);\n    };\n    var input1Wrap = document.createElement(\"span\");\n    input1Wrap.setAttribute(\"aria-label\", window.VditorI18n.link);\n    input1Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input1 = document.createElement(\"input\");\n    input1Wrap.appendChild(input1);\n    input1.className = \"vditor-input\";\n    input1.setAttribute(\"placeholder\", window.VditorI18n.link);\n    input1.value = aElement.getAttribute(\"href\") || \"\";\n    input1.oninput = function () {\n        updateA();\n    };\n    input1.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input2);\n    };\n    var input2Wrap = document.createElement(\"span\");\n    input2Wrap.setAttribute(\"aria-label\", window.VditorI18n.tooltipText);\n    input2Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input2 = document.createElement(\"input\");\n    input2Wrap.appendChild(input2);\n    input2.className = \"vditor-input\";\n    input2.setAttribute(\"placeholder\", window.VditorI18n.tooltipText);\n    input2.style.width = \"60px\";\n    input2.value = aElement.getAttribute(\"title\") || \"\";\n    input2.oninput = function () {\n        updateA();\n    };\n    input2.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input);\n    };\n    genClose(aElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input1Wrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input2Wrap);\n    setPopoverPosition(vditor, aElement);\n};\nvar genImagePopover = function (event, vditor) {\n    var imgElement = event.target;\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateImg = function () {\n        imgElement.setAttribute(\"src\", inputElement.value);\n        imgElement.setAttribute(\"alt\", alt.value);\n        imgElement.setAttribute(\"title\", title.value);\n    };\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", window.VditorI18n.imageURL);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var inputElement = document.createElement(\"input\");\n    inputWrap.appendChild(inputElement);\n    inputElement.className = \"vditor-input\";\n    inputElement.setAttribute(\"placeholder\", window.VditorI18n.imageURL);\n    inputElement.value = imgElement.getAttribute(\"src\") || \"\";\n    inputElement.oninput = function () {\n        updateImg();\n    };\n    inputElement.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    var altWrap = document.createElement(\"span\");\n    altWrap.setAttribute(\"aria-label\", window.VditorI18n.alternateText);\n    altWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var alt = document.createElement(\"input\");\n    altWrap.appendChild(alt);\n    alt.className = \"vditor-input\";\n    alt.setAttribute(\"placeholder\", window.VditorI18n.alternateText);\n    alt.style.width = \"52px\";\n    alt.value = imgElement.getAttribute(\"alt\") || \"\";\n    alt.oninput = function () {\n        updateImg();\n    };\n    alt.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    var titleWrap = document.createElement(\"span\");\n    titleWrap.setAttribute(\"aria-label\", window.VditorI18n.title);\n    titleWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var title = document.createElement(\"input\");\n    titleWrap.appendChild(title);\n    title.className = \"vditor-input\";\n    title.setAttribute(\"placeholder\", window.VditorI18n.title);\n    title.value = imgElement.getAttribute(\"title\") || \"\";\n    title.oninput = function () {\n        updateImg();\n    };\n    title.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    genClose(imgElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", altWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", titleWrap);\n    setPopoverPosition(vditor, imgElement);\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/highlightToolbar.ts\n\n\nvar highlightToolbar = function (vditor) {\n    if (vditor.currentMode === \"wysiwyg\") {\n        highlightToolbarWYSIWYG(vditor);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        highlightToolbarIR(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/renderDomByMd.ts\n\n\nvar renderDomByMd = function (vditor, md, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    var editorElement = vditor.wysiwyg.element;\n    editorElement.innerHTML = vditor.lute.Md2VditorDOM(md);\n    editorElement.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\").forEach(function (item) {\n        processCodeRender(item, vditor);\n        item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n    });\n    afterRenderEvent(vditor, options);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/toolbarEvent.ts\n\n\n\n\n\n\n\n\n\nvar cancelBES = function (range, vditor, commandName) {\n    var element = range.startContainer.parentElement;\n    var jump = false;\n    var lastTagName = \"\";\n    var lastEndTagName = \"\";\n    var splitHTML = splitElement(range);\n    var lastBeforeHTML = splitHTML.beforeHTML;\n    var lastAfterHTML = splitHTML.afterHTML;\n    while (element && !jump) {\n        var tagName = element.tagName;\n        if (tagName === \"STRIKE\") {\n            tagName = \"S\";\n        }\n        if (tagName === \"I\") {\n            tagName = \"EM\";\n        }\n        if (tagName === \"B\") {\n            tagName = \"STRONG\";\n        }\n        if (tagName === \"S\" || tagName === \"STRONG\" || tagName === \"EM\") {\n            var insertHTML = \"\";\n            var previousHTML = \"\";\n            var nextHTML = \"\";\n            if (element.parentElement.getAttribute(\"data-block\") !== \"0\") {\n                previousHTML = getPreviousHTML(element);\n                nextHTML = getNextHTML(element);\n            }\n            if (lastBeforeHTML || previousHTML) {\n                insertHTML = previousHTML + \"<\" + tagName + \">\" + lastBeforeHTML + \"</\" + tagName + \">\";\n                lastBeforeHTML = insertHTML;\n            }\n            if ((commandName === \"bold\" && tagName === \"STRONG\") ||\n                (commandName === \"italic\" && tagName === \"EM\") ||\n                (commandName === \"strikeThrough\" && tagName === \"S\")) {\n                // 取消\n                insertHTML += \"\" + lastTagName + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr>\" + lastEndTagName;\n                jump = true;\n            }\n            if (lastAfterHTML || nextHTML) {\n                lastAfterHTML = \"<\" + tagName + \">\" + lastAfterHTML + \"</\" + tagName + \">\" + nextHTML;\n                insertHTML += lastAfterHTML;\n            }\n            if (element.parentElement.getAttribute(\"data-block\") !== \"0\") {\n                element = element.parentElement;\n                element.innerHTML = insertHTML;\n            }\n            else {\n                element.outerHTML = insertHTML;\n                element = element.parentElement;\n            }\n            lastTagName = \"<\" + tagName + \">\" + lastTagName;\n            lastEndTagName = \"</\" + tagName + \">\" + lastEndTagName;\n        }\n        else {\n            jump = true;\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n};\nvar toolbarEvent = function (vditor, actionBtn, event) {\n    if (vditor.wysiwyg.composingLock // Mac Chrome 中韩文结束会出发此事件，导致重复末尾字符 https://github.com/Vanessa219/vditor/issues/188\n        && event instanceof CustomEvent // 点击按钮应忽略输入法 https://github.com/Vanessa219/vditor/issues/473\n    ) {\n        return;\n    }\n    var useHighlight = true;\n    var useRender = true;\n    if (vditor.wysiwyg.element.querySelector(\"wbr\")) {\n        vditor.wysiwyg.element.querySelector(\"wbr\").remove();\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    // 移除\n    if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n        if (commandName === \"strike\") {\n            commandName = \"strikeThrough\";\n        }\n        if (commandName === \"quote\") {\n            var quoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"BLOCKQUOTE\");\n            if (!quoteElement) {\n                quoteElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (quoteElement) {\n                useHighlight = false;\n                actionBtn.classList.remove(\"vditor-menu--current\");\n                range.insertNode(document.createElement(\"wbr\"));\n                quoteElement.outerHTML = quoteElement.innerHTML.trim() === \"\" ?\n                    \"<p data-block=\\\"0\\\">\" + quoteElement.innerHTML + \"</p>\" : quoteElement.innerHTML;\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"inline-code\") {\n            var inlineCodeElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"CODE\");\n            if (!inlineCodeElement) {\n                inlineCodeElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (inlineCodeElement) {\n                inlineCodeElement.outerHTML = inlineCodeElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") + \"<wbr>\";\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"link\") {\n            if (!range.collapsed) {\n                document.execCommand(\"unlink\", false, \"\");\n            }\n            else {\n                range.selectNode(range.startContainer.parentElement);\n                document.execCommand(\"unlink\", false, \"\");\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName);\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n        }\n        else {\n            // bold, italic, strike\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n            if (range.toString() === \"\") {\n                cancelBES(range, vditor, commandName);\n            }\n            else {\n                document.execCommand(commandName, false, \"\");\n            }\n        }\n    }\n    else {\n        // 添加\n        if (vditor.wysiwyg.element.childNodes.length === 0) {\n            vditor.wysiwyg.element.innerHTML = '<p data-block=\"0\"><wbr></p>';\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n        if (commandName === \"quote\") {\n            if (!blockElement) {\n                blockElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (blockElement) {\n                useHighlight = false;\n                actionBtn.classList.add(\"vditor-menu--current\");\n                range.insertNode(document.createElement(\"wbr\"));\n                var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n                // li 中软换行\n                if (liElement && blockElement.contains(liElement)) {\n                    liElement.innerHTML = \"<blockquote data-block=\\\"0\\\">\" + liElement.innerHTML + \"</blockquote>\";\n                }\n                else {\n                    blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\" + blockElement.outerHTML + \"</blockquote>\";\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName, false);\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            useHighlight = false;\n            removeCurrentToolbar(vditor.toolbar.elements, [\"check\", \"list\", \"ordered-list\"]);\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"inline-code\") {\n            if (range.toString() === \"\") {\n                var node = document.createElement(\"code\");\n                node.textContent = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(node);\n                range.setStart(node.firstChild, 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else if (range.startContainer.nodeType === 3) {\n                var node = document.createElement(\"code\");\n                range.surroundContents(node);\n                range.insertNode(node);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"code\") {\n            var node = document.createElement(\"div\");\n            node.className = \"vditor-wysiwyg__block\";\n            node.setAttribute(\"data-type\", \"code-block\");\n            node.setAttribute(\"data-block\", \"0\");\n            node.setAttribute(\"data-marker\", \"```\");\n            if (range.toString() === \"\") {\n                node.innerHTML = \"<pre><code><wbr>\\n</code></pre>\";\n            }\n            else {\n                node.innerHTML = \"<pre><code>\" + range.toString() + \"<wbr></code></pre>\";\n                range.deleteContents();\n            }\n            range.insertNode(node);\n            if (blockElement) {\n                blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            vditor.wysiwyg.element.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\").forEach(function (item) {\n                processCodeRender(item, vditor);\n            });\n            actionBtn.classList.add(\"vditor-menu--disabled\");\n        }\n        else if (commandName === \"link\") {\n            if (range.toString() === \"\") {\n                var aElement = document.createElement(\"a\");\n                aElement.innerText = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(aElement);\n                range.setStart(aElement.firstChild, 1);\n                range.collapse(true);\n                genAPopover(vditor, aElement);\n                var textInputElement = vditor.wysiwyg.popover.querySelector(\"input\");\n                textInputElement.value = \"\";\n                textInputElement.focus();\n                useRender = false;\n            }\n            else {\n                var node = document.createElement(\"a\");\n                node.setAttribute(\"href\", \"\");\n                node.innerHTML = range.toString();\n                range.surroundContents(node);\n                range.insertNode(node);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                genAPopover(vditor, node);\n                var textInputElements = vditor.wysiwyg.popover.querySelectorAll(\"input\");\n                textInputElements[0].value = node.innerText;\n                textInputElements[1].focus();\n            }\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"table\") {\n            var tableHTML_1 = \"<table data-block=\\\"0\\\"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>\";\n            if (range.toString().trim() === \"\") {\n                if (blockElement && blockElement.innerHTML.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                    blockElement.outerHTML = tableHTML_1;\n                }\n                else {\n                    document.execCommand(\"insertHTML\", false, tableHTML_1);\n                }\n                range.selectNode(vditor.wysiwyg.element.querySelector(\"wbr\").previousSibling);\n                vditor.wysiwyg.element.querySelector(\"wbr\").remove();\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                tableHTML_1 = \"<table data-block=\\\"0\\\"><thead><tr>\";\n                var tableText = range.toString().split(\"\\n\");\n                var delimiter_1 = tableText[0].split(\",\").length > tableText[0].split(\"\\t\").length ? \",\" : \"\\t\";\n                tableText.forEach(function (rows, index) {\n                    if (index === 0) {\n                        rows.split(delimiter_1).forEach(function (header, subIndex) {\n                            if (subIndex === 0) {\n                                tableHTML_1 += \"<th>\" + header + \"<wbr></th>\";\n                            }\n                            else {\n                                tableHTML_1 += \"<th>\" + header + \"</th>\";\n                            }\n                        });\n                        tableHTML_1 += \"</tr></thead>\";\n                    }\n                    else {\n                        if (index === 1) {\n                            tableHTML_1 += \"<tbody><tr>\";\n                        }\n                        else {\n                            tableHTML_1 += \"<tr>\";\n                        }\n                        rows.split(delimiter_1).forEach(function (cell) {\n                            tableHTML_1 += \"<td>\" + cell + \"</td>\";\n                        });\n                        tableHTML_1 += \"</tr>\";\n                    }\n                });\n                tableHTML_1 += \"</tbody></table>\";\n                document.execCommand(\"insertHTML\", false, tableHTML_1);\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--disabled\");\n        }\n        else if (commandName === \"line\") {\n            if (blockElement) {\n                var hrHTML = '<hr data-block=\"0\"><p data-block=\"0\"><wbr>\\n</p>';\n                if (blockElement.innerHTML.trim() === \"\") {\n                    blockElement.outerHTML = hrHTML;\n                }\n                else {\n                    blockElement.insertAdjacentHTML(\"afterend\", hrHTML);\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else {\n            // bold, italic, strike\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n            if (commandName === \"strike\") {\n                commandName = \"strikeThrough\";\n            }\n            if (range.toString() === \"\" && (commandName === \"bold\" || commandName === \"italic\" || commandName === \"strikeThrough\")) {\n                var tagName = \"strong\";\n                if (commandName === \"italic\") {\n                    tagName = \"em\";\n                }\n                else if (commandName === \"strikeThrough\") {\n                    tagName = \"s\";\n                }\n                var node = document.createElement(tagName);\n                node.textContent = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(node);\n                if (node.previousSibling && node.previousSibling.textContent === constants/* Constants.ZWSP */.g.ZWSP) {\n                    // 移除多层嵌套中的 zwsp\n                    node.previousSibling.textContent = \"\";\n                }\n                range.setStart(node.firstChild, 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                document.execCommand(commandName, false, \"\");\n            }\n        }\n    }\n    if (useHighlight) {\n        highlightToolbarWYSIWYG(vditor);\n    }\n    if (useRender) {\n        afterRenderEvent(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/MenuItem.ts\n\n\n\n\n\n\nvar MenuItem = /** @class */ (function () {\n    function MenuItem(vditor, menuItem) {\n        var _a;\n        var _this = this;\n        this.element = document.createElement(\"div\");\n        if (menuItem.className) {\n            (_a = this.element.classList).add.apply(_a, menuItem.className.split(\" \"));\n        }\n        var hotkey = menuItem.hotkey ? \" <\" + (0,compatibility/* updateHotkeyTip */.ns)(menuItem.hotkey) + \">\" : \"\";\n        if (menuItem.level === 2) {\n            hotkey = menuItem.hotkey ? \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(menuItem.hotkey) + \"&gt;\" : \"\";\n        }\n        var tip = menuItem.tip ? menuItem.tip + hotkey : \"\" + window.VditorI18n[menuItem.name] + hotkey;\n        var tagName = menuItem.name === \"upload\" ? \"div\" : \"button\";\n        if (menuItem.level === 2) {\n            this.element.innerHTML = \"<\" + tagName + \" data-type=\\\"\" + menuItem.name + \"\\\">\" + tip + \"</\" + tagName + \">\";\n        }\n        else {\n            this.element.classList.add(\"vditor-toolbar__item\");\n            var iconElement = document.createElement(tagName);\n            iconElement.setAttribute(\"data-type\", menuItem.name);\n            iconElement.className = \"vditor-tooltipped vditor-tooltipped__\" + menuItem.tipPosition;\n            iconElement.setAttribute(\"aria-label\", tip);\n            iconElement.innerHTML = menuItem.icon;\n            this.element.appendChild(iconElement);\n        }\n        if (!menuItem.prefix) {\n            return;\n        }\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            if (vditor.currentMode === \"wysiwyg\") {\n                toolbarEvent(vditor, _this.element.children[0], event);\n            }\n            else if (vditor.currentMode === \"ir\") {\n                process_processToolbar(vditor, _this.element.children[0], menuItem.prefix || \"\", menuItem.suffix || \"\");\n            }\n            else {\n                processToolbar(vditor, _this.element.children[0], menuItem.prefix || \"\", menuItem.suffix || \"\");\n            }\n        });\n    }\n    return MenuItem;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/EditMode.ts\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar setEditMode = function (vditor, type, event) {\n    var markdownText;\n    if (typeof event !== \"string\") {\n        hidePanel(vditor, [\"subToolbar\", \"hint\"]);\n        event.preventDefault();\n        markdownText = getMarkdown(vditor);\n    }\n    else {\n        markdownText = event;\n    }\n    if (vditor.currentMode === type && typeof event !== \"string\") {\n        return;\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n    if (vditor.options.preview.mode === \"both\" && type === \"sv\") {\n        vditor.preview.element.style.display = \"block\";\n    }\n    else {\n        vditor.preview.element.style.display = \"none\";\n    }\n    enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n    removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n    disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n    if (type === \"ir\") {\n        hideToolbar(vditor.toolbar.elements, [\"both\"]);\n        showToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.sv.element.style.display = \"none\";\n        vditor.wysiwyg.element.parentElement.style.display = \"none\";\n        vditor.ir.element.parentElement.style.display = \"block\";\n        vditor.lute.SetVditorIR(true);\n        vditor.lute.SetVditorWYSIWYG(false);\n        vditor.lute.SetVditorSV(false);\n        vditor.currentMode = \"ir\";\n        vditor.ir.element.innerHTML = vditor.lute.Md2VditorIRDOM(markdownText);\n        process_processAfterRender(vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        setPadding(vditor);\n        vditor.ir.element.querySelectorAll(\".vditor-ir__preview[data-render='2']\").forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        vditor.ir.element.querySelectorAll(\".vditor-toc\").forEach(function (item) {\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n    }\n    else if (type === \"wysiwyg\") {\n        hideToolbar(vditor.toolbar.elements, [\"both\"]);\n        showToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.sv.element.style.display = \"none\";\n        vditor.wysiwyg.element.parentElement.style.display = \"block\";\n        vditor.ir.element.parentElement.style.display = \"none\";\n        vditor.lute.SetVditorIR(false);\n        vditor.lute.SetVditorWYSIWYG(true);\n        vditor.lute.SetVditorSV(false);\n        vditor.currentMode = \"wysiwyg\";\n        setPadding(vditor);\n        renderDomByMd(vditor, markdownText, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        vditor.wysiwyg.element.querySelectorAll(\".vditor-toc\").forEach(function (item) {\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n        vditor.wysiwyg.popover.style.display = \"none\";\n    }\n    else if (type === \"sv\") {\n        showToolbar(vditor.toolbar.elements, [\"both\"]);\n        hideToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.wysiwyg.element.parentElement.style.display = \"none\";\n        vditor.ir.element.parentElement.style.display = \"none\";\n        if (vditor.options.preview.mode === \"both\") {\n            vditor.sv.element.style.display = \"block\";\n        }\n        else if (vditor.options.preview.mode === \"editor\") {\n            vditor.sv.element.style.display = \"block\";\n        }\n        vditor.lute.SetVditorIR(false);\n        vditor.lute.SetVditorWYSIWYG(false);\n        vditor.lute.SetVditorSV(true);\n        vditor.currentMode = \"sv\";\n        var svHTML = processSpinVditorSVDOM(markdownText, vditor);\n        if (svHTML === \"<div data-block='0'></div>\") {\n            // https://github.com/Vanessa219/vditor/issues/654 SV 模式 Placeholder 显示问题\n            svHTML = \"\";\n        }\n        vditor.sv.element.innerHTML = svHTML;\n        processAfterRender(vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        setPadding(vditor);\n    }\n    vditor.undo.resetIcon(vditor);\n    if (typeof event !== \"string\") {\n        // 初始化不 focus\n        vditor[vditor.currentMode].element.focus();\n        highlightToolbar(vditor);\n    }\n    renderToc(vditor);\n    setTypewriterPosition(vditor);\n    if (vditor.toolbar.elements[\"edit-mode\"]) {\n        vditor.toolbar.elements[\"edit-mode\"].querySelectorAll(\"button\").forEach(function (item) {\n            item.classList.remove(\"vditor-menu--current\");\n        });\n        vditor.toolbar.elements[\"edit-mode\"].querySelector(\"button[data-mode=\\\"\" + vditor.currentMode + \"\\\"]\").classList.add(\"vditor-menu--current\");\n    }\n    vditor.outline.toggle(vditor, vditor.currentMode !== \"sv\" && vditor.options.outline.enable);\n};\nvar EditMode = /** @class */ (function (_super) {\n    __extends(EditMode, _super);\n    function EditMode(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        panelElement.innerHTML = \"<button data-mode=\\\"wysiwyg\\\">\" + window.VditorI18n.wysiwyg + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘7\") + \"></button>\\n<button data-mode=\\\"ir\\\">\" + window.VditorI18n.instantRendering + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘8\") + \"></button>\\n<button data-mode=\\\"sv\\\">\" + window.VditorI18n.splitView + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘9\") + \"></button>\";\n        _this.element.appendChild(panelElement);\n        _this._bindEvent(vditor, panelElement, menuItem);\n        return _this;\n    }\n    EditMode.prototype._bindEvent = function (vditor, panelElement, menuItem) {\n        var actionBtn = this.element.children[0];\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        panelElement.children.item(0).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // wysiwyg\n            setEditMode(vditor, \"wysiwyg\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n        panelElement.children.item(1).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // ir\n            setEditMode(vditor, \"ir\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n        panelElement.children.item(2).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // markdown\n            setEditMode(vditor, \"sv\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n    };\n    return EditMode;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/util/getSelectText.ts\n\nvar getSelectText = function (editor, range) {\n    if ((0,selection/* selectIsEditor */.Gb)(editor, range)) {\n        return getSelection().toString();\n    }\n    return \"\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/editorCommonEvent.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar focusEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"focus\", function () {\n        if (vditor.options.focus) {\n            vditor.options.focus(getMarkdown(vditor));\n        }\n        hidePanel(vditor, [\"subToolbar\"]);\n    });\n};\nvar dblclickEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"dblclick\", function (event) {\n        if (event.target.tagName === \"IMG\") {\n            (0,preview_image/* previewImage */.E)(event.target, vditor.options.lang, vditor.options.theme);\n        }\n    });\n};\nvar blurEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"blur\", function (event) {\n        if (vditor.currentMode === \"ir\") {\n            var expandElement = vditor.ir.element.querySelector(\".vditor-ir__node--expand\");\n            if (expandElement) {\n                expandElement.classList.remove(\"vditor-ir__node--expand\");\n            }\n        }\n        else if (vditor.currentMode === \"wysiwyg\" &&\n            !vditor.wysiwyg.selectPopover.contains(event.relatedTarget)) {\n            vditor.wysiwyg.hideComment();\n        }\n        vditor[vditor.currentMode].range = (0,selection/* getEditorRange */.zh)(vditor);\n        if (vditor.options.blur) {\n            vditor.options.blur(getMarkdown(vditor));\n        }\n    });\n};\nvar dropEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"dragstart\", function (event) {\n        // 选中编辑器中的文字进行拖拽\n        event.dataTransfer.setData(constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR, constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR);\n    });\n    editorElement.addEventListener(\"drop\", function (event) {\n        if (event.dataTransfer.getData(constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR)) {\n            // 编辑器内选中文字拖拽\n            execAfterRender(vditor);\n        }\n        else if (event.dataTransfer.types[0] === \"Files\" || event.dataTransfer.types.includes(\"text/html\")) {\n            // 外部文件拖入编辑器中或者编辑器内选中文字拖拽\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        }\n    });\n};\nvar copyEvent = function (vditor, editorElement, copy) {\n    editorElement.addEventListener(\"copy\", function (event) { return copy(event, vditor); });\n};\nvar cutEvent = function (vditor, editorElement, copy) {\n    editorElement.addEventListener(\"cut\", function (event) {\n        copy(event, vditor);\n        // 获取 comment\n        if (vditor.options.comment.enable && vditor.currentMode === \"wysiwyg\") {\n            vditor.wysiwyg.getComments(vditor);\n        }\n        document.execCommand(\"delete\");\n    });\n};\nvar scrollCenter = function (vditor) {\n    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n        vditor.options.comment.adjustTop(vditor.wysiwyg.getComments(vditor, true));\n    }\n    if (!vditor.options.typewriterMode) {\n        return;\n    }\n    var editorElement = vditor[vditor.currentMode].element;\n    var cursorTop = (0,selection/* getCursorPosition */.Ny)(editorElement).top;\n    if (typeof vditor.options.height === \"string\" && !vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        window.scrollTo(window.scrollX, cursorTop + vditor.element.offsetTop + vditor.toolbar.element.offsetHeight - window.innerHeight / 2 + 10);\n    }\n    if (typeof vditor.options.height === \"number\" || vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        editorElement.scrollTop = cursorTop + editorElement.scrollTop - editorElement.clientHeight / 2 + 10;\n    }\n};\nvar hotkeyEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"keydown\", function (event) {\n        // hint: 上下选择\n        if ((vditor.options.hint.extend.length > 1 || vditor.toolbar.elements.emoji) &&\n            vditor.hint.select(event, vditor)) {\n            return;\n        }\n        // 重置 comment\n        if (vditor.options.comment.enable && vditor.currentMode === \"wysiwyg\" &&\n            (event.key === \"Backspace\" || matchHotKey(\"⌘X\", event))) {\n            vditor.wysiwyg.getComments(vditor);\n        }\n        if (vditor.currentMode === \"sv\") {\n            if (processKeydown_processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        else if (vditor.currentMode === \"wysiwyg\") {\n            if (wysiwyg_processKeydown_processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        else if (vditor.currentMode === \"ir\") {\n            if (processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        if (vditor.options.ctrlEnter && matchHotKey(\"⌘Enter\", event)) {\n            vditor.options.ctrlEnter(getMarkdown(vditor));\n            event.preventDefault();\n            return;\n        }\n        // undo\n        if (matchHotKey(\"⌘Z\", event) && !vditor.toolbar.elements.undo) {\n            vditor.undo.undo(vditor);\n            event.preventDefault();\n            return;\n        }\n        // redo\n        if (matchHotKey(\"⌘Y\", event) && !vditor.toolbar.elements.redo) {\n            vditor.undo.redo(vditor);\n            event.preventDefault();\n            return;\n        }\n        // esc\n        if (event.key === \"Escape\") {\n            if (vditor.hint.element.style.display === \"block\") {\n                vditor.hint.element.style.display = \"none\";\n            }\n            else if (vditor.options.esc && !event.isComposing) {\n                vditor.options.esc(getMarkdown(vditor));\n            }\n            event.preventDefault();\n            return;\n        }\n        // h1 - h6 hotkey\n        if ((0,compatibility/* isCtrl */.yl)(event) && event.altKey && !event.shiftKey && /^Digit[1-6]$/.test(event.code)) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                var tagName = event.code.replace(\"Digit\", \"H\");\n                if ((0,hasClosest/* hasClosestByMatchTag */.lG)(getSelection().getRangeAt(0).startContainer, tagName)) {\n                    removeHeading(vditor);\n                }\n                else {\n                    setHeading(vditor, tagName);\n                }\n                afterRenderEvent(vditor);\n            }\n            else if (vditor.currentMode === \"sv\") {\n                processHeading(vditor, \"#\".repeat(parseInt(event.code.replace(\"Digit\", \"\"), 10)) + \" \");\n            }\n            else if (vditor.currentMode === \"ir\") {\n                process_processHeading(vditor, \"#\".repeat(parseInt(event.code.replace(\"Digit\", \"\"), 10)) + \" \");\n            }\n            event.preventDefault();\n            return true;\n        }\n        // toggle edit mode\n        if ((0,compatibility/* isCtrl */.yl)(event) && event.altKey && !event.shiftKey && /^Digit[7-9]$/.test(event.code)) {\n            if (event.code === \"Digit7\") {\n                setEditMode(vditor, \"wysiwyg\", event);\n            }\n            else if (event.code === \"Digit8\") {\n                setEditMode(vditor, \"ir\", event);\n            }\n            else if (event.code === \"Digit9\") {\n                setEditMode(vditor, \"sv\", event);\n            }\n            return true;\n        }\n        // toolbar action\n        vditor.options.toolbar.find(function (menuItem) {\n            if (!menuItem.hotkey || menuItem.toolbar) {\n                if (menuItem.toolbar) {\n                    var sub = menuItem.toolbar.find(function (subMenuItem) {\n                        if (!subMenuItem.hotkey) {\n                            return false;\n                        }\n                        if (matchHotKey(subMenuItem.hotkey, event)) {\n                            vditor.toolbar.elements[subMenuItem.name].children[0]\n                                .dispatchEvent(new CustomEvent((0,compatibility/* getEventName */.Le)()));\n                            event.preventDefault();\n                            return true;\n                        }\n                    });\n                    return sub ? true : false;\n                }\n                return false;\n            }\n            if (matchHotKey(menuItem.hotkey, event)) {\n                vditor.toolbar.elements[menuItem.name].children[0].dispatchEvent(new CustomEvent((0,compatibility/* getEventName */.Le)()));\n                event.preventDefault();\n                return true;\n            }\n        });\n    });\n};\nvar selectEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"selectstart\", function (event) {\n        editorElement.onmouseup = function () {\n            setTimeout(function () {\n                var selectText = getSelectText(vditor[vditor.currentMode].element);\n                if (selectText.trim()) {\n                    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n                        if (!(0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"footnotes-block\") &&\n                            !(0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"link-ref-defs-block\")) {\n                            vditor.wysiwyg.showComment();\n                        }\n                        else {\n                            vditor.wysiwyg.hideComment();\n                        }\n                    }\n                    if (vditor.options.select) {\n                        vditor.options.select(selectText);\n                    }\n                }\n                else {\n                    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n                        vditor.wysiwyg.hideComment();\n                    }\n                }\n            });\n        };\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/sv/process.ts\n\n\n\n\n\n\n\n\nvar processPaste = function (vditor, text) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    range.extractContents();\n    range.insertNode(document.createTextNode(Lute.Caret));\n    range.insertNode(document.createTextNode(text));\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n    if (!blockElement) {\n        blockElement = vditor.sv.element;\n    }\n    var html = \"<div data-block='0'>\" +\n        vditor.lute.Md2VditorSVDOM(blockElement.textContent).replace(/<span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span><span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span></g, '<span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span><span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span></div><div data-block=\"0\"><') +\n        \"</div>\";\n    if (blockElement.isEqualNode(vditor.sv.element)) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    scrollCenter(vditor);\n};\nvar getSideByType = function (spanNode, type, isPrevious) {\n    if (isPrevious === void 0) { isPrevious = true; }\n    var sideElement = spanNode;\n    if (sideElement.nodeType === 3) {\n        sideElement = sideElement.parentElement;\n    }\n    while (sideElement) {\n        if (sideElement.getAttribute(\"data-type\") === type) {\n            return sideElement;\n        }\n        if (isPrevious) {\n            sideElement = sideElement.previousElementSibling;\n        }\n        else {\n            sideElement = sideElement.nextElementSibling;\n        }\n    }\n    return false;\n};\nvar processSpinVditorSVDOM = function (html, vditor) {\n    log(\"SpinVditorSVDOM\", html, \"argument\", vditor.options.debugger);\n    html = \"<div data-block='0'>\" +\n        vditor.lute.SpinVditorSVDOM(html).replace(/<span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span><span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span></g, '<span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span><span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span></div><div data-block=\"0\"><') +\n        \"</div>\";\n    log(\"SpinVditorSVDOM\", html, \"result\", vditor.options.debugger);\n    return html;\n};\nvar processPreviousMarkers = function (spanElement) {\n    var spanType = spanElement.getAttribute(\"data-type\");\n    var previousElement = spanElement.previousElementSibling;\n    // 有内容的子列表/标题，在其 marker 后换行\n    var markerText = (spanType && spanType !== \"text\" && spanType !== \"table\" && spanType !== \"heading-marker\" &&\n        spanType !== \"newline\" && spanType !== \"yaml-front-matter-open-marker\" && spanType !== \"yaml-front-matter-close-marker\"\n        && spanType !== \"code-block-info\" && spanType !== \"code-block-close-marker\" && spanType !== \"code-block-open-marker\") ?\n        spanElement.textContent : \"\";\n    var hasNL = false;\n    if (spanType === \"newline\") {\n        hasNL = true;\n    }\n    while (previousElement && !hasNL) {\n        var previousType = previousElement.getAttribute(\"data-type\");\n        if (previousType === \"li-marker\" || previousType === \"blockquote-marker\" || previousType === \"task-marker\" ||\n            previousType === \"padding\") {\n            var previousText = previousElement.textContent;\n            if (previousType === \"li-marker\" &&\n                (spanType === \"code-block-open-marker\" || spanType === \"code-block-info\")) {\n                // https://github.com/Vanessa219/vditor/issues/586\n                markerText = previousText.replace(/\\S/g, \" \") + markerText;\n            }\n            else if (spanType === \"code-block-close-marker\" &&\n                previousElement.nextElementSibling.isSameNode(spanElement)) {\n                // https://github.com/Vanessa219/vditor/issues/594\n                var openMarker = getSideByType(spanElement, \"code-block-open-marker\");\n                if (openMarker && openMarker.previousElementSibling) {\n                    previousElement = openMarker.previousElementSibling;\n                    markerText = previousText + markerText;\n                }\n            }\n            else {\n                markerText = previousText + markerText;\n            }\n        }\n        else if (previousType === \"newline\") {\n            hasNL = true;\n        }\n        previousElement = previousElement.previousElementSibling;\n    }\n    return markerText;\n};\nvar processAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        vditor.hint.render(vditor);\n    }\n    vditor.preview.render(vditor);\n    var text = getMarkdown(vditor);\n    if (typeof vditor.options.input === \"function\" && options.enableInput) {\n        vditor.options.input(text);\n    }\n    if (vditor.options.counter.enable) {\n        vditor.counter.render(vditor, text);\n    }\n    if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n        localStorage.setItem(vditor.options.cache.id, text);\n        if (vditor.options.cache.after) {\n            vditor.options.cache.after(text);\n        }\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n    clearTimeout(vditor.sv.processTimeoutId);\n    vditor.sv.processTimeoutId = window.setTimeout(function () {\n        if (options.enableAddUndoStack && !vditor.sv.composingLock) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\nvar processHeading = function (vditor, value) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"SPAN\");\n    if (headingElement && headingElement.textContent.trim() !== \"\") {\n        value = \"\\n\" + value;\n    }\n    range.collapse(true);\n    document.execCommand(\"insertHTML\", false, value);\n};\nvar processToolbar = function (vditor, actionBtn, prefix, suffix) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    // 添加\n    if (vditor.sv.element.childNodes.length === 0) {\n        vditor.sv.element.innerHTML = \"<span data-type=\\\"p\\\" data-block=\\\"0\\\"><span data-type=\\\"text\\\"><wbr></span></span><span data-type=\\\"newline\\\"><br><span style=\\\"display: none\\\">\\n</span></span>\";\n        (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    var spanElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"SPAN\");\n    if (!blockElement) {\n        return;\n    }\n    if (commandName === \"link\") {\n        var html = void 0;\n        if (range.toString() === \"\") {\n            html = \"\" + prefix + Lute.Caret + suffix;\n        }\n        else {\n            html = \"\" + prefix + range.toString() + suffix.replace(\")\", Lute.Caret + \")\");\n        }\n        document.execCommand(\"insertHTML\", false, html);\n        return;\n    }\n    else if (commandName === \"italic\" || commandName === \"bold\" || commandName === \"strike\" ||\n        commandName === \"inline-code\" || commandName === \"code\" || commandName === \"table\" || commandName === \"line\") {\n        var html = void 0;\n        // https://github.com/Vanessa219/vditor/issues/563 代码块不需要后面的 ```\n        if (range.toString() === \"\") {\n            html = \"\" + prefix + Lute.Caret + (commandName === \"code\" ? \"\" : suffix);\n        }\n        else {\n            html = \"\" + prefix + range.toString() + Lute.Caret + (commandName === \"code\" ? \"\" : suffix);\n        }\n        if (commandName === \"table\" || (commandName === \"code\" && spanElement && spanElement.textContent !== \"\")) {\n            html = \"\\n\\n\" + html;\n        }\n        else if (commandName === \"line\") {\n            html = \"\\n\\n\" + prefix + \"\\n\" + Lute.Caret;\n        }\n        document.execCommand(\"insertHTML\", false, html);\n        return;\n    }\n    else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\" ||\n        commandName === \"quote\") {\n        if (spanElement) {\n            var marker = \"* \";\n            if (commandName === \"check\") {\n                marker = \"* [ ] \";\n            }\n            else if (commandName === \"ordered-list\") {\n                marker = \"1. \";\n            }\n            else if (commandName === \"quote\") {\n                marker = \"> \";\n            }\n            var newLine = getSideByType(spanElement, \"newline\");\n            if (newLine) {\n                newLine.insertAdjacentText(\"afterend\", marker);\n            }\n            else {\n                blockElement.insertAdjacentText(\"afterbegin\", marker);\n            }\n            inputEvent(vditor);\n            return;\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    processAfterRender(vditor);\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/getElement.ts\nvar getElement = function (vditor) {\n    switch (vditor.currentMode) {\n        case \"ir\":\n            return vditor.ir.element;\n        case \"wysiwyg\":\n            return vditor.wysiwyg.element;\n        case \"sv\":\n            return vditor.sv.element;\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/setHeaders.ts\nvar setHeaders = function (vditor, xhr) {\n    if (vditor.options.upload.setHeaders) {\n        vditor.options.upload.headers = vditor.options.upload.setHeaders();\n    }\n    if (vditor.options.upload.headers) {\n        Object.keys(vditor.options.upload.headers).forEach(function (key) {\n            xhr.setRequestHeader(key, vditor.options.upload.headers[key]);\n        });\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/index.ts\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\nvar Upload = /** @class */ (function () {\n    function Upload() {\n        this.isUploading = false;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-upload\";\n    }\n    return Upload;\n}());\nvar validateFile = function (vditor, files) {\n    vditor.tip.hide();\n    var uploadFileList = [];\n    var errorTip = \"\";\n    var uploadingStr = \"\";\n    var lang = vditor.options.lang;\n    var options = vditor.options;\n    var _loop_1 = function (iMax, i) {\n        var file = files[i];\n        var validate = true;\n        if (!file.name) {\n            errorTip += \"<li>\" + window.VditorI18n.nameEmpty + \"</li>\";\n            validate = false;\n        }\n        if (file.size > vditor.options.upload.max) {\n            errorTip += \"<li>\" + file.name + \" \" + window.VditorI18n.over + \" \" + vditor.options.upload.max / 1024 / 1024 + \"M</li>\";\n            validate = false;\n        }\n        var lastIndex = file.name.lastIndexOf(\".\");\n        var fileExt = file.name.substr(lastIndex);\n        var filename = vditor.options.upload.filename(file.name.substr(0, lastIndex)) + fileExt;\n        if (vditor.options.upload.accept) {\n            var isAccept = vditor.options.upload.accept.split(\",\").some(function (item) {\n                var type = item.trim();\n                if (type.indexOf(\".\") === 0) {\n                    if (fileExt.toLowerCase() === type.toLowerCase()) {\n                        return true;\n                    }\n                }\n                else {\n                    if (file.type.split(\"/\")[0] === type.split(\"/\")[0]) {\n                        return true;\n                    }\n                }\n                return false;\n            });\n            if (!isAccept) {\n                errorTip += \"<li>\" + file.name + \" \" + window.VditorI18n.fileTypeError + \"</li>\";\n                validate = false;\n            }\n        }\n        if (validate) {\n            uploadFileList.push(file);\n            uploadingStr += \"<li>\" + filename + \" \" + window.VditorI18n.uploading + \"</li>\";\n        }\n    };\n    for (var iMax = files.length, i = 0; i < iMax; i++) {\n        _loop_1(iMax, i);\n    }\n    vditor.tip.show(\"<ul>\" + errorTip + uploadingStr + \"</ul>\");\n    return uploadFileList;\n};\nvar genUploadedLabel = function (responseText, vditor) {\n    var editorElement = getElement(vditor);\n    editorElement.focus();\n    var response = JSON.parse(responseText);\n    var errorTip = \"\";\n    if (response.code === 1) {\n        errorTip = \"\" + response.msg;\n    }\n    if (response.data.errFiles && response.data.errFiles.length > 0) {\n        errorTip = \"<ul><li>\" + errorTip + \"</li>\";\n        response.data.errFiles.forEach(function (data) {\n            var lastIndex = data.lastIndexOf(\".\");\n            var filename = vditor.options.upload.filename(data.substr(0, lastIndex)) + data.substr(lastIndex);\n            errorTip += \"<li>\" + filename + \" \" + window.VditorI18n.uploadError + \"</li>\";\n        });\n        errorTip += \"</ul>\";\n    }\n    if (errorTip) {\n        vditor.tip.show(errorTip);\n    }\n    else {\n        vditor.tip.hide();\n    }\n    var succFileText = \"\";\n    Object.keys(response.data.succMap).forEach(function (key) {\n        var path = response.data.succMap[key];\n        var lastIndex = key.lastIndexOf(\".\");\n        var type = key.substr(lastIndex);\n        var filename = vditor.options.upload.filename(key.substr(0, lastIndex)) + type;\n        type = type.toLowerCase();\n        if (type.indexOf(\".wav\") === 0 || type.indexOf(\".mp3\") === 0 || type.indexOf(\".ogg\") === 0) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<div class=\\\"vditor-wysiwyg__block\\\" data-type=\\\"html-block\\\"\\n data-block=\\\"0\\\"><pre><code>&lt;audio controls=\\\"controls\\\" src=\\\"\" + path + \"\\\"&gt;&lt;/audio&gt;</code></pre>\";\n            }\n            else if (vditor.currentMode === \"ir\") {\n                succFileText += \"<audio controls=\\\"controls\\\" src=\\\"\" + path + \"\\\"></audio>\\n\";\n            }\n            else {\n                succFileText += \"[\" + filename + \"](\" + path + \")\\n\";\n            }\n        }\n        else if (type.indexOf(\".apng\") === 0\n            || type.indexOf(\".bmp\") === 0\n            || type.indexOf(\".gif\") === 0\n            || type.indexOf(\".ico\") === 0 || type.indexOf(\".cur\") === 0\n            || type.indexOf(\".jpg\") === 0 || type.indexOf(\".jpeg\") === 0 || type.indexOf(\".jfif\") === 0 || type.indexOf(\".pjp\") === 0 || type.indexOf(\".pjpeg\") === 0\n            || type.indexOf(\".png\") === 0\n            || type.indexOf(\".svg\") === 0\n            || type.indexOf(\".webp\") === 0) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<img alt=\\\"\" + filename + \"\\\" src=\\\"\" + path + \"\\\">\";\n            }\n            else {\n                succFileText += \"![\" + filename + \"](\" + path + \")\\n\";\n            }\n        }\n        else {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<a href=\\\"\" + path + \"\\\">\" + filename + \"</a>\";\n            }\n            else {\n                succFileText += \"[\" + filename + \"](\" + path + \")\\n\";\n            }\n        }\n    });\n    (0,selection/* setSelectionFocus */.Hc)(vditor.upload.range);\n    document.execCommand(\"insertHTML\", false, succFileText);\n    vditor.upload.range = getSelection().getRangeAt(0).cloneRange();\n};\nvar uploadFiles = function (vditor, files, element) { return __awaiter(void 0, void 0, void 0, function () {\n    var fileList, filesMax, i, fileItem, isValidate, isValidate, editorElement, validateResult, formData, extraData, _i, _a, key, i, iMax, xhr;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                fileList = [];\n                filesMax = vditor.options.upload.multiple === true ? files.length : 1;\n                for (i = 0; i < filesMax; i++) {\n                    fileItem = files[i];\n                    if (fileItem instanceof DataTransferItem) {\n                        fileItem = fileItem.getAsFile();\n                    }\n                    fileList.push(fileItem);\n                }\n                if (vditor.options.upload.handler) {\n                    isValidate = vditor.options.upload.handler(fileList);\n                    if (typeof isValidate === \"string\") {\n                        vditor.tip.show(isValidate);\n                        return [2 /*return*/];\n                    }\n                    return [2 /*return*/];\n                }\n                if (!vditor.options.upload.url || !vditor.upload) {\n                    if (element) {\n                        element.value = \"\";\n                    }\n                    vditor.tip.show(\"please config: options.upload.url\");\n                    return [2 /*return*/];\n                }\n                if (!vditor.options.upload.file) return [3 /*break*/, 2];\n                return [4 /*yield*/, vditor.options.upload.file(fileList)];\n            case 1:\n                fileList = _b.sent();\n                _b.label = 2;\n            case 2:\n                if (vditor.options.upload.validate) {\n                    isValidate = vditor.options.upload.validate(fileList);\n                    if (typeof isValidate === \"string\") {\n                        vditor.tip.show(isValidate);\n                        return [2 /*return*/];\n                    }\n                }\n                editorElement = getElement(vditor);\n                vditor.upload.range = (0,selection/* getEditorRange */.zh)(vditor);\n                validateResult = validateFile(vditor, fileList);\n                if (validateResult.length === 0) {\n                    if (element) {\n                        element.value = \"\";\n                    }\n                    return [2 /*return*/];\n                }\n                formData = new FormData();\n                extraData = vditor.options.upload.extraData;\n                for (_i = 0, _a = Object.keys(extraData); _i < _a.length; _i++) {\n                    key = _a[_i];\n                    formData.append(key, extraData[key]);\n                }\n                for (i = 0, iMax = validateResult.length; i < iMax; i++) {\n                    formData.append(vditor.options.upload.fieldName, validateResult[i]);\n                }\n                xhr = new XMLHttpRequest();\n                xhr.open(\"POST\", vditor.options.upload.url);\n                if (vditor.options.upload.token) {\n                    xhr.setRequestHeader(\"X-Upload-Token\", vditor.options.upload.token);\n                }\n                if (vditor.options.upload.withCredentials) {\n                    xhr.withCredentials = true;\n                }\n                setHeaders(vditor, xhr);\n                vditor.upload.isUploading = true;\n                editorElement.setAttribute(\"contenteditable\", \"false\");\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState === XMLHttpRequest.DONE) {\n                        vditor.upload.isUploading = false;\n                        editorElement.setAttribute(\"contenteditable\", \"true\");\n                        if (xhr.status >= 200 && xhr.status < 300) {\n                            if (vditor.options.upload.success) {\n                                vditor.options.upload.success(editorElement, xhr.responseText);\n                            }\n                            else {\n                                var responseText = xhr.responseText;\n                                if (vditor.options.upload.format) {\n                                    responseText = vditor.options.upload.format(files, xhr.responseText);\n                                }\n                                genUploadedLabel(responseText, vditor);\n                            }\n                        }\n                        else {\n                            if (vditor.options.upload.error) {\n                                vditor.options.upload.error(xhr.responseText);\n                            }\n                            else {\n                                vditor.tip.show(xhr.responseText);\n                            }\n                        }\n                        if (element) {\n                            element.value = \"\";\n                        }\n                        vditor.upload.element.style.display = \"none\";\n                    }\n                };\n                xhr.upload.onprogress = function (event) {\n                    if (!event.lengthComputable) {\n                        return;\n                    }\n                    var progress = event.loaded / event.total * 100;\n                    vditor.upload.element.style.display = \"block\";\n                    var progressBar = vditor.upload.element;\n                    progressBar.style.width = progress + \"%\";\n                };\n                xhr.send(formData);\n                return [2 /*return*/];\n        }\n    });\n}); };\n\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/input.ts\n\n\n\n\n\n\n\n\nvar input_input = function (vditor, range, event) {\n    var _a;\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        // 使用顶级块元素，应使用 innerHTML\n        blockElement = vditor.wysiwyg.element;\n    }\n    if (event && event.inputType !== \"formatItalic\"\n        && event.inputType !== \"deleteByDrag\"\n        && event.inputType !== \"insertFromDrop\"\n        && event.inputType !== \"formatBold\"\n        && event.inputType !== \"formatRemove\"\n        && event.inputType !== \"formatStrikeThrough\"\n        && event.inputType !== \"insertUnorderedList\"\n        && event.inputType !== \"insertOrderedList\"\n        && event.inputType !== \"formatOutdent\"\n        && event.inputType !== \"formatIndent\"\n        && event.inputType !== \"\" // document.execCommand('unlink', false)\n        || !event) {\n        var previousAEmptyElement = previoueIsEmptyA(range.startContainer);\n        if (previousAEmptyElement) {\n            // 链接结尾回车不应该复制到下一行 https://github.com/Vanessa219/vditor/issues/163\n            previousAEmptyElement.remove();\n        }\n        // 保存光标\n        vditor.wysiwyg.element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        // 在行首进行删除，后面的元素会带有样式，需清除\n        blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n            item.removeAttribute(\"style\");\n        });\n        // 移除空评论\n        blockElement.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n            if (item.textContent.trim() === \"\") {\n                item.classList.remove(\"vditor-comment\", \"vditor-comment--focus\");\n                item.removeAttribute(\"data-cmtids\");\n            }\n        });\n        //  在有评论的行首换行后，该行的前一段会带有评论标识\n        (_a = blockElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n            if (item.textContent.trim() === \"\") {\n                item.classList.remove(\"vditor-comment\", \"vditor-comment--focus\");\n                item.removeAttribute(\"data-cmtids\");\n            }\n        });\n        var html_1 = \"\";\n        if (blockElement.getAttribute(\"data-type\") === \"link-ref-defs-block\") {\n            // 修改链接引用\n            blockElement = vditor.wysiwyg.element;\n        }\n        var isWYSIWYGElement = blockElement.isEqualNode(vditor.wysiwyg.element);\n        var footnoteElement = (0,hasClosest/* hasClosestByAttribute */.a1)(blockElement, \"data-type\", \"footnotes-block\");\n        if (!isWYSIWYGElement) {\n            // 列表需要到最顶层\n            var topListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n            if (topListElement && !footnoteElement) {\n                var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"BLOCKQUOTE\");\n                if (blockquoteElement) {\n                    // li 中有 blockquote 就只渲染 blockquote\n                    blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer) || blockElement;\n                }\n                else {\n                    blockElement = topListElement;\n                }\n            }\n            // 修改脚注\n            if (footnoteElement) {\n                blockElement = footnoteElement;\n            }\n            html_1 = blockElement.outerHTML;\n            if (blockElement.tagName === \"UL\" || blockElement.tagName === \"OL\") {\n                // 如果为列表的话，需要把上下的列表都重绘\n                var listPrevElement = blockElement.previousElementSibling;\n                var listNextElement = blockElement.nextElementSibling;\n                if (listPrevElement && (listPrevElement.tagName === \"UL\" || listPrevElement.tagName === \"OL\")) {\n                    html_1 = listPrevElement.outerHTML + html_1;\n                    listPrevElement.remove();\n                }\n                if (listNextElement && (listNextElement.tagName === \"UL\" || listNextElement.tagName === \"OL\")) {\n                    html_1 = html_1 + listNextElement.outerHTML;\n                    listNextElement.remove();\n                }\n                // firefox 列表回车不会产生新的 list item https://github.com/Vanessa219/vditor/issues/194\n                html_1 = html_1.replace(\"<div><wbr><br></div>\", \"<li><p><wbr><br></p></li>\");\n            }\n            // 添加链接引用\n            vditor.wysiwyg.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item) {\n                if (item && !blockElement.isEqualNode(item)) {\n                    html_1 += item.outerHTML;\n                    item.remove();\n                }\n            });\n            // 添加脚注\n            vditor.wysiwyg.element.querySelectorAll(\"[data-type='footnotes-block']\").forEach(function (item) {\n                if (item && !blockElement.isEqualNode(item)) {\n                    html_1 += item.outerHTML;\n                    item.remove();\n                }\n            });\n        }\n        else {\n            html_1 = blockElement.innerHTML;\n        }\n        // 合并多个 em， strong，s。以防止多个相同元素在一起时不满足 commonmark 规范，出现标记符\n        html_1 = html_1.replace(/<\\/(strong|b)><strong data-marker=\"\\W{2}\">/g, \"\")\n            .replace(/<\\/(em|i)><em data-marker=\"\\W{1}\">/g, \"\")\n            .replace(/<\\/(s|strike)><s data-marker=\"~{1,2}\">/g, \"\");\n        if (html_1 === '<p data-block=\"0\">```<wbr></p>' && vditor.hint.recentLanguage) {\n            html_1 = '<p data-block=\"0\">```<wbr></p>'.replace(\"```\", \"```\" + vditor.hint.recentLanguage);\n        }\n        log(\"SpinVditorDOM\", html_1, \"argument\", vditor.options.debugger);\n        html_1 = vditor.lute.SpinVditorDOM(html_1);\n        log(\"SpinVditorDOM\", html_1, \"result\", vditor.options.debugger);\n        if (isWYSIWYGElement) {\n            blockElement.innerHTML = html_1;\n        }\n        else {\n            blockElement.outerHTML = html_1;\n            if (footnoteElement) {\n                // 更新正文中的 tip\n                var footnoteItemElement = (0,hasClosest/* hasTopClosestByTag */.E2)(vditor.wysiwyg.element.querySelector(\"wbr\"), \"LI\");\n                if (footnoteItemElement) {\n                    var footnoteRefElement = vditor.wysiwyg.element.querySelector(\"sup[data-type=\\\"footnotes-ref\\\"][data-footnotes-label=\\\"\" + footnoteItemElement.getAttribute(\"data-marker\") + \"\\\"]\");\n                    if (footnoteRefElement) {\n                        footnoteRefElement.setAttribute(\"aria-label\", footnoteItemElement.textContent.trim().substr(0, 24));\n                    }\n                }\n            }\n        }\n        var firstLinkRefDefElement_1;\n        var allLinkRefDefsElement = vditor.wysiwyg.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n        allLinkRefDefsElement.forEach(function (item, index) {\n            if (index === 0) {\n                firstLinkRefDefElement_1 = item;\n            }\n            else {\n                firstLinkRefDefElement_1.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n                item.remove();\n            }\n        });\n        if (allLinkRefDefsElement.length > 0) {\n            vditor.wysiwyg.element.insertAdjacentElement(\"beforeend\", allLinkRefDefsElement[0]);\n        }\n        // 脚注合并后添加的末尾\n        var firstFootnoteElement_1;\n        var allFootnoteElement = vditor.wysiwyg.element.querySelectorAll(\"[data-type='footnotes-block']\");\n        allFootnoteElement.forEach(function (item, index) {\n            if (index === 0) {\n                firstFootnoteElement_1 = item;\n            }\n            else {\n                firstFootnoteElement_1.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n                item.remove();\n            }\n        });\n        if (allFootnoteElement.length > 0) {\n            vditor.wysiwyg.element.insertAdjacentElement(\"beforeend\", allFootnoteElement[0]);\n        }\n        // 设置光标\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        vditor.wysiwyg.element.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\")\n            .forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        if (event && (event.inputType === \"deleteContentBackward\" || event.inputType === \"deleteContentForward\") &&\n            vditor.options.comment.enable) {\n            vditor.wysiwyg.triggerRemoveComment(vditor);\n            vditor.options.comment.adjustTop(vditor.wysiwyg.getComments(vditor, true));\n        }\n    }\n    renderToc(vditor);\n    afterRenderEvent(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/fixBrowserBehavior.ts\nvar __makeTemplateObject = (undefined && undefined.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar fixBrowserBehavior_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar fixBrowserBehavior_generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// https://github.com/Vanessa219/vditor/issues/508 软键盘无法删除空块\nvar fixGSKeyBackspace = function (event, vditor, startContainer) {\n    if (event.keyCode === 229 && event.code === \"\" && event.key === \"Unidentified\" && vditor.currentMode !== \"sv\") {\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n        // 移动端的标点符号都显示为 299，因此需限定为空删除的条件\n        if (blockElement && blockElement.textContent.trim() === \"\") {\n            vditor[vditor.currentMode].composingLock = true;\n            return false;\n        }\n    }\n    return true;\n};\n// https://github.com/Vanessa219/vditor/issues/361 代码块后输入中文\nvar fixCJKPosition = function (range, vditor, event) {\n    if (event.key === \"Enter\" || event.key === \"Tab\" || event.key === \"Backspace\" || event.key.indexOf(\"Arrow\") > -1\n        || (0,compatibility/* isCtrl */.yl)(event) || event.key === \"Escape\" || event.shiftKey || event.altKey) {\n        return;\n    }\n    var pLiElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"P\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n    if (pLiElement && (0,selection/* getSelectPosition */.im)(pLiElement, vditor[vditor.currentMode].element, range).start === 0) {\n        var zwspNode = document.createTextNode(constants/* Constants.ZWSP */.g.ZWSP);\n        range.insertNode(zwspNode);\n        range.setStartAfter(zwspNode);\n    }\n};\n// https://github.com/Vanessa219/vditor/issues/381 光标在内联数学公式中无法向下移动\nvar fixCursorDownInlineMath = function (range, key) {\n    if (key === \"ArrowDown\" || key === \"ArrowUp\") {\n        var inlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"math-inline\") ||\n            (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"html-entity\") ||\n            (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"html-inline\");\n        if (inlineElement) {\n            if (key === \"ArrowDown\") {\n                range.setStartAfter(inlineElement.parentElement);\n            }\n            if (key === \"ArrowUp\") {\n                range.setStartBefore(inlineElement.parentElement);\n            }\n        }\n    }\n};\nvar insertEmptyBlock = function (vditor, position) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (blockElement) {\n        blockElement.insertAdjacentHTML(position, \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr>\\n</p>\");\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        highlightToolbar(vditor);\n        execAfterRender(vditor);\n    }\n};\nvar isFirstCell = function (cellElement) {\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(cellElement, \"TABLE\");\n    if (tableElement && tableElement.rows[0].cells[0].isSameNode(cellElement)) {\n        return tableElement;\n    }\n    return false;\n};\nvar isLastCell = function (cellElement) {\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(cellElement, \"TABLE\");\n    if (tableElement && tableElement.lastElementChild.lastElementChild.lastElementChild.isSameNode(cellElement)) {\n        return tableElement;\n    }\n    return false;\n};\n// 光标设置到前一个表格中\nvar goPreviousCell = function (cellElement, range, isSelected) {\n    if (isSelected === void 0) { isSelected = true; }\n    var previousElement = cellElement.previousElementSibling;\n    if (!previousElement) {\n        if (cellElement.parentElement.previousElementSibling) {\n            previousElement = cellElement.parentElement.previousElementSibling.lastElementChild;\n        }\n        else if (cellElement.parentElement.parentElement.tagName === \"TBODY\" &&\n            cellElement.parentElement.parentElement.previousElementSibling) {\n            previousElement = cellElement.parentElement\n                .parentElement.previousElementSibling.lastElementChild.lastElementChild;\n        }\n        else {\n            previousElement = null;\n        }\n    }\n    if (previousElement) {\n        range.selectNodeContents(previousElement);\n        if (!isSelected) {\n            range.collapse(false);\n        }\n        (0,selection/* setSelectionFocus */.Hc)(range);\n    }\n    return previousElement;\n};\nvar insertAfterBlock = function (vditor, event, range, element, blockElement) {\n    var position = (0,selection/* getSelectPosition */.im)(element, vditor[vditor.currentMode].element, range);\n    if ((event.key === \"ArrowDown\" && element.textContent.trimRight().substr(position.start).indexOf(\"\\n\") === -1) ||\n        (event.key === \"ArrowRight\" && position.start >= element.textContent.trimRight().length)) {\n        var nextElement = blockElement.nextElementSibling;\n        if (!nextElement ||\n            (nextElement && (nextElement.tagName === \"TABLE\" || nextElement.getAttribute(\"data-type\")))) {\n            blockElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        }\n        else {\n            range.selectNodeContents(nextElement);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n        }\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar insertBeforeBlock = function (vditor, event, range, element, blockElement) {\n    var position = (0,selection/* getSelectPosition */.im)(element, vditor[vditor.currentMode].element, range);\n    if ((event.key === \"ArrowUp\" && element.textContent.substr(0, position.start).indexOf(\"\\n\") === -1) ||\n        ((event.key === \"ArrowLeft\" || (event.key === \"Backspace\" && range.toString() === \"\")) &&\n            position.start === 0)) {\n        var previousElement = blockElement.previousElementSibling;\n        // table || code\n        if (!previousElement ||\n            (previousElement && (previousElement.tagName === \"TABLE\" || previousElement.getAttribute(\"data-type\")))) {\n            blockElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        }\n        else {\n            range.selectNodeContents(previousElement);\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n        }\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar listToggle = function (vditor, range, type, cancel) {\n    if (cancel === void 0) { cancel = true; }\n    var itemElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n    vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n        wbr.remove();\n    });\n    range.insertNode(document.createElement(\"wbr\"));\n    if (cancel && itemElement) {\n        // 取消\n        var pHTML = \"\";\n        for (var i = 0; i < itemElement.parentElement.childElementCount; i++) {\n            var inputElement = itemElement.parentElement.children[i].querySelector(\"input\");\n            if (inputElement) {\n                inputElement.remove();\n            }\n            pHTML += \"<p data-block=\\\"0\\\">\" + itemElement.parentElement.children[i].innerHTML.trimLeft() + \"</p>\";\n        }\n        itemElement.parentElement.insertAdjacentHTML(\"beforebegin\", pHTML);\n        itemElement.parentElement.remove();\n    }\n    else {\n        if (!itemElement) {\n            // 添加\n            var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n            if (!blockElement) {\n                vditor[vditor.currentMode].element.querySelector(\"wbr\").remove();\n                blockElement = vditor[vditor.currentMode].element.querySelector(\"p\");\n                blockElement.innerHTML = \"<wbr>\";\n            }\n            if (type === \"check\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ul data-block=\\\"0\\\"><li class=\\\"vditor-task\\\"><input type=\\\"checkbox\\\" /> \" + blockElement.innerHTML + \"</li></ul>\");\n                blockElement.remove();\n            }\n            else if (type === \"list\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ul data-block=\\\"0\\\"><li>\" + blockElement.innerHTML + \"</li></ul>\");\n                blockElement.remove();\n            }\n            else if (type === \"ordered-list\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ol data-block=\\\"0\\\"><li>\" + blockElement.innerHTML + \"</li></ol>\");\n                blockElement.remove();\n            }\n        }\n        else {\n            // 切换\n            if (type === \"check\") {\n                itemElement.parentElement.querySelectorAll(\"li\").forEach(function (item) {\n                    item.insertAdjacentHTML(\"afterbegin\", \"<input type=\\\"checkbox\\\" />\" + (item.textContent.indexOf(\" \") === 0 ? \"\" : \" \"));\n                    item.classList.add(\"vditor-task\");\n                });\n            }\n            else {\n                if (itemElement.querySelector(\"input\")) {\n                    itemElement.parentElement.querySelectorAll(\"li\").forEach(function (item) {\n                        item.querySelector(\"input\").remove();\n                        item.classList.remove(\"vditor-task\");\n                    });\n                }\n                var element = void 0;\n                if (type === \"list\") {\n                    element = document.createElement(\"ul\");\n                }\n                else {\n                    element = document.createElement(\"ol\");\n                }\n                element.innerHTML = itemElement.parentElement.innerHTML;\n                itemElement.parentElement.parentNode.replaceChild(element, itemElement.parentElement);\n            }\n        }\n    }\n};\nvar listIndent = function (vditor, liElement, range) {\n    var previousElement = liElement.previousElementSibling;\n    if (liElement && previousElement) {\n        var liElements_1 = [liElement];\n        Array.from(range.cloneContents().children).forEach(function (item, index) {\n            if (item.nodeType !== 3 && liElement && item.textContent.trim() !== \"\"\n                && liElement.getAttribute(\"data-node-id\") === item.getAttribute(\"data-node-id\")) {\n                if (index !== 0) {\n                    liElements_1.push(liElement);\n                }\n                liElement = liElement.nextElementSibling;\n            }\n        });\n        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        var liParentElement = previousElement.parentElement;\n        var liHTML_1 = \"\";\n        liElements_1.forEach(function (item) {\n            var marker = item.getAttribute(\"data-marker\");\n            if (marker.length !== 1) {\n                marker = \"1\" + marker.slice(-1);\n            }\n            liHTML_1 += \"<li data-node-id=\\\"\" + item.getAttribute(\"data-node-id\") + \"\\\" data-marker=\\\"\" + marker + \"\\\">\" + item.innerHTML + \"</li>\";\n            item.remove();\n        });\n        previousElement.insertAdjacentHTML(\"beforeend\", \"<\" + liParentElement.tagName + \" data-block=\\\"0\\\">\" + liHTML_1 + \"</\" + liParentElement.tagName + \">\");\n        if (vditor.currentMode === \"wysiwyg\") {\n            liParentElement.outerHTML = vditor.lute.SpinVditorDOM(liParentElement.outerHTML);\n        }\n        else {\n            liParentElement.outerHTML = vditor.lute.SpinVditorIRDOM(liParentElement.outerHTML);\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        var tempTopListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (tempTopListElement) {\n            tempTopListElement.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                .forEach(function (item) {\n                processCodeRender(item, vditor);\n                if (vditor.currentMode === \"wysiwyg\") {\n                    item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n            });\n        }\n        execAfterRender(vditor);\n        highlightToolbar(vditor);\n    }\n    else {\n        vditor[vditor.currentMode].element.focus();\n    }\n};\nvar listOutdent = function (vditor, liElement, range, topListElement) {\n    var liParentLiElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(liElement.parentElement, \"LI\");\n    if (liParentLiElement) {\n        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        var liParentElement = liElement.parentElement;\n        var liParentAfterElement = liParentElement.cloneNode();\n        var liElements_2 = [liElement];\n        Array.from(range.cloneContents().children).forEach(function (item, index) {\n            if (item.nodeType !== 3 && liElement && item.textContent.trim() !== \"\" &&\n                liElement.getAttribute(\"data-node-id\") === item.getAttribute(\"data-node-id\")) {\n                if (index !== 0) {\n                    liElements_2.push(liElement);\n                }\n                liElement = liElement.nextElementSibling;\n            }\n        });\n        var isMatch_1 = false;\n        var afterHTML_1 = \"\";\n        liParentElement.querySelectorAll(\"li\").forEach(function (item) {\n            if (isMatch_1) {\n                afterHTML_1 += item.outerHTML;\n                if (!item.nextElementSibling && !item.previousElementSibling) {\n                    item.parentElement.remove();\n                }\n                else {\n                    item.remove();\n                }\n            }\n            if (item.isSameNode(liElements_2[liElements_2.length - 1])) {\n                isMatch_1 = true;\n            }\n        });\n        liElements_2.reverse().forEach(function (item) {\n            liParentLiElement.insertAdjacentElement(\"afterend\", item);\n        });\n        if (afterHTML_1) {\n            liParentAfterElement.innerHTML = afterHTML_1;\n            liElements_2[0].insertAdjacentElement(\"beforeend\", liParentAfterElement);\n        }\n        if (vditor.currentMode === \"wysiwyg\") {\n            topListElement.outerHTML = vditor.lute.SpinVditorDOM(topListElement.outerHTML);\n        }\n        else {\n            topListElement.outerHTML = vditor.lute.SpinVditorIRDOM(topListElement.outerHTML);\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        var tempTopListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (tempTopListElement) {\n            tempTopListElement.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                .forEach(function (item) {\n                processCodeRender(item, vditor);\n                if (vditor.currentMode === \"wysiwyg\") {\n                    item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n            });\n        }\n        execAfterRender(vditor);\n        highlightToolbar(vditor);\n    }\n    else {\n        vditor[vditor.currentMode].element.focus();\n    }\n};\nvar setTableAlign = function (tableElement, type) {\n    var cell = getSelection().getRangeAt(0).startContainer.parentElement;\n    var columnCnt = tableElement.rows[0].cells.length;\n    var rowCnt = tableElement.rows.length;\n    var currentColumn = 0;\n    for (var i = 0; i < rowCnt; i++) {\n        for (var j = 0; j < columnCnt; j++) {\n            if (tableElement.rows[i].cells[j].isSameNode(cell)) {\n                currentColumn = j;\n                break;\n            }\n        }\n    }\n    for (var k = 0; k < rowCnt; k++) {\n        tableElement.rows[k].cells[currentColumn].setAttribute(\"align\", type);\n    }\n};\nvar isHrMD = function (text) {\n    // - _ *\n    var marker = text.trimRight().split(\"\\n\").pop();\n    if (marker === \"\") {\n        return false;\n    }\n    if (marker.replace(/ |-/g, \"\") === \"\"\n        || marker.replace(/ |_/g, \"\") === \"\"\n        || marker.replace(/ |\\*/g, \"\") === \"\") {\n        if (marker.replace(/ /g, \"\").length > 2) {\n            if (marker.indexOf(\"-\") > -1 && marker.trimLeft().indexOf(\" \") === -1\n                && text.trimRight().split(\"\\n\").length > 1) {\n                // 满足 heading\n                return false;\n            }\n            if (marker.indexOf(\"    \") === 0 || marker.indexOf(\"\\t\") === 0) {\n                // 代码块\n                return false;\n            }\n            return true;\n        }\n        return false;\n    }\n    return false;\n};\nvar isHeadingMD = function (text) {\n    // - =\n    var textArray = text.trimRight().split(\"\\n\");\n    text = textArray.pop();\n    if (text.indexOf(\"    \") === 0 || text.indexOf(\"\\t\") === 0) {\n        return false;\n    }\n    text = text.trimLeft();\n    if (text === \"\" || textArray.length === 0) {\n        return false;\n    }\n    if (text.replace(/-/g, \"\") === \"\"\n        || text.replace(/=/g, \"\") === \"\") {\n        return true;\n    }\n    return false;\n};\nvar execAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (vditor.currentMode === \"wysiwyg\") {\n        afterRenderEvent(vditor, options);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        process_processAfterRender(vditor, options);\n    }\n    else if (vditor.currentMode === \"sv\") {\n        processAfterRender(vditor, options);\n    }\n};\nvar fixList = function (range, vditor, pElement, event) {\n    var _a;\n    var startContainer = range.startContainer;\n    var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"LI\");\n    if (liElement) {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\" &&\n            // fix li 中有多个 P 时，在第一个 P 中换行会在下方生成新的 li\n            (!event.shiftKey && pElement && liElement.contains(pElement) && pElement.nextElementSibling)) {\n            if (liElement && !liElement.textContent.endsWith(\"\\n\")) {\n                // li 结尾需 \\n\n                liElement.insertAdjacentText(\"beforeend\", \"\\n\");\n            }\n            range.insertNode(document.createTextNode(\"\\n\\n\"));\n            range.collapse(false);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\" &&\n            !liElement.previousElementSibling && range.toString() === \"\" &&\n            (0,selection/* getSelectPosition */.im)(liElement, vditor[vditor.currentMode].element, range).start === 0) {\n            // 光标位于点和第一个字符中间时，无法删除 li 元素\n            if (liElement.nextElementSibling) {\n                liElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\"><wbr>\" + liElement.innerHTML + \"</p>\");\n                liElement.remove();\n            }\n            else {\n                liElement.parentElement.outerHTML = \"<p data-block=\\\"0\\\"><wbr>\" + liElement.innerHTML + \"</p>\";\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // 空列表删除后与上一级段落对齐\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\" &&\n            liElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" &&\n            range.toString() === \"\" && ((_a = liElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.tagName) === \"LI\") {\n            liElement.previousElementSibling.insertAdjacentText(\"beforeend\", \"\\n\\n\");\n            range.selectNodeContents(liElement.previousElementSibling);\n            range.collapse(false);\n            liElement.remove();\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Tab\") {\n            // 光标位于第一/零字符时，tab 用于列表的缩进\n            var isFirst = false;\n            if (range.startOffset === 0\n                && ((startContainer.nodeType === 3 && !startContainer.previousSibling)\n                    || (startContainer.nodeType !== 3 && startContainer.nodeName === \"LI\"))) {\n                // 有序/无序列表\n                isFirst = true;\n            }\n            else if (liElement.classList.contains(\"vditor-task\") && range.startOffset === 1\n                && startContainer.previousSibling.nodeType !== 3\n                && startContainer.previousSibling.tagName === \"INPUT\") {\n                // 任务列表\n                isFirst = true;\n            }\n            if (isFirst || range.toString() !== \"\") {\n                if (event.shiftKey) {\n                    listOutdent(vditor, liElement, range, liElement.parentElement);\n                }\n                else {\n                    listIndent(vditor, liElement, range);\n                }\n                event.preventDefault();\n                return true;\n            }\n        }\n    }\n    return false;\n};\n// tab 处理: block code render, table, 列表第一个字符中的 tab 处理单独写在上面\nvar fixTab = function (vditor, range, event) {\n    if (vditor.options.tab && event.key === \"Tab\") {\n        if (event.shiftKey) {\n            // TODO shift+tab\n        }\n        else {\n            if (range.toString() === \"\") {\n                range.insertNode(document.createTextNode(vditor.options.tab));\n                range.collapse(false);\n            }\n            else {\n                range.extractContents();\n                range.insertNode(document.createTextNode(vditor.options.tab));\n                range.collapse(false);\n            }\n        }\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        execAfterRender(vditor);\n        event.preventDefault();\n        return true;\n    }\n};\nvar fixMarkdown = function (event, vditor, pElement, range) {\n    if (!pElement) {\n        return;\n    }\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n        var pText = String.raw(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\", \"\"], [\"\", \"\"])), pElement.textContent).replace(/\\\\\\|/g, \"\").trim();\n        var pTextList = pText.split(\"|\");\n        if (pText.startsWith(\"|\") && pText.endsWith(\"|\") && pTextList.length > 3) {\n            // table 自动完成\n            var tableHeaderMD = pTextList.map(function () { return \"---\"; }).join(\"|\");\n            tableHeaderMD =\n                pElement.textContent + \"\\n\" + tableHeaderMD.substring(3, tableHeaderMD.length - 3) + \"\\n|<wbr>\";\n            pElement.outerHTML = vditor.lute.SpinVditorDOM(tableHeaderMD);\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // hr 渲染\n        if (isHrMD(pElement.innerHTML) && pElement.previousElementSibling) {\n            // 软换行后 hr 前有内容\n            var pInnerHTML = \"\";\n            var innerHTMLList = pElement.innerHTML.trimRight().split(\"\\n\");\n            if (innerHTMLList.length > 1) {\n                innerHTMLList.pop();\n                pInnerHTML = \"<p data-block=\\\"0\\\">\" + innerHTMLList.join(\"\\n\") + \"</p>\";\n            }\n            pElement.insertAdjacentHTML(\"afterend\", pInnerHTML + \"<hr data-block=\\\"0\\\"><p data-block=\\\"0\\\"><wbr>\\n</p>\");\n            pElement.remove();\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (isHeadingMD(pElement.innerHTML)) {\n            // heading 渲染\n            if (vditor.currentMode === \"wysiwyg\") {\n                pElement.outerHTML = vditor.lute.SpinVditorDOM(pElement.innerHTML + '<p data-block=\"0\"><wbr>\\n</p>');\n            }\n            else {\n                pElement.outerHTML = vditor.lute.SpinVditorIRDOM(pElement.innerHTML + '<p data-block=\"0\"><wbr>\\n</p>');\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // 软换行会被切割 https://github.com/Vanessa219/vditor/issues/220\n    if (range.collapsed && pElement.previousElementSibling && event.key === \"Backspace\" &&\n        !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey &&\n        pElement.textContent.trimRight().split(\"\\n\").length > 1 &&\n        (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start === 0) {\n        var lastElement = (0,hasClosest/* getLastNode */.DX)(pElement.previousElementSibling);\n        if (!lastElement.textContent.endsWith(\"\\n\")) {\n            lastElement.textContent = lastElement.textContent + \"\\n\";\n        }\n        lastElement.parentElement.insertAdjacentHTML(\"beforeend\", \"<wbr>\" + pElement.innerHTML);\n        pElement.remove();\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        return false;\n    }\n    return false;\n};\nvar insertRow = function (vditor, range, cellElement) {\n    var rowHTML = \"\";\n    for (var m = 0; m < cellElement.parentElement.childElementCount; m++) {\n        rowHTML += \"<td align=\\\"\" + cellElement.parentElement.children[m].getAttribute(\"align\") + \"\\\"> </td>\";\n    }\n    if (cellElement.tagName === \"TH\") {\n        cellElement.parentElement.parentElement.insertAdjacentHTML(\"afterend\", \"<tbody><tr>\" + rowHTML + \"</tr></tbody>\");\n    }\n    else {\n        cellElement.parentElement.insertAdjacentHTML(\"afterend\", \"<tr>\" + rowHTML + \"</tr>\");\n    }\n    execAfterRender(vditor);\n};\nvar insertRowAbove = function (vditor, range, cellElement) {\n    var rowHTML = \"\";\n    for (var m = 0; m < cellElement.parentElement.childElementCount; m++) {\n        if (cellElement.tagName === \"TH\") {\n            rowHTML += \"<th align=\\\"\" + cellElement.parentElement.children[m].getAttribute(\"align\") + \"\\\"> </th>\";\n        }\n        else {\n            rowHTML += \"<td align=\\\"\" + cellElement.parentElement.children[m].getAttribute(\"align\") + \"\\\"> </td>\";\n        }\n    }\n    if (cellElement.tagName === \"TH\") {\n        cellElement.parentElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<thead><tr>\" + rowHTML + \"</tr></thead>\");\n        range.insertNode(document.createElement(\"wbr\"));\n        var theadHTML = cellElement.parentElement.innerHTML.replace(/<th>/g, \"<td>\").replace(/<\\/th>/g, \"</td>\");\n        cellElement.parentElement.parentElement.nextElementSibling.insertAdjacentHTML(\"afterbegin\", theadHTML);\n        cellElement.parentElement.parentElement.remove();\n        (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    }\n    else {\n        cellElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<tr>\" + rowHTML + \"</tr>\");\n    }\n    execAfterRender(vditor);\n};\nvar insertColumn = function (vditor, tableElement, cellElement, type) {\n    if (type === void 0) { type = \"afterend\"; }\n    var index = 0;\n    var previousElement = cellElement.previousElementSibling;\n    while (previousElement) {\n        index++;\n        previousElement = previousElement.previousElementSibling;\n    }\n    for (var i = 0; i < tableElement.rows.length; i++) {\n        if (i === 0) {\n            tableElement.rows[i].cells[index].insertAdjacentHTML(type, \"<th> </th>\");\n        }\n        else {\n            tableElement.rows[i].cells[index].insertAdjacentHTML(type, \"<td> </td>\");\n        }\n    }\n    execAfterRender(vditor);\n};\nvar deleteRow = function (vditor, range, cellElement) {\n    if (cellElement.tagName === \"TD\") {\n        var tbodyElement = cellElement.parentElement.parentElement;\n        if (cellElement.parentElement.previousElementSibling) {\n            range.selectNodeContents(cellElement.parentElement.previousElementSibling.lastElementChild);\n        }\n        else {\n            range.selectNodeContents(tbodyElement.previousElementSibling.lastElementChild.lastElementChild);\n        }\n        if (tbodyElement.childElementCount === 1) {\n            tbodyElement.remove();\n        }\n        else {\n            cellElement.parentElement.remove();\n        }\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        execAfterRender(vditor);\n    }\n};\nvar deleteColumn = function (vditor, range, tableElement, cellElement) {\n    var index = 0;\n    var previousElement = cellElement.previousElementSibling;\n    while (previousElement) {\n        index++;\n        previousElement = previousElement.previousElementSibling;\n    }\n    if (cellElement.previousElementSibling || cellElement.nextElementSibling) {\n        range.selectNodeContents(cellElement.previousElementSibling || cellElement.nextElementSibling);\n        range.collapse(true);\n    }\n    for (var i = 0; i < tableElement.rows.length; i++) {\n        var cells = tableElement.rows[i].cells;\n        if (cells.length === 1) {\n            tableElement.remove();\n            highlightToolbar(vditor);\n            break;\n        }\n        cells[index].remove();\n    }\n    (0,selection/* setSelectionFocus */.Hc)(range);\n    execAfterRender(vditor);\n};\nvar fixTable = function (vditor, event, range) {\n    var startContainer = range.startContainer;\n    var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n    if (cellElement) {\n        // 换行或软换行：在 cell 中添加 br\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n            if (!cellElement.lastElementChild ||\n                (cellElement.lastElementChild && (!cellElement.lastElementChild.isSameNode(cellElement.lastChild) ||\n                    cellElement.lastElementChild.tagName !== \"BR\"))) {\n                cellElement.insertAdjacentHTML(\"beforeend\", \"<br>\");\n            }\n            var brElement = document.createElement(\"br\");\n            range.insertNode(brElement);\n            range.setStartAfter(brElement);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // tab：光标移向下一个 cell\n        if (event.key === \"Tab\") {\n            if (event.shiftKey) {\n                // shift + tab 光标移动到前一个 cell\n                goPreviousCell(cellElement, range);\n                event.preventDefault();\n                return true;\n            }\n            var nextElement = cellElement.nextElementSibling;\n            if (!nextElement) {\n                if (cellElement.parentElement.nextElementSibling) {\n                    nextElement = cellElement.parentElement.nextElementSibling.firstElementChild;\n                }\n                else if (cellElement.parentElement.parentElement.tagName === \"THEAD\" &&\n                    cellElement.parentElement.parentElement.nextElementSibling) {\n                    nextElement =\n                        cellElement.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild;\n                }\n                else {\n                    nextElement = null;\n                }\n            }\n            if (nextElement) {\n                range.selectNodeContents(nextElement);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            event.preventDefault();\n            return true;\n        }\n        var tableElement = cellElement.parentElement.parentElement.parentElement;\n        if (event.key === \"ArrowUp\") {\n            event.preventDefault();\n            if (cellElement.tagName === \"TH\") {\n                if (tableElement.previousElementSibling) {\n                    range.selectNodeContents(tableElement.previousElementSibling);\n                    range.collapse(false);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n                else {\n                    insertEmptyBlock(vditor, \"beforebegin\");\n                }\n                return true;\n            }\n            var m = 0;\n            var trElement = cellElement.parentElement;\n            for (; m < trElement.cells.length; m++) {\n                if (trElement.cells[m].isSameNode(cellElement)) {\n                    break;\n                }\n            }\n            var previousElement = trElement.previousElementSibling;\n            if (!previousElement) {\n                previousElement = trElement.parentElement.previousElementSibling.firstChild;\n            }\n            range.selectNodeContents(previousElement.cells[m]);\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        if (event.key === \"ArrowDown\") {\n            event.preventDefault();\n            var trElement = cellElement.parentElement;\n            if (!trElement.nextElementSibling && cellElement.tagName === \"TD\") {\n                if (tableElement.nextElementSibling) {\n                    range.selectNodeContents(tableElement.nextElementSibling);\n                    range.collapse(true);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n                else {\n                    insertEmptyBlock(vditor, \"afterend\");\n                }\n                return true;\n            }\n            var m = 0;\n            for (; m < trElement.cells.length; m++) {\n                if (trElement.cells[m].isSameNode(cellElement)) {\n                    break;\n                }\n            }\n            var nextElement = trElement.nextElementSibling;\n            if (!nextElement) {\n                nextElement = trElement.parentElement.nextElementSibling.firstChild;\n            }\n            range.selectNodeContents(nextElement.cells[m]);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        // focus row input, only wysiwyg\n        if (vditor.currentMode === \"wysiwyg\" &&\n            !(0,compatibility/* isCtrl */.yl)(event) && event.key === \"Enter\" && !event.shiftKey && event.altKey) {\n            var inputElement = vditor.wysiwyg.popover.querySelector(\".vditor-input\");\n            inputElement.focus();\n            inputElement.select();\n            event.preventDefault();\n            return true;\n        }\n        // Backspace：光标移动到前一个 cell\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\"\n            && range.startOffset === 0 && range.toString() === \"\") {\n            var previousCellElement = goPreviousCell(cellElement, range, false);\n            if (!previousCellElement && tableElement) {\n                if (tableElement.textContent.trim() === \"\") {\n                    tableElement.outerHTML = \"<p data-block=\\\"0\\\"><wbr>\\n</p>\";\n                    (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                }\n                else {\n                    range.setStartBefore(tableElement);\n                    range.collapse(true);\n                }\n                execAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // 上方新添加一行\n        if (matchHotKey(\"⇧⌘F\", event)) {\n            insertRowAbove(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 下方新添加一行 https://github.com/Vanessa219/vditor/issues/46\n        if (matchHotKey(\"⌘=\", event)) {\n            insertRow(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 左方新添加一列\n        if (matchHotKey(\"⇧⌘G\", event)) {\n            insertColumn(vditor, tableElement, cellElement, \"beforebegin\");\n            event.preventDefault();\n            return true;\n        }\n        // 后方新添加一列\n        if (matchHotKey(\"⇧⌘=\", event)) {\n            insertColumn(vditor, tableElement, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 删除当前行\n        if (matchHotKey(\"⌘-\", event)) {\n            deleteRow(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 删除当前列\n        if (matchHotKey(\"⇧⌘-\", event)) {\n            deleteColumn(vditor, range, tableElement, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 剧左\n        if (matchHotKey(\"⇧⌘L\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"left\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"left\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n        // 剧中\n        if (matchHotKey(\"⇧⌘C\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"center\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"center\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n        // 剧右\n        if (matchHotKey(\"⇧⌘R\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"right\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"right\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n};\nvar fixCodeBlock = function (vditor, event, codeRenderElement, range) {\n    // 行级代码块中 command + a，近对当前代码块进行全选\n    if (codeRenderElement.tagName === \"PRE\" && matchHotKey(\"⌘A\", event)) {\n        range.selectNodeContents(codeRenderElement.firstElementChild);\n        event.preventDefault();\n        return true;\n    }\n    // tab\n    // TODO shift + tab, shift and 选中文字\n    if (vditor.options.tab && event.key === \"Tab\" && !event.shiftKey && range.toString() === \"\") {\n        range.insertNode(document.createTextNode(vditor.options.tab));\n        range.collapse(false);\n        execAfterRender(vditor);\n        event.preventDefault();\n        return true;\n    }\n    // Backspace: 光标位于第零个字符，仅删除代码块标签\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey) {\n        var codePosition = (0,selection/* getSelectPosition */.im)(codeRenderElement, vditor[vditor.currentMode].element, range);\n        if ((codePosition.start === 0 ||\n            (codePosition.start === 1 && codeRenderElement.innerText === \"\\n\")) // 空代码块，光标在 \\n 后\n            && range.toString() === \"\") {\n            codeRenderElement.parentElement.outerHTML =\n                \"<p data-block=\\\"0\\\"><wbr>\" + codeRenderElement.firstElementChild.innerHTML + \"</p>\";\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // 换行\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n        if (!codeRenderElement.firstElementChild.textContent.endsWith(\"\\n\")) {\n            codeRenderElement.firstElementChild.insertAdjacentText(\"beforeend\", \"\\n\");\n        }\n        range.extractContents();\n        range.insertNode(document.createTextNode(\"\\n\"));\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        if (!(0,compatibility/* isFirefox */.vU)()) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                input_input(vditor, range);\n            }\n            else {\n                input(vditor, range);\n            }\n        }\n        scrollCenter(vditor);\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar fixBlockquote = function (vditor, range, event, pElement) {\n    var startContainer = range.startContainer;\n    var blockquoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"BLOCKQUOTE\");\n    if (blockquoteElement && range.toString() === \"\") {\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey &&\n            (0,selection/* getSelectPosition */.im)(blockquoteElement, vditor[vditor.currentMode].element, range).start === 0) {\n            // Backspace: 光标位于引用中的第零个字符，仅删除引用标签\n            range.insertNode(document.createElement(\"wbr\"));\n            blockquoteElement.outerHTML = blockquoteElement.innerHTML;\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (pElement && event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey\n            && pElement.parentElement.tagName === \"BLOCKQUOTE\") {\n            // Enter: 空行回车应逐层跳出\n            var isEmpty = false;\n            if (pElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\\n\" ||\n                pElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                // 空 P\n                isEmpty = true;\n                pElement.remove();\n            }\n            else if (pElement.innerHTML.endsWith(\"\\n\\n\") &&\n                (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start ===\n                    pElement.textContent.length - 1) {\n                // 软换行\n                pElement.innerHTML = pElement.innerHTML.substr(0, pElement.innerHTML.length - 2);\n                isEmpty = true;\n            }\n            if (isEmpty) {\n                // 需添加零宽字符，否则的话无法记录 undo\n                blockquoteElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr>\\n</p>\");\n                (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n        if (vditor.currentMode === \"wysiwyg\" && blockElement && matchHotKey(\"⇧⌘;\", event)) {\n            // 插入 blockquote\n            range.insertNode(document.createElement(\"wbr\"));\n            blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\" + blockElement.outerHTML + \"</blockquote>\";\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            afterRenderEvent(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (insertAfterBlock(vditor, event, range, blockquoteElement, blockquoteElement)) {\n            return true;\n        }\n        if (insertBeforeBlock(vditor, event, range, blockquoteElement, blockquoteElement)) {\n            return true;\n        }\n    }\n    return false;\n};\nvar fixTask = function (vditor, range, event) {\n    var startContainer = range.startContainer;\n    var taskItemElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-task\");\n    if (taskItemElement) {\n        if (matchHotKey(\"⇧⌘J\", event)) {\n            // ctrl + shift: toggle checked\n            var inputElement = taskItemElement.firstElementChild;\n            if (inputElement.checked) {\n                inputElement.removeAttribute(\"checked\");\n            }\n            else {\n                inputElement.setAttribute(\"checked\", \"checked\");\n            }\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // Backspace: 在选择框前进行删除\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\"\n            && range.startOffset === 1\n            && ((startContainer.nodeType === 3 && startContainer.previousSibling &&\n                startContainer.previousSibling.tagName === \"INPUT\")\n                || startContainer.nodeType !== 3)) {\n            var previousElement = taskItemElement.previousElementSibling;\n            taskItemElement.querySelector(\"input\").remove();\n            if (previousElement) {\n                var lastNode = (0,hasClosest/* getLastNode */.DX)(previousElement);\n                lastNode.parentElement.insertAdjacentHTML(\"beforeend\", \"<wbr>\" + taskItemElement.innerHTML.trim());\n                taskItemElement.remove();\n            }\n            else {\n                taskItemElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\"><wbr>\" + (taskItemElement.innerHTML.trim() || \"\\n\") + \"</p>\");\n                if (taskItemElement.nextElementSibling) {\n                    taskItemElement.remove();\n                }\n                else {\n                    taskItemElement.parentElement.remove();\n                }\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey) {\n            if (taskItemElement.textContent.trim() === \"\") {\n                // 当前任务列表无文字\n                if ((0,hasClosest/* hasClosestByClassName */.fb)(taskItemElement.parentElement, \"vditor-task\")) {\n                    // 为子元素时，需进行反向缩进\n                    var topListElement = (0,hasClosest/* getTopList */.O9)(startContainer);\n                    if (topListElement) {\n                        listOutdent(vditor, taskItemElement, range, topListElement);\n                    }\n                }\n                else {\n                    // 仅有一级任务列表\n                    if (taskItemElement.nextElementSibling) {\n                        // 任务列表下方还有元素，需要使用用段落隔断\n                        var afterHTML_2 = \"\";\n                        var beforeHTML_1 = \"\";\n                        var isAfter_1 = false;\n                        Array.from(taskItemElement.parentElement.children).forEach(function (taskItem) {\n                            if (taskItemElement.isSameNode(taskItem)) {\n                                isAfter_1 = true;\n                            }\n                            else {\n                                if (isAfter_1) {\n                                    afterHTML_2 += taskItem.outerHTML;\n                                }\n                                else {\n                                    beforeHTML_1 += taskItem.outerHTML;\n                                }\n                            }\n                        });\n                        var parentTagName = taskItemElement.parentElement.tagName;\n                        var dataMarker = taskItemElement.parentElement.tagName === \"OL\" ? \"\" : \" data-marker=\\\"\" + taskItemElement.parentElement.getAttribute(\"data-marker\") + \"\\\"\";\n                        var startAttribute = \"\";\n                        if (beforeHTML_1) {\n                            startAttribute = taskItemElement.parentElement.tagName === \"UL\" ? \"\" : \" start=\\\"1\\\"\";\n                            beforeHTML_1 = \"<\" + parentTagName + \" data-tight=\\\"true\\\"\" + dataMarker + \" data-block=\\\"0\\\">\" + beforeHTML_1 + \"</\" + parentTagName + \">\";\n                        }\n                        // <p data-block=\"0\">\\n<wbr></p> => <p data-block=\"0\"><wbr>\\n</p>\n                        // https://github.com/Vanessa219/vditor/issues/430\n                        taskItemElement.parentElement.outerHTML = beforeHTML_1 + \"<p data-block=\\\"0\\\"><wbr>\\n</p><\" + parentTagName + \"\\n data-tight=\\\"true\\\"\" + dataMarker + \" data-block=\\\"0\\\"\" + startAttribute + \">\" + afterHTML_2 + \"</\" + parentTagName + \">\";\n                    }\n                    else {\n                        // 任务列表下方无任务列表元素\n                        taskItemElement.parentElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\"><wbr>\\n</p>\");\n                        if (taskItemElement.parentElement.querySelectorAll(\"li\").length === 1) {\n                            // 任务列表仅有一项时，使用 p 元素替换\n                            taskItemElement.parentElement.remove();\n                        }\n                        else {\n                            // 任务列表有多项时，当前任务列表位于最后一项，移除该任务列表\n                            taskItemElement.remove();\n                        }\n                    }\n                }\n            }\n            else if (startContainer.nodeType !== 3 && range.startOffset === 0 &&\n                startContainer.firstChild.tagName === \"INPUT\") {\n                // 光标位于 input 之前\n                range.setStart(startContainer.childNodes[1], 1);\n            }\n            else {\n                // 当前任务列表有文字，光标后的文字需添加到新任务列表中\n                range.setEndAfter(taskItemElement.lastChild);\n                taskItemElement.insertAdjacentHTML(\"afterend\", \"<li class=\\\"vditor-task\\\" data-marker=\\\"\" + taskItemElement.getAttribute(\"data-marker\") + \"\\\"><input type=\\\"checkbox\\\"> <wbr></li>\");\n                document.querySelector(\"wbr\").after(range.extractContents());\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\nvar fixDelete = function (vditor, range, event, pElement) {\n    if (range.startContainer.nodeType !== 3) {\n        // 光标位于 hr 前，hr 前有内容\n        var rangeElement = range.startContainer.children[range.startOffset];\n        if (rangeElement && rangeElement.tagName === \"HR\") {\n            range.selectNodeContents(rangeElement.previousElementSibling);\n            range.collapse(false);\n            event.preventDefault();\n            return true;\n        }\n    }\n    if (pElement) {\n        var previousElement = pElement.previousElementSibling;\n        if (previousElement && (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start === 0 &&\n            (((0,compatibility/* isFirefox */.vU)() && previousElement.tagName === \"HR\") || previousElement.tagName === \"TABLE\")) {\n            if (previousElement.tagName === \"TABLE\") {\n                // table 后删除 https://github.com/Vanessa219/vditor/issues/243\n                var lastCellElement = previousElement.lastElementChild.lastElementChild.lastElementChild;\n                lastCellElement.innerHTML =\n                    lastCellElement.innerHTML.trimLeft() + \"<wbr>\" + pElement.textContent.trim();\n                pElement.remove();\n            }\n            else {\n                // 光标位于 hr 后进行删除\n                previousElement.remove();\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\nvar fixHR = function (range) {\n    if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.nodeType !== 3 &&\n        range.startContainer.tagName === \"HR\") {\n        range.setStartBefore(range.startContainer);\n    }\n};\n// firefox https://github.com/Vanessa219/vditor/issues/407\nvar fixFirefoxArrowUpTable = function (event, blockElement, range) {\n    var _a, _b;\n    if (!(0,compatibility/* isFirefox */.vU)()) {\n        return false;\n    }\n    if (event.key === \"ArrowUp\" && blockElement && ((_a = blockElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.tagName) === \"TABLE\") {\n        var tableElement = blockElement.previousElementSibling;\n        range.selectNodeContents(tableElement.rows[tableElement.rows.length - 1].lastElementChild);\n        range.collapse(false);\n        event.preventDefault();\n        return true;\n    }\n    if (event.key === \"ArrowDown\" && blockElement && ((_b = blockElement.nextElementSibling) === null || _b === void 0 ? void 0 : _b.tagName) === \"TABLE\") {\n        range.selectNodeContents(blockElement.nextElementSibling.rows[0].cells[0]);\n        range.collapse(true);\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar paste = function (vditor, event, callback) { return fixBrowserBehavior_awaiter(void 0, void 0, void 0, function () {\n    var textHTML, textPlain, files, renderers, renderLinkDest, doc, height, code, codeElement, position, tempElement, blockElement, range;\n    var _a;\n    return fixBrowserBehavior_generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                event.stopPropagation();\n                event.preventDefault();\n                if (\"clipboardData\" in event) {\n                    textHTML = event.clipboardData.getData(\"text/html\");\n                    textPlain = event.clipboardData.getData(\"text/plain\");\n                    files = event.clipboardData.files;\n                }\n                else {\n                    textHTML = event.dataTransfer.getData(\"text/html\");\n                    textPlain = event.dataTransfer.getData(\"text/plain\");\n                    if (event.dataTransfer.types[0] === \"Files\") {\n                        files = event.dataTransfer.items;\n                    }\n                }\n                renderers = {};\n                renderLinkDest = function (node, entering) {\n                    if (!entering) {\n                        return [\"\", Lute.WalkContinue];\n                    }\n                    var src = node.TokensStr();\n                    if (node.__internal_object__.Parent.Type === 34 && src && src.indexOf(\"file://\") === -1 &&\n                        vditor.options.upload.linkToImgUrl) {\n                        var xhr_1 = new XMLHttpRequest();\n                        xhr_1.open(\"POST\", vditor.options.upload.linkToImgUrl);\n                        if (vditor.options.upload.token) {\n                            xhr_1.setRequestHeader(\"X-Upload-Token\", vditor.options.upload.token);\n                        }\n                        if (vditor.options.upload.withCredentials) {\n                            xhr_1.withCredentials = true;\n                        }\n                        setHeaders(vditor, xhr_1);\n                        xhr_1.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\");\n                        xhr_1.onreadystatechange = function () {\n                            if (xhr_1.readyState === XMLHttpRequest.DONE) {\n                                if (xhr_1.status === 200) {\n                                    var responseText = xhr_1.responseText;\n                                    if (vditor.options.upload.linkToImgFormat) {\n                                        responseText = vditor.options.upload.linkToImgFormat(xhr_1.responseText);\n                                    }\n                                    var responseJSON_1 = JSON.parse(responseText);\n                                    if (responseJSON_1.code !== 0) {\n                                        vditor.tip.show(responseJSON_1.msg);\n                                        return;\n                                    }\n                                    var original_1 = responseJSON_1.data.originalURL;\n                                    if (vditor.currentMode === \"sv\") {\n                                        vditor.sv.element.querySelectorAll(\".vditor-sv__marker--link\")\n                                            .forEach(function (item) {\n                                            if (item.textContent === original_1) {\n                                                item.textContent = responseJSON_1.data.url;\n                                            }\n                                        });\n                                    }\n                                    else {\n                                        var imgElement = vditor[vditor.currentMode].element.querySelector(\"img[src=\\\"\" + original_1 + \"\\\"]\");\n                                        imgElement.src = responseJSON_1.data.url;\n                                        if (vditor.currentMode === \"ir\") {\n                                            imgElement.previousElementSibling.previousElementSibling.innerHTML =\n                                                responseJSON_1.data.url;\n                                        }\n                                    }\n                                    execAfterRender(vditor);\n                                }\n                                else {\n                                    vditor.tip.show(xhr_1.responseText);\n                                }\n                                if (vditor.options.upload.linkToImgCallback) {\n                                    vditor.options.upload.linkToImgCallback(xhr_1.responseText);\n                                }\n                            }\n                        };\n                        xhr_1.send(JSON.stringify({ url: src }));\n                    }\n                    if (vditor.currentMode === \"ir\") {\n                        return [\"<span class=\\\"vditor-ir__marker vditor-ir__marker--link\\\">\" + src + \"</span>\", Lute.WalkContinue];\n                    }\n                    else if (vditor.currentMode === \"wysiwyg\") {\n                        return [\"\", Lute.WalkContinue];\n                    }\n                    else {\n                        return [\"<span class=\\\"vditor-sv__marker--link\\\">\" + src + \"</span>\", Lute.WalkContinue];\n                    }\n                };\n                // 浏览器地址栏拷贝处理\n                if (textHTML.replace(/&amp;/g, \"&\").replace(/<(|\\/)(html|body|meta)[^>]*?>/ig, \"\").trim() ===\n                    \"<a href=\\\"\" + textPlain + \"\\\">\" + textPlain + \"</a>\" ||\n                    textHTML.replace(/&amp;/g, \"&\").replace(/<(|\\/)(html|body|meta)[^>]*?>/ig, \"\").trim() ===\n                        \"<!--StartFragment--><a href=\\\"\" + textPlain + \"\\\">\" + textPlain + \"</a><!--EndFragment-->\") {\n                    textHTML = \"\";\n                }\n                doc = new DOMParser().parseFromString(textHTML, \"text/html\");\n                if (doc.body) {\n                    textHTML = doc.body.innerHTML;\n                }\n                vditor.wysiwyg.getComments(vditor);\n                height = vditor[vditor.currentMode].element.scrollHeight;\n                code = processPasteCode(textHTML, textPlain, vditor.currentMode);\n                codeElement = vditor.currentMode === \"sv\" ?\n                    (0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"code-block\") :\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"CODE\");\n                if (!codeElement) return [3 /*break*/, 1];\n                // 粘贴在代码位置\n                if (vditor.currentMode === \"sv\") {\n                    document.execCommand(\"insertHTML\", false, textPlain.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\"));\n                }\n                else {\n                    position = (0,selection/* getSelectPosition */.im)(event.target, vditor[vditor.currentMode].element);\n                    if (codeElement.parentElement.tagName !== \"PRE\") {\n                        // https://github.com/Vanessa219/vditor/issues/463\n                        textPlain += constants/* Constants.ZWSP */.g.ZWSP;\n                    }\n                    codeElement.textContent = codeElement.textContent.substring(0, position.start)\n                        + textPlain + codeElement.textContent.substring(position.end);\n                    (0,selection/* setSelectionByPosition */.$j)(position.start + textPlain.length, position.start + textPlain.length, codeElement.parentElement);\n                    if ((_a = codeElement.parentElement) === null || _a === void 0 ? void 0 : _a.nextElementSibling.classList.contains(\"vditor-\" + vditor.currentMode + \"__preview\")) {\n                        codeElement.parentElement.nextElementSibling.innerHTML = codeElement.outerHTML;\n                        processCodeRender(codeElement.parentElement.nextElementSibling, vditor);\n                    }\n                }\n                return [3 /*break*/, 6];\n            case 1:\n                if (!code) return [3 /*break*/, 2];\n                callback.pasteCode(code);\n                return [3 /*break*/, 6];\n            case 2:\n                if (!(textHTML.trim() !== \"\")) return [3 /*break*/, 3];\n                tempElement = document.createElement(\"div\");\n                tempElement.innerHTML = textHTML;\n                tempElement.querySelectorAll(\"[style]\").forEach(function (e) {\n                    e.removeAttribute(\"style\");\n                });\n                tempElement.querySelectorAll(\".vditor-copy\").forEach(function (e) {\n                    e.remove();\n                });\n                if (vditor.currentMode === \"ir\") {\n                    renderers.HTML2VditorIRDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    (0,selection/* insertHTML */.oC)(vditor.lute.HTML2VditorIRDOM(tempElement.innerHTML), vditor);\n                }\n                else if (vditor.currentMode === \"wysiwyg\") {\n                    renderers.HTML2VditorDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    (0,selection/* insertHTML */.oC)(vditor.lute.HTML2VditorDOM(tempElement.innerHTML), vditor);\n                }\n                else {\n                    renderers.Md2VditorSVDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    processPaste(vditor, vditor.lute.HTML2Md(tempElement.innerHTML).trimRight());\n                }\n                vditor.outline.render(vditor);\n                return [3 /*break*/, 6];\n            case 3:\n                if (!(files.length > 0 && vditor.options.upload.url)) return [3 /*break*/, 5];\n                return [4 /*yield*/, uploadFiles(vditor, files)];\n            case 4:\n                _b.sent();\n                return [3 /*break*/, 6];\n            case 5:\n                if (textPlain.trim() !== \"\" && files.length === 0) {\n                    if (vditor.currentMode === \"ir\") {\n                        renderers.Md2VditorIRDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        (0,selection/* insertHTML */.oC)(vditor.lute.Md2VditorIRDOM(textPlain), vditor);\n                    }\n                    else if (vditor.currentMode === \"wysiwyg\") {\n                        renderers.Md2VditorDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        (0,selection/* insertHTML */.oC)(vditor.lute.Md2VditorDOM(textPlain), vditor);\n                    }\n                    else {\n                        renderers.Md2VditorSVDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        processPaste(vditor, textPlain);\n                    }\n                    vditor.outline.render(vditor);\n                }\n                _b.label = 6;\n            case 6:\n                if (vditor.currentMode !== \"sv\") {\n                    blockElement = (0,hasClosest/* hasClosestBlock */.F9)((0,selection/* getEditorRange */.zh)(vditor).startContainer);\n                    if (blockElement) {\n                        range = (0,selection/* getEditorRange */.zh)(vditor);\n                        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n                            wbr.remove();\n                        });\n                        range.insertNode(document.createElement(\"wbr\"));\n                        if (vditor.currentMode === \"wysiwyg\") {\n                            blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n                        }\n                        else {\n                            blockElement.outerHTML = vditor.lute.SpinVditorIRDOM(blockElement.outerHTML);\n                        }\n                        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                    }\n                    vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                        .forEach(function (item) {\n                        processCodeRender(item, vditor);\n                    });\n                }\n                vditor.wysiwyg.triggerRemoveComment(vditor);\n                execAfterRender(vditor);\n                if (vditor[vditor.currentMode].element.scrollHeight - height >\n                    Math.min(vditor[vditor.currentMode].element.clientHeight, window.innerHeight) / 2) {\n                    scrollCenter(vditor);\n                }\n                return [2 /*return*/];\n        }\n    });\n}); };\nvar templateObject_1;\n\n;// CONCATENATED MODULE: ./src/ts/ir/process.ts\n\n\n\n\n\n\n\n\n\nvar processHint = function (vditor) {\n    vditor.hint.render(vditor);\n    var startContainer = (0,selection/* getEditorRange */.zh)(vditor).startContainer;\n    // 代码块语言提示\n    var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-info\");\n    if (preBeforeElement) {\n        if (preBeforeElement.textContent.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && vditor.hint.recentLanguage) {\n            preBeforeElement.textContent = constants/* Constants.ZWSP */.g.ZWSP + vditor.hint.recentLanguage;\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            range.selectNodeContents(preBeforeElement);\n        }\n        else {\n            var matchLangData_1 = [];\n            var key_1 = preBeforeElement.textContent.substring(0, (0,selection/* getSelectPosition */.im)(preBeforeElement, vditor.ir.element).start)\n                .replace(constants/* Constants.ZWSP */.g.ZWSP, \"\");\n            constants/* Constants.CODE_LANGUAGES.forEach */.g.CODE_LANGUAGES.forEach(function (keyName) {\n                if (keyName.indexOf(key_1.toLowerCase()) > -1) {\n                    matchLangData_1.push({\n                        html: keyName,\n                        value: keyName,\n                    });\n                }\n            });\n            vditor.hint.genHTML(matchLangData_1, key_1, vditor);\n        }\n    }\n};\nvar process_processAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        processHint(vditor);\n    }\n    clearTimeout(vditor.ir.processTimeoutId);\n    vditor.ir.processTimeoutId = window.setTimeout(function () {\n        if (vditor.ir.composingLock) {\n            return;\n        }\n        var text = getMarkdown(vditor);\n        if (typeof vditor.options.input === \"function\" && options.enableInput) {\n            vditor.options.input(text);\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter.render(vditor, text);\n        }\n        if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n            localStorage.setItem(vditor.options.cache.id, text);\n            if (vditor.options.cache.after) {\n                vditor.options.cache.after(text);\n            }\n        }\n        if (vditor.devtools) {\n            vditor.devtools.renderEchart(vditor);\n        }\n        if (options.enableAddUndoStack) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\nvar process_processHeading = function (vditor, value) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var headingElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer) || range.startContainer;\n    if (headingElement) {\n        var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n        if (headingMarkerElement) {\n            headingMarkerElement.innerHTML = value;\n        }\n        else {\n            headingElement.insertAdjacentText(\"afterbegin\", value);\n            range.selectNodeContents(headingElement);\n            range.collapse(false);\n        }\n        input(vditor, range.cloneRange());\n        highlightToolbarIR(vditor);\n    }\n};\nvar removeInline = function (range, vditor, type) {\n    var inlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", type);\n    if (inlineElement) {\n        inlineElement.firstElementChild.remove();\n        inlineElement.lastElementChild.remove();\n        range.insertNode(document.createElement(\"wbr\"));\n        var tempElement = document.createElement(\"div\");\n        tempElement.innerHTML = vditor.lute.SpinVditorIRDOM(inlineElement.outerHTML);\n        inlineElement.outerHTML = tempElement.firstElementChild.innerHTML.trim();\n    }\n};\nvar process_processToolbar = function (vditor, actionBtn, prefix, suffix) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    var typeElement = range.startContainer;\n    if (typeElement.nodeType === 3) {\n        typeElement = typeElement.parentElement;\n    }\n    var useHighlight = true;\n    // 移除\n    if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n        if (commandName === \"quote\") {\n            var quoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\");\n            if (quoteElement) {\n                range.insertNode(document.createElement(\"wbr\"));\n                quoteElement.outerHTML = quoteElement.innerHTML.trim() === \"\" ?\n                    \"<p data-block=\\\"0\\\">\" + quoteElement.innerHTML + \"</p>\" : quoteElement.innerHTML;\n            }\n        }\n        else if (commandName === \"link\") {\n            var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"a\");\n            if (aElement) {\n                var aTextElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__link\");\n                if (aTextElement) {\n                    range.insertNode(document.createElement(\"wbr\"));\n                    aElement.outerHTML = aTextElement.innerHTML;\n                }\n                else {\n                    aElement.outerHTML = aElement.querySelector(\".vditor-ir__link\").innerHTML + \"<wbr>\";\n                }\n            }\n        }\n        else if (commandName === \"italic\") {\n            removeInline(range, vditor, \"em\");\n        }\n        else if (commandName === \"bold\") {\n            removeInline(range, vditor, \"strong\");\n        }\n        else if (commandName === \"strike\") {\n            removeInline(range, vditor, \"s\");\n        }\n        else if (commandName === \"inline-code\") {\n            removeInline(range, vditor, \"code\");\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName);\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n        }\n    }\n    else {\n        // 添加\n        if (vditor.ir.element.childNodes.length === 0) {\n            vditor.ir.element.innerHTML = '<p data-block=\"0\"><wbr></p>';\n            (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n        if (commandName === \"line\") {\n            if (blockElement) {\n                var hrHTML = '<hr data-block=\"0\"><p data-block=\"0\"><wbr>\\n</p>';\n                if (blockElement.innerHTML.trim() === \"\") {\n                    blockElement.outerHTML = hrHTML;\n                }\n                else {\n                    blockElement.insertAdjacentHTML(\"afterend\", hrHTML);\n                }\n            }\n        }\n        else if (commandName === \"quote\") {\n            if (blockElement) {\n                range.insertNode(document.createElement(\"wbr\"));\n                blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\" + blockElement.outerHTML + \"</blockquote>\";\n                useHighlight = false;\n                actionBtn.classList.add(\"vditor-menu--current\");\n            }\n        }\n        else if (commandName === \"link\") {\n            var html = void 0;\n            if (range.toString() === \"\") {\n                html = prefix + \"<wbr>\" + suffix;\n            }\n            else {\n                html = \"\" + prefix + range.toString() + suffix.replace(\")\", \"<wbr>)\");\n            }\n            document.execCommand(\"insertHTML\", false, html);\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"italic\" || commandName === \"bold\" || commandName === \"strike\"\n            || commandName === \"inline-code\" || commandName === \"code\" || commandName === \"table\") {\n            var html = void 0;\n            if (range.toString() === \"\") {\n                html = prefix + \"<wbr>\" + suffix;\n            }\n            else {\n                if (commandName === \"code\" || commandName === \"table\") {\n                    html = \"\" + prefix + range.toString() + \"<wbr>\" + suffix;\n                }\n                else {\n                    html = \"\" + prefix + range.toString() + suffix + \"<wbr>\";\n                }\n                range.deleteContents();\n            }\n            if (commandName === \"table\" || commandName === \"code\") {\n                html = \"\\n\" + html + \"\\n\\n\";\n            }\n            var spanElement = document.createElement(\"span\");\n            spanElement.innerHTML = html;\n            range.insertNode(spanElement);\n            input(vditor, range);\n            if (commandName === \"table\") {\n                range.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName, false);\n            useHighlight = false;\n            removeCurrentToolbar(vditor.toolbar.elements, [\"check\", \"list\", \"ordered-list\"]);\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    process_processAfterRender(vditor);\n    if (useHighlight) {\n        highlightToolbarIR(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/hint/index.ts\n\n\n\n\n\n\n\n\nvar Hint = /** @class */ (function () {\n    function Hint(hintExtends) {\n        var _this = this;\n        this.splitChar = \"\";\n        this.lastIndex = -1;\n        this.fillEmoji = function (element, vditor) {\n            _this.element.style.display = \"none\";\n            var value = decodeURIComponent(element.getAttribute(\"data-value\"));\n            var range = window.getSelection().getRangeAt(0);\n            // 代码提示\n            if (vditor.currentMode === \"ir\") {\n                var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"code-block-info\");\n                if (preBeforeElement) {\n                    preBeforeElement.textContent = constants/* Constants.ZWSP */.g.ZWSP + value.trimRight();\n                    range.selectNodeContents(preBeforeElement);\n                    range.collapse(false);\n                    process_processAfterRender(vditor);\n                    preBeforeElement.parentElement.querySelectorAll(\"code\").forEach(function (item) {\n                        item.className = \"language-\" + value.trimRight();\n                    });\n                    processCodeRender(preBeforeElement.parentElement.querySelector(\".vditor-ir__preview\"), vditor);\n                    _this.recentLanguage = value.trimRight();\n                    return;\n                }\n            }\n            if (vditor.currentMode === \"wysiwyg\" && range.startContainer.nodeType !== 3 &&\n                range.startContainer.firstElementChild.classList.contains(\"vditor-input\")) {\n                var inputElement = range.startContainer.firstElementChild;\n                inputElement.value = value.trimRight();\n                range.selectNodeContents(inputElement);\n                range.collapse(false);\n                inputElement.dispatchEvent(new CustomEvent(\"input\"));\n                _this.recentLanguage = value.trimRight();\n                return;\n            }\n            range.setStart(range.startContainer, _this.lastIndex);\n            range.deleteContents();\n            if (vditor.options.hint.parse) {\n                if (vditor.currentMode === \"sv\") {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorSVDOM(value), vditor);\n                }\n                else if (vditor.currentMode === \"wysiwyg\") {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorDOM(value), vditor);\n                }\n                else {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorIRDOM(value), vditor);\n                }\n            }\n            else {\n                (0,selection/* insertHTML */.oC)(value, vditor);\n            }\n            if (_this.splitChar === \":\" && value.indexOf(\":\") > -1 && vditor.currentMode !== \"sv\") {\n                range.insertNode(document.createTextNode(\" \"));\n            }\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            if (vditor.currentMode === \"wysiwyg\") {\n                var preElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-wysiwyg__block\");\n                if (preElement && preElement.lastElementChild.classList.contains(\"vditor-wysiwyg__preview\")) {\n                    preElement.lastElementChild.innerHTML = preElement.firstElementChild.innerHTML;\n                    processCodeRender(preElement.lastElementChild, vditor);\n                }\n            }\n            else if (vditor.currentMode === \"ir\") {\n                var preElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__marker--pre\");\n                if (preElement && preElement.nextElementSibling.classList.contains(\"vditor-ir__preview\")) {\n                    preElement.nextElementSibling.innerHTML = preElement.innerHTML;\n                    processCodeRender(preElement.nextElementSibling, vditor);\n                }\n            }\n            execAfterRender(vditor);\n        };\n        this.timeId = -1;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-hint\";\n        this.recentLanguage = \"\";\n        hintExtends.push({ key: \":\" });\n    }\n    Hint.prototype.render = function (vditor) {\n        var _this = this;\n        if (!window.getSelection().focusNode) {\n            return;\n        }\n        var currentLineValue;\n        var range = getSelection().getRangeAt(0);\n        currentLineValue = range.startContainer.textContent.substring(0, range.startOffset) || \"\";\n        var key = this.getKey(currentLineValue, vditor.options.hint.extend);\n        if (typeof key === \"undefined\") {\n            this.element.style.display = \"none\";\n            clearTimeout(this.timeId);\n        }\n        else {\n            if (this.splitChar === \":\") {\n                var emojiHint_1 = key === \"\" ? vditor.options.hint.emoji : vditor.lute.GetEmojis();\n                var matchEmojiData_1 = [];\n                Object.keys(emojiHint_1).forEach(function (keyName) {\n                    if (keyName.indexOf(key.toLowerCase()) === 0) {\n                        if (emojiHint_1[keyName].indexOf(\".\") > -1) {\n                            matchEmojiData_1.push({\n                                html: \"<img src=\\\"\" + emojiHint_1[keyName] + \"\\\" title=\\\":\" + keyName + \":\\\"/> :\" + keyName + \":\",\n                                value: \":\" + keyName + \":\",\n                            });\n                        }\n                        else {\n                            matchEmojiData_1.push({\n                                html: \"<span class=\\\"vditor-hint__emoji\\\">\" + emojiHint_1[keyName] + \"</span>\" + keyName,\n                                value: emojiHint_1[keyName],\n                            });\n                        }\n                    }\n                });\n                this.genHTML(matchEmojiData_1, key, vditor);\n            }\n            else {\n                vditor.options.hint.extend.forEach(function (item) {\n                    if (item.key === _this.splitChar) {\n                        clearTimeout(_this.timeId);\n                        _this.timeId = window.setTimeout(function () {\n                            _this.genHTML(item.hint(key), key, vditor);\n                        }, vditor.options.hint.delay);\n                    }\n                });\n            }\n        }\n    };\n    Hint.prototype.genHTML = function (data, key, vditor) {\n        var _this = this;\n        if (data.length === 0) {\n            this.element.style.display = \"none\";\n            return;\n        }\n        var editorElement = vditor[vditor.currentMode].element;\n        var textareaPosition = (0,selection/* getCursorPosition */.Ny)(editorElement);\n        var x = textareaPosition.left +\n            (vditor.options.outline.position === \"left\" ? vditor.outline.element.offsetWidth : 0);\n        var y = textareaPosition.top;\n        var hintsHTML = \"\";\n        data.forEach(function (hintData, i) {\n            if (i > 7) {\n                return;\n            }\n            // process high light\n            var html = hintData.html;\n            if (key !== \"\") {\n                var lastIndex = html.lastIndexOf(\">\") + 1;\n                var replaceHtml = html.substr(lastIndex);\n                var replaceIndex = replaceHtml.toLowerCase().indexOf(key.toLowerCase());\n                if (replaceIndex > -1) {\n                    replaceHtml = replaceHtml.substring(0, replaceIndex) + \"<b>\" +\n                        replaceHtml.substring(replaceIndex, replaceIndex + key.length) + \"</b>\" +\n                        replaceHtml.substring(replaceIndex + key.length);\n                    html = html.substr(0, lastIndex) + replaceHtml;\n                }\n            }\n            hintsHTML += \"<button data-value=\\\"\" + encodeURIComponent(hintData.value) + \" \\\"\\n\" + (i === 0 ? \"class='vditor-hint--current'\" : \"\") + \"> \" + html + \"</button>\";\n        });\n        this.element.innerHTML = hintsHTML;\n        var lineHeight = parseInt(document.defaultView.getComputedStyle(editorElement, null)\n            .getPropertyValue(\"line-height\"), 10);\n        this.element.style.top = y + (lineHeight || 22) + \"px\";\n        this.element.style.left = x + \"px\";\n        this.element.style.display = \"block\";\n        this.element.style.right = \"auto\";\n        this.element.querySelectorAll(\"button\").forEach(function (element) {\n            element.addEventListener(\"click\", function (event) {\n                _this.fillEmoji(element, vditor);\n                event.preventDefault();\n            });\n        });\n        // hint 展现在上部\n        if (this.element.getBoundingClientRect().bottom > window.innerHeight) {\n            this.element.style.top = y - this.element.offsetHeight + \"px\";\n        }\n        if (this.element.getBoundingClientRect().right > window.innerWidth) {\n            this.element.style.left = \"auto\";\n            this.element.style.right = \"0\";\n        }\n    };\n    Hint.prototype.select = function (event, vditor) {\n        if (this.element.querySelectorAll(\"button\").length === 0 ||\n            this.element.style.display === \"none\") {\n            return false;\n        }\n        var currentHintElement = this.element.querySelector(\".vditor-hint--current\");\n        if (event.key === \"ArrowDown\") {\n            event.preventDefault();\n            event.stopPropagation();\n            currentHintElement.removeAttribute(\"class\");\n            if (!currentHintElement.nextElementSibling) {\n                this.element.children[0].className = \"vditor-hint--current\";\n            }\n            else {\n                currentHintElement.nextElementSibling.className = \"vditor-hint--current\";\n            }\n            return true;\n        }\n        else if (event.key === \"ArrowUp\") {\n            event.preventDefault();\n            event.stopPropagation();\n            currentHintElement.removeAttribute(\"class\");\n            if (!currentHintElement.previousElementSibling) {\n                var length_1 = this.element.children.length;\n                this.element.children[length_1 - 1].className = \"vditor-hint--current\";\n            }\n            else {\n                currentHintElement.previousElementSibling.className = \"vditor-hint--current\";\n            }\n            return true;\n        }\n        else if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Enter\" && !event.isComposing) {\n            event.preventDefault();\n            event.stopPropagation();\n            this.fillEmoji(currentHintElement, vditor);\n            return true;\n        }\n        return false;\n    };\n    Hint.prototype.getKey = function (currentLineValue, extend) {\n        var _this = this;\n        this.lastIndex = -1;\n        this.splitChar = \"\";\n        extend.forEach(function (item) {\n            var currentLastIndex = currentLineValue.lastIndexOf(item.key);\n            if (_this.lastIndex < currentLastIndex) {\n                _this.splitChar = item.key;\n                _this.lastIndex = currentLastIndex;\n            }\n        });\n        var key;\n        if (this.lastIndex === -1) {\n            return key;\n        }\n        var lineArray = currentLineValue.split(this.splitChar);\n        var lastItem = lineArray[lineArray.length - 1];\n        var maxLength = 32;\n        if (lineArray.length > 1 && lastItem.trim() === lastItem) {\n            if (lineArray.length === 2 && lineArray[0] === \"\" && lineArray[1].length < maxLength) {\n                key = lineArray[1];\n            }\n            else {\n                var preChar = lineArray[lineArray.length - 2].slice(-1);\n                if ((0,code160to32/* code160to32 */.X)(preChar) === \" \" && lastItem.length < maxLength) {\n                    key = lastItem;\n                }\n            }\n        }\n        return key;\n    };\n    return Hint;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/ir/index.ts\n\n\n\n\n\n\n\n\n\n\n\nvar IR = /** @class */ (function () {\n    function IR(vditor) {\n        this.composingLock = false;\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-ir\";\n        divElement.innerHTML = \"<pre class=\\\"vditor-reset\\\" placeholder=\\\"\" + vditor.options.placeholder + \"\\\"\\n contenteditable=\\\"true\\\" spellcheck=\\\"false\\\"></pre>\";\n        this.element = divElement.firstElementChild;\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        dblclickEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n    }\n    IR.prototype.copy = function (event, vditor) {\n        var range = getSelection().getRangeAt(0);\n        if (range.toString() === \"\") {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        var tempElement = document.createElement(\"div\");\n        tempElement.appendChild(range.cloneContents());\n        event.clipboardData.setData(\"text/plain\", vditor.lute.VditorIRDOM2Md(tempElement.innerHTML).trim());\n        event.clipboardData.setData(\"text/html\", \"\");\n    };\n    IR.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        });\n        this.element.addEventListener(\"compositionstart\", function (event) {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                input(vditor, getSelection().getRangeAt(0).cloneRange());\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 编辑器内容拖拽问题\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                return;\n            }\n            if (_this.composingLock || event.data === \"‘\" || event.data === \"“\" || event.data === \"《\") {\n                return;\n            }\n            input(vditor, getSelection().getRangeAt(0).cloneRange(), false, event);\n        });\n        this.element.addEventListener(\"click\", function (event) {\n            if (event.target.tagName === \"INPUT\") {\n                if (event.target.checked) {\n                    event.target.setAttribute(\"checked\", \"checked\");\n                }\n                else {\n                    event.target.removeAttribute(\"checked\");\n                }\n                _this.preventInput = true;\n                process_processAfterRender(vditor);\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            // 点击后光标落于预览区\n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(event.target, \"vditor-ir__preview\");\n            if (!previewElement) {\n                previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n            }\n            if (previewElement) {\n                if (previewElement.previousElementSibling.firstElementChild) {\n                    range.selectNodeContents(previewElement.previousElementSibling.firstElementChild);\n                }\n                else {\n                    // 行内数学公式\n                    range.selectNodeContents(previewElement.previousElementSibling);\n                }\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                scrollCenter(vditor);\n            }\n            // 点击图片光标选中图片地址\n            if (event.target.tagName === \"IMG\") {\n                var linkElement = event.target.parentElement.querySelector(\".vditor-ir__marker--link\");\n                if (linkElement) {\n                    range.selectNode(linkElement);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n            }\n            // 打开链接\n            var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"a\");\n            if (aElement && (!aElement.classList.contains(\"vditor-ir__node--expand\"))) {\n                window.open(aElement.querySelector(\":scope > .vditor-ir__marker--link\").textContent);\n                return;\n            }\n            if (event.target.isEqualNode(_this.element) && _this.element.lastElementChild && range.collapsed) {\n                var lastRect = _this.element.lastElementChild.getBoundingClientRect();\n                if (event.y > lastRect.top + lastRect.height) {\n                    if (_this.element.lastElementChild.tagName === \"P\" &&\n                        _this.element.lastElementChild.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        range.selectNodeContents(_this.element.lastElementChild);\n                        range.collapse(false);\n                    }\n                    else {\n                        _this.element.insertAdjacentHTML(\"beforeend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n                        (0,selection/* setRangeByWbr */.ib)(_this.element, range);\n                    }\n                }\n            }\n            if (range.toString() === \"\") {\n                expandMarker(range, vditor);\n            }\n            else {\n                // https://github.com/Vanessa219/vditor/pull/681 当点击选中区域时 eventTarget 与 range 不一致，需延迟等待 range 发生变化\n                setTimeout(function () {\n                    expandMarker((0,selection/* getEditorRange */.zh)(vditor), vditor);\n                });\n            }\n            clickToc(event, vditor);\n            highlightToolbarIR(vditor);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n            highlightToolbarIR(vditor);\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.ir.element.innerHTML !== \"\" && vditor.ir.element.childNodes.length === 1 &&\n                vditor.ir.element.firstElementChild && vditor.ir.element.firstElementChild.tagName === \"P\"\n                && vditor.ir.element.firstElementChild.childElementCount === 0\n                && (vditor.ir.element.textContent === \"\" || vditor.ir.element.textContent === \"\\n\")) {\n                // 为空时显示 placeholder\n                vditor.ir.element.innerHTML = \"\";\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.key === \"Backspace\") {\n                // firefox headings https://github.com/Vanessa219/vditor/issues/211\n                if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.textContent === \"\\n\" && range.startOffset === 1) {\n                    range.startContainer.textContent = \"\";\n                    expandMarker(range, vditor);\n                }\n                // 数学公式前是空块，空块前是 table，在空块前删除，数学公式会多一个 br\n                _this.element.querySelectorAll(\".language-math\").forEach(function (item) {\n                    var brElement = item.querySelector(\"br\");\n                    if (brElement) {\n                        brElement.remove();\n                    }\n                });\n            }\n            else if (event.key.indexOf(\"Arrow\") > -1) {\n                if (event.key === \"ArrowLeft\" || event.key === \"ArrowRight\") {\n                    processHint(vditor);\n                }\n                expandMarker(range, vditor);\n            }\n            else if (event.keyCode === 229 && event.code === \"\" && event.key === \"Unidentified\") {\n                // https://github.com/Vanessa219/vditor/issues/508 IR 删除到节点需展开\n                expandMarker(range, vditor);\n            }\n            var previewRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n            if (previewRenderElement) {\n                if (event.key === \"ArrowUp\" || event.key === \"ArrowLeft\") {\n                    if (previewRenderElement.previousElementSibling.firstElementChild) {\n                        range.selectNodeContents(previewRenderElement.previousElementSibling.firstElementChild);\n                    }\n                    else {\n                        // 行内数学公式/html entity\n                        range.selectNodeContents(previewRenderElement.previousElementSibling);\n                    }\n                    range.collapse(false);\n                    event.preventDefault();\n                    return true;\n                }\n                if (previewRenderElement.tagName === \"SPAN\" &&\n                    (event.key === \"ArrowDown\" || event.key === \"ArrowRight\")) {\n                    if (previewRenderElement.parentElement.getAttribute(\"data-type\") === \"html-entity\") {\n                        // html entity\n                        previewRenderElement.parentElement.insertAdjacentText(\"afterend\", constants/* Constants.ZWSP */.g.ZWSP);\n                        range.setStart(previewRenderElement.parentElement.nextSibling, 1);\n                    }\n                    else {\n                        range.selectNodeContents(previewRenderElement.parentElement.lastElementChild);\n                    }\n                    range.collapse(false);\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        });\n    };\n    return IR;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/markdown/getHTML.ts\n\nvar getHTML = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return vditor.lute.Md2HTML(getMarkdown(vditor));\n    }\n    else if (vditor.currentMode === \"wysiwyg\") {\n        return vditor.lute.VditorDOM2HTML(vditor.wysiwyg.element.innerHTML);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        return vditor.lute.VditorIRDOM2HTML(vditor.ir.element.innerHTML);\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/setLute.ts\nvar setLute = __webpack_require__(792);\n// EXTERNAL MODULE: ./src/ts/markdown/outlineRender.ts\nvar outlineRender = __webpack_require__(198);\n;// CONCATENATED MODULE: ./src/ts/outline/index.ts\n\n\n\n\nvar Outline = /** @class */ (function () {\n    function Outline(outlineLabel) {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-outline\";\n        this.element.innerHTML = \"<div class=\\\"vditor-outline__title\\\">\" + outlineLabel + \"</div>\\n<div class=\\\"vditor-outline__content\\\"></div>\";\n    }\n    Outline.prototype.render = function (vditor) {\n        var html = \"\";\n        if (vditor.preview.element.style.display === \"block\") {\n            html = (0,outlineRender/* outlineRender */.k)(vditor.preview.element.lastElementChild, this.element.lastElementChild, vditor);\n        }\n        else {\n            html = (0,outlineRender/* outlineRender */.k)(vditor[vditor.currentMode].element, this.element.lastElementChild, vditor);\n        }\n        return html;\n    };\n    Outline.prototype.toggle = function (vditor, show) {\n        var _a;\n        if (show === void 0) { show = true; }\n        var btnElement = (_a = vditor.toolbar.elements.outline) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n        if (show && window.innerWidth >= constants/* Constants.MOBILE_WIDTH */.g.MOBILE_WIDTH) {\n            this.element.style.display = \"block\";\n            this.render(vditor);\n            btnElement === null || btnElement === void 0 ? void 0 : btnElement.classList.add(\"vditor-menu--current\");\n        }\n        else {\n            this.element.style.display = \"none\";\n            btnElement === null || btnElement === void 0 ? void 0 : btnElement.classList.remove(\"vditor-menu--current\");\n        }\n        if (getSelection().rangeCount > 0) {\n            var range = getSelection().getRangeAt(0);\n            if (vditor[vditor.currentMode].element.contains(range.startContainer)) {\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                vditor[vditor.currentMode].element.focus();\n            }\n        }\n        setPadding(vditor);\n    };\n    return Outline;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/markdown/mediaRender.ts\nvar mediaRender = __webpack_require__(207);\n;// CONCATENATED MODULE: ./src/ts/preview/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Preview = /** @class */ (function () {\n    function Preview(vditor) {\n        var _this = this;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-preview\";\n        var previewElement = document.createElement(\"div\");\n        previewElement.className = \"vditor-reset\";\n        if (vditor.options.classes.preview) {\n            previewElement.classList.add(vditor.options.classes.preview);\n        }\n        previewElement.style.maxWidth = vditor.options.preview.maxWidth + \"px\";\n        previewElement.addEventListener(\"copy\", function (event) {\n            if (event.target.tagName === \"TEXTAREA\") {\n                // https://github.com/Vanessa219/vditor/issues/901\n                return;\n            }\n            var tempElement = document.createElement(\"div\");\n            tempElement.className = \"vditor-reset\";\n            tempElement.appendChild(getSelection().getRangeAt(0).cloneContents());\n            _this.copyToX(vditor, tempElement);\n            event.preventDefault();\n        });\n        previewElement.addEventListener(\"click\", function (event) {\n            var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n            if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n                var headingElement = previewElement.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n                if (headingElement) {\n                    _this.element.scrollTop = headingElement.offsetTop;\n                }\n                return;\n            }\n            if (event.target.tagName === \"IMG\") {\n                (0,preview_image/* previewImage */.E)(event.target, vditor.options.lang, vditor.options.theme);\n            }\n        });\n        var actions = vditor.options.preview.actions;\n        var actionElement = document.createElement(\"div\");\n        actionElement.className = \"vditor-preview__action\";\n        var actionHtml = [];\n        for (var i = 0; i < actions.length; i++) {\n            var action = actions[i];\n            if (typeof action === \"object\") {\n                actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"\" + action.key + \"\\\" class=\\\"\" + action.className + \"\\\"\" + (action.tooltip ? \" aria-label=\\\"\" + action.tooltip + \"\\\"\" : \"\") + \"\\\">\" + action.text + \"</button>\");\n                continue;\n            }\n            switch (action) {\n                case \"desktop\":\n                    actionHtml.push(\"<button type=\\\"button\\\" class=\\\"vditor-preview__action--current\\\" data-type=\\\"desktop\\\">Desktop</button>\");\n                    break;\n                case \"tablet\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"tablet\\\">Tablet</button>\");\n                    break;\n                case \"mobile\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"mobile\\\">Mobile/Wechat</button>\");\n                    break;\n                case \"mp-wechat\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"mp-wechat\\\" class=\\\"vditor-tooltipped vditor-tooltipped__w\\\" aria-label=\\\"\\u590D\\u5236\\u5230\\u516C\\u4F17\\u53F7\\\"><svg><use xlink:href=\\\"#vditor-icon-mp-wechat\\\"></use></svg></button>\");\n                    break;\n                case \"zhihu\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"zhihu\\\" class=\\\"vditor-tooltipped vditor-tooltipped__w\\\" aria-label=\\\"\\u590D\\u5236\\u5230\\u77E5\\u4E4E\\\"><svg><use xlink:href=\\\"#vditor-icon-zhihu\\\"></use></svg></button>\");\n                    break;\n            }\n        }\n        actionElement.innerHTML = actionHtml.join(\"\");\n        if (actions.length === 0) {\n            actionElement.style.display = \"none\";\n        }\n        this.element.appendChild(actionElement);\n        this.element.appendChild(previewElement);\n        actionElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btn = (0,hasClosestByHeadings/* hasClosestByTag */.S)(event.target, \"BUTTON\");\n            if (!btn) {\n                return;\n            }\n            var type = btn.getAttribute(\"data-type\");\n            var actionCustom = actions.find(function (w) { return (w === null || w === void 0 ? void 0 : w.key) === type; });\n            if (actionCustom) {\n                actionCustom.click(type);\n                return;\n            }\n            if (type === \"mp-wechat\" || type === \"zhihu\") {\n                _this.copyToX(vditor, _this.element.lastElementChild.cloneNode(true), type);\n                return;\n            }\n            if (type === \"desktop\") {\n                previewElement.style.width = \"auto\";\n            }\n            else if (type === \"tablet\") {\n                previewElement.style.width = \"780px\";\n            }\n            else {\n                previewElement.style.width = \"360px\";\n            }\n            if (previewElement.scrollWidth > previewElement.parentElement.clientWidth) {\n                previewElement.style.width = \"auto\";\n            }\n            _this.render(vditor);\n            actionElement.querySelectorAll(\"button\").forEach(function (item) {\n                item.classList.remove(\"vditor-preview__action--current\");\n            });\n            btn.classList.add(\"vditor-preview__action--current\");\n        });\n    }\n    Preview.prototype.render = function (vditor, value) {\n        var _this = this;\n        clearTimeout(this.mdTimeoutId);\n        if (this.element.style.display === \"none\") {\n            if (this.element.getAttribute(\"data-type\") === \"renderPerformance\") {\n                vditor.tip.hide();\n            }\n            return;\n        }\n        if (value) {\n            this.element.lastElementChild.innerHTML = value;\n            return;\n        }\n        if (getMarkdown(vditor)\n            .replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, \"\") === \"\") {\n            this.element.lastElementChild.innerHTML = \"\";\n            return;\n        }\n        var renderStartTime = new Date().getTime();\n        var markdownText = getMarkdown(vditor);\n        this.mdTimeoutId = window.setTimeout(function () {\n            if (vditor.options.preview.url) {\n                var xhr_1 = new XMLHttpRequest();\n                xhr_1.open(\"POST\", vditor.options.preview.url);\n                xhr_1.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n                xhr_1.onreadystatechange = function () {\n                    if (xhr_1.readyState === XMLHttpRequest.DONE) {\n                        if (xhr_1.status === 200) {\n                            var responseJSON = JSON.parse(xhr_1.responseText);\n                            if (responseJSON.code !== 0) {\n                                vditor.tip.show(responseJSON.msg);\n                                return;\n                            }\n                            if (vditor.options.preview.transform) {\n                                responseJSON.data = vditor.options.preview.transform(responseJSON.data);\n                            }\n                            _this.element.lastElementChild.innerHTML = responseJSON.data;\n                            _this.afterRender(vditor, renderStartTime);\n                        }\n                        else {\n                            var html = vditor.lute.Md2HTML(markdownText);\n                            if (vditor.options.preview.transform) {\n                                html = vditor.options.preview.transform(html);\n                            }\n                            _this.element.lastElementChild.innerHTML = html;\n                            _this.afterRender(vditor, renderStartTime);\n                        }\n                    }\n                };\n                xhr_1.send(JSON.stringify({ markdownText: markdownText }));\n            }\n            else {\n                var html = vditor.lute.Md2HTML(markdownText);\n                if (vditor.options.preview.transform) {\n                    html = vditor.options.preview.transform(html);\n                }\n                _this.element.lastElementChild.innerHTML = html;\n                _this.afterRender(vditor, renderStartTime);\n            }\n        }, vditor.options.preview.delay);\n    };\n    Preview.prototype.afterRender = function (vditor, startTime) {\n        if (vditor.options.preview.parse) {\n            vditor.options.preview.parse(this.element);\n        }\n        var time = (new Date().getTime() - startTime);\n        if ((new Date().getTime() - startTime) > 2600) {\n            // https://github.com/b3log/vditor/issues/67\n            vditor.tip.show(window.VditorI18n.performanceTip.replace(\"${x}\", time.toString()));\n            vditor.preview.element.setAttribute(\"data-type\", \"renderPerformance\");\n        }\n        else if (vditor.preview.element.getAttribute(\"data-type\") === \"renderPerformance\") {\n            vditor.tip.hide();\n            vditor.preview.element.removeAttribute(\"data-type\");\n        }\n        var cmtFocusElement = vditor.preview.element.querySelector(\".vditor-comment--focus\");\n        if (cmtFocusElement) {\n            cmtFocusElement.classList.remove(\"vditor-comment--focus\");\n        }\n        (0,codeRender/* codeRender */.O)(vditor.preview.element.lastElementChild);\n        (0,highlightRender/* highlightRender */.s)(vditor.options.preview.hljs, vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,mermaidRender/* mermaidRender */.i)(vditor.preview.element.lastElementChild, vditor.options.cdn, vditor.options.theme);\n        (0,flowchartRender/* flowchartRender */.P)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,graphvizRender/* graphvizRender */.v)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,chartRender/* chartRender */.p)(vditor.preview.element.lastElementChild, vditor.options.cdn, vditor.options.theme);\n        (0,mindmapRender/* mindmapRender */.P)(vditor.preview.element.lastElementChild, vditor.options.cdn, vditor.options.theme);\n        (0,plantumlRender/* plantumlRender */.B)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,abcRender/* abcRender */.Q)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,mediaRender/* mediaRender */.Y)(vditor.preview.element.lastElementChild);\n        // toc render\n        var editorElement = vditor.preview.element;\n        var tocHTML = vditor.outline.render(vditor);\n        if (tocHTML === \"\") {\n            tocHTML = \"[ToC]\";\n        }\n        editorElement.querySelectorAll('[data-type=\"toc-block\"]').forEach(function (item) {\n            item.innerHTML = tocHTML;\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n        (0,mathRender/* mathRender */.H)(vditor.preview.element.lastElementChild, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    };\n    Preview.prototype.copyToX = function (vditor, copyElement, type) {\n        if (type === void 0) { type = \"mp-wechat\"; }\n        // fix math render\n        if (type !== \"zhihu\") {\n            copyElement.querySelectorAll(\".katex-html .base\").forEach(function (item) {\n                item.style.display = \"initial\";\n            });\n        }\n        else {\n            copyElement.querySelectorAll(\".language-math\").forEach(function (item) {\n                item.outerHTML = \"<img class=\\\"Formula-image\\\" data-eeimg=\\\"true\\\" src=\\\"//www.zhihu.com/equation?tex=\\\" alt=\\\"\" + item.getAttribute(\"data-math\") + \"\\\\\\\" style=\\\"display: block; margin: 0 auto; max-width: 100%;\\\">\";\n            });\n        }\n        // 防止背景色被粘贴到公众号中\n        copyElement.style.backgroundColor = \"#fff\";\n        // 代码背景\n        copyElement.querySelectorAll(\"code\").forEach(function (item) {\n            item.style.backgroundImage = \"none\";\n        });\n        this.element.append(copyElement);\n        var range = copyElement.ownerDocument.createRange();\n        range.selectNode(copyElement);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        document.execCommand(\"copy\");\n        this.element.lastElementChild.remove();\n        vditor.tip.show(\"\\u5DF2\\u590D\\u5236\\uFF0C\\u53EF\\u5230\" + (type === \"zhihu\" ? \"知乎\" : \"微信公众号平台\") + \"\\u8FDB\\u884C\\u7C98\\u8D34\");\n    };\n    return Preview;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/resize/index.ts\nvar Resize = /** @class */ (function () {\n    function Resize(vditor) {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-resize vditor-resize--\" + vditor.options.resize.position;\n        this.element.innerHTML = \"<div><svg><use xlink:href=\\\"#vditor-icon-resize\\\"></use></svg></div>\";\n        this.bindEvent(vditor);\n    }\n    Resize.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"mousedown\", function (event) {\n            var documentSelf = document;\n            var y = event.clientY;\n            var height = vditor.element.offsetHeight;\n            var minHeight = 63 + vditor.element.querySelector(\".vditor-toolbar\").clientHeight;\n            documentSelf.ondragstart = function () { return false; };\n            if (window.captureEvents) {\n                window.captureEvents();\n            }\n            _this.element.classList.add(\"vditor-resize--selected\");\n            documentSelf.onmousemove = function (moveEvent) {\n                if (vditor.options.resize.position === \"top\") {\n                    vditor.element.style.height = Math.max(minHeight, height + (y - moveEvent.clientY)) + \"px\";\n                }\n                else {\n                    vditor.element.style.height = Math.max(minHeight, height + (moveEvent.clientY - y)) + \"px\";\n                }\n                if (vditor.options.typewriterMode) {\n                    vditor.sv.element.style.paddingBottom =\n                        vditor.sv.element.parentElement.offsetHeight / 2 + \"px\";\n                }\n            };\n            documentSelf.onmouseup = function () {\n                if (vditor.options.resize.after) {\n                    vditor.options.resize.after(vditor.element.offsetHeight - height);\n                }\n                if (window.captureEvents) {\n                    window.captureEvents();\n                }\n                documentSelf.onmousemove = null;\n                documentSelf.onmouseup = null;\n                documentSelf.ondragstart = null;\n                documentSelf.onselectstart = null;\n                documentSelf.onselect = null;\n                _this.element.classList.remove(\"vditor-resize--selected\");\n            };\n        });\n    };\n    return Resize;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/sv/index.ts\n\n\n\n\n\nvar Editor = /** @class */ (function () {\n    function Editor(vditor) {\n        this.composingLock = false;\n        this.element = document.createElement(\"pre\");\n        this.element.className = \"vditor-sv vditor-reset\";\n        this.element.setAttribute(\"placeholder\", vditor.options.placeholder);\n        this.element.setAttribute(\"contenteditable\", \"true\");\n        this.element.setAttribute(\"spellcheck\", \"false\");\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n    }\n    Editor.prototype.copy = function (event, vditor) {\n        event.stopPropagation();\n        event.preventDefault();\n        event.clipboardData.setData(\"text/plain\", getSelectText(vditor[vditor.currentMode].element));\n    };\n    Editor.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        });\n        this.element.addEventListener(\"scroll\", function () {\n            if (vditor.preview.element.style.display !== \"block\") {\n                return;\n            }\n            var textScrollTop = _this.element.scrollTop;\n            var textHeight = _this.element.clientHeight;\n            var textScrollHeight = _this.element.scrollHeight - parseFloat(_this.element.style.paddingBottom || \"0\");\n            var preview = vditor.preview.element;\n            if ((textScrollTop / textHeight > 0.5)) {\n                preview.scrollTop = (textScrollTop + textHeight) *\n                    preview.scrollHeight / textScrollHeight - textHeight;\n            }\n            else {\n                preview.scrollTop = textScrollTop *\n                    preview.scrollHeight / textScrollHeight;\n            }\n        });\n        this.element.addEventListener(\"compositionstart\", function (event) {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                inputEvent(vditor, event);\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 编辑器内容拖拽问题\n                return;\n            }\n            if (_this.composingLock || event.data === \"‘\" || event.data === \"“\" || event.data === \"《\") {\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                return;\n            }\n            inputEvent(vditor, event);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.sv.element.innerHTML !== \"\" && vditor.sv.element.childNodes.length === 1 &&\n                vditor.sv.element.firstElementChild && vditor.sv.element.firstElementChild.tagName === \"DIV\"\n                && vditor.sv.element.firstElementChild.childElementCount === 2\n                && (vditor.sv.element.firstElementChild.textContent === \"\" || vditor.sv.element.textContent === \"\\n\")) {\n                // 为空时显示 placeholder\n                vditor.sv.element.innerHTML = \"\";\n                return;\n            }\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n        });\n    };\n    return Editor;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/tip/index.ts\nvar Tip = /** @class */ (function () {\n    function Tip() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-tip\";\n    }\n    Tip.prototype.show = function (text, time) {\n        var _this = this;\n        if (time === void 0) { time = 6000; }\n        this.element.className = \"vditor-tip vditor-tip--show\";\n        if (time === 0) {\n            this.element.innerHTML = \"<div class=\\\"vditor-tip__content\\\">\" + text + \"\\n<div class=\\\"vditor-tip__close\\\">X</div></div>\";\n            this.element.querySelector(\".vditor-tip__close\").addEventListener(\"click\", function () {\n                _this.hide();\n            });\n            return;\n        }\n        this.element.innerHTML = \"<div class=\\\"vditor-tip__content\\\">\" + text + \"</div>\";\n        setTimeout(function () {\n            _this.hide();\n        }, time);\n    };\n    Tip.prototype.hide = function () {\n        this.element.className = \"vditor-messageElementtip\";\n        this.element.innerHTML = \"\";\n    };\n    return Tip;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/ui/setPreviewMode.ts\n\n\nvar setPreviewMode = function (mode, vditor) {\n    if (vditor.options.preview.mode === mode) {\n        return;\n    }\n    vditor.options.preview.mode = mode;\n    switch (mode) {\n        case \"both\":\n            vditor.sv.element.style.display = \"block\";\n            vditor.preview.element.style.display = \"block\";\n            vditor.preview.render(vditor);\n            setCurrentToolbar(vditor.toolbar.elements, [\"both\"]);\n            break;\n        case \"editor\":\n            vditor.sv.element.style.display = \"block\";\n            vditor.preview.element.style.display = \"none\";\n            removeCurrentToolbar(vditor.toolbar.elements, [\"both\"]);\n            break;\n        default:\n            break;\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Both.ts\nvar Both_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Both = /** @class */ (function (_super) {\n    Both_extends(Both, _super);\n    function Both(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        if (vditor.options.preview.mode === \"both\") {\n            _this.element.children[0].classList.add(\"vditor-menu--current\");\n        }\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            event.preventDefault();\n            if (vditor.currentMode !== \"sv\") {\n                return;\n            }\n            if (vditor.options.preview.mode === \"both\") {\n                setPreviewMode(\"editor\", vditor);\n            }\n            else {\n                setPreviewMode(\"both\", vditor);\n            }\n        });\n        return _this;\n    }\n    return Both;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Br.ts\nvar Br = /** @class */ (function () {\n    function Br() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar__br\";\n    }\n    return Br;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/ui/setCodeTheme.ts\nvar setCodeTheme = __webpack_require__(968);\n;// CONCATENATED MODULE: ./src/ts/toolbar/CodeTheme.ts\nvar CodeTheme_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar CodeTheme = /** @class */ (function (_super) {\n    CodeTheme_extends(CodeTheme, _super);\n    function CodeTheme(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        var innerHTML = \"\";\n        constants/* Constants.CODE_THEME.forEach */.g.CODE_THEME.forEach(function (theme) {\n            innerHTML += \"<button>\" + theme + \"</button>\";\n        });\n        panelElement.innerHTML =\n            \"<div style=\\\"overflow: auto;max-height:\" + window.innerHeight / 2 + \"px\\\">\" + innerHTML + \"</div>\";\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (event.target.tagName === \"BUTTON\") {\n                hidePanel(vditor, [\"subToolbar\"]);\n                vditor.options.preview.hljs.style = event.target.textContent;\n                (0,setCodeTheme/* setCodeTheme */.Y)(event.target.textContent, vditor.options.cdn);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return CodeTheme;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/ContentTheme.ts\nvar ContentTheme_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar ContentTheme = /** @class */ (function (_super) {\n    ContentTheme_extends(ContentTheme, _super);\n    function ContentTheme(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        var innerHTML = \"\";\n        Object.keys(vditor.options.preview.theme.list).forEach(function (key) {\n            innerHTML += \"<button data-type=\\\"\" + key + \"\\\">\" + vditor.options.preview.theme.list[key] + \"</button>\";\n        });\n        panelElement.innerHTML =\n            \"<div style=\\\"overflow: auto;max-height:\" + window.innerHeight / 2 + \"px\\\">\" + innerHTML + \"</div>\";\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (event.target.tagName === \"BUTTON\") {\n                hidePanel(vditor, [\"subToolbar\"]);\n                vditor.options.preview.theme.current = event.target.getAttribute(\"data-type\");\n                (0,setContentTheme/* setContentTheme */.Z)(vditor.options.preview.theme.current, vditor.options.preview.theme.path);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return ContentTheme;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Counter.ts\nvar Counter = /** @class */ (function () {\n    function Counter(vditor) {\n        this.element = document.createElement(\"span\");\n        this.element.className = \"vditor-counter vditor-tooltipped vditor-tooltipped__nw\";\n        this.render(vditor, \"\");\n    }\n    Counter.prototype.render = function (vditor, mdText) {\n        var length = mdText.endsWith(\"\\n\") ? mdText.length - 1 : mdText.length;\n        if (vditor.options.counter.type === \"text\" && vditor[vditor.currentMode]) {\n            var tempElement = vditor[vditor.currentMode].element.cloneNode(true);\n            tempElement.querySelectorAll(\".vditor-wysiwyg__preview\").forEach(function (item) {\n                item.remove();\n            });\n            length = tempElement.textContent.length;\n        }\n        if (typeof vditor.options.counter.max === \"number\") {\n            if (length > vditor.options.counter.max) {\n                this.element.className = \"vditor-counter vditor-counter--error\";\n            }\n            else {\n                this.element.className = \"vditor-counter\";\n            }\n            this.element.innerHTML = length + \"/\" + vditor.options.counter.max;\n        }\n        else {\n            this.element.innerHTML = \"\" + length;\n        }\n        this.element.setAttribute(\"aria-label\", vditor.options.counter.type);\n        if (vditor.options.counter.after) {\n            vditor.options.counter.after(length, {\n                enable: vditor.options.counter.enable,\n                max: vditor.options.counter.max,\n                type: vditor.options.counter.type,\n            });\n        }\n    };\n    return Counter;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Custom.ts\nvar Custom_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Custom = /** @class */ (function (_super) {\n    Custom_extends(Custom, _super);\n    function Custom(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].innerHTML = menuItem.icon;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (event.currentTarget.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            menuItem.click(event, vditor);\n        });\n        return _this;\n    }\n    return Custom;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Devtools.ts\nvar Devtools_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Devtools = /** @class */ (function (_super) {\n    Devtools_extends(Devtools, _super);\n    function Devtools(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.firstElementChild.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            event.preventDefault();\n            if (btnElement.classList.contains(\"vditor-menu--current\")) {\n                btnElement.classList.remove(\"vditor-menu--current\");\n                vditor.devtools.element.style.display = \"none\";\n                setPadding(vditor);\n            }\n            else {\n                btnElement.classList.add(\"vditor-menu--current\");\n                vditor.devtools.element.style.display = \"block\";\n                setPadding(vditor);\n                vditor.devtools.renderEchart(vditor);\n            }\n        });\n        return _this;\n    }\n    return Devtools;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Divider.ts\nvar Divider = /** @class */ (function () {\n    function Divider() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar__divider\";\n    }\n    return Divider;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Emoji.ts\nvar Emoji_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar Emoji = /** @class */ (function (_super) {\n    Emoji_extends(Emoji, _super);\n    function Emoji(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-panel vditor-panel--arrow\";\n        var commonEmojiHTML = \"\";\n        Object.keys(vditor.options.hint.emoji).forEach(function (key) {\n            var emojiValue = vditor.options.hint.emoji[key];\n            if (emojiValue.indexOf(\".\") > -1) {\n                commonEmojiHTML += \"<button data-value=\\\":\" + key + \": \\\" data-key=\\\":\" + key + \":\\\"><img\\ndata-value=\\\":\" + key + \": \\\" data-key=\\\":\" + key + \":\\\" class=\\\"vditor-emojis__icon\\\" src=\\\"\" + emojiValue + \"\\\"/></button>\";\n            }\n            else {\n                commonEmojiHTML += \"<button data-value=\\\"\" + emojiValue + \" \\\"\\n data-key=\\\"\" + key + \"\\\"><span class=\\\"vditor-emojis__icon\\\">\" + emojiValue + \"</span></button>\";\n            }\n        });\n        var tailHTML = \"<div class=\\\"vditor-emojis__tail\\\">\\n    <span class=\\\"vditor-emojis__tip\\\"></span><span>\" + (vditor.options.hint.emojiTail || \"\") + \"</span>\\n</div>\";\n        panelElement.innerHTML = \"<div class=\\\"vditor-emojis\\\" style=\\\"max-height: \" + (vditor.options.height === \"auto\" ? \"auto\" : vditor.options.height - 80) + \"px\\\">\" + commonEmojiHTML + \"</div>\" + tailHTML;\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, _this.element.children[0], menuItem.level);\n        _this._bindEvent(vditor, panelElement);\n        return _this;\n    }\n    Emoji.prototype._bindEvent = function (vditor, panelElement) {\n        panelElement.querySelectorAll(\".vditor-emojis button\").forEach(function (element) {\n            element.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                event.preventDefault();\n                var value = element.getAttribute(\"data-value\");\n                var range = (0,selection/* getEditorRange */.zh)(vditor);\n                var html = value;\n                if (vditor.currentMode === \"wysiwyg\") {\n                    html = vditor.lute.SpinVditorDOM(value);\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    html = vditor.lute.SpinVditorIRDOM(value);\n                }\n                if (value.indexOf(\":\") > -1 && vditor.currentMode !== \"sv\") {\n                    var tempElement = document.createElement(\"div\");\n                    tempElement.innerHTML = html;\n                    html = tempElement.firstElementChild.firstElementChild.outerHTML + \" \";\n                    (0,selection/* insertHTML */.oC)(html, vditor);\n                }\n                else {\n                    range.extractContents();\n                    range.insertNode(document.createTextNode(value));\n                }\n                range.collapse(false);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                panelElement.style.display = \"none\";\n                execAfterRender(vditor);\n            });\n            element.addEventListener(\"mouseover\", function (event) {\n                if (event.target.tagName === \"BUTTON\") {\n                    panelElement.querySelector(\".vditor-emojis__tip\").innerHTML =\n                        event.target.getAttribute(\"data-key\");\n                }\n            });\n        });\n    };\n    return Emoji;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/export/index.ts\n\n\nvar download = function (vditor, content, filename) {\n    var aElement = document.createElement(\"a\");\n    if (\"download\" in aElement) {\n        aElement.download = filename;\n        aElement.style.display = \"none\";\n        aElement.href = URL.createObjectURL(new Blob([content]));\n        document.body.appendChild(aElement);\n        aElement.click();\n        aElement.remove();\n    }\n    else {\n        vditor.tip.show(window.VditorI18n.downloadTip, 0);\n    }\n};\nvar exportMarkdown = function (vditor) {\n    var content = getMarkdown(vditor);\n    download(vditor, content, content.substr(0, 10) + \".md\");\n};\nvar exportPDF = function (vditor) {\n    vditor.tip.show(window.VditorI18n.generate, 3800);\n    var iframe = document.querySelector(\"iframe\");\n    iframe.contentDocument.open();\n    iframe.contentDocument.write(\"<link rel=\\\"stylesheet\\\" href=\\\"\" + vditor.options.cdn + \"/dist/index.css\\\"/>\\n<script src=\\\"\" + vditor.options.cdn + \"/dist/method.min.js\\\"></script>\\n<div id=\\\"preview\\\"></div>\\n<script>\\nwindow.addEventListener(\\\"message\\\", (e) => {\\n  if(!e.data) {\\n    return;\\n  }\\n  Vditor.preview(document.getElementById('preview'), e.data, {\\n    markdown: {\\n      theme: \\\"\" + vditor.options.preview.theme + \"\\\"\\n    },\\n    hljs: {\\n      style: \\\"\" + vditor.options.preview.hljs.style + \"\\\"\\n    }\\n  });\\n  setTimeout(() => {\\n        window.print();\\n    }, 3600);\\n}, false);\\n</script>\");\n    iframe.contentDocument.close();\n    setTimeout(function () {\n        iframe.contentWindow.postMessage(getMarkdown(vditor), \"*\");\n    }, 200);\n};\nvar exportHTML = function (vditor) {\n    var content = getHTML(vditor);\n    var html = \"<html><head><link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"\" + vditor.options.cdn + \"/dist/index.css\\\"/>\\n<script src=\\\"\" + vditor.options.cdn + \"/dist/js/i18n/\" + vditor.options.lang + \".js\\\"></script>\\n<script src=\\\"\" + vditor.options.cdn + \"/dist/method.min.js\\\"></script></head>\\n<body><div class=\\\"vditor-reset\\\" id=\\\"preview\\\">\" + content + \"</div>\\n<script>\\n    const previewElement = document.getElementById('preview')\\n    Vditor.setContentTheme('\" + vditor.options.preview.theme.current + \"', '\" + vditor.options.preview.theme.path + \"');\\n    Vditor.codeRender(previewElement);\\n    Vditor.highlightRender(\" + JSON.stringify(vditor.options.preview.hljs) + \", previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.mathRender(previewElement, {\\n        cdn: '\" + vditor.options.cdn + \"',\\n        math: \" + JSON.stringify(vditor.options.preview.math) + \",\\n    });\\n    Vditor.mermaidRender(previewElement, '\" + vditor.options.cdn + \"', '\" + vditor.options.theme + \"');\\n    Vditor.flowchartRender(previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.graphvizRender(previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.chartRender(previewElement, '\" + vditor.options.cdn + \"', '\" + vditor.options.theme + \"');\\n    Vditor.mindmapRender(previewElement, '\" + vditor.options.cdn + \"', '\" + vditor.options.theme + \"');\\n    Vditor.abcRender(previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.mediaRender(previewElement);\\n    Vditor.speechRender(previewElement);\\n</script>\\n<script src=\\\"\" + vditor.options.cdn + \"/dist/js/icons/\" + vditor.options.icon + \".js\\\"></script></body></html>\";\n    download(vditor, html, content.substr(0, 10) + \".html\");\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Export.ts\nvar Export_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Export = /** @class */ (function (_super) {\n    Export_extends(Export, _super);\n    function Export(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        panelElement.innerHTML = \"<button data-type=\\\"markdown\\\">Markdown</button>\\n<button data-type=\\\"pdf\\\">PDF</button>\\n<button data-type=\\\"html\\\">HTML</button>\";\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = event.target;\n            if (btnElement.tagName === \"BUTTON\") {\n                switch (btnElement.getAttribute(\"data-type\")) {\n                    case \"markdown\":\n                        exportMarkdown(vditor);\n                        break;\n                    case \"pdf\":\n                        exportPDF(vditor);\n                        break;\n                    case \"html\":\n                        exportHTML(vditor);\n                        break;\n                    default:\n                        break;\n                }\n                hidePanel(vditor, [\"subToolbar\"]);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return Export;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Fullscreen.ts\nvar Fullscreen_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Fullscreen = /** @class */ (function (_super) {\n    Fullscreen_extends(Fullscreen, _super);\n    function Fullscreen(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor, menuItem);\n        return _this;\n    }\n    Fullscreen.prototype._bindEvent = function (vditor, menuItem) {\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (vditor.element.className.includes(\"vditor--fullscreen\")) {\n                if (!menuItem.level) {\n                    this.innerHTML = menuItem.icon;\n                }\n                vditor.element.style.zIndex = \"\";\n                document.body.style.overflow = \"\";\n                vditor.element.classList.remove(\"vditor--fullscreen\");\n                Object.keys(vditor.toolbar.elements).forEach(function (key) {\n                    var svgElement = vditor.toolbar.elements[key].firstChild;\n                    if (svgElement) {\n                        svgElement.className = svgElement.className.replace(\"__s\", \"__n\");\n                    }\n                });\n                if (vditor.counter) {\n                    vditor.counter.element.className = vditor.counter.element.className.replace(\"__s\", \"__n\");\n                }\n            }\n            else {\n                if (!menuItem.level) {\n                    this.innerHTML = '<svg><use xlink:href=\"#vditor-icon-contract\"></use></svg>';\n                }\n                vditor.element.style.zIndex = vditor.options.fullscreen.index.toString();\n                document.body.style.overflow = \"hidden\";\n                vditor.element.classList.add(\"vditor--fullscreen\");\n                Object.keys(vditor.toolbar.elements).forEach(function (key) {\n                    var svgElement = vditor.toolbar.elements[key].firstChild;\n                    if (svgElement) {\n                        svgElement.className = svgElement.className.replace(\"__n\", \"__s\");\n                    }\n                });\n                if (vditor.counter) {\n                    vditor.counter.element.className = vditor.counter.element.className.replace(\"__n\", \"__s\");\n                }\n            }\n            if (vditor.devtools) {\n                vditor.devtools.renderEchart(vditor);\n            }\n            if (menuItem.click) {\n                menuItem.click(event, vditor);\n            }\n            setPadding(vditor);\n            setTypewriterPosition(vditor);\n        });\n    };\n    return Fullscreen;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Headings.ts\nvar Headings_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\nvar Headings = /** @class */ (function (_super) {\n    Headings_extends(Headings, _super);\n    function Headings(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint vditor-panel--arrow\";\n        panelElement.innerHTML = \"<button data-tag=\\\"h1\\\" data-value=\\\"# \\\">\" + window.VditorI18n.heading1 + \" \" + (0,compatibility/* updateHotkeyTip */.ns)(\"&lt;⌥⌘1>\") + \"</button>\\n<button data-tag=\\\"h2\\\" data-value=\\\"## \\\">\" + window.VditorI18n.heading2 + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘2\") + \"></button>\\n<button data-tag=\\\"h3\\\" data-value=\\\"### \\\">\" + window.VditorI18n.heading3 + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘3\") + \"></button>\\n<button data-tag=\\\"h4\\\" data-value=\\\"#### \\\">\" + window.VditorI18n.heading4 + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘4\") + \"></button>\\n<button data-tag=\\\"h5\\\" data-value=\\\"##### \\\">\" + window.VditorI18n.heading5 + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘5\") + \"></button>\\n<button data-tag=\\\"h6\\\" data-value=\\\"###### \\\">\" + window.VditorI18n.heading6 + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘6\") + \"></button>\";\n        _this.element.appendChild(panelElement);\n        _this._bindEvent(vditor, panelElement);\n        return _this;\n    }\n    Headings.prototype._bindEvent = function (vditor, panelElement) {\n        var actionBtn = this.element.children[0];\n        actionBtn.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (actionBtn.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            actionBtn.blur();\n            if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n                if (vditor.currentMode === \"wysiwyg\") {\n                    removeHeading(vditor);\n                    afterRenderEvent(vditor);\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    process_processHeading(vditor, \"\");\n                }\n                actionBtn.classList.remove(\"vditor-menu--current\");\n            }\n            else {\n                hidePanel(vditor, [\"subToolbar\"]);\n                panelElement.style.display = \"block\";\n            }\n        });\n        for (var i = 0; i < 6; i++) {\n            panelElement.children.item(i).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                event.preventDefault();\n                if (vditor.currentMode === \"wysiwyg\") {\n                    setHeading(vditor, event.target.getAttribute(\"data-tag\"));\n                    afterRenderEvent(vditor);\n                    actionBtn.classList.add(\"vditor-menu--current\");\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    process_processHeading(vditor, event.target.getAttribute(\"data-value\"));\n                    actionBtn.classList.add(\"vditor-menu--current\");\n                }\n                else {\n                    processHeading(vditor, event.target.getAttribute(\"data-value\"));\n                }\n                panelElement.style.display = \"none\";\n            });\n        }\n    };\n    return Headings;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Help.ts\nvar Help_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar Help = /** @class */ (function (_super) {\n    Help_extends(Help, _super);\n    function Help(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            vditor.tip.show(\"<div style=\\\"margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;\\\">\\n<div style=\\\"margin-top: 14px;flex: 1\\\">\\n    <div>Markdown \\u4F7F\\u7528\\u6307\\u5357</div>\\n    <ul style=\\\"list-style: none\\\">\\n        <li><a href=\\\"https://ld246.com/article/1583308420519\\\" target=\\\"_blank\\\">\\u8BED\\u6CD5\\u901F\\u67E5\\u624B\\u518C</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1583129520165\\\" target=\\\"_blank\\\">\\u57FA\\u7840\\u8BED\\u6CD5</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1583305480675\\\" target=\\\"_blank\\\">\\u6269\\u5C55\\u8BED\\u6CD5</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1582778815353\\\" target=\\\"_blank\\\">\\u952E\\u76D8\\u5FEB\\u6377\\u952E</a></li>\\n    </ul>\\n</div>\\n<div style=\\\"margin-top: 14px;flex: 1\\\">\\n    <div>Vditor \\u652F\\u6301</div>\\n    <ul style=\\\"list-style: none\\\">\\n        <li><a href=\\\"https://github.com/Vanessa219/vditor/issues\\\" target=\\\"_blank\\\">Issues</a></li>\\n        <li><a href=\\\"https://ld246.com/tag/vditor\\\" target=\\\"_blank\\\">\\u5B98\\u65B9\\u8BA8\\u8BBA\\u533A</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1549638745630\\\" target=\\\"_blank\\\">\\u5F00\\u53D1\\u624B\\u518C</a></li>\\n        <li><a href=\\\"https://ld246.com/guide/markdown\\\" target=\\\"_blank\\\">\\u6F14\\u793A\\u5730\\u5740</a></li>\\n    </ul>\\n</div></div>\", 0);\n        });\n        return _this;\n    }\n    return Help;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Indent.ts\nvar Indent_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar Indent = /** @class */ (function (_super) {\n    Indent_extends(Indent, _super);\n    function Indent(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n            if (liElement) {\n                listIndent(vditor, liElement, range);\n            }\n        });\n        return _this;\n    }\n    return Indent;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Info.ts\nvar Info_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Info = /** @class */ (function (_super) {\n    Info_extends(Info, _super);\n    function Info(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            vditor.tip.show(\"<div style=\\\"max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;\\\">\\n<p style=\\\"text-align: center;margin: 14px 0\\\">\\n    <em>\\u4E0B\\u4E00\\u4EE3\\u7684 Markdown \\u7F16\\u8F91\\u5668\\uFF0C\\u4E3A\\u672A\\u6765\\u800C\\u6784\\u5EFA</em>\\n</p>\\n<div style=\\\"display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center\\\">\\n    <img src=\\\"https://cdn.jsdelivr.net/npm/vditor/src/assets/images/logo.png\\\" style=\\\"margin: 0 auto;height: 68px\\\"/>\\n    <div>&nbsp;&nbsp;</div>\\n    <div style=\\\"flex: 1;min-width: 250px\\\">\\n        Vditor \\u662F\\u4E00\\u6B3E\\u6D4F\\u89C8\\u5668\\u7AEF\\u7684 Markdown \\u7F16\\u8F91\\u5668\\uFF0C\\u652F\\u6301\\u6240\\u89C1\\u5373\\u6240\\u5F97\\u3001\\u5373\\u65F6\\u6E32\\u67D3\\uFF08\\u7C7B\\u4F3C Typora\\uFF09\\u548C\\u5206\\u5C4F\\u9884\\u89C8\\u6A21\\u5F0F\\u3002\\n        \\u5B83\\u4F7F\\u7528 TypeScript \\u5B9E\\u73B0\\uFF0C\\u652F\\u6301\\u539F\\u751F JavaScript\\u3001Vue\\u3001React\\u3001Angular\\uFF0C\\u63D0\\u4F9B<a target=\\\"_blank\\\" href=\\\"https://b3log.org/siyuan\\\">\\u684C\\u9762\\u7248</a>\\u3002\\n    </div>\\n</div>\\n<div style=\\\"display: flex;flex-wrap: wrap;\\\">\\n    <ul style=\\\"list-style: none;flex: 1;min-width:148px\\\">\\n        <li>\\n        \\u9879\\u76EE\\u5730\\u5740\\uFF1A<a href=\\\"https://b3log.org/vditor\\\" target=\\\"_blank\\\">b3log.org/vditor</a>\\n        </li>\\n        <li>\\n        \\u5F00\\u6E90\\u534F\\u8BAE\\uFF1AMIT\\n        </li>\\n    </ul>\\n    <ul style=\\\"list-style: none;margin-right: 18px\\\">\\n        <li>\\n        \\u7EC4\\u4EF6\\u7248\\u672C\\uFF1AVditor v\" + constants/* VDITOR_VERSION */.H + \" / Lute v\" + Lute.Version + \"\\n        </li>\\n        <li>\\n        \\u8D5E\\u52A9\\u6350\\u8D60\\uFF1A<a href=\\\"https://ld246.com/sponsor\\\" target=\\\"_blank\\\">https://ld246.com/sponsor</a>\\n        </li>\\n    </ul>\\n</div>\\n</div>\", 0);\n        });\n        return _this;\n    }\n    return Info;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/InsertAfter.ts\nvar InsertAfter_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar InsertAfter = /** @class */ (function (_super) {\n    InsertAfter_extends(InsertAfter, _super);\n    function InsertAfter(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            insertEmptyBlock(vditor, \"afterend\");\n        });\n        return _this;\n    }\n    return InsertAfter;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/InsertBefore.ts\nvar InsertBefore_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar InsertBefore = /** @class */ (function (_super) {\n    InsertBefore_extends(InsertBefore, _super);\n    function InsertBefore(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            insertEmptyBlock(vditor, \"beforebegin\");\n        });\n        return _this;\n    }\n    return InsertBefore;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Outdent.ts\nvar Outdent_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar Outdent = /** @class */ (function (_super) {\n    Outdent_extends(Outdent, _super);\n    function Outdent(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n            if (liElement) {\n                listOutdent(vditor, liElement, range, liElement.parentElement);\n            }\n        });\n        return _this;\n    }\n    return Outdent;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Outline.ts\nvar Outline_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Outline_Outline = /** @class */ (function (_super) {\n    Outline_extends(Outline, _super);\n    function Outline(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        if (vditor.options.outline) {\n            _this.element.firstElementChild.classList.add(\"vditor-menu--current\");\n        }\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            var btnElement = vditor.toolbar.elements.outline.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.options.outline.enable = !_this.element.firstElementChild.classList.contains(\"vditor-menu--current\");\n            vditor.outline.toggle(vditor, vditor.options.outline.enable);\n        });\n        return _this;\n    }\n    return Outline;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Preview.ts\nvar Preview_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar Preview_Preview = /** @class */ (function (_super) {\n    Preview_extends(Preview, _super);\n    function Preview(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Preview.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            var toolbars = constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"both\", \"edit-mode\", \"devtools\"]);\n            if (btnElement.classList.contains(\"vditor-menu--current\")) {\n                btnElement.classList.remove(\"vditor-menu--current\");\n                if (vditor.currentMode === \"sv\") {\n                    vditor.sv.element.style.display = \"block\";\n                    if (vditor.options.preview.mode === \"both\") {\n                        vditor.preview.element.style.display = \"block\";\n                    }\n                    else {\n                        vditor.preview.element.style.display = \"none\";\n                    }\n                }\n                else {\n                    vditor[vditor.currentMode].element.parentElement.style.display = \"block\";\n                    vditor.preview.element.style.display = \"none\";\n                }\n                enableToolbar(vditor.toolbar.elements, toolbars);\n                vditor.outline.render(vditor);\n            }\n            else {\n                disableToolbar(vditor.toolbar.elements, toolbars);\n                vditor.preview.element.style.display = \"block\";\n                if (vditor.currentMode === \"sv\") {\n                    vditor.sv.element.style.display = \"none\";\n                }\n                else {\n                    vditor[vditor.currentMode].element.parentElement.style.display = \"none\";\n                }\n                vditor.preview.render(vditor);\n                btnElement.classList.add(\"vditor-menu--current\");\n                hidePanel(vditor, [\"subToolbar\", \"hint\", \"popover\"]);\n                setTimeout(function () {\n                    vditor.outline.render(vditor);\n                }, vditor.options.preview.delay + 10);\n            }\n            setPadding(vditor);\n        });\n    };\n    return Preview;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/util/RecordMedia.ts\nvar RecordMedia = /** @class */ (function () {\n    function RecordMedia(e) {\n        this.SAMPLE_RATE = 5000; // 44100 suggested by demos;\n        this.isRecording = false;\n        this.readyFlag = false;\n        this.leftChannel = [];\n        this.rightChannel = [];\n        this.recordingLength = 0;\n        var context;\n        // creates the audio context\n        if (typeof AudioContext !== \"undefined\") {\n            context = new AudioContext();\n        }\n        else if (webkitAudioContext) {\n            context = new webkitAudioContext();\n        }\n        else {\n            return;\n        }\n        this.DEFAULT_SAMPLE_RATE = context.sampleRate;\n        // creates a gain node\n        var volume = context.createGain();\n        // creates an audio node from the microphone incoming stream\n        var audioInput = context.createMediaStreamSource(e);\n        // connect the stream to the gain node\n        audioInput.connect(volume);\n        /* From the spec: The size of the buffer controls how frequently the audioprocess event is\n         dispatched and how many sample-frames need to be processed each call.\n         Lower values for buffer size will result in a lower (better) latency.\n         Higher values will be necessary to avoid audio breakup and glitches */\n        this.recorder = context.createScriptProcessor(2048, 2, 1);\n        // The onaudioprocess event needs to be defined externally, so make sure it is not set:\n        this.recorder.onaudioprocess = null;\n        // we connect the recorder\n        volume.connect(this.recorder);\n        this.recorder.connect(context.destination);\n        this.readyFlag = true;\n    }\n    // Publicly accessible methods:\n    RecordMedia.prototype.cloneChannelData = function (leftChannelData, rightChannelData) {\n        this.leftChannel.push(new Float32Array(leftChannelData));\n        this.rightChannel.push(new Float32Array(rightChannelData));\n        this.recordingLength += 2048;\n    };\n    RecordMedia.prototype.startRecordingNewWavFile = function () {\n        if (this.readyFlag) {\n            this.isRecording = true;\n            this.leftChannel.length = this.rightChannel.length = 0;\n            this.recordingLength = 0;\n        }\n    };\n    RecordMedia.prototype.stopRecording = function () {\n        this.isRecording = false;\n    };\n    RecordMedia.prototype.buildWavFileBlob = function () {\n        // we flat the left and right channels down\n        var leftBuffer = this.mergeBuffers(this.leftChannel);\n        var rightBuffer = this.mergeBuffers(this.rightChannel);\n        // Interleave the left and right channels together:\n        var interleaved = new Float32Array(leftBuffer.length);\n        for (var i = 0; i < leftBuffer.length; ++i) {\n            interleaved[i] = 0.5 * (leftBuffer[i] + rightBuffer[i]);\n        }\n        // Downsample the audio data if necessary:\n        if (this.DEFAULT_SAMPLE_RATE > this.SAMPLE_RATE) {\n            interleaved = this.downSampleBuffer(interleaved, this.SAMPLE_RATE);\n        }\n        var totalByteCount = (44 + interleaved.length * 2);\n        var buffer = new ArrayBuffer(totalByteCount);\n        var view = new DataView(buffer);\n        // Build the RIFF chunk descriptor:\n        this.writeUTFBytes(view, 0, \"RIFF\");\n        view.setUint32(4, totalByteCount, true);\n        this.writeUTFBytes(view, 8, \"WAVE\");\n        // Build the FMT sub-chunk:\n        this.writeUTFBytes(view, 12, \"fmt \"); // subchunk1 ID is format\n        view.setUint32(16, 16, true); // The sub-chunk size is 16.\n        view.setUint16(20, 1, true); // The audio format is 1.\n        view.setUint16(22, 1, true); // Number of interleaved channels.\n        view.setUint32(24, this.SAMPLE_RATE, true); // Sample rate.\n        view.setUint32(28, this.SAMPLE_RATE * 2, true); // Byte rate.\n        view.setUint16(32, 2, true); // Block align\n        view.setUint16(34, 16, true); // Bits per sample.\n        // Build the data sub-chunk:\n        var subChunk2ByteCount = interleaved.length * 2;\n        this.writeUTFBytes(view, 36, \"data\");\n        view.setUint32(40, subChunk2ByteCount, true);\n        // Write the PCM samples to the view:\n        var lng = interleaved.length;\n        var index = 44;\n        var volume = 1;\n        for (var j = 0; j < lng; j++) {\n            view.setInt16(index, interleaved[j] * (0x7FFF * volume), true);\n            index += 2;\n        }\n        return new Blob([view], { type: \"audio/wav\" });\n    };\n    RecordMedia.prototype.downSampleBuffer = function (buffer, rate) {\n        if (rate === this.DEFAULT_SAMPLE_RATE) {\n            return buffer;\n        }\n        if (rate > this.DEFAULT_SAMPLE_RATE) {\n            // throw \"downsampling rate show be smaller than original sample rate\";\n            return buffer;\n        }\n        var sampleRateRatio = this.DEFAULT_SAMPLE_RATE / rate;\n        var newLength = Math.round(buffer.length / sampleRateRatio);\n        var result = new Float32Array(newLength);\n        var offsetResult = 0;\n        var offsetBuffer = 0;\n        while (offsetResult < result.length) {\n            var nextOffsetBuffer = Math.round((offsetResult + 1) * sampleRateRatio);\n            var accum = 0;\n            var count = 0;\n            for (var i = offsetBuffer; i < nextOffsetBuffer && i < buffer.length; i++) {\n                accum += buffer[i];\n                count++;\n            }\n            result[offsetResult] = accum / count;\n            offsetResult++;\n            offsetBuffer = nextOffsetBuffer;\n        }\n        return result;\n    };\n    RecordMedia.prototype.mergeBuffers = function (desiredChannelBuffer) {\n        var result = new Float32Array(this.recordingLength);\n        var offset = 0;\n        var lng = desiredChannelBuffer.length;\n        for (var i = 0; i < lng; ++i) {\n            var buffer = desiredChannelBuffer[i];\n            result.set(buffer, offset);\n            offset += buffer.length;\n        }\n        return result;\n    };\n    RecordMedia.prototype.writeUTFBytes = function (view, offset, value) {\n        var lng = value.length;\n        for (var i = 0; i < lng; i++) {\n            view.setUint8(offset + i, value.charCodeAt(i));\n        }\n    };\n    return RecordMedia;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Record.ts\nvar Record_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar Record = /** @class */ (function (_super) {\n    Record_extends(Record, _super);\n    function Record(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Record.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        var mediaRecorder;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            var editorElement = vditor[vditor.currentMode].element;\n            if (!mediaRecorder) {\n                navigator.mediaDevices.getUserMedia({ audio: true }).then(function (mediaStream) {\n                    mediaRecorder = new RecordMedia(mediaStream);\n                    mediaRecorder.recorder.onaudioprocess = function (e) {\n                        // Do nothing if not recording:\n                        if (!mediaRecorder.isRecording) {\n                            return;\n                        }\n                        // Copy the data from the input buffers;\n                        var left = e.inputBuffer.getChannelData(0);\n                        var right = e.inputBuffer.getChannelData(1);\n                        mediaRecorder.cloneChannelData(left, right);\n                    };\n                    mediaRecorder.startRecordingNewWavFile();\n                    vditor.tip.show(window.VditorI18n.recording);\n                    editorElement.setAttribute(\"contenteditable\", \"false\");\n                    _this.element.children[0].classList.add(\"vditor-menu--current\");\n                }).catch(function () {\n                    vditor.tip.show(window.VditorI18n[\"record-tip\"]);\n                });\n                return;\n            }\n            if (mediaRecorder.isRecording) {\n                mediaRecorder.stopRecording();\n                vditor.tip.hide();\n                var file = new File([mediaRecorder.buildWavFileBlob()], \"record\" + (new Date()).getTime() + \".wav\", { type: \"video/webm\" });\n                uploadFiles(vditor, [file]);\n                _this.element.children[0].classList.remove(\"vditor-menu--current\");\n            }\n            else {\n                vditor.tip.show(window.VditorI18n.recording);\n                editorElement.setAttribute(\"contenteditable\", \"false\");\n                mediaRecorder.startRecordingNewWavFile();\n                _this.element.children[0].classList.add(\"vditor-menu--current\");\n            }\n        });\n    };\n    return Record;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Redo.ts\nvar Redo_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Redo = /** @class */ (function (_super) {\n    Redo_extends(Redo, _super);\n    function Redo(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        disableToolbar({ redo: _this.element }, [\"redo\"]);\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.undo.redo(vditor);\n        });\n        return _this;\n    }\n    return Redo;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Undo.ts\nvar Undo_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Undo = /** @class */ (function (_super) {\n    Undo_extends(Undo, _super);\n    function Undo(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        disableToolbar({ undo: _this.element }, [\"undo\"]);\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.undo.undo(vditor);\n        });\n        return _this;\n    }\n    return Undo;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Upload.ts\nvar Upload_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Upload_Upload = /** @class */ (function (_super) {\n    Upload_extends(Upload, _super);\n    function Upload(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var inputHTML = '<input type=\"file\"';\n        if (vditor.options.upload.multiple) {\n            inputHTML += ' multiple=\"multiple\"';\n        }\n        if (vditor.options.upload.accept) {\n            inputHTML += \" accept=\\\"\" + vditor.options.upload.accept + \"\\\"\";\n        }\n        _this.element.children[0].innerHTML = \"\" + (menuItem.icon || '<svg><use xlink:href=\"#vditor-icon-upload\"></use></svg>') + inputHTML + \">\";\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Upload.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                event.stopPropagation();\n                event.preventDefault();\n                return;\n            }\n        });\n        this.element.querySelector(\"input\").addEventListener(\"change\", function (event) {\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                event.stopPropagation();\n                event.preventDefault();\n                return;\n            }\n            if (event.target.files.length === 0) {\n                return;\n            }\n            uploadFiles(vditor, event.target.files, event.target);\n        });\n    };\n    return Upload;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(vditor) {\n        var _this = this;\n        var options = vditor.options;\n        this.elements = {};\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar\";\n        options.toolbar.forEach(function (menuItem, i) {\n            var itemElement = _this.genItem(vditor, menuItem, i);\n            _this.element.appendChild(itemElement);\n            if (menuItem.toolbar) {\n                var panelElement_1 = document.createElement(\"div\");\n                panelElement_1.className = \"vditor-hint vditor-panel--arrow\";\n                panelElement_1.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                    panelElement_1.style.display = \"none\";\n                });\n                menuItem.toolbar.forEach(function (subMenuItem, subI) {\n                    subMenuItem.level = 2;\n                    panelElement_1.appendChild(_this.genItem(vditor, subMenuItem, i + subI));\n                });\n                itemElement.appendChild(panelElement_1);\n                toggleSubMenu(vditor, panelElement_1, itemElement.children[0], 2);\n            }\n        });\n        if (vditor.options.toolbarConfig.hide) {\n            this.element.classList.add(\"vditor-toolbar--hide\");\n        }\n        if (vditor.options.toolbarConfig.pin) {\n            this.element.classList.add(\"vditor-toolbar--pin\");\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter = new Counter(vditor);\n            this.element.appendChild(vditor.counter.element);\n        }\n    }\n    Toolbar.prototype.genItem = function (vditor, menuItem, index) {\n        var menuItemObj;\n        switch (menuItem.name) {\n            case \"bold\":\n            case \"italic\":\n            case \"more\":\n            case \"strike\":\n            case \"line\":\n            case \"quote\":\n            case \"list\":\n            case \"ordered-list\":\n            case \"check\":\n            case \"code\":\n            case \"inline-code\":\n            case \"link\":\n            case \"table\":\n                menuItemObj = new MenuItem(vditor, menuItem);\n                break;\n            case \"emoji\":\n                menuItemObj = new Emoji(vditor, menuItem);\n                break;\n            case \"headings\":\n                menuItemObj = new Headings(vditor, menuItem);\n                break;\n            case \"|\":\n                menuItemObj = new Divider();\n                break;\n            case \"br\":\n                menuItemObj = new Br();\n                break;\n            case \"undo\":\n                menuItemObj = new Undo(vditor, menuItem);\n                break;\n            case \"redo\":\n                menuItemObj = new Redo(vditor, menuItem);\n                break;\n            case \"help\":\n                menuItemObj = new Help(vditor, menuItem);\n                break;\n            case \"both\":\n                menuItemObj = new Both(vditor, menuItem);\n                break;\n            case \"preview\":\n                menuItemObj = new Preview_Preview(vditor, menuItem);\n                break;\n            case \"fullscreen\":\n                menuItemObj = new Fullscreen(vditor, menuItem);\n                break;\n            case \"upload\":\n                menuItemObj = new Upload_Upload(vditor, menuItem);\n                break;\n            case \"record\":\n                menuItemObj = new Record(vditor, menuItem);\n                break;\n            case \"info\":\n                menuItemObj = new Info(vditor, menuItem);\n                break;\n            case \"edit-mode\":\n                menuItemObj = new EditMode(vditor, menuItem);\n                break;\n            case \"devtools\":\n                menuItemObj = new Devtools(vditor, menuItem);\n                break;\n            case \"outdent\":\n                menuItemObj = new Outdent(vditor, menuItem);\n                break;\n            case \"indent\":\n                menuItemObj = new Indent(vditor, menuItem);\n                break;\n            case \"outline\":\n                menuItemObj = new Outline_Outline(vditor, menuItem);\n                break;\n            case \"insert-after\":\n                menuItemObj = new InsertAfter(vditor, menuItem);\n                break;\n            case \"insert-before\":\n                menuItemObj = new InsertBefore(vditor, menuItem);\n                break;\n            case \"code-theme\":\n                menuItemObj = new CodeTheme(vditor, menuItem);\n                break;\n            case \"content-theme\":\n                menuItemObj = new ContentTheme(vditor, menuItem);\n                break;\n            case \"export\":\n                menuItemObj = new Export(vditor, menuItem);\n                break;\n            default:\n                menuItemObj = new Custom(vditor, menuItem);\n                break;\n        }\n        if (!menuItemObj) {\n            return;\n        }\n        var key = menuItem.name;\n        if (key === \"br\" || key === \"|\") {\n            key = key + index;\n        }\n        this.elements[key] = menuItemObj.element;\n        return menuItemObj.element;\n    };\n    return Toolbar;\n}());\n\n\n// EXTERNAL MODULE: ./node_modules/diff-match-patch/index.js\nvar diff_match_patch = __webpack_require__(694);\n;// CONCATENATED MODULE: ./src/ts/undo/index.ts\n\n\n\n\n\n\n\n\nvar undo_Undo = /** @class */ (function () {\n    function Undo() {\n        this.stackSize = 50;\n        this.resetStack();\n        // @ts-ignore\n        this.dmp = new diff_match_patch();\n    }\n    Undo.prototype.clearStack = function (vditor) {\n        this.resetStack();\n        this.resetIcon(vditor);\n    };\n    Undo.prototype.resetIcon = function (vditor) {\n        if (!vditor.toolbar) {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        if (this[vditor.currentMode].redoStack.length !== 0) {\n            enableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n    };\n    Undo.prototype.undo = function (vditor) {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length < 2) {\n            return;\n        }\n        var state = this[vditor.currentMode].undoStack.pop();\n        if (!state) {\n            return;\n        }\n        this[vditor.currentMode].redoStack.push(state);\n        this.renderDiff(state, vditor);\n        this[vditor.currentMode].hasUndo = true;\n        // undo 操作后，需要关闭 hint\n        hidePanel(vditor, [\"hint\"]);\n    };\n    Undo.prototype.redo = function (vditor) {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        var state = this[vditor.currentMode].redoStack.pop();\n        if (!state) {\n            return;\n        }\n        this[vditor.currentMode].undoStack.push(state);\n        this.renderDiff(state, vditor, true);\n    };\n    Undo.prototype.recordFirstPosition = function (vditor, event) {\n        if (getSelection().rangeCount === 0) {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length !== 1 || this[vditor.currentMode].undoStack[0].length === 0 ||\n            this[vditor.currentMode].redoStack.length > 0) {\n            return;\n        }\n        if ((0,compatibility/* isFirefox */.vU)() && event.key === \"Backspace\") {\n            // Firefox 第一次删除无效\n            return;\n        }\n        if ((0,compatibility/* isSafari */.G6)()) {\n            // Safari keydown 在 input 之后，不需要重复记录历史\n            return;\n        }\n        var text = this.addCaret(vditor);\n        if (text.replace(\"<wbr>\", \"\").replace(\" vditor-ir__node--expand\", \"\")\n            !== this[vditor.currentMode].undoStack[0][0].diffs[0][1].replace(\"<wbr>\", \"\")) {\n            // 当还不没有存入 undo 栈时，按下 ctrl 后会覆盖 lastText\n            return;\n        }\n        this[vditor.currentMode].undoStack[0][0].diffs[0][1] = text;\n        this[vditor.currentMode].lastText = text;\n        // 不能添加 setSelectionFocus(cloneRange); 否则 windows chrome 首次输入会烂\n    };\n    Undo.prototype.addToUndoStack = function (vditor) {\n        // afterRenderEvent.ts 已经 debounce\n        var text = this.addCaret(vditor, true);\n        var diff = this.dmp.diff_main(text, this[vditor.currentMode].lastText, true);\n        var patchList = this.dmp.patch_make(text, this[vditor.currentMode].lastText, diff);\n        if (patchList.length === 0 && this[vditor.currentMode].undoStack.length > 0) {\n            return;\n        }\n        this[vditor.currentMode].lastText = text;\n        this[vditor.currentMode].undoStack.push(patchList);\n        if (this[vditor.currentMode].undoStack.length > this.stackSize) {\n            this[vditor.currentMode].undoStack.shift();\n        }\n        if (this[vditor.currentMode].hasUndo) {\n            this[vditor.currentMode].redoStack = [];\n            this[vditor.currentMode].hasUndo = false;\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n    };\n    Undo.prototype.renderDiff = function (state, vditor, isRedo) {\n        if (isRedo === void 0) { isRedo = false; }\n        var text;\n        if (isRedo) {\n            var redoPatchList = this.dmp.patch_deepCopy(state).reverse();\n            redoPatchList.forEach(function (patch) {\n                patch.diffs.forEach(function (diff) {\n                    diff[0] = -diff[0];\n                });\n            });\n            text = this.dmp.patch_apply(redoPatchList, this[vditor.currentMode].lastText)[0];\n        }\n        else {\n            text = this.dmp.patch_apply(state, this[vditor.currentMode].lastText)[0];\n        }\n        this[vditor.currentMode].lastText = text;\n        vditor[vditor.currentMode].element.innerHTML = text;\n        if (vditor.currentMode !== \"sv\") {\n            vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                .forEach(function (blockElement) {\n                processCodeRender(blockElement, vditor);\n            });\n        }\n        if (!vditor[vditor.currentMode].element.querySelector(\"wbr\")) {\n            // Safari 第一次输入没有光标，需手动定位到结尾\n            var range = getSelection().getRangeAt(0);\n            range.setEndBefore(vditor[vditor.currentMode].element);\n            range.collapse(false);\n        }\n        else {\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, vditor[vditor.currentMode].element.ownerDocument.createRange());\n            scrollCenter(vditor);\n        }\n        execAfterRender(vditor, {\n            enableAddUndoStack: false,\n            enableHint: false,\n            enableInput: true,\n        });\n        highlightToolbar(vditor);\n        vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n            .forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        if (this[vditor.currentMode].redoStack.length !== 0) {\n            enableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n    };\n    Undo.prototype.resetStack = function () {\n        this.ir = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n        this.sv = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n        this.wysiwyg = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n    };\n    Undo.prototype.addCaret = function (vditor, setFocus) {\n        if (setFocus === void 0) { setFocus = false; }\n        var cloneRange;\n        if (getSelection().rangeCount !== 0 && !vditor[vditor.currentMode].element.querySelector(\"wbr\")) {\n            var range = getSelection().getRangeAt(0);\n            if (vditor[vditor.currentMode].element.contains(range.startContainer)) {\n                cloneRange = range.cloneRange();\n                var wbrElement = document.createElement(\"span\");\n                wbrElement.className = \"vditor-wbr\";\n                range.insertNode(wbrElement);\n            }\n        }\n        // 移除数学公式、echart 渲染 https://github.com/siyuan-note/siyuan/issues/537\n        var cloneElement = vditor.ir.element.cloneNode(true);\n        cloneElement.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='1']\")\n            .forEach(function (item) {\n            if (item.firstElementChild.classList.contains(\"language-echarts\") ||\n                item.firstElementChild.classList.contains(\"language-plantuml\") ||\n                item.firstElementChild.classList.contains(\"language-mindmap\")) {\n                item.firstElementChild.removeAttribute(\"_echarts_instance_\");\n                item.firstElementChild.removeAttribute(\"data-processed\");\n                item.firstElementChild.innerHTML = item.previousElementSibling.firstElementChild.innerHTML;\n                item.setAttribute(\"data-render\", \"2\");\n            }\n            if (item.firstElementChild.classList.contains(\"language-math\")) {\n                item.setAttribute(\"data-render\", \"2\");\n                item.firstElementChild.textContent = item.firstElementChild.getAttribute(\"data-math\");\n                item.firstElementChild.removeAttribute(\"data-math\");\n            }\n        });\n        var text = vditor[vditor.currentMode].element.innerHTML;\n        vditor[vditor.currentMode].element.querySelectorAll(\".vditor-wbr\").forEach(function (item) {\n            item.remove();\n            // 使用 item.outerHTML = \"\" 会产生 https://github.com/Vanessa219/vditor/pull/686;\n        });\n        if (setFocus && cloneRange) {\n            (0,selection/* setSelectionFocus */.Hc)(cloneRange);\n        }\n        return text.replace('<span class=\"vditor-wbr\"></span>', \"<wbr>\");\n    };\n    return Undo;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/util/merge.ts\nvar merge = __webpack_require__(224);\n;// CONCATENATED MODULE: ./src/ts/util/Options.ts\n\n\nvar Options = /** @class */ (function () {\n    function Options(options) {\n        this.defaultOptions = {\n            after: undefined,\n            cache: {\n                enable: true,\n            },\n            cdn: constants/* Constants.CDN */.g.CDN,\n            classes: {\n                preview: \"\",\n            },\n            comment: {\n                enable: false,\n            },\n            counter: {\n                enable: false,\n                type: \"markdown\",\n            },\n            debugger: false,\n            fullscreen: {\n                index: 90,\n            },\n            height: \"auto\",\n            hint: {\n                delay: 200,\n                emoji: {\n                    \"+1\": \"👍\",\n                    \"-1\": \"👎\",\n                    \"confused\": \"😕\",\n                    \"eyes\": \"👀️\",\n                    \"heart\": \"❤️\",\n                    \"rocket\": \"🚀️\",\n                    \"smile\": \"😄\",\n                    \"tada\": \"🎉️\",\n                },\n                emojiPath: constants/* Constants.CDN */.g.CDN + \"/dist/images/emoji\",\n                extend: [],\n                parse: true,\n            },\n            icon: \"ant\",\n            lang: \"zh_CN\",\n            mode: \"ir\",\n            outline: {\n                enable: false,\n                position: \"left\",\n            },\n            placeholder: \"\",\n            preview: {\n                actions: [\"desktop\", \"tablet\", \"mobile\", \"mp-wechat\", \"zhihu\"],\n                delay: 1000,\n                hljs: constants/* Constants.HLJS_OPTIONS */.g.HLJS_OPTIONS,\n                markdown: constants/* Constants.MARKDOWN_OPTIONS */.g.MARKDOWN_OPTIONS,\n                math: constants/* Constants.MATH_OPTIONS */.g.MATH_OPTIONS,\n                maxWidth: 800,\n                mode: \"both\",\n                theme: constants/* Constants.THEME_OPTIONS */.g.THEME_OPTIONS,\n            },\n            resize: {\n                enable: false,\n                position: \"bottom\",\n            },\n            theme: \"classic\",\n            toolbar: [\n                \"emoji\",\n                \"headings\",\n                \"bold\",\n                \"italic\",\n                \"strike\",\n                \"link\",\n                \"|\",\n                \"list\",\n                \"ordered-list\",\n                \"check\",\n                \"outdent\",\n                \"indent\",\n                \"|\",\n                \"quote\",\n                \"line\",\n                \"code\",\n                \"inline-code\",\n                \"insert-before\",\n                \"insert-after\",\n                \"|\",\n                \"upload\",\n                \"record\",\n                \"table\",\n                \"|\",\n                \"undo\",\n                \"redo\",\n                \"|\",\n                \"fullscreen\",\n                \"edit-mode\",\n                {\n                    name: \"more\",\n                    toolbar: [\n                        \"both\",\n                        \"code-theme\",\n                        \"content-theme\",\n                        \"export\",\n                        \"outline\",\n                        \"preview\",\n                        \"devtools\",\n                        \"info\",\n                        \"help\",\n                    ],\n                },\n            ],\n            toolbarConfig: {\n                hide: false,\n                pin: false,\n            },\n            typewriterMode: false,\n            undoDelay: 800,\n            upload: {\n                extraData: {},\n                fieldName: \"file[]\",\n                filename: function (name) { return name.replace(/\\W/g, \"\"); },\n                linkToImgUrl: \"\",\n                max: 10 * 1024 * 1024,\n                multiple: true,\n                url: \"\",\n                withCredentials: false,\n            },\n            value: \"\",\n            width: \"auto\",\n        };\n        this.options = options;\n    }\n    Options.prototype.merge = function () {\n        var _a, _b, _c;\n        if (this.options) {\n            if (this.options.toolbar) {\n                this.options.toolbar = this.mergeToolbar(this.options.toolbar);\n            }\n            else {\n                this.options.toolbar = this.mergeToolbar(this.defaultOptions.toolbar);\n            }\n            if ((_b = (_a = this.options.preview) === null || _a === void 0 ? void 0 : _a.theme) === null || _b === void 0 ? void 0 : _b.list) {\n                this.defaultOptions.preview.theme.list = this.options.preview.theme.list;\n            }\n            if ((_c = this.options.hint) === null || _c === void 0 ? void 0 : _c.emoji) {\n                this.defaultOptions.hint.emoji = this.options.hint.emoji;\n            }\n            if (this.options.comment) {\n                this.defaultOptions.comment = this.options.comment;\n            }\n        }\n        var mergedOptions = (0,merge/* merge */.T)(this.defaultOptions, this.options);\n        if (mergedOptions.cache.enable && !mergedOptions.cache.id) {\n            throw new Error(\"need options.cache.id, see https://ld246.com/article/1549638745630#options\");\n        }\n        return mergedOptions;\n    };\n    Options.prototype.mergeToolbar = function (toolbar) {\n        var _this = this;\n        var toolbarItem = [\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-export\"></use></svg>',\n                name: \"export\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘E\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-emoji\"></use></svg>',\n                name: \"emoji\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘H\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-headings\"></use></svg>',\n                name: \"headings\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘B\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-bold\"></use></svg>',\n                name: \"bold\",\n                prefix: \"**\",\n                suffix: \"**\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘I\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-italic\"></use></svg>',\n                name: \"italic\",\n                prefix: \"*\",\n                suffix: \"*\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘D\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-strike\"></use></svg>',\n                name: \"strike\",\n                prefix: \"~~\",\n                suffix: \"~~\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘K\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-link\"></use></svg>',\n                name: \"link\",\n                prefix: \"[\",\n                suffix: \"](https://)\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                hotkey: \"⌘L\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-list\"></use></svg>',\n                name: \"list\",\n                prefix: \"* \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘O\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-ordered-list\"></use></svg>',\n                name: \"ordered-list\",\n                prefix: \"1. \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘J\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-check\"></use></svg>',\n                name: \"check\",\n                prefix: \"* [ ] \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘I\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-outdent\"></use></svg>',\n                name: \"outdent\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘O\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-indent\"></use></svg>',\n                name: \"indent\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                hotkey: \"⌘;\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-quote\"></use></svg>',\n                name: \"quote\",\n                prefix: \"> \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘H\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-line\"></use></svg>',\n                name: \"line\",\n                prefix: \"---\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘U\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-code\"></use></svg>',\n                name: \"code\",\n                prefix: \"```\",\n                suffix: \"\\n```\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘G\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-inline-code\"></use></svg>',\n                name: \"inline-code\",\n                prefix: \"`\",\n                suffix: \"`\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘B\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-before\"></use></svg>',\n                name: \"insert-before\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘E\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-after\"></use></svg>',\n                name: \"insert-after\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-upload\"></use></svg>',\n                name: \"upload\",\n                tipPosition: \"n\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-record\"></use></svg>',\n                name: \"record\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘M\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-table\"></use></svg>',\n                name: \"table\",\n                prefix: \"| col1\",\n                suffix: \" | col2 | col3 |\\n| --- | --- | --- |\\n|  |  |  |\\n|  |  |  |\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                hotkey: \"⌘Z\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-undo\"></use></svg>',\n                name: \"undo\",\n                tipPosition: \"nw\",\n            },\n            {\n                hotkey: \"⌘Y\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-redo\"></use></svg>',\n                name: \"redo\",\n                tipPosition: \"nw\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-more\"></use></svg>',\n                name: \"more\",\n                tipPosition: \"e\",\n            },\n            {\n                hotkey: \"⌘'\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-fullscreen\"></use></svg>',\n                name: \"fullscreen\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-edit\"></use></svg>',\n                name: \"edit-mode\",\n                tipPosition: \"nw\",\n            },\n            {\n                hotkey: \"⌘P\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-both\"></use></svg>',\n                name: \"both\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-preview\"></use></svg>',\n                name: \"preview\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-align-center\"></use></svg>',\n                name: \"outline\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-theme\"></use></svg>',\n                name: \"content-theme\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-code-theme\"></use></svg>',\n                name: \"code-theme\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-bug\"></use></svg>',\n                name: \"devtools\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-info\"></use></svg>',\n                name: \"info\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-help\"></use></svg>',\n                name: \"help\",\n                tipPosition: \"nw\",\n            },\n            {\n                name: \"br\",\n            },\n        ];\n        var toolbarResult = [];\n        toolbar.forEach(function (menuItem) {\n            var currentMenuItem = menuItem;\n            toolbarItem.forEach(function (defaultMenuItem) {\n                if (typeof menuItem === \"string\" &&\n                    defaultMenuItem.name === menuItem) {\n                    currentMenuItem = defaultMenuItem;\n                }\n                if (typeof menuItem === \"object\" &&\n                    defaultMenuItem.name === menuItem.name) {\n                    currentMenuItem = Object.assign({}, defaultMenuItem, menuItem);\n                }\n            });\n            if (menuItem.toolbar) {\n                currentMenuItem.toolbar = _this.mergeToolbar(menuItem.toolbar);\n            }\n            toolbarResult.push(currentMenuItem);\n        });\n        return toolbarResult;\n    };\n    return Options;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar WYSIWYG = /** @class */ (function () {\n    function WYSIWYG(vditor) {\n        var _this = this;\n        this.composingLock = false;\n        this.commentIds = [];\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-wysiwyg\";\n        divElement.innerHTML = \"<pre class=\\\"vditor-reset\\\" placeholder=\\\"\" + vditor.options.placeholder + \"\\\"\\n contenteditable=\\\"true\\\" spellcheck=\\\"false\\\"></pre>\\n<div class=\\\"vditor-panel vditor-panel--none\\\"></div>\\n<div class=\\\"vditor-panel vditor-panel--none\\\">\\n    <button type=\\\"button\\\" aria-label=\\\"\" + window.VditorI18n.comment + \"\\\" class=\\\"vditor-icon vditor-tooltipped vditor-tooltipped__n\\\">\\n        <svg><use xlink:href=\\\"#vditor-icon-comment\\\"></use></svg>\\n    </button>\\n</div>\";\n        this.element = divElement.firstElementChild;\n        this.popover = divElement.firstElementChild.nextElementSibling;\n        this.selectPopover = divElement.lastElementChild;\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        dblclickEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n        if (vditor.options.comment.enable) {\n            this.selectPopover.querySelector(\"button\").onclick = function () {\n                var id = Lute.NewNodeID();\n                var range = getSelection().getRangeAt(0);\n                var rangeClone = range.cloneRange();\n                var contents = range.extractContents();\n                var blockStartElement;\n                var blockEndElement;\n                var removeStart = false;\n                var removeEnd = false;\n                contents.childNodes.forEach(function (item, index) {\n                    var wrap = false;\n                    if (item.nodeType === 3) {\n                        wrap = true;\n                    }\n                    else if (!item.classList.contains(\"vditor-comment\")) {\n                        wrap = true;\n                    }\n                    else if (item.classList.contains(\"vditor-comment\")) {\n                        item.setAttribute(\"data-cmtids\", item.getAttribute(\"data-cmtids\") + \" \" + id);\n                    }\n                    if (wrap) {\n                        if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\"\n                            && index === 0 && rangeClone.startOffset > 0) {\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\" + id + \"\\\">\" + item.innerHTML + \"</span>\";\n                            blockStartElement = item;\n                        }\n                        else if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\"\n                            && index === contents.childNodes.length - 1\n                            && rangeClone.endOffset < rangeClone.endContainer.textContent.length) {\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\" + id + \"\\\">\" + item.innerHTML + \"</span>\";\n                            blockEndElement = item;\n                        }\n                        else if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\") {\n                            if (index === 0) {\n                                removeStart = true;\n                            }\n                            else if (index === contents.childNodes.length - 1) {\n                                removeEnd = true;\n                            }\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\" + id + \"\\\">\" + item.innerHTML + \"</span>\";\n                        }\n                        else {\n                            var commentElement = document.createElement(\"span\");\n                            commentElement.classList.add(\"vditor-comment\");\n                            commentElement.setAttribute(\"data-cmtids\", id);\n                            item.parentNode.insertBefore(commentElement, item);\n                            commentElement.appendChild(item);\n                        }\n                    }\n                });\n                var startElement = (0,hasClosest/* hasClosestBlock */.F9)(rangeClone.startContainer);\n                if (startElement) {\n                    if (blockStartElement) {\n                        startElement.insertAdjacentHTML(\"beforeend\", blockStartElement.innerHTML);\n                        blockStartElement.remove();\n                    }\n                    else if (startElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && removeStart) {\n                        startElement.remove();\n                    }\n                }\n                var endElement = (0,hasClosest/* hasClosestBlock */.F9)(rangeClone.endContainer);\n                if (endElement) {\n                    if (blockEndElement) {\n                        endElement.insertAdjacentHTML(\"afterbegin\", blockEndElement.innerHTML);\n                        blockEndElement.remove();\n                    }\n                    else if (endElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && removeEnd) {\n                        endElement.remove();\n                    }\n                }\n                range.insertNode(contents);\n                vditor.options.comment.add(id, range.toString(), _this.getComments(vditor, true));\n                afterRenderEvent(vditor, {\n                    enableAddUndoStack: true,\n                    enableHint: false,\n                    enableInput: false,\n                });\n                _this.hideComment();\n            };\n        }\n    }\n    WYSIWYG.prototype.getComments = function (vditor, getData) {\n        var _this = this;\n        if (getData === void 0) { getData = false; }\n        if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n            this.commentIds = [];\n            this.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n                _this.commentIds =\n                    _this.commentIds.concat(item.getAttribute(\"data-cmtids\").split(\" \"));\n            });\n            this.commentIds = Array.from(new Set(this.commentIds));\n            var comments_1 = [];\n            if (getData) {\n                this.commentIds.forEach(function (id) {\n                    comments_1.push({\n                        id: id,\n                        top: _this.element.querySelector(\".vditor-comment[data-cmtids=\\\"\" + id + \"\\\"]\").offsetTop,\n                    });\n                });\n                return comments_1;\n            }\n        }\n        else {\n            return [];\n        }\n    };\n    WYSIWYG.prototype.triggerRemoveComment = function (vditor) {\n        var difference = function (a, b) {\n            var s = new Set(b);\n            return a.filter(function (x) { return !s.has(x); });\n        };\n        if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable && vditor.wysiwyg.commentIds.length > 0) {\n            var oldIds = JSON.parse(JSON.stringify(this.commentIds));\n            this.getComments(vditor);\n            var removedIds = difference(oldIds, this.commentIds);\n            if (removedIds.length > 0) {\n                vditor.options.comment.remove(removedIds);\n            }\n        }\n    };\n    WYSIWYG.prototype.showComment = function () {\n        var position = (0,selection/* getCursorPosition */.Ny)(this.element);\n        this.selectPopover.setAttribute(\"style\", \"left:\" + position.left + \"px;display:block;top:\" + Math.max(-8, position.top - 21) + \"px\");\n    };\n    WYSIWYG.prototype.hideComment = function () {\n        this.selectPopover.setAttribute(\"style\", \"display:none\");\n    };\n    WYSIWYG.prototype.copy = function (event, vditor) {\n        var range = getSelection().getRangeAt(0);\n        if (range.toString() === \"\") {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        var codeElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"CODE\");\n        var codeEndElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.endContainer, \"CODE\");\n        if (codeElement && codeEndElement && codeEndElement.isSameNode(codeElement)) {\n            var codeText = \"\";\n            if (codeElement.parentElement.tagName === \"PRE\") {\n                codeText = range.toString();\n            }\n            else {\n                codeText = \"`\" + range.toString() + \"`\";\n            }\n            event.clipboardData.setData(\"text/plain\", codeText);\n            event.clipboardData.setData(\"text/html\", \"\");\n            return;\n        }\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"A\");\n        var aEndElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.endContainer, \"A\");\n        if (aElement && aEndElement && aEndElement.isSameNode(aElement)) {\n            var aTitle = aElement.getAttribute(\"title\") || \"\";\n            if (aTitle) {\n                aTitle = \" \\\"\" + aTitle + \"\\\"\";\n            }\n            event.clipboardData.setData(\"text/plain\", \"[\" + range.toString() + \"](\" + aElement.getAttribute(\"href\") + aTitle + \")\");\n            event.clipboardData.setData(\"text/html\", \"\");\n            return;\n        }\n        var tempElement = document.createElement(\"div\");\n        tempElement.appendChild(range.cloneContents());\n        event.clipboardData.setData(\"text/plain\", vditor.lute.VditorDOM2Md(tempElement.innerHTML).trim());\n        event.clipboardData.setData(\"text/html\", \"\");\n    };\n    WYSIWYG.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        window.addEventListener(\"scroll\", function () {\n            hidePanel(vditor, [\"hint\"]);\n            if (_this.popover.style.display !== \"block\" || _this.selectPopover.style.display !== \"block\") {\n                return;\n            }\n            var top = parseInt(_this.popover.getAttribute(\"data-top\"), 10);\n            if (vditor.options.height !== \"auto\") {\n                if (vditor.options.toolbarConfig.pin && vditor.toolbar.element.getBoundingClientRect().top === 0) {\n                    var popoverTop = Math.max(window.scrollY - vditor.element.offsetTop - 8, Math.min(top - vditor.wysiwyg.element.scrollTop, _this.element.clientHeight - 21)) + \"px\";\n                    if (_this.popover.style.display === \"block\") {\n                        _this.popover.style.top = popoverTop;\n                    }\n                    if (_this.selectPopover.style.display === \"block\") {\n                        _this.selectPopover.style.top = popoverTop;\n                    }\n                }\n                return;\n            }\n            else if (!vditor.options.toolbarConfig.pin) {\n                return;\n            }\n            var popoverTop1 = Math.max(top, (window.scrollY - vditor.element.offsetTop - 8)) + \"px\";\n            if (_this.popover.style.display === \"block\") {\n                _this.popover.style.top = popoverTop1;\n            }\n            if (_this.selectPopover.style.display === \"block\") {\n                _this.selectPopover.style.top = popoverTop1;\n            }\n        });\n        this.element.addEventListener(\"scroll\", function () {\n            hidePanel(vditor, [\"hint\"]);\n            if (vditor.options.comment && vditor.options.comment.enable && vditor.options.comment.scroll) {\n                vditor.options.comment.scroll(vditor.wysiwyg.element.scrollTop);\n            }\n            if (_this.popover.style.display !== \"block\") {\n                return;\n            }\n            var top = parseInt(_this.popover.getAttribute(\"data-top\"), 10) - vditor.wysiwyg.element.scrollTop;\n            var max = -8;\n            if (vditor.options.toolbarConfig.pin && vditor.toolbar.element.getBoundingClientRect().top === 0) {\n                max = window.scrollY - vditor.element.offsetTop + max;\n            }\n            var topPx = Math.max(max, Math.min(top, _this.element.clientHeight - 21)) + \"px\";\n            _this.popover.style.top = topPx;\n            _this.selectPopover.style.top = topPx;\n        });\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    var range = (0,selection/* getEditorRange */.zh)(vditor);\n                    var node = document.createElement(\"template\");\n                    node.innerHTML = code;\n                    range.insertNode(node.content.cloneNode(true));\n                    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n                    if (blockElement) {\n                        blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n                    }\n                    else {\n                        vditor.wysiwyg.element.innerHTML = vditor.lute.SpinVditorDOM(vditor.wysiwyg.element.innerHTML);\n                    }\n                    (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n                },\n            });\n        });\n        // 中文处理\n        this.element.addEventListener(\"compositionstart\", function () {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(getSelection().getRangeAt(0).startContainer);\n            if (headingElement && headingElement.textContent === \"\") {\n                // heading 为空删除 https://github.com/Vanessa219/vditor/issues/150\n                renderToc(vditor);\n                return;\n            }\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                input_input(vditor, getSelection().getRangeAt(0).cloneRange(), event);\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 编辑器内容拖拽问题\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                return;\n            }\n            if (_this.composingLock || event.data === \"‘\" || event.data === \"“\" || event.data === \"《\") {\n                return;\n            }\n            var range = getSelection().getRangeAt(0);\n            var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n            if (!blockElement) {\n                // 没有被块元素包裹\n                modifyPre(vditor, range);\n                blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n            }\n            if (!blockElement) {\n                return;\n            }\n            // 前后空格处理\n            var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.wysiwyg.element, range).start;\n            // 开始可以输入空格\n            var startSpace = true;\n            for (var i = startOffset - 1; i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n                if (blockElement.textContent.charAt(i) !== \" \" &&\n                    // 多个 tab 前删除不形成代码块 https://github.com/Vanessa219/vditor/issues/162 1\n                    blockElement.textContent.charAt(i) !== \"\\t\") {\n                    startSpace = false;\n                    break;\n                }\n            }\n            if (startOffset === 0) {\n                startSpace = false;\n            }\n            // 结尾可以输入空格\n            var endSpace = true;\n            for (var i = startOffset - 1; i < blockElement.textContent.length; i++) {\n                if (blockElement.textContent.charAt(i) !== \" \" && blockElement.textContent.charAt(i) !== \"\\n\") {\n                    endSpace = false;\n                    break;\n                }\n            }\n            var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(getSelection().getRangeAt(0).startContainer);\n            if (headingElement && headingElement.textContent === \"\") {\n                // heading 为空删除 https://github.com/Vanessa219/vditor/issues/150\n                renderToc(vditor);\n                headingElement.remove();\n            }\n            if ((startSpace && blockElement.getAttribute(\"data-type\") !== \"code-block\")\n                || endSpace || isHeadingMD(blockElement.innerHTML) ||\n                (isHrMD(blockElement.innerHTML) && blockElement.previousElementSibling)) {\n                return;\n            }\n            input_input(vditor, range, event);\n        });\n        this.element.addEventListener(\"click\", function (event) {\n            if (event.target.tagName === \"INPUT\") {\n                var checkElement = event.target;\n                if (checkElement.checked) {\n                    checkElement.setAttribute(\"checked\", \"checked\");\n                }\n                else {\n                    checkElement.removeAttribute(\"checked\");\n                }\n                _this.preventInput = true;\n                afterRenderEvent(vditor);\n                return;\n            }\n            if (event.target.tagName === \"IMG\" &&\n                // plantuml 图片渲染不进行提示\n                !event.target.parentElement.classList.contains(\"vditor-wysiwyg__preview\")) {\n                if (event.target.getAttribute(\"data-type\") === \"link-ref\") {\n                    genLinkRefPopover(vditor, event.target);\n                }\n                else {\n                    genImagePopover(event, vditor);\n                }\n                return;\n            }\n            // 打开链接\n            if (event.target.tagName === \"A\") {\n                window.open(event.target.getAttribute(\"href\"));\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.target.isEqualNode(_this.element) && _this.element.lastElementChild && range.collapsed) {\n                var lastRect = _this.element.lastElementChild.getBoundingClientRect();\n                if (event.y > lastRect.top + lastRect.height) {\n                    if (_this.element.lastElementChild.tagName === \"P\" &&\n                        _this.element.lastElementChild.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        range.selectNodeContents(_this.element.lastElementChild);\n                        range.collapse(false);\n                    }\n                    else {\n                        _this.element.insertAdjacentHTML(\"beforeend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n                        (0,selection/* setRangeByWbr */.ib)(_this.element, range);\n                    }\n                }\n            }\n            highlightToolbarWYSIWYG(vditor);\n            // 点击后光标落于预览区，需展开代码块\n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(event.target, \"vditor-wysiwyg__preview\");\n            if (!previewElement) {\n                previewElement =\n                    (0,hasClosest/* hasClosestByClassName */.fb)((0,selection/* getEditorRange */.zh)(vditor).startContainer, \"vditor-wysiwyg__preview\");\n            }\n            if (previewElement) {\n                showCode(previewElement, vditor);\n            }\n            clickToc(event, vditor);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            // 除 md 处理、cell 内换行、table 添加新行/列、代码块语言切换、block render 换行、跳出/逐层跳出 blockquote、h6 换行、\n            // 任务列表换行、软换行外需在换行时调整文档位置\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.wysiwyg.element.innerHTML !== \"\" && vditor.wysiwyg.element.childNodes.length === 1 &&\n                vditor.wysiwyg.element.firstElementChild && vditor.wysiwyg.element.firstElementChild.tagName === \"P\"\n                && vditor.wysiwyg.element.firstElementChild.childElementCount === 0\n                && (vditor.wysiwyg.element.textContent === \"\" || vditor.wysiwyg.element.textContent === \"\\n\")) {\n                // 为空时显示 placeholder\n                vditor.wysiwyg.element.innerHTML = \"\";\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.key === \"Backspace\") {\n                // firefox headings https://github.com/Vanessa219/vditor/issues/211\n                if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.textContent === \"\\n\" && range.startOffset === 1) {\n                    range.startContainer.textContent = \"\";\n                }\n            }\n            // 没有被块元素包裹\n            modifyPre(vditor, range);\n            highlightToolbarWYSIWYG(vditor);\n            if (event.key !== \"ArrowDown\" && event.key !== \"ArrowRight\" && event.key !== \"Backspace\"\n                && event.key !== \"ArrowLeft\" && event.key !== \"ArrowUp\") {\n                return;\n            }\n            if (event.key === \"ArrowLeft\" || event.key === \"ArrowRight\") {\n                vditor.hint.render(vditor);\n            }\n            // 上下左右，删除遇到块预览的处理\n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-wysiwyg__preview\");\n            if (!previewElement && range.startContainer.nodeType !== 3 && range.startOffset > 0) {\n                // table 前删除遇到代码块\n                var blockRenderElement = range.startContainer;\n                if (blockRenderElement.classList.contains(\"vditor-wysiwyg__block\")) {\n                    previewElement = blockRenderElement.lastElementChild;\n                }\n            }\n            if (!previewElement) {\n                return;\n            }\n            var previousElement = previewElement.previousElementSibling;\n            if (previousElement.style.display === \"none\") {\n                if (event.key === \"ArrowDown\" || event.key === \"ArrowRight\") {\n                    showCode(previewElement, vditor);\n                }\n                else {\n                    showCode(previewElement, vditor, false);\n                }\n                return;\n            }\n            var codeElement = previewElement.previousElementSibling;\n            if (codeElement.tagName === \"PRE\") {\n                codeElement = codeElement.firstElementChild;\n            }\n            if (event.key === \"ArrowDown\" || event.key === \"ArrowRight\") {\n                var blockRenderElement = previewElement.parentElement;\n                var nextNode = getRenderElementNextNode(blockRenderElement);\n                if (nextNode && nextNode.nodeType !== 3) {\n                    // 下一节点依旧为代码渲染块\n                    var nextRenderElement = nextNode.querySelector(\".vditor-wysiwyg__preview\");\n                    if (nextRenderElement) {\n                        showCode(nextRenderElement, vditor);\n                        return;\n                    }\n                }\n                // 跳过渲染块，光标移动到下一个节点\n                if (nextNode.nodeType === 3) {\n                    // inline\n                    while (nextNode.textContent.length === 0 && nextNode.nextSibling) {\n                        // https://github.com/Vanessa219/vditor/issues/100 2\n                        nextNode = nextNode.nextSibling;\n                    }\n                    range.setStart(nextNode, 1);\n                }\n                else {\n                    // block\n                    range.setStart(nextNode.firstChild, 0);\n                }\n            }\n            else {\n                range.selectNodeContents(codeElement);\n                range.collapse(false);\n            }\n        });\n    };\n    return WYSIWYG;\n}());\n\n\n;// CONCATENATED MODULE: ./src/index.ts\nvar src_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Vditor = /** @class */ (function (_super) {\n    src_extends(Vditor, _super);\n    /**\n     * @param id 要挂载 Vditor 的元素或者元素 ID。\n     * @param options Vditor 参数\n     */\n    function Vditor(id, options) {\n        var _this = _super.call(this) || this;\n        _this.version = constants/* VDITOR_VERSION */.H;\n        if (typeof id === \"string\") {\n            if (!options) {\n                options = {\n                    cache: {\n                        id: \"vditor\" + id,\n                    },\n                };\n            }\n            else if (!options.cache) {\n                options.cache = { id: \"vditor\" + id };\n            }\n            else if (!options.cache.id) {\n                options.cache.id = \"vditor\" + id;\n            }\n            id = document.getElementById(id);\n        }\n        var getOptions = new Options(options);\n        var mergedOptions = getOptions.merge();\n        // 支持自定义国际化\n        if (!mergedOptions.i18n) {\n            if (![\"en_US\", \"ja_JP\", \"ko_KR\", \"ru_RU\", \"zh_CN\", \"zh_TW\"].includes(mergedOptions.lang)) {\n                throw new Error(\"options.lang error, see https://ld246.com/article/1549638745630#options\");\n            }\n            else {\n                (0,addScript/* addScript */.G)(mergedOptions.cdn + \"/dist/js/i18n/\" + mergedOptions.lang + \".js\", \"vditorI18nScript\").then(function () {\n                    _this.init(id, mergedOptions);\n                });\n            }\n        }\n        else {\n            window.VditorI18n = mergedOptions.i18n;\n            _this.init(id, mergedOptions);\n        }\n        return _this;\n    }\n    /** 设置主题 */\n    Vditor.prototype.setTheme = function (theme, contentTheme, codeTheme, contentThemePath) {\n        this.vditor.options.theme = theme;\n        setTheme(this.vditor);\n        if (contentTheme) {\n            this.vditor.options.preview.theme.current = contentTheme;\n            (0,setContentTheme/* setContentTheme */.Z)(contentTheme, contentThemePath || this.vditor.options.preview.theme.path);\n        }\n        if (codeTheme) {\n            this.vditor.options.preview.hljs.style = codeTheme;\n            (0,setCodeTheme/* setCodeTheme */.Y)(codeTheme, this.vditor.options.cdn);\n        }\n    };\n    /** 获取 Markdown 内容 */\n    Vditor.prototype.getValue = function () {\n        return getMarkdown(this.vditor);\n    };\n    /** 获取编辑器当前编辑模式 */\n    Vditor.prototype.getCurrentMode = function () {\n        return this.vditor.currentMode;\n    };\n    /** 聚焦到编辑器 */\n    Vditor.prototype.focus = function () {\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.focus();\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.element.focus();\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.element.focus();\n        }\n    };\n    /** 让编辑器失焦 */\n    Vditor.prototype.blur = function () {\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.blur();\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.element.blur();\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.element.blur();\n        }\n    };\n    /** 禁用编辑器 */\n    Vditor.prototype.disabled = function () {\n        hidePanel(this.vditor, [\"subToolbar\", \"hint\", \"popover\"]);\n        disableToolbar(this.vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"undo\", \"redo\", \"fullscreen\", \"edit-mode\"]));\n        this.vditor[this.vditor.currentMode].element.setAttribute(\"contenteditable\", \"false\");\n    };\n    /** 解除编辑器禁用 */\n    Vditor.prototype.enable = function () {\n        enableToolbar(this.vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"undo\", \"redo\", \"fullscreen\", \"edit-mode\"]));\n        this.vditor.undo.resetIcon(this.vditor);\n        this.vditor[this.vditor.currentMode].element.setAttribute(\"contenteditable\", \"true\");\n    };\n    /** 返回选中的字符串 */\n    Vditor.prototype.getSelection = function () {\n        if (this.vditor.currentMode === \"wysiwyg\") {\n            return getSelectText(this.vditor.wysiwyg.element);\n        }\n        else if (this.vditor.currentMode === \"sv\") {\n            return getSelectText(this.vditor.sv.element);\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            return getSelectText(this.vditor.ir.element);\n        }\n    };\n    /** 设置预览区域内容 */\n    Vditor.prototype.renderPreview = function (value) {\n        this.vditor.preview.render(this.vditor, value);\n    };\n    /** 获取焦点位置 */\n    Vditor.prototype.getCursorPosition = function () {\n        return (0,selection/* getCursorPosition */.Ny)(this.vditor[this.vditor.currentMode].element);\n    };\n    /** 上传是否还在进行中 */\n    Vditor.prototype.isUploading = function () {\n        return this.vditor.upload.isUploading;\n    };\n    /** 清除缓存 */\n    Vditor.prototype.clearCache = function () {\n        localStorage.removeItem(this.vditor.options.cache.id);\n    };\n    /** 禁用缓存 */\n    Vditor.prototype.disabledCache = function () {\n        this.vditor.options.cache.enable = false;\n    };\n    /** 启用缓存 */\n    Vditor.prototype.enableCache = function () {\n        if (!this.vditor.options.cache.id) {\n            throw new Error(\"need options.cache.id, see https://ld246.com/article/1549638745630#options\");\n        }\n        this.vditor.options.cache.enable = true;\n    };\n    /** HTML 转 md */\n    Vditor.prototype.html2md = function (value) {\n        return this.vditor.lute.HTML2Md(value);\n    };\n    /** markdown 转 JSON 输出 */\n    Vditor.prototype.exportJSON = function (value) {\n        return this.vditor.lute.RenderJSON(value);\n    };\n    /** 获取 HTML */\n    Vditor.prototype.getHTML = function () {\n        return getHTML(this.vditor);\n    };\n    /** 消息提示。time 为 0 将一直显示 */\n    Vditor.prototype.tip = function (text, time) {\n        this.vditor.tip.show(text, time);\n    };\n    /** 设置预览模式 */\n    Vditor.prototype.setPreviewMode = function (mode) {\n        setPreviewMode(mode, this.vditor);\n    };\n    /** 删除选中内容 */\n    Vditor.prototype.deleteValue = function () {\n        if (window.getSelection().isCollapsed) {\n            return;\n        }\n        document.execCommand(\"delete\", false);\n    };\n    /** 更新选中内容 */\n    Vditor.prototype.updateValue = function (value) {\n        document.execCommand(\"insertHTML\", false, value);\n    };\n    /** 在焦点处插入内容，并默认进行 Markdown 渲染 */\n    Vditor.prototype.insertValue = function (value, render) {\n        if (render === void 0) { render = true; }\n        var range = (0,selection/* getEditorRange */.zh)(this.vditor);\n        range.collapse(true);\n        var tmpElement = document.createElement(\"template\");\n        tmpElement.innerHTML = value;\n        range.insertNode(tmpElement.content.cloneNode(true));\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.preventInput = true;\n            if (render) {\n                inputEvent(this.vditor);\n            }\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.preventInput = true;\n            if (render) {\n                input_input(this.vditor, getSelection().getRangeAt(0));\n            }\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.preventInput = true;\n            if (render) {\n                input(this.vditor, getSelection().getRangeAt(0), true);\n            }\n        }\n    };\n    /** 设置编辑器内容 */\n    Vditor.prototype.setValue = function (markdown, clearStack) {\n        var _this = this;\n        if (clearStack === void 0) { clearStack = false; }\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.innerHTML = this.vditor.lute.SpinVditorSVDOM(markdown);\n            processAfterRender(this.vditor, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            renderDomByMd(this.vditor, markdown, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        else {\n            this.vditor.ir.element.innerHTML = this.vditor.lute.Md2VditorIRDOM(markdown);\n            this.vditor.ir.element\n                .querySelectorAll(\".vditor-ir__preview[data-render='2']\")\n                .forEach(function (item) {\n                processCodeRender(item, _this.vditor);\n            });\n            process_processAfterRender(this.vditor, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        this.vditor.outline.render(this.vditor);\n        if (!markdown) {\n            hidePanel(this.vditor, [\"emoji\", \"headings\", \"submenu\", \"hint\"]);\n            if (this.vditor.wysiwyg.popover) {\n                this.vditor.wysiwyg.popover.style.display = \"none\";\n            }\n            this.clearCache();\n        }\n        if (clearStack) {\n            this.clearStack();\n        }\n    };\n    /** 清空 undo & redo 栈 */\n    Vditor.prototype.clearStack = function () {\n        this.vditor.undo.clearStack(this.vditor);\n        this.vditor.undo.addToUndoStack(this.vditor);\n    };\n    /** 销毁编辑器 */\n    Vditor.prototype.destroy = function () {\n        this.vditor.element.innerHTML = this.vditor.originalInnerHTML;\n        this.vditor.element.classList.remove(\"vditor\");\n        this.vditor.element.removeAttribute(\"style\");\n        document.getElementById(\"vditorIconScript\").remove();\n        this.clearCache();\n    };\n    /** 获取评论 ID */\n    Vditor.prototype.getCommentIds = function () {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return [];\n        }\n        return this.vditor.wysiwyg.getComments(this.vditor, true);\n    };\n    /** 高亮评论 */\n    Vditor.prototype.hlCommentIds = function (ids) {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var hlItem = function (item) {\n            item.classList.remove(\"vditor-comment--hover\");\n            ids.forEach(function (id) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(id) > -1) {\n                    item.classList.add(\"vditor-comment--hover\");\n                }\n            });\n        };\n        this.vditor.wysiwyg.element\n            .querySelectorAll(\".vditor-comment\")\n            .forEach(function (item) {\n            hlItem(item);\n        });\n        if (this.vditor.preview.element.style.display !== \"none\") {\n            this.vditor.preview.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                hlItem(item);\n            });\n        }\n    };\n    /** 取消评论高亮 */\n    Vditor.prototype.unHlCommentIds = function (ids) {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var unHlItem = function (item) {\n            ids.forEach(function (id) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(id) > -1) {\n                    item.classList.remove(\"vditor-comment--hover\");\n                }\n            });\n        };\n        this.vditor.wysiwyg.element\n            .querySelectorAll(\".vditor-comment\")\n            .forEach(function (item) {\n            unHlItem(item);\n        });\n        if (this.vditor.preview.element.style.display !== \"none\") {\n            this.vditor.preview.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                unHlItem(item);\n            });\n        }\n    };\n    /** 删除评论 */\n    Vditor.prototype.removeCommentIds = function (removeIds) {\n        var _this = this;\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var removeItem = function (item, removeId) {\n            var ids = item.getAttribute(\"data-cmtids\").split(\" \");\n            ids.find(function (id, index) {\n                if (id === removeId) {\n                    ids.splice(index, 1);\n                    return true;\n                }\n            });\n            if (ids.length === 0) {\n                item.outerHTML = item.innerHTML;\n                (0,selection/* getEditorRange */.zh)(_this.vditor).collapse(true);\n            }\n            else {\n                item.setAttribute(\"data-cmtids\", ids.join(\" \"));\n            }\n        };\n        removeIds.forEach(function (removeId) {\n            _this.vditor.wysiwyg.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                removeItem(item, removeId);\n            });\n            if (_this.vditor.preview.element.style.display !== \"none\") {\n                _this.vditor.preview.element\n                    .querySelectorAll(\".vditor-comment\")\n                    .forEach(function (item) {\n                    removeItem(item, removeId);\n                });\n            }\n        });\n        afterRenderEvent(this.vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n    };\n    Vditor.prototype.init = function (id, mergedOptions) {\n        var _this = this;\n        this.vditor = {\n            currentMode: mergedOptions.mode,\n            element: id,\n            hint: new Hint(mergedOptions.hint.extend),\n            lute: undefined,\n            options: mergedOptions,\n            originalInnerHTML: id.innerHTML,\n            outline: new Outline(window.VditorI18n.outline),\n            tip: new Tip(),\n        };\n        this.vditor.sv = new Editor(this.vditor);\n        this.vditor.undo = new undo_Undo();\n        this.vditor.wysiwyg = new WYSIWYG(this.vditor);\n        this.vditor.ir = new IR(this.vditor);\n        this.vditor.toolbar = new Toolbar(this.vditor);\n        if (mergedOptions.resize.enable) {\n            this.vditor.resize = new Resize(this.vditor);\n        }\n        if (this.vditor.toolbar.elements.devtools) {\n            this.vditor.devtools = new DevTools();\n        }\n        if (mergedOptions.upload.url || mergedOptions.upload.handler) {\n            this.vditor.upload = new Upload();\n        }\n        (0,addScript/* addScript */.G)(mergedOptions._lutePath ||\n            mergedOptions.cdn + \"/dist/js/lute/lute.min.js\", \"vditorLuteScript\").then(function () {\n            _this.vditor.lute = (0,setLute/* setLute */.X)({\n                autoSpace: _this.vditor.options.preview.markdown.autoSpace,\n                codeBlockPreview: _this.vditor.options.preview.markdown\n                    .codeBlockPreview,\n                emojiSite: _this.vditor.options.hint.emojiPath,\n                emojis: _this.vditor.options.hint.emoji,\n                fixTermTypo: _this.vditor.options.preview.markdown.fixTermTypo,\n                footnotes: _this.vditor.options.preview.markdown.footnotes,\n                headingAnchor: false,\n                inlineMathDigit: _this.vditor.options.preview.math.inlineDigit,\n                linkBase: _this.vditor.options.preview.markdown.linkBase,\n                linkPrefix: _this.vditor.options.preview.markdown.linkPrefix,\n                listStyle: _this.vditor.options.preview.markdown.listStyle,\n                mark: _this.vditor.options.preview.markdown.mark,\n                mathBlockPreview: _this.vditor.options.preview.markdown\n                    .mathBlockPreview,\n                paragraphBeginningSpace: _this.vditor.options.preview.markdown\n                    .paragraphBeginningSpace,\n                sanitize: _this.vditor.options.preview.markdown.sanitize,\n                toc: _this.vditor.options.preview.markdown.toc,\n            });\n            _this.vditor.preview = new Preview(_this.vditor);\n            initUI(_this.vditor);\n            if (mergedOptions.after) {\n                mergedOptions.after();\n            }\n            if (mergedOptions.icon) {\n                // 防止初始化 2 个编辑器时加载 2 次\n                (0,addScript/* addScriptSync */.J)(mergedOptions.cdn + \"/dist/js/icons/\" + mergedOptions.icon + \".js\", \"vditorIconScript\");\n            }\n        });\n    };\n    return Vditor;\n}(method.default));\n/* harmony default export */ const src = (Vditor);\n\n})();\n\n__webpack_exports__ = __webpack_exports__.default;\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});","import Vditor from \"vditor\";\n/** 用来获取 vditor 实例的工具元素 */\nconst d = document.createElement(\"div\");\nconst id = \"test__\" + Date.now();\nd.setAttribute(\"id\", id);\nd.style.display = \"none\";\nconst vditor = new Vditor(d, {\n    cache: { id: id },\n    // cdn: \"https://cdn.jsdelivr.net/npm/vditor@3.8.4\",\n});\nfunction generalAdaptation(adapterTarget, type) {\n    Object.assign(adapterTarget, {\n        getElements: (element) => {\n            return element.querySelectorAll(`[data-subtype=${type}]`);\n        },\n        getCode: (element) => element.dataset.content,\n    });\n}\ngeneralAdaptation(Vditor.adapterRender.mathRenderAdapter, \"math\");\n{\n    //流程图\n    generalAdaptation(Vditor.adapterRender.mermaidRenderAdapter, \"mermaid\");\n    Vditor.adapterRender.mermaidRenderAdapter.getCode = (element) => {\n        element.innerHTML = element.dataset.content;\n        return element.textContent;\n    };\n}\n{\n    //脑图\n    generalAdaptation(Vditor.adapterRender.mindmapRenderAdapter, \"mindmap\");\n    Vditor.adapterRender.mindmapRenderAdapter.getCode = (el) => el.dataset.parseContent;\n}\ngeneralAdaptation(Vditor.adapterRender.chartRenderAdapter, \"echarts\");\ngeneralAdaptation(Vditor.adapterRender.abcRenderAdapter, \"abc\");\ngeneralAdaptation(Vditor.adapterRender.graphvizRenderAdapter, \"graphviz\");\nVditor.adapterRender.graphvizRenderAdapter.getElements = (e) => {\n    return e.querySelectorAll(`[data-subtype=graphviz]`);\n};\ngeneralAdaptation(Vditor.adapterRender.flowchartRenderAdapter, \"flowchart\");\ngeneralAdaptation(Vditor.adapterRender.plantumlRenderAdapter, \"plantuml\");\nexport async function vditorRender(previewElement) {\n    // const cdn = v.options.cdn.replace(/-adapter\\d+/, \"\");\n    console.log(vditor);\n    while (!vditor.vditor) {\n        await sleep(3);\n    }\n    const v = vditor.vditor;\n    Vditor.setContentTheme(v.options.preview.theme.current, v.options.preview.theme.path);\n    Vditor.codeRender(previewElement);\n    Vditor.highlightRender(\n    //@ts-expect-error\n    JSON.stringify(v.options.preview.hljs), previewElement);\n    Vditor.mathRender(previewElement, {\n        //@ts-expect-error\n        math: JSON.stringify(v.options.preview.math),\n    });\n    //@ts-expect-error\n    Vditor.mermaidRender(previewElement);\n    Vditor.flowchartRender(previewElement);\n    Vditor.graphvizRender(previewElement);\n    //@ts-expect-error\n    Vditor.chartRender(previewElement);\n    //@ts-expect-error\n    Vditor.mindmapRender(previewElement);\n    Vditor.abcRender(previewElement);\n    Vditor.mediaRender(previewElement);\n    Vditor.plantumlRender(previewElement);\n}\nfunction sleep(ms) {\n    return new Promise((s) => {\n        setTimeout(s, ms);\n    });\n}\n","import { md2website } from \"./lib/md2website.global\";\nimport { scrollIntoView } from \"./lib/scroll_into_view\";\nimport { vditorRender } from \"./lib/vditor\";\nexport function scrollIntoHash() {\n    scrollIntoView(location.href);\n}\nasync function render() {\n    let old = null;\n    while (1) {\n        const mdContent = md2website.fragment.getElementById(\"static_app_llej\");\n        if (mdContent != null) {\n            // 在用户选中一些元素后 隐藏 a 标签后面的图片，便于用户复制\n            if (window.getSelection().type == \"Range\") {\n                mdContent.classList.add(\"eventSelection\");\n            }\n            else {\n                mdContent.classList.remove(\"eventSelection\");\n            }\n        }\n        if (mdContent === null || old === mdContent) {\n            await new Promise((s) => setTimeout(s, 80));\n        }\n        else {\n            console.log(\"[render] \", mdContent);\n            old = mdContent;\n            /** ═════════🏳‍🌈 渲染 md 🏳‍🌈═════════  */\n            vditorRender(mdContent);\n            /** ═════════🏳‍🌈 块引用在当前页的跳转 🏳‍🌈═════════  */\n            scrollIntoView(location.href);\n            md2website.gotoClick = (e) => {\n                const el = e.target;\n                let path = el.href || el.src;\n                if (path) {\n                    scrollIntoView(path);\n                }\n            };\n            /** ═════════🏳‍🌈 渲染 命名、别名等 🏳‍🌈═════════  */\n            Array.from(md2website.fragment.querySelectorAll(\"[data-n-id]\")).map((el) => {\n                if (el.getAttribute(\"data-type\") === \"NodeDocument\" && el.tagName !== \"H1\") {\n                    // 因为 NodeDocument 还会渲染出一个 h1 在最上方，所以 main NodeDocument 不用渲染\n                    return;\n                }\n                const attrFragment = document.createDocumentFragment();\n                function addItem(name) {\n                    const value = el.getAttribute(name);\n                    if (value) {\n                        const el = document.createElement(\"div\");\n                        el.textContent = value;\n                        el.classList.add(\"protyle-attr--\" + name);\n                        attrFragment.appendChild(el);\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                }\n                addItem(\"name\");\n                addItem(\"alias\");\n                if (addItem(\"memo\")) {\n                    attrFragment.lastElementChild.setAttribute(\"title\", attrFragment.lastElementChild.textContent);\n                    attrFragment.lastElementChild.textContent = \"\";\n                }\n                addItem(\"bookmark\");\n                if (attrFragment.childNodes.length > 0) {\n                    const attrDiv = document.createElement(\"div\");\n                    attrDiv.classList.add(\"protyle-attr\");\n                    attrDiv.appendChild(attrFragment);\n                    el.appendChild(attrDiv);\n                }\n            });\n        }\n    }\n}\nrender();\n"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","element","name","document","createElement","svg_element","createElementNS","text","data","createTextNode","attr","attribute","value","removeAttribute","getAttribute","setAttribute","set_style","key","important","style","setProperty","attribute_to_object","attributes","result","current_component","set_current_component","component","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","push","flushing","seen_callbacks","Set","flush","i","length","update","$$","pop","callback","has","add","clear","fragment","before_update","dirty","p","ctx","after_update","outroing","make_dirty","then","fill","init","options","instance","create_fragment","not_equal","props","append_styles","parent_component","bound","on_mount","on_destroy","on_disconnect","context","Map","callbacks","skip_bound","root","ready","ret","rest","hydrate","nodes","Array","from","childNodes","children","l","c","intro","block","delete","local","customElement","m","new_on_destroy","map","filter","mount_component","SvelteElement","src","title","HTMLElement","constructor","super","this","attachShadow","mode","connectedCallback","slotted","attributeChangedCallback","_oldValue","newValue","disconnectedCallback","$destroy","detaching","d","destroy_component","$on","type","index","indexOf","splice","$set","$$props","obj","$$set","keys","md2website","gotoClick","e","console","log","event","handler","addEventListener","removeEventListener","wholeText","globalThis","arg","scrollIntoView","url","hash","split","querySelector","location","highlightClassName","classList","setTimeout","remove","warn","factory","__webpack_modules__","module","diff_match_patch","Diff_Timeout","Diff_EditCost","Match_Threshold","Match_Distance","Patch_DeleteThreshold","Patch_Margin","Match_MaxBits","DIFF_DELETE","Diff","op","prototype","diff_main","text1","text2","opt_checklines","opt_deadline","Number","MAX_VALUE","Date","getTime","deadline","Error","checklines","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","diffs","diff_compute_","unshift","diff_cleanupMerge","longtext","shorttext","hm","diff_halfMatch_","text1_a","text1_b","text2_a","text2_b","mid_common","diffs_a","diffs_b","concat","diff_lineMode_","diff_bisect_","diff_linesToChars_","chars1","chars2","linearray","lineArray","diff_charsToLines_","diff_cleanupSemantic","pointer","count_delete","count_insert","text_delete","text_insert","subDiff","j","text1_length","text2_length","max_d","Math","ceil","v_offset","v_length","v1","v2","x","delta","front","k1start","k1end","k2start","k2end","k1","k1_offset","y1","x1","charAt","k2_offset","x2","diff_bisectSplit_","k2","y2","y","text1a","text2a","text1b","text2b","diffsb","lineHash","diff_linesToCharsMunge_","chars","lineStart","lineEnd","lineArrayLength","line","hasOwnProperty","undefined","String","fromCharCode","maxLines","charCodeAt","join","pointermin","pointermax","min","pointermid","pointerstart","floor","pointerend","diff_commonOverlap_","text_length","best","pattern","found","dmp","diff_halfMatchI_","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","seed","best_common","prefixLength","suffixLength","hm1","hm2","changes","equalities","equalitiesLength","lastEquality","length_insertions1","length_deletions1","length_insertions2","length_deletions2","max","diff_cleanupSemanticLossless","deletion","insertion","overlap_length1","overlap_length2","diff_cleanupSemanticScore_","one","two","char1","char2","nonAlphaNumeric1","match","nonAlphaNumericRegex_","nonAlphaNumeric2","whitespace1","whitespaceRegex_","whitespace2","lineBreak1","linebreakRegex_","lineBreak2","blankLine1","blanklineEndRegex_","blankLine2","blanklineStartRegex_","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","score","diff_cleanupEfficiency","pre_ins","pre_del","post_ins","post_del","diff_xIndex","loc","last_chars1","last_chars2","diff_prettyHtml","html","pattern_amp","pattern_lt","pattern_gt","pattern_para","replace","diff_text1","diff_text2","diff_levenshtein","levenshtein","insertions","deletions","diff_toDelta","encodeURI","diff_fromDelta","diffsLength","tokens","param","decodeURI","ex","n","parseInt","isNaN","match_main","match_bitap_","s","match_alphabet_","match_bitapScore_","accuracy","proximity","abs","score_threshold","best_loc","lastIndexOf","bin_min","bin_mid","matchmask","last_rd","bin_max","start","finish","rd","charMatch","patch_addContext_","patch","start2","length1","padding","prefix","suffix","start1","length2","patch_make","opt_b","opt_c","patches","patch_obj","patchDiffLength","char_count1","char_count2","prepatch_text","postpatch_text","diff_type","diff_text","patch_deepCopy","patchesCopy","patchCopy","patch_apply","nullPadding","patch_addPadding","patch_splitMax","results","start_loc","expected_loc","end_loc","index2","index1","mod","paddingLength","extraLength","patch_size","bigpatch","precontext","empty","shift","postcontext","patch_toText","patch_fromText","textline","textPointer","patchHeader","sign","toString","exports","DIFF_INSERT","DIFF_EQUAL","__unused_webpack_module","__webpack_exports__","__webpack_require__","default","abcRender","adapterRender","chartRender","codeRender","flowchartRender","graphvizRender","highlightRender","lazyLoadImageRender","loadImg","it","testImage","naturalHeight","naturalWidth","clientWidth","window","innerHeight","height","querySelectorAll","imgElement","vditorImageIntersectionObserver","disconnect","observe","IntersectionObserver","entries","entrie","isIntersecting","intersectionRatio","mathRender","mediaRender","mermaidRender","mindmapRender","outlineRender","plantumlRender","constants","setContentTheme","addScript","hasClosest","merge","setLute","selection","speechRender","lang","speechSynthesis","SpeechSynthesisUtterance","playSVG","pauseSVG","speechDom","className","body","insertAdjacentElement","getVoice","currentVoice","defaultVoice","getVoices","item","onvoiceschanged","voice_1","onclick","utterThis","voice","onend","cancel","innerHTML","speak","speaking","paused","resume","pause","Hc","vditorSpeechRange","getSelection","trim","display","getRangeAt","cloneRange","rect","getBoundingClientRect","top","scrollTop","left","screenX","__awaiter","thisArg","_arguments","P","generator","reject","fulfilled","step","next","rejected","done","apply","__generator","f","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","TypeError","call","mergeOptions","defaultOption","cdn","CDN","customEmoji","emojiPath","hljs","HLJS_OPTIONS","icon","markdown","MARKDOWN_OPTIONS","math","MATH_OPTIONS","speech","enable","theme","THEME_OPTIONS","T","md2html","mdText","mergedOptions","G","lute","X","autoSpace","codeBlockPreview","emojiSite","emojis","fixTermTypo","footnotes","headingAnchor","inlineMathDigit","inlineDigit","lazyLoadImage","linkBase","linkPrefix","listStyle","mark","mathBlockPreview","paragraphBeginningSpace","sanitize","toc","renderers","SetJSRenderers","Md2HTML","SetHeadingID","previewRender","previewElement","_a","transform","i18n","VditorI18n","includes","J","Z","current","path","O","H","B","Q","Y","id","substr","getElementById","offsetTop","onhashchange","decodeURIComponent","after","spanElement","lG","fb","headingElement","scrollTo","scrollX","preview_image","setCodeTheme","method","Vditor","previewImage","E","k","preview","_VDITOR_VERSION","Constants","ZWSP","DROP_EDITOR","MOBILE_WIDTH","CLASS_MENU_DISABLED","EDIT_TOOLBARS","CODE_THEME","CODE_LANGUAGES","lineNumber","engine","macros","list","dark","light","wechat","_constants__WEBPACK_IMPORTED_MODULE_0__","_util_addScript__WEBPACK_IMPORTED_MODULE_2__","_adapterRender__WEBPACK_IMPORTED_MODULE_1__","abcElements","abcRenderAdapter","getElements","parentElement","contains","ABCJS","renderAbc","getCode","overflowX","r","mathRenderAdapter","mermaidRenderAdapter","mindmapRenderAdapter","chartRenderAdapter","graphvizRenderAdapter","flowchartRenderAdapter","plantumlRenderAdapter","mathElement","textContent","el","innerText","echartsElements","option","JSON","parse","echarts","setOption","error","_util_code160to32__WEBPACK_IMPORTED_MODULE_0__","maxHeight","codeText","codeElement","divElement","copy","copied","textarea","before","outerHeight","flowchartElements","flowchartObj","flowchart","drawSVG","graphvizElements","code","blob","Blob","blobUrl","URL","webkitURL","createObjectURL","worker","Worker","Viz","renderSVGElement","outerHTML","catch","_util_addStyle__WEBPACK_IMPORTED_MODULE_1__","hljsOption","vditorHljsStyle","href","highlightElement","linenNumberTemp","whiteSpace","getComputedStyle","isSoftWrap","lineNumberHTML","lineList","lineHeight","insertAdjacentHTML","_util_addScript__WEBPACK_IMPORTED_MODULE_3__","_util_addStyle__WEBPACK_IMPORTED_MODULE_2__","_util_code160to32__WEBPACK_IMPORTED_MODULE_4__","mathElements","defaultOptions","assign","katex","renderToString","displayMode","tagName","output","message","stopPropagation","preventDefault","vditorMathElement","currentTarget","closest","clipboardData","setData","MathJax","loader","paths","mathjax","startup","typeset","tex","renderMath_1","mathOptions","getMetricsFor","tex2svgPromise","updateDocument","errorTextElement","promise","chains","_loop_1","curr","last","chainAsync_1","aElement","videoRender","audioRender","youtubeMatch","youkuMatch","qqMatch","coubMatch","facebookMatch","dailymotionMatch","bilibiliMatch","tedMatch","encodeURIComponent","iframeRender","mermaidElements","config","altFontFamily","htmlLabels","useMaxWidth","fontFamily","gantt","leftPadding","rightPadding","securityLevel","sequence","boxMargin","diagramMarginX","diagramMarginY","startOnLoad","themeVariables","activationBkgColor","activationBorderColor","activeTaskBkgColor","activeTaskBorderColor","actorBkg","actorBorder","actorLineColor","actorTextColor","altBackground","altSectionBkgColor","arrowheadColor","background","border1","border2","classText","clusterBkg","clusterBorder","critBkgColor","critBorderColor","darkTextColor","defaultLinkColor","doneTaskBkgColor","doneTaskBorderColor","edgeLabelBackground","errorBkgColor","errorTextColor","fillType0","fillType1","fillType2","fillType3","fillType4","fillType5","fillType6","fillType7","fontSize","gridColor","labelBackground","labelBoxBkgColor","labelBoxBorderColor","labelColor","labelTextColor","lineColor","loopTextColor","mainBkg","mainContrastColor","nodeBkg","nodeBorder","noteBkgColor","noteBorderColor","noteTextColor","primaryBorderColor","primaryColor","primaryTextColor","secondBkg","secondaryBorderColor","secondaryColor","secondaryTextColor","sectionBkgColor","sectionBkgColor2","sequenceNumberColor","signalColor","signalTextColor","taskBkgColor","taskBorderColor","taskTextClickableColor","taskTextColor","taskTextDarkColor","taskTextLightColor","taskTextOutsideColor","tertiaryBorderColor","tertiaryColor","tertiaryTextColor","textColor","titleColor","todayLineColor","mermaid","initialize","mindmapElements","series","initialTreeDepth","itemStyle","borderWidth","color","backgroundColor","borderColor","borderRadius","offset","position","lineStyle","width","roam","symbol","params","tooltip","trigger","triggerOn","_util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__","_mathRender__WEBPACK_IMPORTED_MODULE_0__","contentElement","targetElement","vditor","tocHTML","ids","W","lastIndex","tempElement","SetToC","currentMode","HTML2VditorDOM","SpinVditorIRDOM","SpinVditorDOM","Lute","New","headingsElement","firstElementChild","nextElementSibling","isEqualNode","idElement","windowScrollY","toolbarConfig","pin","toolbar","offsetHeight","scrollY","plantumlElements","plantumlEncoder","encode","PutEmojis","SetEmojiSite","SetHeadingAnchor","SetInlineMathAllowDigitAfterOpenMarker","SetAutoSpace","SetFootnotes","SetFixTermTypo","SetVditorCodeBlockPreview","SetVditorMathBlockPreview","SetSanitize","SetChineseParagraphBeginningSpace","SetRenderListStyle","SetLinkBase","SetLinkPrefix","SetMark","SetImageLazyLoading","oldImgElement","oldImgRect","spin","close","overflow","translate3d","innerWidth","scrollWidth","scrollHeight","clientHeight","btnElement","deg","codeTheme","_util_addStyle__WEBPACK_IMPORTED_MODULE_0__","contentTheme","vditorContentTheme","cssPath","addScriptSync","xhrObj","XMLHttpRequest","open","setRequestHeader","send","scriptElement","responseText","head","async","onload","addStyle","styleElement","rel","getElementsByTagName","code160to32","G6","vU","pK","Le","yl","ns","i7","isSafari","navigator","userAgent","isFirefox","toLowerCase","accessLocalStorage","localStorage","getEventName","isCtrl","platform","toUpperCase","metaKey","ctrlKey","updateHotkeyTip","hotkey","test","startsWith","isChrome","vendor","JQ","E2","O9","a1","F9","DX","_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__","hasTopClosestByClassName","hasClosestByClassName","parentClosest","findTop","hasTopClosestByTag","nodeName","S","getTopList","topUlElement","topOlElement","topListElement","hasClosestByAttribute","nodeType","isClosest","hasClosestBlock","blockElement","hasClosestByMatchTag","getLastNode","lastChild","hasClosestByTag","hasClosestByHeadings","_i","arguments","merger","prop","zh","Ny","Gb","im","$j","ib","oC","_compatibility__WEBPACK_IMPORTED_MODULE_2__","_hasClosest__WEBPACK_IMPORTED_MODULE_1__","getEditorRange","range","rangeCount","startContainer","focus","ownerDocument","createRange","setStart","collapse","getCursorPosition","editor","cursorRect","parentRect","getClientRects","parent_1","startOffset","selectNode","setEnd","endContainer","endOffset","selectIsEditor","container","commonAncestorContainer","setSelectionFocus","removeAllRanges","addRange","getSelectPosition","selectElement","editorElement","end","preSelectionRange","selectNodeContents","setSelectionByPosition","charIndex","pNode","foundStart","stop","nextCharIndex","nextSibling","setStartBefore","setStartAfter","setEndBefore","setEndAfter","setRangeByWbr","wbrElement","previousElementSibling","isSameNode","previousSibling","insertNode","insertHTML","tempBlockElement","pasteElement","preventInput","execCommand","lastElementChild","pasteTemplate","content","cloneNode","__webpack_module_cache__","moduleId","cachedModule","definition","o","defineProperty","enumerable","get","toStringTag","extendStatics","templateObject_1","getMarkdown","sv","VditorDOM2Md","wysiwyg","VditorIRDOM2Md","ir","DevTools","renderEchart","_this","devtools","ASTChart","RenderEChartsJSON","align","verticalAlign","orient","toolbox","bottom","emphasis","iconStyle","feature","restore","show","saveAsImage","right","resize","compatibility","removeCurrentToolbar","names","itemElement","setCurrentToolbar","enableToolbar","disableToolbar","hideToolbar","showToolbar","hidePanel","panels","exceptElement","elements","emoji","hint","popover","toggleSubMenu","panelElement","actionBtn","level","print","processCodeRender","previewPanel","language","renderToc","outline","render","clickToc","keydownToc","execAfterRender","insertBeforeBlock","trimRight","insertAfterBlock","tocElement","input","ignoreSpace","isHrMD","isHeadingMD","startSpace","endSpace","previousNode","previewRenderElement","firstLinkRefDefElement","isIRElement","footnoteElement","blockquoteElement","listPrevElement","listNextElement","inputType","debugger","footnoteItemElement","footnoteItemText","marker","footnoteRefElement","firstFootnoteElement","allLinkRefDefsElement","allFootnoteElement","process_processAfterRender","enableAddUndoStack","enableHint","enableInput","matchHotKey","hotKey","altKey","shiftKey","hotKeys","keyCode","hasShift","expandMarker","nodeElement","nodeElementEnd","collapsed","nextNode","nodeValue","markerElement","parentNextNode","nextIsNode","previousIsNode","inputEvent","processAfterRender","codeBlockMarkerElement","openMarkerElement","getSideByType","mathBlockMarkerElement","mathBlockCloseElement","Caret","isSVElement","processSpinVditorSVDOM","scrollCenter","setTheme","setPadding","minPadding","maxWidth","paddingLeft","offsetWidth","setTypewriterPosition","typewriterMode","minHeight","afterRender","initValue","getItem","cache","originalInnerHTML","HTML2Md","highlightToolbarIR","clearTimeout","hlToolbarTimeoutId","typeElement","liElement","afterRenderEvent","afterRenderTimeoutId","composingLock","counter","setItem","undo","addToUndoStack","undoDelay","getNextHTML","getPreviousHTML","modifyPre","find","pElement","cloneRangeOffset","firstChild","setHeading","removeHeading","showCode","first","previousElement","removeBlockElement","click","highlightToolbarWYSIWYG","footnotesElement","genClose","setPopoverPosition","commentElement","ids_1","nextIds_1","tableElement","genUp","genDown","updateTable_1","oldRow","rows","oldColumn","cells","row","input_1","column","input2_1","columnDiff","rowDiff","rowHTML","setAlign_1","setTableAlign","left_1","center_1","right_1","td","th","alignType","alignLeft","alignCenter","alignRight","insertRowElement","insertRowBelow","cellElement","insertRow","insertRowBElement","insertRowAbove","insertColumnElement","insertColumnRight","insertColumn","insertColumnBElement","insertColumnLeft","deleteRowElement","deleteRow","deleteColumnElement","deleteColumn","inputWrap","textAlign","oninput","onkeydown","isComposing","select","input2Wrap","linkRefElement","genLinkRefPopover","footnotesRefElement","footnoteRef","input_2","blockRenderElement","languageWrap","language_1","codeElement_1","recentLanguage","onkeyup","matchLangData","selectionStart","keyName","genHTML","input_3","genAPopover","backslashElement","offsetLeft","updateLinkRef","input1","textIsNotEmpty","linkHotkey","input1Wrap","linkRef","upElement","up","nextElement","downElement","down","nextInputElement","updateA","input2","link","tooltipText","highlightToolbar","renderDomByMd","md","Md2VditorDOM","cancelBES","commandName","jump","lastTagName","lastEndTagName","splitHTML","previousHTML","nextHTML","beforeHTML","afterHTML","splitElement","lastBeforeHTML","lastAfterHTML","MenuItem","menuItem","tip","iconElement","tipPosition","CustomEvent","useHighlight","useRender","quoteElement","inlineCodeElement","listToggle","surroundContents","deleteContents","textInputElement","textInputElements","tableHTML_1","tableText","delimiter_1","header","subIndex","cell","hrHTML","toolbarEvent","process_processToolbar","processToolbar","__extends","setPrototypeOf","__proto__","__","setEditMode","markdownText","SetVditorIR","SetVditorWYSIWYG","SetVditorSV","Md2VditorIRDOM","svHTML","resetIcon","toggle","EditMode","_super","instantRendering","splitView","_bindEvent","getSelectText","focusEvent","dblclickEvent","blurEvent","expandElement","selectPopover","relatedTarget","hideComment","blur","dropEvent","dataTransfer","getData","types","paste","pasteCode","copyEvent","cutEvent","comment","getComments","adjustTop","cursorTop","hotkeyEvent","extend","_b","_c","_d","_e","recordFirstPosition","textElement","blockquoteMarkerElement","listMarkerElement","taskMarkerElement","listLastMarkerElement","startIndex","isTask","listFirstMarkerElement","fixTab","isFirst","newLineMatch","newLineText","processPreviousMarkers","extractContents","previousLastElement","processKeydown_processKeydown","fixGSKeyBackspace","fixCJKPosition","fixHR","fixMarkdown","fixList","fixTable","codeRenderElement","inputElemment","fixCodeBlock","fixBlockquote","topBQElement","pTempElement","fixTask","linRefElement","inputElement","fixDelete","rangeStart","rangeStartOffset","nextIsCode","fixFirefoxArrowUpTable","fixCursorDownInlineMath","wysiwyg_processKeydown_processKeydown","newlineElement","beforeMarkerElement","afterMarkerElement","preRenderElement","preBeforeElement","isFirstCell","table2Element","isLastCell","headingMarkerElement","process_processHeading","headingLength","processKeydown","ctrlEnter","redo","esc","processHeading","repeat","subMenuItem","dispatchEvent","selectEvent","onmouseup","selectText","showComment","processPaste","Md2VditorSVDOM","spanNode","isPrevious","sideElement","SpinVditorSVDOM","spanType","markerText","hasNL","previousType","previousText","openMarker","processTimeoutId","newLine","insertAdjacentText","getElement","setHeaders","xhr","upload","headers","Upload","isUploading","uploadFiles","files","fileList","filesMax","fileItem","isValidate","validateResult","formData","extraData","iMax","multiple","DataTransferItem","getAsFile","file","validate","hide","uploadFileList","errorTip","uploadingStr","nameEmpty","size","over","fileExt","filename","accept","some","fileTypeError","uploading","validateFile","FormData","fieldName","token","withCredentials","onreadystatechange","readyState","DONE","status","success","format","response","msg","errFiles","uploadError","succFileText","succMap","genUploadedLabel","onprogress","lengthComputable","progress","loaded","total","input_input","previousAEmptyElement","previoueIsEmptyA","wbr","html_1","firstLinkRefDefElement_1","isWYSIWYGElement","firstFootnoteElement_1","triggerRemoveComment","fixBrowserBehavior_awaiter","fixBrowserBehavior_generator","pLiElement","zwspNode","inlineElement","insertEmptyBlock","goPreviousCell","isSelected","pHTML","childElementCount","trimLeft","replaceChild","listIndent","liElements_1","cloneContents","liParentElement","liHTML_1","slice","tempTopListElement","listOutdent","liParentLiElement","liParentAfterElement","liElements_2","isMatch_1","afterHTML_1","reverse","columnCnt","rowCnt","currentColumn","textArray","endsWith","tab","pText","raw","cooked","pTextList","tableHeaderMD","pInnerHTML","innerHTMLList","lastElement","theadHTML","tbodyElement","brElement","trElement","codePosition","isEmpty","taskItemElement","checked","afterHTML_2","beforeHTML_1","isAfter_1","taskItem","parentTagName","dataMarker","startAttribute","rangeElement","lastCellElement","textHTML","textPlain","renderLinkDest","doc","items","entering","WalkContinue","TokensStr","__internal_object__","Parent","Type","linkToImgUrl","xhr_1","linkToImgFormat","responseJSON_1","original_1","originalURL","linkToImgCallback","stringify","DOMParser","parseFromString","isCode","pres","processPasteCode","HTML2VditorIRDOM","processHint","matchLangData_1","key_1","removeInline","aTextElement","Hint","hintExtends","splitChar","fillEmoji","preElement","timeId","focusNode","currentLineValue","getKey","emojiHint_1","GetEmojis","matchEmojiData_1","delay","textareaPosition","hintsHTML","hintData","replaceHtml","replaceIndex","defaultView","getPropertyValue","currentHintElement","length_1","currentLastIndex","lastItem","preChar","IR","placeholder","bindEvent","linkElement","lastRect","getHTML","VditorDOM2HTML","VditorIRDOM2HTML","Outline","outlineLabel","Preview","classes","copyToX","actions","actionElement","actionHtml","action","btn","actionCustom","w","mdTimeoutId","renderStartTime","responseJSON","startTime","time","performanceTip","cmtFocusElement","copyElement","backgroundImage","Resize","documentSelf","clientY","ondragstart","captureEvents","onmousemove","moveEvent","paddingBottom","onselectstart","onselect","Editor","textScrollTop","textHeight","textScrollHeight","parseFloat","Tip","setPreviewMode","Both_extends","Both","Br","CodeTheme_extends","CodeTheme","ContentTheme_extends","ContentTheme","Counter","Custom_extends","Custom","Devtools_extends","Devtools","Divider","Emoji_extends","Emoji","commonEmojiHTML","emojiValue","tailHTML","emojiTail","download","downloadTip","Export_extends","Export","exportMarkdown","generate","iframe","contentDocument","write","contentWindow","postMessage","exportPDF","exportHTML","Fullscreen_extends","Fullscreen","zIndex","svgElement","fullscreen","Headings_extends","Headings","heading1","heading2","heading3","heading4","heading5","heading6","Help_extends","Help","Indent_extends","Indent","Info_extends","Info","Version","InsertAfter_extends","InsertAfter","InsertBefore_extends","InsertBefore","Outdent_extends","Outdent","Outline_extends","Outline_Outline","Preview_extends","Preview_Preview","toolbars","RecordMedia","SAMPLE_RATE","isRecording","readyFlag","leftChannel","rightChannel","recordingLength","AudioContext","webkitAudioContext","DEFAULT_SAMPLE_RATE","sampleRate","volume","createGain","createMediaStreamSource","connect","recorder","createScriptProcessor","onaudioprocess","destination","cloneChannelData","leftChannelData","rightChannelData","Float32Array","startRecordingNewWavFile","stopRecording","buildWavFileBlob","leftBuffer","mergeBuffers","rightBuffer","interleaved","downSampleBuffer","totalByteCount","buffer","ArrayBuffer","view","DataView","writeUTFBytes","setUint32","setUint16","subChunk2ByteCount","lng","setInt16","rate","sampleRateRatio","newLength","round","offsetResult","offsetBuffer","nextOffsetBuffer","accum","count","desiredChannelBuffer","set","setUint8","Record_extends","Record","mediaRecorder","File","recording","mediaDevices","getUserMedia","audio","mediaStream","inputBuffer","getChannelData","Redo_extends","Redo","Undo_extends","Undo","Upload_extends","Upload_Upload","inputHTML","Toolbar","genItem","panelElement_1","subI","menuItemObj","undo_Undo","stackSize","resetStack","clearStack","undoStack","redoStack","state","renderDiff","hasUndo","addCaret","lastText","diff","patchList","isRedo","redoPatchList","setFocus","Options","confused","eyes","heart","rocket","smile","tada","mergeToolbar","toolbarItem","toolbarResult","currentMenuItem","defaultMenuItem","WYSIWYG","commentIds","blockStartElement","blockEndElement","NewNodeID","rangeClone","contents","removeStart","removeEnd","wrap","startElement","endElement","comments_1","oldIds","removedIds","codeEndElement","aEndElement","aTitle","popoverTop1","popoverTop","scroll","topPx","checkElement","updateImg","alt","imageURL","elementEvent","altWrap","alternateText","titleWrap","genImagePopover","blockCodeElement","getRenderElementNextNode","nextRenderElement","src_extends","version","contentThemePath","getValue","getCurrentMode","disabled","renderPreview","clearCache","removeItem","disabledCache","enableCache","html2md","exportJSON","RenderJSON","deleteValue","isCollapsed","updateValue","insertValue","tmpElement","setValue","destroy","getCommentIds","hlCommentIds","hlItem","unHlCommentIds","unHlItem","removeCommentIds","removeIds","removeId","_lutePath","export","visualViewport","pendingUpdate_1","viewportHandler","requestAnimationFrame","layoutViewport","initUI","now","generalAdaptation","adapterTarget","dataset","vditorRender","sleep","ms","parseContent","old","mdContent","attrFragment","createDocumentFragment","addItem","attrDiv"],"mappings":"yBAAA,SAASA,KAgBT,SAASC,EAAIC,GACT,OAAOA,IAEX,SAASC,IACL,OAAOC,OAAOC,OAAO,MAEzB,SAASC,EAAQC,GACbA,EAAIC,QAAQP,GAEhB,SAASQ,EAAYC,GACjB,MAAwB,mBAAVA,EAElB,SAASC,EAAeC,EAAGC,GACvB,OAAOD,GAAKA,EAAIC,GAAKA,EAAID,IAAMC,GAAOD,GAAkB,iBAANA,GAAgC,mBAANA,EAsRhF,SAASE,EAAOC,EAAQC,GACpBD,EAAOE,YAAYD,GAoDvB,SAASE,EAAOH,EAAQC,EAAMG,GAC1BJ,EAAOK,aAAaJ,EAAMG,GAAU,MAUxC,SAASE,EAAOL,GACZA,EAAKM,WAAWC,YAAYP,GAQhC,SAASQ,EAAQC,GACb,OAAOC,SAASC,cAAcF,GAiBlC,SAASG,EAAYH,GACjB,OAAOC,SAASG,gBAAgB,6BAA8BJ,GAElE,SAASK,EAAKC,GACV,OAAOL,SAASM,eAAeD,GAwCnC,SAASE,EAAKjB,EAAMkB,EAAWC,GACd,MAATA,EACAnB,EAAKoB,gBAAgBF,GAChBlB,EAAKqB,aAAaH,KAAeC,GACtCnB,EAAKsB,aAAaJ,EAAWC,GAqMrC,SAASI,EAAUvB,EAAMwB,EAAKL,EAAOM,GACjCzB,EAAK0B,MAAMC,YAAYH,EAAKL,EAAOM,EAAY,YAAc,IA8IjE,SAASG,EAAoBC,GACzB,MAAMC,EAAS,GACf,IAAK,MAAMZ,KAAaW,EACpBC,EAAOZ,EAAUT,MAAQS,EAAUC,MAEvC,OAAOW,EA4IX,IAAIC,EACJ,SAASC,EAAsBC,GAC3BF,EAAoBE,EAwDxB,MAAMC,EAAmB,GAEnBC,EAAoB,GACpBC,EAAmB,GACnBC,EAAkB,GAClBC,EAAmBC,QAAQC,UACjC,IAAIC,GAAmB,EAWvB,SAASC,EAAoBxD,GACzBkD,EAAiBO,KAAKzD,GAK1B,IAAI0D,GAAW,EACf,MAAMC,EAAiB,IAAIC,IAC3B,SAASC,IACL,IAAIH,EAAJ,CAEAA,GAAW,EACX,EAAG,CAGC,IAAK,IAAII,EAAI,EAAGA,EAAId,EAAiBe,OAAQD,GAAK,EAAG,CACjD,MAAMf,EAAYC,EAAiBc,GACnChB,EAAsBC,GACtBiB,EAAOjB,EAAUkB,IAIrB,IAFAnB,EAAsB,MACtBE,EAAiBe,OAAS,EACnBd,EAAkBc,QACrBd,EAAkBiB,KAAlBjB,GAIJ,IAAK,IAAIa,EAAI,EAAGA,EAAIZ,EAAiBa,OAAQD,GAAK,EAAG,CACjD,MAAMK,EAAWjB,EAAiBY,GAC7BH,EAAeS,IAAID,KAEpBR,EAAeU,IAAIF,GACnBA,KAGRjB,EAAiBa,OAAS,QACrBf,EAAiBe,QAC1B,KAAOZ,EAAgBY,QACnBZ,EAAgBe,KAAhBf,GAEJI,GAAmB,EACnBG,GAAW,EACXC,EAAeW,SAEnB,SAASN,EAAOC,GACZ,GAAoB,OAAhBA,EAAGM,SAAmB,CACtBN,EAAGD,SACH5D,EAAQ6D,EAAGO,eACX,MAAMC,EAAQR,EAAGQ,MACjBR,EAAGQ,MAAQ,EAAE,GACbR,EAAGM,UAAYN,EAAGM,SAASG,EAAET,EAAGU,IAAKF,GACrCR,EAAGW,aAAatE,QAAQkD,IAiBhC,MAAMqB,EAAW,IAAIjB,IAyqBrB,SAASkB,EAAW/B,EAAWe,IACI,IAA3Bf,EAAUkB,GAAGQ,MAAM,KACnBzB,EAAiBS,KAAKV,GAxvBrBQ,IACDA,GAAmB,EACnBH,EAAiB2B,KAAKlB,IAwvBtBd,EAAUkB,GAAGQ,MAAMO,KAAK,IAE5BjC,EAAUkB,GAAGQ,MAAOX,EAAI,GAAM,IAAO,GAAMA,EAAI,GAEnD,SAASmB,EAAKlC,EAAWmC,EAASC,EAAUC,EAAiBC,EAAWC,EAAOC,EAAed,EAAQ,EAAE,IACpG,MAAMe,EAAmB3C,EACzBC,EAAsBC,GACtB,MAAMkB,EAAKlB,EAAUkB,GAAK,CACtBM,SAAU,KACVI,IAAK,KAELW,MAAAA,EACAtB,OAAQlE,EACRuF,UAAAA,EACAI,MAAOxF,IAEPyF,SAAU,GACVC,WAAY,GACZC,cAAe,GACfpB,cAAe,GACfI,aAAc,GACdiB,QAAS,IAAIC,IAAIN,EAAmBA,EAAiBvB,GAAG4B,QAAUX,EAAQW,SAAW,IAErFE,UAAW9F,IACXwE,MAAAA,EACAuB,YAAY,EACZC,KAAMf,EAAQrE,QAAU2E,EAAiBvB,GAAGgC,MAEhDV,GAAiBA,EAActB,EAAGgC,MAClC,IAAIC,GAAQ,EAkBZ,GAjBAjC,EAAGU,IAAMQ,EACHA,EAASpC,EAAWmC,EAAQI,OAAS,IAAI,CAACxB,EAAGqC,KAAQC,KACnD,MAAMnE,EAAQmE,EAAKrC,OAASqC,EAAK,GAAKD,EAOtC,OANIlC,EAAGU,KAAOU,EAAUpB,EAAGU,IAAIb,GAAIG,EAAGU,IAAIb,GAAK7B,MACtCgC,EAAG+B,YAAc/B,EAAGwB,MAAM3B,IAC3BG,EAAGwB,MAAM3B,GAAG7B,GACZiE,GACApB,EAAW/B,EAAWe,IAEvBqC,KAET,GACNlC,EAAGD,SACHkC,GAAQ,EACR9F,EAAQ6D,EAAGO,eAEXP,EAAGM,WAAWa,GAAkBA,EAAgBnB,EAAGU,KAC/CO,EAAQrE,OAAQ,CAChB,GAAIqE,EAAQmB,QAAS,CAEjB,MAAMC,EAvxClB,SAAkBhF,GACd,OAAOiF,MAAMC,KAAKlF,EAAQmF,YAsxCJC,CAASxB,EAAQrE,QAE/BoD,EAAGM,UAAYN,EAAGM,SAASoC,EAAEL,GAC7BA,EAAMhG,QAAQa,QAId8C,EAAGM,UAAYN,EAAGM,SAASqC,IAE3B1B,EAAQ2B,SAztBGC,EA0tBG/D,EAAUkB,GAAGM,WAztBtBuC,EAAMhD,IACfe,EAASkC,OAAOD,GAChBA,EAAMhD,EAAEkD,KAwnBhB,SAAyBjE,EAAWlC,EAAQI,EAAQgG,GAChD,MAAM1C,SAAEA,EAAQmB,SAAEA,EAAQC,WAAEA,EAAUf,aAAEA,GAAiB7B,EAAUkB,GACnEM,GAAYA,EAAS2C,EAAErG,EAAQI,GAC1BgG,GAEDzD,GAAoB,KAChB,MAAM2D,EAAiBzB,EAAS0B,IAAIrH,GAAKsH,OAAO9G,GAC5CoF,EACAA,EAAWlC,QAAQ0D,GAKnB/G,EAAQ+G,GAEZpE,EAAUkB,GAAGyB,SAAW,MAGhCd,EAAatE,QAAQkD,GA8EjB8D,CAAgBvE,EAAWmC,EAAQrE,OAAQqE,EAAQjE,OAAQiE,EAAQ+B,eAEnEpD,IA7tBR,IAAuBiD,EAAOE,EA+tB1BlE,EAAsB0C,GAE1B,IAAI+B,8GA74CO3F,EAAK,qhBC5YH+C,2BAAiBA,UAASA,6KAFvC3D,SACEJ,OACEA,OACEA,OACEA,cAONA,iCATW+D,yBAAiBA,UAASA,4EANvC6C,YACAC,mFD+xD2B,mBAAhBC,cACPH,EAAgB,cAAcG,YAC1BC,cACIC,QACAC,KAAKC,aAAa,CAAEC,KAAM,SAE9BC,oBACI,MAAMtC,SAAEA,GAAamC,KAAK5D,GAC1B4D,KAAK5D,GAAG2B,cAAgBF,EAAS0B,IAAIrH,GAAKsH,OAAO9G,GAEjD,IAAK,MAAM+B,KAAOuF,KAAK5D,GAAGgE,QAEtBJ,KAAK9G,YAAY8G,KAAK5D,GAAGgE,QAAQ3F,IAGzC4F,yBAAyBnG,EAAMoG,EAAWC,GACtCP,KAAK9F,GAAQqG,EAEjBC,uBACIjI,EAAQyH,KAAK5D,GAAG2B,eAEpB0C,YAxGR,SAA2BvF,EAAWwF,GAClC,MAAMtE,EAAKlB,EAAUkB,GACD,OAAhBA,EAAGM,WACHnE,EAAQ6D,EAAG0B,YACX1B,EAAGM,UAAYN,EAAGM,SAASiE,EAAED,GAG7BtE,EAAG0B,WAAa1B,EAAGM,SAAW,KAC9BN,EAAGU,IAAM,IAiGL8D,CAAkBZ,KAAM,GACxBA,KAAKS,SAAWxI,EAEpB4I,IAAIC,EAAMxE,GAEN,MAAM4B,EAAa8B,KAAK5D,GAAG8B,UAAU4C,KAAUd,KAAK5D,GAAG8B,UAAU4C,GAAQ,IAEzE,OADA5C,EAAUtC,KAAKU,GACR,KACH,MAAMyE,EAAQ7C,EAAU8C,QAAQ1E,IACjB,IAAXyE,GACA7C,EAAU+C,OAAOF,EAAO,IAGpCG,KAAKC,GA5xDb,IAAkBC,EA6xDFpB,KAAKqB,QA7xDHD,EA6xDsBD,EA5xDD,IAA5B9I,OAAOiJ,KAAKF,GAAKlF,UA6xDZ8D,KAAK5D,GAAG+B,YAAa,EACrB6B,KAAKqB,MAAMF,GACXnB,KAAK5D,GAAG+B,YAAa,miCEz0D9B,MAAMoD,EAAa,CACtBC,UAAUC,GACNC,QAAQC,IAAI,cAEhBjF,SAAU/C,4DCeXmD,qFAHKA,cHyYR,IAAgB7D,EAAM2I,EAAOC,EAASxE,EG5YtClE,oBH4YsByI,UAAOC,EGxYjBL,GHwYIvI,KACP6I,iBAAiBF,EAAOC,EAASxE,KAC/B,IAAMpE,EAAK8I,oBAAoBH,EAAOC,EAASxE,wBAuN1D,SAAkBtD,EAAMC,GACpBA,EAAO,GAAKA,EACRD,EAAKiI,YAAchI,IACnBD,EAAKC,KAAOA,MGlmBjB8C,sBAHKA,uCDVRmF,WAAuB,WAAIV,QCF3BC,MAAAU,IAAAX,EAAAC,aAAAU,6BAKAvC,YACAC,mFCVO,SAASuC,EAAeC,GAC3B,MAAMC,EAAOD,EAAIE,MAAM,KAAKjG,MACtBrD,EAASuI,EAAW7E,SAAS6F,cAAc,eAAeF,OAChE,GAAIrJ,EAAQ,CACRwJ,SAASH,KAAOA,EAChB,IAAII,EAAqB,CAAC,gBAAiB,2BAC3CzJ,EAAO0J,UAAUlG,OAAOiG,GACxBzJ,EAAOmJ,iBACPQ,YAAW,KACP3J,EAAO0J,UAAUE,UAAUH,KAC5B,UAGHf,QAAQmB,KAAK,QAASR,EAAM,8zBCYaS;;;;;;;;;;;;;;;;;;;;;;;;;;OAAAA,EASxC,WACT,MAAgB,MACN,IAAIC,GAER,IACEC,IA8BR,IAAIC,EAAmB,WAIrBjD,KAAKkD,aAAe,EAEpBlD,KAAKmD,cAAgB,EAErBnD,KAAKoD,gBAAkB,GAIvBpD,KAAKqD,eAAiB,IAKtBrD,KAAKsD,sBAAwB,GAE7BtD,KAAKuD,aAAe,EAEpBvD,KAAKwD,cAAgB,IAUnBC,GAAe,EAanBR,EAAiBS,KAAO,SAAUC,EAAI5J,GACpC,MAAO,CAAC4J,EAAI5J,IAiBdkJ,EAAiBW,UAAUC,UAAY,SAAUC,EAAOC,EAAOC,EAAgBC,QAElD,IAAhBA,IAEPA,EADEjE,KAAKkD,cAAgB,EACRgB,OAAOC,WAEP,IAAIC,MAAOC,UAAgC,IAApBrE,KAAKkD,cAI/C,IAAIoB,EAAWL,EAEf,GAAa,MAATH,GAA0B,MAATC,EACnB,MAAM,IAAIQ,MAAM,2BAIlB,GAAIT,GAASC,EACX,OAAID,EACK,CAAC,IAAIb,EAAiBS,KAhDlB,EAgDmCI,IAGzC,QAGoB,IAAlBE,IACTA,GAAiB,GAGnB,IAAIQ,EAAaR,EAEbS,EAAezE,KAAK0E,kBAAkBZ,EAAOC,GAC7CY,EAAeb,EAAMc,UAAU,EAAGH,GACtCX,EAAQA,EAAMc,UAAUH,GACxBV,EAAQA,EAAMa,UAAUH,GAExBA,EAAezE,KAAK6E,kBAAkBf,EAAOC,GAC7C,IAAIe,EAAehB,EAAMc,UAAUd,EAAM5H,OAASuI,GAClDX,EAAQA,EAAMc,UAAU,EAAGd,EAAM5H,OAASuI,GAC1CV,EAAQA,EAAMa,UAAU,EAAGb,EAAM7H,OAASuI,GAE1C,IAAIM,EAAQ/E,KAAKgF,cAAclB,EAAOC,EAAOS,EAAYF,GAWzD,OATIK,GACFI,EAAME,QAAQ,IAAIhC,EAAiBS,KAzEtB,EAyEuCiB,IAGlDG,GACFC,EAAMnJ,KAAK,IAAIqH,EAAiBS,KA7EnB,EA6EoCoB,IAGnD9E,KAAKkF,kBAAkBH,GAChBA,GAgBT9B,EAAiBW,UAAUoB,cAAgB,SAAUlB,EAAOC,EAAOS,EAAYF,GAC7E,IAAIS,EAEJ,IAAKjB,EAEH,MAAO,CAAC,IAAIb,EAAiBS,KAvGf,EAuGiCK,IAGjD,IAAKA,EAEH,MAAO,CAAC,IAAId,EAAiBS,KAAKD,EAAaK,IAGjD,IAAIqB,EAAWrB,EAAM5H,OAAS6H,EAAM7H,OAAS4H,EAAQC,EACjDqB,EAAYtB,EAAM5H,OAAS6H,EAAM7H,OAAS6H,EAAQD,EAClD7H,EAAIkJ,EAASnE,QAAQoE,GAEzB,IAAU,GAANnJ,EAQF,OANA8I,EAAQ,CAAC,IAAI9B,EAAiBS,KArHhB,EAqHkCyB,EAASP,UAAU,EAAG3I,IAAK,IAAIgH,EAAiBS,KApHnF,EAoHoG0B,GAAY,IAAInC,EAAiBS,KArHpI,EAqHsJyB,EAASP,UAAU3I,EAAImJ,EAAUlJ,UAEjM4H,EAAM5H,OAAS6H,EAAM7H,SACvB6I,EAAM,GAAG,GAAKA,EAAM,GAAG,GAAKtB,GAGvBsB,EAGT,GAAwB,GAApBK,EAAUlJ,OAGZ,MAAO,CAAC,IAAI+G,EAAiBS,KAAKD,EAAaK,GAAQ,IAAIb,EAAiBS,KAjI9D,EAiIgFK,IAIhG,IAAIsB,EAAKrF,KAAKsF,gBAAgBxB,EAAOC,GAErC,GAAIsB,EAAI,CAEN,IAAIE,EAAUF,EAAG,GACbG,EAAUH,EAAG,GACbI,EAAUJ,EAAG,GACbK,EAAUL,EAAG,GACbM,EAAaN,EAAG,GAEhBO,EAAU5F,KAAK6D,UAAU0B,EAASE,EAASjB,EAAYF,GACvDuB,EAAU7F,KAAK6D,UAAU2B,EAASE,EAASlB,EAAYF,GAE3D,OAAOsB,EAAQE,OAAO,CAAC,IAAI7C,EAAiBS,KAjJ/B,EAiJgDiC,IAAcE,GAG7E,OAAIrB,GAAcV,EAAM5H,OAAS,KAAO6H,EAAM7H,OAAS,IAC9C8D,KAAK+F,eAAejC,EAAOC,EAAOO,GAGpCtE,KAAKgG,aAAalC,EAAOC,EAAOO,IAczCrB,EAAiBW,UAAUmC,eAAiB,SAAUjC,EAAOC,EAAOO,GAElE,IAAIzL,EAAImH,KAAKiG,mBAAmBnC,EAAOC,GACvCD,EAAQjL,EAAEqN,OACVnC,EAAQlL,EAAEsN,OACV,IAAIC,EAAYvN,EAAEwN,UACdtB,EAAQ/E,KAAK6D,UAAUC,EAAOC,GAAO,EAAOO,GAEhDtE,KAAKsG,mBAAmBvB,EAAOqB,GAE/BpG,KAAKuG,qBAAqBxB,GAG1BA,EAAMnJ,KAAK,IAAIqH,EAAiBS,KAnLjB,EAmLkC,KAOjD,IANA,IAAI8C,EAAU,EACVC,EAAe,EACfC,EAAe,EACfC,EAAc,GACdC,EAAc,GAEXJ,EAAUzB,EAAM7I,QAAQ,CAC7B,OAAQ6I,EAAMyB,GAAS,IACrB,KA7LY,EA8LVE,IACAE,GAAe7B,EAAMyB,GAAS,GAC9B,MAEF,KAAK/C,EACHgD,IACAE,GAAe5B,EAAMyB,GAAS,GAC9B,MAEF,KAtMW,EAwMT,GAAIC,GAAgB,GAAKC,GAAgB,EAAG,CAE1C3B,EAAM9D,OAAOuF,EAAUC,EAAeC,EAAcD,EAAeC,GACnEF,EAAUA,EAAUC,EAAeC,EAGnC,IAFA,IAAIG,EAAU7G,KAAK6D,UAAU8C,EAAaC,GAAa,EAAOtC,GAErDwC,EAAID,EAAQ3K,OAAS,EAAG4K,GAAK,EAAGA,IACvC/B,EAAM9D,OAAOuF,EAAS,EAAGK,EAAQC,IAGnCN,GAAoBK,EAAQ3K,OAG9BwK,EAAe,EACfD,EAAe,EACfE,EAAc,GACdC,EAAc,GAIlBJ,IAKF,OAFAzB,EAAM1I,MAEC0I,GAcT9B,EAAiBW,UAAUoC,aAAe,SAAUlC,EAAOC,EAAOO,GAWhE,IATA,IAAIyC,EAAejD,EAAM5H,OACrB8K,EAAejD,EAAM7H,OACrB+K,EAAQC,KAAKC,MAAMJ,EAAeC,GAAgB,GAClDI,EAAWH,EACXI,EAAW,EAAIJ,EACfK,EAAK,IAAI5I,MAAM2I,GACfE,EAAK,IAAI7I,MAAM2I,GAGVG,EAAI,EAAGA,EAAIH,EAAUG,IAC5BF,EAAGE,IAAM,EACTD,EAAGC,IAAM,EAGXF,EAAGF,EAAW,GAAK,EACnBG,EAAGH,EAAW,GAAK,EAYnB,IAXA,IAAIK,EAAQV,EAAeC,EAGvBU,EAAQD,EAAQ,GAAK,EAGrBE,EAAU,EACVC,EAAQ,EACRC,EAAU,EACVC,EAAQ,EAEHnH,EAAI,EAAGA,EAAIsG,MAEd,IAAI7C,MAAOC,UAAYC,GAFF3D,IAAK,CAO9B,IAAK,IAAIoH,GAAMpH,EAAIgH,EAASI,GAAMpH,EAAIiH,EAAOG,GAAM,EAAG,CAYpD,IAXA,IAAIC,EAAYZ,EAAWW,EASvBE,GALFC,EADEH,IAAOpH,GAAKoH,GAAMpH,GAAK2G,EAAGU,EAAY,GAAKV,EAAGU,EAAY,GACvDV,EAAGU,EAAY,GAEfV,EAAGU,EAAY,GAAK,GAGbD,EAEPG,EAAKnB,GAAgBkB,EAAKjB,GAAgBlD,EAAMqE,OAAOD,IAAOnE,EAAMoE,OAAOF,IAChFC,IACAD,IAKF,GAFAX,EAAGU,GAAaE,EAEZA,EAAKnB,EAEPa,GAAS,OACJ,GAAIK,EAAKjB,EAEdW,GAAW,OACN,GAAID,IACLU,EAAYhB,EAAWK,EAAQM,IAElB,GAAKK,EAAYf,IAA8B,GAAlBE,EAAGa,IAI3CF,IAFAG,EAAKtB,EAAeQ,EAAGa,IAIzB,OAAOpI,KAAKsI,kBAAkBxE,EAAOC,EAAOmE,EAAID,EAAI3D,GAO5D,IAAK,IAAIiE,GAAM5H,EAAIkH,EAASU,GAAM5H,EAAImH,EAAOS,GAAM,EAAG,CAYpD,IAXA,IACIF,EADAD,EAAYhB,EAAWmB,EASvBC,GALFH,EADEE,IAAO5H,GAAK4H,GAAM5H,GAAK4G,EAAGa,EAAY,GAAKb,EAAGa,EAAY,GACvDb,EAAGa,EAAY,GAEfb,EAAGa,EAAY,GAAK,GAGbG,EAEPF,EAAKtB,GAAgByB,EAAKxB,GAAgBlD,EAAMqE,OAAOpB,EAAesB,EAAK,IAAMtE,EAAMoE,OAAOnB,EAAewB,EAAK,IACvHH,IACAG,IAKF,GAFAjB,EAAGa,GAAaC,EAEZA,EAAKtB,EAEPe,GAAS,OACJ,GAAIU,EAAKxB,EAEda,GAAW,OACN,IAAKH,EAAO,CAIf,IAAIQ,EADN,IAFIF,EAAYZ,EAAWK,EAAQc,IAElB,GAAKP,EAAYX,IAA8B,GAAlBC,EAAGU,KAE3CC,EAAKb,GADLc,EAAKZ,EAAGU,IACaA,EAIrBE,IAFJG,EAAKtB,EAAesB,IAIlB,OAAOrI,KAAKsI,kBAAkBxE,EAAOC,EAAOmE,EAAID,EAAI3D,KAS9D,MAAO,CAAC,IAAIrB,EAAiBS,KAAKD,EAAaK,GAAQ,IAAIb,EAAiBS,KA1W5D,EA0W8EK,KAehGd,EAAiBW,UAAU0E,kBAAoB,SAAUxE,EAAOC,EAAOyD,EAAGiB,EAAGnE,GAC3E,IAAIoE,EAAS5E,EAAMc,UAAU,EAAG4C,GAC5BmB,EAAS5E,EAAMa,UAAU,EAAG6D,GAC5BG,EAAS9E,EAAMc,UAAU4C,GACzBqB,EAAS9E,EAAMa,UAAU6D,GAEzB1D,EAAQ/E,KAAK6D,UAAU6E,EAAQC,GAAQ,EAAOrE,GAC9CwE,EAAS9I,KAAK6D,UAAU+E,EAAQC,GAAQ,EAAOvE,GACnD,OAAOS,EAAMe,OAAOgD,IAetB7F,EAAiBW,UAAUqC,mBAAqB,SAAUnC,EAAOC,GAC/D,IAAIsC,EAAY,GAEZ0C,EAAW,GAcf,SAASC,EAAwBjP,GAU/B,IATA,IAAIkP,EAAQ,GAIRC,EAAY,EACZC,GAAW,EAEXC,EAAkB/C,EAAUnK,OAEzBiN,EAAUpP,EAAKmC,OAAS,GAAG,EAGhB,IAFhBiN,EAAUpP,EAAKiH,QAAQ,KAAMkI,MAG3BC,EAAUpP,EAAKmC,OAAS,GAG1B,IAAImN,EAAOtP,EAAK6K,UAAUsE,EAAWC,EAAU,IAE3CJ,EAASO,eAAiBP,EAASO,eAAeD,QAA2BE,IAAnBR,EAASM,IACrEJ,GAASO,OAAOC,aAAaV,EAASM,KAElCD,GAAmBM,IAGrBL,EAAOtP,EAAK6K,UAAUsE,GACtBC,EAAUpP,EAAKmC,QAGjB+M,GAASO,OAAOC,aAAaL,GAC7BL,EAASM,GAAQD,EACjB/C,EAAU+C,KAAqBC,GAGjCH,EAAYC,EAAU,EAGxB,OAAOF,EA/CT5C,EAAU,GAAK,GAmDf,IAAIqD,EAAW,IACXxD,EAAS8C,EAAwBlF,GAGrC,OAFA4F,EAAW,MAEJ,CACLxD,OAAQA,EACRC,OAHW6C,EAAwBjF,GAInCsC,UAAWA,IAYfpD,EAAiBW,UAAU0C,mBAAqB,SAAUvB,EAAOsB,GAC/D,IAAK,IAAIpK,EAAI,EAAGA,EAAI8I,EAAM7I,OAAQD,IAAK,CAIrC,IAHA,IAAIgN,EAAQlE,EAAM9I,GAAG,GACjBlC,EAAO,GAEF+M,EAAI,EAAGA,EAAImC,EAAM/M,OAAQ4K,IAChC/M,EAAK+M,GAAKT,EAAU4C,EAAMU,WAAW7C,IAGvC/B,EAAM9I,GAAG,GAAKlC,EAAK6P,KAAK,MAY5B3G,EAAiBW,UAAUc,kBAAoB,SAAUZ,EAAOC,GAE9D,IAAKD,IAAUC,GAASD,EAAMqE,OAAO,IAAMpE,EAAMoE,OAAO,GACtD,OAAO,EAUT,IALA,IAAI0B,EAAa,EACbC,EAAa5C,KAAK6C,IAAIjG,EAAM5H,OAAQ6H,EAAM7H,QAC1C8N,EAAaF,EACbG,EAAe,EAEZJ,EAAaG,GACdlG,EAAMc,UAAUqF,EAAcD,IAAejG,EAAMa,UAAUqF,EAAcD,GAE7EC,EADAJ,EAAaG,EAGbF,EAAaE,EAGfA,EAAa9C,KAAKgD,OAAOJ,EAAaD,GAAc,EAAIA,GAG1D,OAAOG,GAUT/G,EAAiBW,UAAUiB,kBAAoB,SAAUf,EAAOC,GAE9D,IAAKD,IAAUC,GAASD,EAAMqE,OAAOrE,EAAM5H,OAAS,IAAM6H,EAAMoE,OAAOpE,EAAM7H,OAAS,GACpF,OAAO,EAUT,IALA,IAAI2N,EAAa,EACbC,EAAa5C,KAAK6C,IAAIjG,EAAM5H,OAAQ6H,EAAM7H,QAC1C8N,EAAaF,EACbK,EAAa,EAEVN,EAAaG,GACdlG,EAAMc,UAAUd,EAAM5H,OAAS8N,EAAYlG,EAAM5H,OAASiO,IAAepG,EAAMa,UAAUb,EAAM7H,OAAS8N,EAAYjG,EAAM7H,OAASiO,GAErIA,EADAN,EAAaG,EAGbF,EAAaE,EAGfA,EAAa9C,KAAKgD,OAAOJ,EAAaD,GAAc,EAAIA,GAG1D,OAAOG,GAYT/G,EAAiBW,UAAUwG,oBAAsB,SAAUtG,EAAOC,GAEhE,IAAIgD,EAAejD,EAAM5H,OACrB8K,EAAejD,EAAM7H,OAEzB,GAAoB,GAAhB6K,GAAqC,GAAhBC,EACvB,OAAO,EAILD,EAAeC,EACjBlD,EAAQA,EAAMc,UAAUmC,EAAeC,GAC9BD,EAAeC,IACxBjD,EAAQA,EAAMa,UAAU,EAAGmC,IAG7B,IAAIsD,EAAcnD,KAAK6C,IAAIhD,EAAcC,GAEzC,GAAIlD,GAASC,EACX,OAAOsG,EAST,IAHA,IAAIC,EAAO,EACPpO,EAAS,IAEA,CACX,IAAIqO,EAAUzG,EAAMc,UAAUyF,EAAcnO,GACxCsO,EAAQzG,EAAM/C,QAAQuJ,GAE1B,IAAc,GAAVC,EACF,OAAOF,EAGTpO,GAAUsO,EAEG,GAATA,GAAc1G,EAAMc,UAAUyF,EAAcnO,IAAW6H,EAAMa,UAAU,EAAG1I,KAC5EoO,EAAOpO,EACPA,OAiBN+G,EAAiBW,UAAU0B,gBAAkB,SAAUxB,EAAOC,GAC5D,GAAI/D,KAAKkD,cAAgB,EAEvB,OAAO,KAGT,IAAIiC,EAAWrB,EAAM5H,OAAS6H,EAAM7H,OAAS4H,EAAQC,EACjDqB,EAAYtB,EAAM5H,OAAS6H,EAAM7H,OAAS6H,EAAQD,EAEtD,GAAIqB,EAASjJ,OAAS,GAAwB,EAAnBkJ,EAAUlJ,OAAaiJ,EAASjJ,OACzD,OAAO,KAGT,IAAIuO,EAAMzK,KAeV,SAAS0K,EAAiBvF,EAAUC,EAAWnJ,GAO7C,IALA,IAGI0O,EAAiBC,EAAiBC,EAAkBC,EAHpDC,EAAO5F,EAASP,UAAU3I,EAAGA,EAAIiL,KAAKgD,MAAM/E,EAASjJ,OAAS,IAC9D4K,GAAK,EACLkE,EAAc,IAG8B,IAAxClE,EAAI1B,EAAUpE,QAAQ+J,EAAMjE,EAAI,KAAW,CACjD,IAAImE,EAAeR,EAAI/F,kBAAkBS,EAASP,UAAU3I,GAAImJ,EAAUR,UAAUkC,IAChFoE,EAAeT,EAAI5F,kBAAkBM,EAASP,UAAU,EAAG3I,GAAImJ,EAAUR,UAAU,EAAGkC,IAEtFkE,EAAY9O,OAASgP,EAAeD,IACtCD,EAAc5F,EAAUR,UAAUkC,EAAIoE,EAAcpE,GAAK1B,EAAUR,UAAUkC,EAAGA,EAAImE,GACpFN,EAAkBxF,EAASP,UAAU,EAAG3I,EAAIiP,GAC5CN,EAAkBzF,EAASP,UAAU3I,EAAIgP,GACzCJ,EAAmBzF,EAAUR,UAAU,EAAGkC,EAAIoE,GAC9CJ,EAAmB1F,EAAUR,UAAUkC,EAAImE,IAI/C,OAAyB,EAArBD,EAAY9O,QAAciJ,EAASjJ,OAC9B,CAACyO,EAAiBC,EAAiBC,EAAkBC,EAAkBE,GAEvE,KAKX,IAGI3F,EAcAE,EAASC,EAASC,EAASC,EAjB3ByF,EAAMT,EAAiBvF,EAAUC,EAAW8B,KAAKC,KAAKhC,EAASjJ,OAAS,IAExEkP,EAAMV,EAAiBvF,EAAUC,EAAW8B,KAAKC,KAAKhC,EAASjJ,OAAS,IAG5E,OAAKiP,GAAQC,GAQX/F,EANU+F,EAEAD,GAILA,EAAI,GAAGjP,OAASkP,EAAI,GAAGlP,OAASiP,EAHhCC,EAFAD,EAWHrH,EAAM5H,OAAS6H,EAAM7H,QACvBqJ,EAAUF,EAAG,GACbG,EAAUH,EAAG,GACbI,EAAUJ,EAAG,GACbK,EAAUL,EAAG,KAEbI,EAAUJ,EAAG,GACbK,EAAUL,EAAG,GACbE,EAAUF,EAAG,GACbG,EAAUH,EAAG,IAIR,CAACE,EAASC,EAASC,EAASC,EADlBL,EAAG,KAzBX,MAkCXpC,EAAiBW,UAAU2C,qBAAuB,SAAUxB,GAmB1D,IAlBA,IAAIsG,GAAU,EACVC,EAAa,GAEbC,EAAmB,EAInBC,EAAe,KAEfhF,EAAU,EAGViF,EAAqB,EACrBC,EAAoB,EAEpBC,EAAqB,EACrBC,EAAoB,EAEjBpF,EAAUzB,EAAM7I,QAnuBR,GAouBT6I,EAAMyB,GAAS,IAEjB8E,EAAWC,KAAsB/E,EACjCiF,EAAqBE,EACrBD,EAAoBE,EACpBD,EAAqB,EACrBC,EAAoB,EACpBJ,EAAezG,EAAMyB,GAAS,KA5uBlB,GA+uBRzB,EAAMyB,GAAS,GACjBmF,GAAsB5G,EAAMyB,GAAS,GAAGtK,OAExC0P,GAAqB7G,EAAMyB,GAAS,GAAGtK,OAKrCsP,GAAgBA,EAAatP,QAAUgL,KAAK2E,IAAIJ,EAAoBC,IAAsBF,EAAatP,QAAUgL,KAAK2E,IAAIF,EAAoBC,KAEhJ7G,EAAM9D,OAAOqK,EAAWC,EAAmB,GAAI,EAAG,IAAItI,EAAiBS,KAAKD,EAAa+H,IAEzFzG,EAAMuG,EAAWC,EAAmB,GAAK,GAAG,GA3vBlC,EA6vBVA,IAGA/E,IADA+E,EAC6B,EAAID,EAAWC,EAAmB,IAAM,EACrEE,EAAqB,EAErBC,EAAoB,EACpBC,EAAqB,EACrBC,EAAoB,EACpBJ,EAAe,KACfH,GAAU,IAId7E,IAiBF,IAbI6E,GACFrL,KAAKkF,kBAAkBH,GAGzB/E,KAAK8L,6BAA6B/G,GAOlCyB,EAAU,EAEHA,EAAUzB,EAAM7I,QAAQ,CAC7B,GAAI6I,EAAMyB,EAAU,GAAG,IAAM/C,GA7xBf,GA6xB8BsB,EAAMyB,GAAS,GAAmB,CAC5E,IAAIuF,EAAWhH,EAAMyB,EAAU,GAAG,GAC9BwF,EAAYjH,EAAMyB,GAAS,GAC3ByF,EAAkBjM,KAAKoK,oBAAoB2B,EAAUC,GACrDE,EAAkBlM,KAAKoK,oBAAoB4B,EAAWD,GAEtDE,GAAmBC,GACjBD,GAAmBF,EAAS7P,OAAS,GAAK+P,GAAmBD,EAAU9P,OAAS,KAElF6I,EAAM9D,OAAOuF,EAAS,EAAG,IAAIvD,EAAiBS,KAryBvC,EAqyBwDsI,EAAUpH,UAAU,EAAGqH,KACtFlH,EAAMyB,EAAU,GAAG,GAAKuF,EAASnH,UAAU,EAAGmH,EAAS7P,OAAS+P,GAChElH,EAAMyB,EAAU,GAAG,GAAKwF,EAAUpH,UAAUqH,GAC5CzF,MAGE0F,GAAmBH,EAAS7P,OAAS,GAAKgQ,GAAmBF,EAAU9P,OAAS,KAGlF6I,EAAM9D,OAAOuF,EAAS,EAAG,IAAIvD,EAAiBS,KA9yBvC,EA8yBwDqI,EAASnH,UAAU,EAAGsH,KACrFnH,EAAMyB,EAAU,GAAG,GAhzBX,EAizBRzB,EAAMyB,EAAU,GAAG,GAAKwF,EAAUpH,UAAU,EAAGoH,EAAU9P,OAASgQ,GAClEnH,EAAMyB,EAAU,GAAG,GAAK/C,EACxBsB,EAAMyB,EAAU,GAAG,GAAKuF,EAASnH,UAAUsH,GAC3C1F,KAIJA,IAGFA,MAWJvD,EAAiBW,UAAUkI,6BAA+B,SAAU/G,GAWlE,SAASoH,EAA2BC,EAAKC,GACvC,IAAKD,IAAQC,EAEX,OAAO,EAQT,IAAIC,EAAQF,EAAIjE,OAAOiE,EAAIlQ,OAAS,GAChCqQ,EAAQF,EAAIlE,OAAO,GACnBqE,EAAmBF,EAAMG,MAAMxJ,EAAiByJ,uBAChDC,EAAmBJ,EAAME,MAAMxJ,EAAiByJ,uBAChDE,EAAcJ,GAAoBF,EAAMG,MAAMxJ,EAAiB4J,kBAC/DC,EAAcH,GAAoBJ,EAAME,MAAMxJ,EAAiB4J,kBAC/DE,EAAaH,GAAeN,EAAMG,MAAMxJ,EAAiB+J,iBACzDC,EAAaH,GAAeP,EAAME,MAAMxJ,EAAiB+J,iBACzDE,EAAaH,GAAcX,EAAIK,MAAMxJ,EAAiBkK,oBACtDC,EAAaH,GAAcZ,EAAII,MAAMxJ,EAAiBoK,sBAE1D,OAAIH,GAAcE,EAET,EACEL,GAAcE,EAEhB,EACET,IAAqBI,GAAeE,EAEtC,EACEF,GAAeE,EAEjB,EACEN,GAAoBG,EAEtB,EAGF,EAKT,IAFA,IAAInG,EAAU,EAEPA,EAAUzB,EAAM7I,OAAS,GAAG,CACjC,GA73Ba,GA63BT6I,EAAMyB,EAAU,GAAG,IA73BV,GA63B8BzB,EAAMyB,EAAU,GAAG,GAAkB,CAE9E,IAAI8G,EAAYvI,EAAMyB,EAAU,GAAG,GAC/B+G,EAAOxI,EAAMyB,GAAS,GACtBgH,EAAYzI,EAAMyB,EAAU,GAAG,GAE/BiH,EAAezN,KAAK6E,kBAAkByI,EAAWC,GAErD,GAAIE,EAAc,CAChB,IAAIC,EAAeH,EAAK3I,UAAU2I,EAAKrR,OAASuR,GAChDH,EAAYA,EAAU1I,UAAU,EAAG0I,EAAUpR,OAASuR,GACtDF,EAAOG,EAAeH,EAAK3I,UAAU,EAAG2I,EAAKrR,OAASuR,GACtDD,EAAYE,EAAeF,EAS7B,IALA,IAAIG,EAAgBL,EAChBM,EAAWL,EACXM,EAAgBL,EAChBM,EAAY3B,EAA2BmB,EAAWC,GAAQpB,EAA2BoB,EAAMC,GAExFD,EAAKpF,OAAO,KAAOqF,EAAUrF,OAAO,IAAI,CAC7CmF,GAAaC,EAAKpF,OAAO,GACzBoF,EAAOA,EAAK3I,UAAU,GAAK4I,EAAUrF,OAAO,GAC5CqF,EAAYA,EAAU5I,UAAU,GAChC,IAAImJ,EAAQ5B,EAA2BmB,EAAWC,GAAQpB,EAA2BoB,EAAMC,GAEvFO,GAASD,IACXA,EAAYC,EACZJ,EAAgBL,EAChBM,EAAWL,EACXM,EAAgBL,GAIhBzI,EAAMyB,EAAU,GAAG,IAAMmH,IAEvBA,EACF5I,EAAMyB,EAAU,GAAG,GAAKmH,GAExB5I,EAAM9D,OAAOuF,EAAU,EAAG,GAC1BA,KAGFzB,EAAMyB,GAAS,GAAKoH,EAEhBC,EACF9I,EAAMyB,EAAU,GAAG,GAAKqH,GAExB9I,EAAM9D,OAAOuF,EAAU,EAAG,GAC1BA,MAKNA,MAKJvD,EAAiByJ,sBAAwB,eACzCzJ,EAAiB4J,iBAAmB,KACpC5J,EAAiB+J,gBAAkB,SACnC/J,EAAiBkK,mBAAqB,WACtClK,EAAiBoK,qBAAuB,cAMxCpK,EAAiBW,UAAUoK,uBAAyB,SAAUjJ,GAqB5D,IApBA,IAAIsG,GAAU,EACVC,EAAa,GAEbC,EAAmB,EAInBC,EAAe,KAEfhF,EAAU,EAGVyH,GAAU,EAEVC,GAAU,EAEVC,GAAW,EAEXC,GAAW,EAER5H,EAAUzB,EAAM7I,QAx9BR,GAy9BT6I,EAAMyB,GAAS,IAEbzB,EAAMyB,GAAS,GAAGtK,OAAS8D,KAAKmD,gBAAkBgL,GAAYC,IAEhE9C,EAAWC,KAAsB/E,EACjCyH,EAAUE,EACVD,EAAUE,EACV5C,EAAezG,EAAMyB,GAAS,KAG9B+E,EAAmB,EACnBC,EAAe,MAGjB2C,EAAWC,GAAW,IAGlBrJ,EAAMyB,GAAS,IAAM/C,EACvB2K,GAAW,EAEXD,GAAW,EAYT3C,IAAiByC,GAAWC,GAAWC,GAAYC,GAAY5C,EAAatP,OAAS8D,KAAKmD,cAAgB,GAAK8K,EAAUC,EAAUC,EAAWC,GAAY,KAE5JrJ,EAAM9D,OAAOqK,EAAWC,EAAmB,GAAI,EAAG,IAAItI,EAAiBS,KAAKD,EAAa+H,IAEzFzG,EAAMuG,EAAWC,EAAmB,GAAK,GAAG,GA9/BlC,EA+/BVA,IAEAC,EAAe,KAEXyC,GAAWC,GAEbC,EAAWC,GAAW,EACtB7C,EAAmB,IAInB/E,IAFA+E,EAE6B,EAAID,EAAWC,EAAmB,IAAM,EACrE4C,EAAWC,GAAW,GAGxB/C,GAAU,IAId7E,IAGE6E,GACFrL,KAAKkF,kBAAkBH,IAU3B9B,EAAiBW,UAAUsB,kBAAoB,SAAUH,GAEvDA,EAAMnJ,KAAK,IAAIqH,EAAiBS,KAjiCjB,EAiiCkC,KAQjD,IAPA,IAKIe,EALA+B,EAAU,EACVC,EAAe,EACfC,EAAe,EACfC,EAAc,GACdC,EAAc,GAGXJ,EAAUzB,EAAM7I,QACrB,OAAQ6I,EAAMyB,GAAS,IACrB,KA5iCY,EA6iCVE,IACAE,GAAe7B,EAAMyB,GAAS,GAC9BA,IACA,MAEF,KAAK/C,EACHgD,IACAE,GAAe5B,EAAMyB,GAAS,GAC9BA,IACA,MAEF,KAvjCW,EAyjCLC,EAAeC,EAAe,GACX,IAAjBD,GAAuC,IAAjBC,IAIH,KAFrBjC,EAAezE,KAAK0E,kBAAkBkC,EAAaD,MAG7CH,EAAUC,EAAeC,EAAe,GA/jCzC,GA+jC8C3B,EAAMyB,EAAUC,EAAeC,EAAe,GAAG,GAChG3B,EAAMyB,EAAUC,EAAeC,EAAe,GAAG,IAAME,EAAYhC,UAAU,EAAGH,IAEhFM,EAAM9D,OAAO,EAAG,EAAG,IAAIgC,EAAiBS,KAlkCvC,EAkkCwDkD,EAAYhC,UAAU,EAAGH,KAClF+B,KAGFI,EAAcA,EAAYhC,UAAUH,GACpCkC,EAAcA,EAAY/B,UAAUH,IAMjB,KAFrBA,EAAezE,KAAK6E,kBAAkB+B,EAAaD,MAGjD5B,EAAMyB,GAAS,GAAKI,EAAYhC,UAAUgC,EAAY1K,OAASuI,GAAgBM,EAAMyB,GAAS,GAC9FI,EAAcA,EAAYhC,UAAU,EAAGgC,EAAY1K,OAASuI,GAC5DkC,EAAcA,EAAY/B,UAAU,EAAG+B,EAAYzK,OAASuI,KAKhE+B,GAAWC,EAAeC,EAC1B3B,EAAM9D,OAAOuF,EAASC,EAAeC,GAEjCC,EAAYzK,SACd6I,EAAM9D,OAAOuF,EAAS,EAAG,IAAIvD,EAAiBS,KAAKD,EAAakD,IAChEH,KAGEI,EAAY1K,SACd6I,EAAM9D,OAAOuF,EAAS,EAAG,IAAIvD,EAAiBS,KA/lCxC,EA+lC0DkD,IAChEJ,KAGFA,KACqB,IAAZA,GAnmCF,GAmmCmBzB,EAAMyB,EAAU,GAAG,IAE7CzB,EAAMyB,EAAU,GAAG,IAAMzB,EAAMyB,GAAS,GACxCzB,EAAM9D,OAAOuF,EAAS,IAEtBA,IAGFE,EAAe,EACfD,EAAe,EACfE,EAAc,GACdC,EAAc,GAKe,KAA/B7B,EAAMA,EAAM7I,OAAS,GAAG,IAC1B6I,EAAM1I,MAMR,IAAIgP,GAAU,EAGd,IAFA7E,EAAU,EAEHA,EAAUzB,EAAM7I,OAAS,GA7nCjB,GA8nCT6I,EAAMyB,EAAU,GAAG,IA9nCV,GA8nC8BzB,EAAMyB,EAAU,GAAG,KAExDzB,EAAMyB,GAAS,GAAG5B,UAAUG,EAAMyB,GAAS,GAAGtK,OAAS6I,EAAMyB,EAAU,GAAG,GAAGtK,SAAW6I,EAAMyB,EAAU,GAAG,IAE7GzB,EAAMyB,GAAS,GAAKzB,EAAMyB,EAAU,GAAG,GAAKzB,EAAMyB,GAAS,GAAG5B,UAAU,EAAGG,EAAMyB,GAAS,GAAGtK,OAAS6I,EAAMyB,EAAU,GAAG,GAAGtK,QAC5H6I,EAAMyB,EAAU,GAAG,GAAKzB,EAAMyB,EAAU,GAAG,GAAKzB,EAAMyB,EAAU,GAAG,GACnEzB,EAAM9D,OAAOuF,EAAU,EAAG,GAC1B6E,GAAU,GACDtG,EAAMyB,GAAS,GAAG5B,UAAU,EAAGG,EAAMyB,EAAU,GAAG,GAAGtK,SAAW6I,EAAMyB,EAAU,GAAG,KAE5FzB,EAAMyB,EAAU,GAAG,IAAMzB,EAAMyB,EAAU,GAAG,GAC5CzB,EAAMyB,GAAS,GAAKzB,EAAMyB,GAAS,GAAG5B,UAAUG,EAAMyB,EAAU,GAAG,GAAGtK,QAAU6I,EAAMyB,EAAU,GAAG,GACnGzB,EAAM9D,OAAOuF,EAAU,EAAG,GAC1B6E,GAAU,IAId7E,IAIE6E,GACFrL,KAAKkF,kBAAkBH,IAa3B9B,EAAiBW,UAAUyK,YAAc,SAAUtJ,EAAOuJ,GACxD,IAII9G,EAJAtB,EAAS,EACTC,EAAS,EACToI,EAAc,EACdC,EAAc,EAGlB,IAAKhH,EAAI,EAAGA,EAAIzC,EAAM7I,SAzqCN,IA0qCV6I,EAAMyC,GAAG,KAEXtB,GAAUnB,EAAMyC,GAAG,GAAGtL,QAGpB6I,EAAMyC,GAAG,KAAO/D,IAElB0C,GAAUpB,EAAMyC,GAAG,GAAGtL,UAGpBgK,EAASoI,IAXe9G,IAgB5B+G,EAAcrI,EACdsI,EAAcrI,EAIhB,OAAIpB,EAAM7I,QAAUsL,GAAKzC,EAAMyC,GAAG,KAAO/D,EAChC+K,EAIFA,GAAeF,EAAMC,IAS9BtL,EAAiBW,UAAU6K,gBAAkB,SAAU1J,GAOrD,IANA,IAAI2J,EAAO,GACPC,EAAc,KACdC,EAAa,KACbC,EAAa,KACbC,EAAe,MAEVtH,EAAI,EAAGA,EAAIzC,EAAM7I,OAAQsL,IAAK,CACrC,IAAI7D,EAAKoB,EAAMyC,GAAG,GAIdzN,EAFOgL,EAAMyC,GAAG,GAEJuH,QAAQJ,EAAa,SAASI,QAAQH,EAAY,QAAQG,QAAQF,EAAY,QAAQE,QAAQD,EAAc,cAE5H,OAAQnL,GACN,KA3tCY,EA4tCV+K,EAAKlH,GAAK,oCAAsCzN,EAAO,SACvD,MAEF,KAAK0J,EACHiL,EAAKlH,GAAK,oCAAsCzN,EAAO,SACvD,MAEF,KAluCW,EAmuCT2U,EAAKlH,GAAK,SAAWzN,EAAO,WAKlC,OAAO2U,EAAK9E,KAAK,KASnB3G,EAAiBW,UAAUoL,WAAa,SAAUjK,GAGhD,IAFA,IAAIhL,EAAO,GAEFyN,EAAI,EAAGA,EAAIzC,EAAM7I,OAAQsL,IArvClB,IAsvCVzC,EAAMyC,GAAG,KACXzN,EAAKyN,GAAKzC,EAAMyC,GAAG,IAIvB,OAAOzN,EAAK6P,KAAK,KASnB3G,EAAiBW,UAAUqL,WAAa,SAAUlK,GAGhD,IAFA,IAAIhL,EAAO,GAEFyN,EAAI,EAAGA,EAAIzC,EAAM7I,OAAQsL,IAC5BzC,EAAMyC,GAAG,KAAO/D,IAClB1J,EAAKyN,GAAKzC,EAAMyC,GAAG,IAIvB,OAAOzN,EAAK6P,KAAK,KAUnB3G,EAAiBW,UAAUsL,iBAAmB,SAAUnK,GAKtD,IAJA,IAAIoK,EAAc,EACdC,EAAa,EACbC,EAAY,EAEP7H,EAAI,EAAGA,EAAIzC,EAAM7I,OAAQsL,IAAK,CACrC,IAAI7D,EAAKoB,EAAMyC,GAAG,GACdxN,EAAO+K,EAAMyC,GAAG,GAEpB,OAAQ7D,GACN,KAjyCY,EAkyCVyL,GAAcpV,EAAKkC,OACnB,MAEF,KAAKuH,EACH4L,GAAarV,EAAKkC,OAClB,MAEF,KAxyCW,EA0yCTiT,GAAejI,KAAK2E,IAAIuD,EAAYC,GACpCD,EAAa,EACbC,EAAY,GAMlB,OADAF,GAAejI,KAAK2E,IAAIuD,EAAYC,IAatCpM,EAAiBW,UAAU0L,aAAe,SAAUvK,GAGlD,IAFA,IAAIhL,EAAO,GAEFyN,EAAI,EAAGA,EAAIzC,EAAM7I,OAAQsL,IAChC,OAAQzC,EAAMyC,GAAG,IACf,KAp0CY,EAq0CVzN,EAAKyN,GAAK,IAAM+H,UAAUxK,EAAMyC,GAAG,IACnC,MAEF,KAAK/D,EACH1J,EAAKyN,GAAK,IAAMzC,EAAMyC,GAAG,GAAGtL,OAC5B,MAEF,KA30CW,EA40CTnC,EAAKyN,GAAK,IAAMzC,EAAMyC,GAAG,GAAGtL,OAKlC,OAAOnC,EAAK6P,KAAK,MAAMmF,QAAQ,OAAQ,MAYzC9L,EAAiBW,UAAU4L,eAAiB,SAAU1L,EAAO2D,GAQ3D,IAPA,IAAI1C,EAAQ,GACR0K,EAAc,EAEdjJ,EAAU,EAEVkJ,EAASjI,EAAMnF,MAAM,OAEhBkF,EAAI,EAAGA,EAAIkI,EAAOxT,OAAQsL,IAAK,CAGtC,IAAImI,EAAQD,EAAOlI,GAAG5C,UAAU,GAEhC,OAAQ8K,EAAOlI,GAAGW,OAAO,IACvB,IAAK,IACH,IACEpD,EAAM0K,KAAiB,IAAIxM,EAAiBS,KA92CpC,EA82CsDkM,UAAUD,IACxE,MAAOE,GAEP,MAAM,IAAItL,MAAM,qCAAuCoL,GAGzD,MAEF,IAAK,IAEL,IAAK,IACH,IAAIG,EAAIC,SAASJ,EAAO,IAExB,GAAIK,MAAMF,IAAMA,EAAI,EAClB,MAAM,IAAIvL,MAAM,qCAAuCoL,GAGzD,IAAI5V,EAAO+J,EAAMc,UAAU4B,EAASA,GAAWsJ,GAEpB,KAAvBJ,EAAOlI,GAAGW,OAAO,GACnBpD,EAAM0K,KAAiB,IAAIxM,EAAiBS,KAj4CrC,EAi4CsD3J,GAE7DgL,EAAM0K,KAAiB,IAAIxM,EAAiBS,KAAKD,EAAa1J,GAGhE,MAEF,QAGE,GAAI2V,EAAOlI,GACT,MAAM,IAAIjD,MAAM,6CAA+CmL,EAAOlI,KAM9E,GAAIhB,GAAW1C,EAAM5H,OACnB,MAAM,IAAIqI,MAAM,iBAAmBiC,EAAU,wCAA0C1C,EAAM5H,OAAS,MAGxG,OAAO6I,GAYT9B,EAAiBW,UAAUqM,WAAa,SAAUlW,EAAMwQ,EAAS+D,GAE/D,GAAY,MAARvU,GAA2B,MAAXwQ,GAA0B,MAAP+D,EACrC,MAAM,IAAI/J,MAAM,4BAKlB,OAFA+J,EAAMpH,KAAK2E,IAAI,EAAG3E,KAAK6C,IAAIuE,EAAKvU,EAAKmC,SAEjCnC,GAAQwQ,EAEH,EACGxQ,EAAKmC,OAGNnC,EAAK6K,UAAU0J,EAAKA,EAAM/D,EAAQrO,SAAWqO,EAE/C+D,EAGAtO,KAAKkQ,aAAanW,EAAMwQ,EAAS+D,IANhC,GAoBZrL,EAAiBW,UAAUsM,aAAe,SAAUnW,EAAMwQ,EAAS+D,GACjE,GAAI/D,EAAQrO,OAAS8D,KAAKwD,cACxB,MAAM,IAAIe,MAAM,sCAIlB,IAAI4L,EAAInQ,KAAKoQ,gBAAgB7F,GACzBE,EAAMzK,KAWV,SAASqQ,EAAkB5O,EAAG+F,GAC5B,IAAI8I,EAAW7O,EAAI8I,EAAQrO,OACvBqU,EAAYrJ,KAAKsJ,IAAIlC,EAAM9G,GAE/B,OAAKiD,EAAIpH,eAKFiN,EAAWC,EAAY9F,EAAIpH,eAHzBkN,EAAY,EAAMD,EAO7B,IAAIG,EAAkBzQ,KAAKoD,gBAEvBsN,EAAW3W,EAAKiH,QAAQuJ,EAAS+D,IAEpB,GAAboC,IACFD,EAAkBvJ,KAAK6C,IAAIsG,EAAkB,EAAGK,GAAWD,IAI1C,IAFjBC,EAAW3W,EAAK4W,YAAYpG,EAAS+D,EAAM/D,EAAQrO,WAGjDuU,EAAkBvJ,KAAK6C,IAAIsG,EAAkB,EAAGK,GAAWD,KAK/D,IAEIG,EAASC,EAFTC,EAAY,GAAKvG,EAAQrO,OAAS,EACtCwU,GAAY,EAKZ,IAHA,IACIK,EADAC,EAAUzG,EAAQrO,OAASnC,EAAKmC,OAG3ByE,EAAI,EAAGA,EAAI4J,EAAQrO,OAAQyE,IAAK,CAOvC,IAHAiQ,EAAU,EACVC,EAAUG,EAEHJ,EAAUC,GACXR,EAAkB1P,EAAG2N,EAAMuC,IAAYJ,EACzCG,EAAUC,EAEVG,EAAUH,EAGZA,EAAU3J,KAAKgD,OAAO8G,EAAUJ,GAAW,EAAIA,GAIjDI,EAAUH,EACV,IAAII,EAAQ/J,KAAK2E,IAAI,EAAGyC,EAAMuC,EAAU,GACpCK,EAAShK,KAAK6C,IAAIuE,EAAMuC,EAAS9W,EAAKmC,QAAUqO,EAAQrO,OACxDiV,EAAKzS,MAAMwS,EAAS,GACxBC,EAAGD,EAAS,IAAM,GAAKvQ,GAAK,EAE5B,IAAK,IAAImG,EAAIoK,EAAQpK,GAAKmK,EAAOnK,IAAK,CAGpC,IAAIsK,EAAYjB,EAAEpW,EAAKoO,OAAOrB,EAAI,IAUlC,GANEqK,EAAGrK,GAFK,IAANnG,GAEOwQ,EAAGrK,EAAI,IAAM,EAAI,GAAKsK,GAGtBD,EAAGrK,EAAI,IAAM,EAAI,GAAKsK,GAAcL,EAAQjK,EAAI,GAAKiK,EAAQjK,KAAO,EAAI,EAAKiK,EAAQjK,EAAI,GAGhGqK,EAAGrK,GAAKgK,EAAW,CACrB,IAAI/C,EAAQsC,EAAkB1P,EAAGmG,EAAI,GAGrC,GAAIiH,GAAS0C,EAAiB,CAK5B,GAHAA,EAAkB1C,KAClB2C,EAAW5J,EAAI,GAEAwH,GAKb,MAHA2C,EAAQ/J,KAAK2E,IAAI,EAAG,EAAIyC,EAAMoC,KAUtC,GAAIL,EAAkB1P,EAAI,EAAG2N,GAAOmC,EAClC,MAGFM,EAAUI,EAGZ,OAAOT,GAUTzN,EAAiBW,UAAUwM,gBAAkB,SAAU7F,GAGrD,IAFA,IAAI4F,EAAI,GAEClU,EAAI,EAAGA,EAAIsO,EAAQrO,OAAQD,IAClCkU,EAAE5F,EAAQpC,OAAOlM,IAAM,EAGzB,IAASA,EAAI,EAAGA,EAAIsO,EAAQrO,OAAQD,IAClCkU,EAAE5F,EAAQpC,OAAOlM,KAAO,GAAKsO,EAAQrO,OAASD,EAAI,EAGpD,OAAOkU,GAYTlN,EAAiBW,UAAUyN,kBAAoB,SAAUC,EAAOvX,GAC9D,GAAmB,GAAfA,EAAKmC,OAAT,CAIA,GAAqB,OAAjBoV,EAAMC,OACR,MAAMhN,MAAM,yBAOd,IAJA,IAAIgG,EAAUxQ,EAAK6K,UAAU0M,EAAMC,OAAQD,EAAMC,OAASD,EAAME,SAC5DC,EAAU,EAGP1X,EAAKiH,QAAQuJ,IAAYxQ,EAAK4W,YAAYpG,IAAYA,EAAQrO,OAAS8D,KAAKwD,cAAgBxD,KAAKuD,aAAevD,KAAKuD,cAC1HkO,GAAWzR,KAAKuD,aAChBgH,EAAUxQ,EAAK6K,UAAU0M,EAAMC,OAASE,EAASH,EAAMC,OAASD,EAAME,QAAUC,GAIlFA,GAAWzR,KAAKuD,aAEhB,IAAImO,EAAS3X,EAAK6K,UAAU0M,EAAMC,OAASE,EAASH,EAAMC,QAEtDG,GACFJ,EAAMvM,MAAME,QAAQ,IAAIhC,EAAiBS,KAjnD5B,EAinD6CgO,IAI5D,IAAIC,EAAS5X,EAAK6K,UAAU0M,EAAMC,OAASD,EAAME,QAASF,EAAMC,OAASD,EAAME,QAAUC,GAErFE,GACFL,EAAMvM,MAAMnJ,KAAK,IAAIqH,EAAiBS,KAxnDzB,EAwnD0CiO,IAIzDL,EAAMM,QAAUF,EAAOxV,OACvBoV,EAAMC,QAAUG,EAAOxV,OAEvBoV,EAAME,SAAWE,EAAOxV,OAASyV,EAAOzV,OACxCoV,EAAMO,SAAWH,EAAOxV,OAASyV,EAAOzV,SA0B1C+G,EAAiBW,UAAUkO,WAAa,SAAUjZ,EAAGkZ,EAAOC,GAC1D,IAAIlO,EAAOiB,EAEX,GAAgB,iBAALlM,GAAiC,iBAATkZ,QAAqC,IAATC,EAG7DlO,EAEAjL,GACAkM,EAAQ/E,KAAK6D,UAAUC,EAEvBiO,GAAO,IAEG7V,OAAS,IACjB8D,KAAKuG,qBAAqBxB,GAC1B/E,KAAKgO,uBAAuBjJ,SAEzB,GAAIlM,GAAiB,iBAALA,QAAiC,IAATkZ,QAAwC,IAATC,EAG5EjN,EAEAlM,EACAiL,EAAQ9D,KAAKgP,WAAWjK,QACnB,GAAgB,iBAALlM,GAAiBkZ,GAAyB,iBAATA,QAAqC,IAATC,EAE7ElO,EAEAjL,EACAkM,EAEAgN,MACK,CAAA,GAAgB,iBAALlZ,GAAiC,iBAATkZ,IAAqBC,GAAyB,iBAATA,EAU7E,MAAM,IAAIzN,MAAM,sCAPhBT,EAEAjL,EACAkM,EAEAiN,EAKF,GAAqB,IAAjBjN,EAAM7I,OACR,MAAO,GAiBT,IAdA,IAAI+V,EAAU,GACVX,EAAQ,IAAIrO,EAAiBiP,UAC7BC,EAAkB,EAElBC,EAAc,EAEdC,EAAc,EAKdC,EAAgBxO,EAChByO,EAAiBzO,EAEZ0D,EAAI,EAAGA,EAAIzC,EAAM7I,OAAQsL,IAAK,CACrC,IAAIgL,EAAYzN,EAAMyC,GAAG,GACrBiL,EAAY1N,EAAMyC,GAAG,GAQzB,OANK2K,GA7tDQ,IA6tDWK,IAEtBlB,EAAMM,OAASQ,EACfd,EAAMC,OAASc,GAGTG,GACN,KAruDY,EAsuDVlB,EAAMvM,MAAMoN,KAAqBpN,EAAMyC,GACvC8J,EAAMO,SAAWY,EAAUvW,OAC3BqW,EAAiBA,EAAe3N,UAAU,EAAGyN,GAAeI,EAAYF,EAAe3N,UAAUyN,GACjG,MAEF,KAAK5O,EACH6N,EAAME,SAAWiB,EAAUvW,OAC3BoV,EAAMvM,MAAMoN,KAAqBpN,EAAMyC,GACvC+K,EAAiBA,EAAe3N,UAAU,EAAGyN,GAAeE,EAAe3N,UAAUyN,EAAcI,EAAUvW,QAC7G,MAEF,KAhvDW,EAivDLuW,EAAUvW,QAAU,EAAI8D,KAAKuD,cAAgB4O,GAAmBpN,EAAM7I,QAAUsL,EAAI,GAEtF8J,EAAMvM,MAAMoN,KAAqBpN,EAAMyC,GACvC8J,EAAME,SAAWiB,EAAUvW,OAC3BoV,EAAMO,SAAWY,EAAUvW,QAClBuW,EAAUvW,QAAU,EAAI8D,KAAKuD,cAElC4O,IACFnS,KAAKqR,kBAAkBC,EAAOgB,GAC9BL,EAAQrW,KAAK0V,GACbA,EAAQ,IAAIrO,EAAiBiP,UAC7BC,EAAkB,EAKlBG,EAAgBC,EAChBH,EAAcC,GAnwDR,IA2wDVG,IACFJ,GAAeK,EAAUvW,QAGvBsW,IAAc/O,IAChB4O,GAAeI,EAAUvW,QAU7B,OALIiW,IACFnS,KAAKqR,kBAAkBC,EAAOgB,GAC9BL,EAAQrW,KAAK0V,IAGRW,GASThP,EAAiBW,UAAU8O,eAAiB,SAAUT,GAIpD,IAFA,IAAIU,EAAc,GAETnL,EAAI,EAAGA,EAAIyK,EAAQ/V,OAAQsL,IAAK,CACvC,IAAI8J,EAAQW,EAAQzK,GAChBoL,EAAY,IAAI3P,EAAiBiP,UACrCU,EAAU7N,MAAQ,GAElB,IAAK,IAAI0D,EAAI,EAAGA,EAAI6I,EAAMvM,MAAM7I,OAAQuM,IACtCmK,EAAU7N,MAAM0D,GAAK,IAAIxF,EAAiBS,KAAK4N,EAAMvM,MAAM0D,GAAG,GAAI6I,EAAMvM,MAAM0D,GAAG,IAGnFmK,EAAUhB,OAASN,EAAMM,OACzBgB,EAAUrB,OAASD,EAAMC,OACzBqB,EAAUpB,QAAUF,EAAME,QAC1BoB,EAAUf,QAAUP,EAAMO,QAC1Bc,EAAYnL,GAAKoL,EAGnB,OAAOD,GAYT1P,EAAiBW,UAAUiP,YAAc,SAAUZ,EAASlY,GAC1D,GAAsB,GAAlBkY,EAAQ/V,OACV,MAAO,CAACnC,EAAM,IAIhBkY,EAAUjS,KAAK0S,eAAeT,GAC9B,IAAIa,EAAc9S,KAAK+S,iBAAiBd,GACxClY,EAAO+Y,EAAc/Y,EAAO+Y,EAC5B9S,KAAKgT,eAAef,GAQpB,IAHA,IAAIxK,EAAQ,EACRwL,EAAU,GAELzL,EAAI,EAAGA,EAAIyK,EAAQ/V,OAAQsL,IAAK,CACvC,IAEI0L,EA6BEnP,EA/BFoP,EAAelB,EAAQzK,GAAG+J,OAAS9J,EACnC3D,EAAQ9D,KAAKgP,WAAWiD,EAAQzK,GAAGzC,OAEnCqO,GAAW,EAmBf,GAjBItP,EAAM5H,OAAS8D,KAAKwD,eAKJ,IAFlB0P,EAAYlT,KAAKiQ,WAAWlW,EAAM+J,EAAMc,UAAU,EAAG5E,KAAKwD,eAAgB2P,OAKxD,IAFhBC,EAAUpT,KAAKiQ,WAAWlW,EAAM+J,EAAMc,UAAUd,EAAM5H,OAAS8D,KAAKwD,eAAgB2P,EAAerP,EAAM5H,OAAS8D,KAAKwD,iBAElG0P,GAAaE,KAEhCF,GAAa,GAIjBA,EAAYlT,KAAKiQ,WAAWlW,EAAM+J,EAAOqP,IAGzB,GAAdD,EAEFD,EAAQzL,IAAK,EAEbC,GAASwK,EAAQzK,GAAGqK,QAAUI,EAAQzK,GAAGgK,aAazC,GAVAyB,EAAQzL,IAAK,EACbC,EAAQyL,EAAYC,EAShBrP,IALFC,GADc,GAAZqP,EACMrZ,EAAK6K,UAAUsO,EAAWA,EAAYpP,EAAM5H,QAE5CnC,EAAK6K,UAAUsO,EAAWE,EAAUpT,KAAKwD,gBAKjDzJ,EAAOA,EAAK6K,UAAU,EAAGsO,GAAalT,KAAKiP,WAAWgD,EAAQzK,GAAGzC,OAAShL,EAAK6K,UAAUsO,EAAYpP,EAAM5H,YACtG,CAGL,IAAI6I,EAAQ/E,KAAK6D,UAAUC,EAAOC,GAAO,GAEzC,GAAID,EAAM5H,OAAS8D,KAAKwD,eAAiBxD,KAAKkP,iBAAiBnK,GAASjB,EAAM5H,OAAS8D,KAAKsD,sBAE1F2P,EAAQzL,IAAK,MACR,CACLxH,KAAK8L,6BAA6B/G,GAIlC,IAHA,IACIsO,EADAC,EAAS,EAGJ7K,EAAI,EAAGA,EAAIwJ,EAAQzK,GAAGzC,MAAM7I,OAAQuM,IAAK,CAChD,IAAI8K,EAAMtB,EAAQzK,GAAGzC,MAAM0D,GA54DtB,IA84DD8K,EAAI,KACNF,EAASrT,KAAKqO,YAAYtJ,EAAOuO,IAh5D7B,IAm5DFC,EAAI,GAENxZ,EAAOA,EAAK6K,UAAU,EAAGsO,EAAYG,GAAUE,EAAI,GAAKxZ,EAAK6K,UAAUsO,EAAYG,GAC1EE,EAAI,KAAO9P,IAEpB1J,EAAOA,EAAK6K,UAAU,EAAGsO,EAAYG,GAAUtZ,EAAK6K,UAAUsO,EAAYlT,KAAKqO,YAAYtJ,EAAOuO,EAASC,EAAI,GAAGrX,UAGhHqX,EAAI,KAAO9P,IACb6P,GAAUC,EAAI,GAAGrX,WAU7B,MAAO,CADPnC,EAAOA,EAAK6K,UAAUkO,EAAY5W,OAAQnC,EAAKmC,OAAS4W,EAAY5W,QACtD+W,IAUhBhQ,EAAiBW,UAAUmP,iBAAmB,SAAUd,GAItD,IAHA,IAAIuB,EAAgBxT,KAAKuD,aACrBuP,EAAc,GAETtL,EAAI,EAAGA,GAAKgM,EAAehM,IAClCsL,GAAetJ,OAAOC,aAAajC,GAIrC,IAASA,EAAI,EAAGA,EAAIyK,EAAQ/V,OAAQsL,IAClCyK,EAAQzK,GAAGoK,QAAU4B,EACrBvB,EAAQzK,GAAG+J,QAAUiC,EAIvB,IAAIlC,EAAQW,EAAQ,GAChBlN,EAAQuM,EAAMvM,MAElB,GAAoB,GAAhBA,EAAM7I,QAj8DK,GAi8DU6I,EAAM,GAAG,GAEhCA,EAAME,QAAQ,IAAIhC,EAAiBS,KAn8DtB,EAm8DuCoP,IACpDxB,EAAMM,QAAU4B,EAEhBlC,EAAMC,QAAUiC,EAEhBlC,EAAME,SAAWgC,EACjBlC,EAAMO,SAAW2B,OACZ,GAAIA,EAAgBzO,EAAM,GAAG,GAAG7I,OAAQ,CAE7C,IAAIuX,EAAcD,EAAgBzO,EAAM,GAAG,GAAG7I,OAC9C6I,EAAM,GAAG,GAAK+N,EAAYlO,UAAUG,EAAM,GAAG,GAAG7I,QAAU6I,EAAM,GAAG,GACnEuM,EAAMM,QAAU6B,EAChBnC,EAAMC,QAAUkC,EAChBnC,EAAME,SAAWiC,EACjBnC,EAAMO,SAAW4B,EAoBnB,OAboB,IAFpB1O,GADAuM,EAAQW,EAAQA,EAAQ/V,OAAS,IACnB6I,OAEJ7I,QAx9DK,GAw9DU6I,EAAMA,EAAM7I,OAAS,GAAG,IAE/C6I,EAAMnJ,KAAK,IAAIqH,EAAiBS,KA19DnB,EA09DoCoP,IACjDxB,EAAME,SAAWgC,EACjBlC,EAAMO,SAAW2B,GACRA,EAAgBzO,EAAMA,EAAM7I,OAAS,GAAG,GAAGA,SAEhDuX,EAAcD,EAAgBzO,EAAMA,EAAM7I,OAAS,GAAG,GAAGA,OAC7D6I,EAAMA,EAAM7I,OAAS,GAAG,IAAM4W,EAAYlO,UAAU,EAAG6O,GACvDnC,EAAME,SAAWiC,EACjBnC,EAAMO,SAAW4B,GAGZX,GAUT7P,EAAiBW,UAAUoP,eAAiB,SAAUf,GAGpD,IAFA,IAAIyB,EAAa1T,KAAKwD,cAEbgE,EAAI,EAAGA,EAAIyK,EAAQ/V,OAAQsL,IAClC,KAAIyK,EAAQzK,GAAGgK,SAAWkC,GAA1B,CAIA,IAAIC,EAAW1B,EAAQzK,GAEvByK,EAAQhR,OAAOuG,IAAK,GAKpB,IAJA,IAAIoK,EAAS+B,EAAS/B,OAClBL,EAASoC,EAASpC,OAClBqC,EAAa,GAEgB,IAA1BD,EAAS5O,MAAM7I,QAAc,CAElC,IAAIoV,EAAQ,IAAIrO,EAAiBiP,UAC7B2B,GAAQ,EASZ,IARAvC,EAAMM,OAASA,EAASgC,EAAW1X,OACnCoV,EAAMC,OAASA,EAASqC,EAAW1X,OAEhB,KAAf0X,IACFtC,EAAME,QAAUF,EAAMO,QAAU+B,EAAW1X,OAC3CoV,EAAMvM,MAAMnJ,KAAK,IAAIqH,EAAiBS,KAvgE7B,EAugE8CkQ,KAGxB,IAA1BD,EAAS5O,MAAM7I,QAAgBoV,EAAME,QAAUkC,EAAa1T,KAAKuD,cAAc,CACpF,IAAIiP,EAAYmB,EAAS5O,MAAM,GAAG,GAC9B0N,EAAYkB,EAAS5O,MAAM,GAAG,GA7gExB,IA+gENyN,GAEFlB,EAAMO,SAAWY,EAAUvW,OAC3BqV,GAAUkB,EAAUvW,OACpBoV,EAAMvM,MAAMnJ,KAAK+X,EAAS5O,MAAM+O,SAChCD,GAAQ,GACCrB,IAAc/O,GAAqC,GAAtB6N,EAAMvM,MAAM7I,QAphE3C,GAohE0DoV,EAAMvM,MAAM,GAAG,IAAoB0N,EAAUvW,OAAS,EAAIwX,GAE3HpC,EAAME,SAAWiB,EAAUvW,OAC3B0V,GAAUa,EAAUvW,OACpB2X,GAAQ,EACRvC,EAAMvM,MAAMnJ,KAAK,IAAIqH,EAAiBS,KAAK8O,EAAWC,IACtDkB,EAAS5O,MAAM+O,UAGfrB,EAAYA,EAAU7N,UAAU,EAAG8O,EAAapC,EAAME,QAAUxR,KAAKuD,cACrE+N,EAAME,SAAWiB,EAAUvW,OAC3B0V,GAAUa,EAAUvW,OA/hEb,IAiiEHsW,GACFlB,EAAMO,SAAWY,EAAUvW,OAC3BqV,GAAUkB,EAAUvW,QAEpB2X,GAAQ,EAGVvC,EAAMvM,MAAMnJ,KAAK,IAAIqH,EAAiBS,KAAK8O,EAAWC,IAElDA,GAAakB,EAAS5O,MAAM,GAAG,GACjC4O,EAAS5O,MAAM+O,QAEfH,EAAS5O,MAAM,GAAG,GAAK4O,EAAS5O,MAAM,GAAG,GAAGH,UAAU6N,EAAUvW,SAOtE0X,GADAA,EAAa5T,KAAKiP,WAAWqC,EAAMvM,QACXH,UAAUgP,EAAW1X,OAAS8D,KAAKuD,cAE3D,IAAIwQ,EAAc/T,KAAKgP,WAAW2E,EAAS5O,OAAOH,UAAU,EAAG5E,KAAKuD,cAEhD,KAAhBwQ,IACFzC,EAAME,SAAWuC,EAAY7X,OAC7BoV,EAAMO,SAAWkC,EAAY7X,OAEF,IAAvBoV,EAAMvM,MAAM7I,QA5jEP,IA4jEuBoV,EAAMvM,MAAMuM,EAAMvM,MAAM7I,OAAS,GAAG,GAClEoV,EAAMvM,MAAMuM,EAAMvM,MAAM7I,OAAS,GAAG,IAAM6X,EAE1CzC,EAAMvM,MAAMnJ,KAAK,IAAIqH,EAAiBS,KA/jE/B,EA+jEgDqQ,KAItDF,GACH5B,EAAQhR,SAASuG,EAAG,EAAG8J,MAY/BrO,EAAiBW,UAAUoQ,aAAe,SAAU/B,GAGlD,IAFA,IAAIlY,EAAO,GAEFyN,EAAI,EAAGA,EAAIyK,EAAQ/V,OAAQsL,IAClCzN,EAAKyN,GAAKyK,EAAQzK,GAGpB,OAAOzN,EAAK6P,KAAK,KAUnB3G,EAAiBW,UAAUqQ,eAAiB,SAAUC,GACpD,IAAIjC,EAAU,GAEd,IAAKiC,EACH,OAAOjC,EAOT,IAJA,IAAIlY,EAAOma,EAAS5R,MAAM,MACtB6R,EAAc,EACdC,EAAc,uCAEXD,EAAcpa,EAAKmC,QAAQ,CAChC,IAAImD,EAAItF,EAAKoa,GAAa1H,MAAM2H,GAEhC,IAAK/U,EACH,MAAM,IAAIkF,MAAM,yBAA2BxK,EAAKoa,IAGlD,IAAI7C,EAAQ,IAAIrO,EAAiBiP,UA4BjC,IA3BAD,EAAQrW,KAAK0V,GACbA,EAAMM,OAAS7B,SAAS1Q,EAAE,GAAI,IAEjB,KAATA,EAAE,IACJiS,EAAMM,SACNN,EAAME,QAAU,GACC,KAARnS,EAAE,GACXiS,EAAME,QAAU,GAEhBF,EAAMM,SACNN,EAAME,QAAUzB,SAAS1Q,EAAE,GAAI,KAGjCiS,EAAMC,OAASxB,SAAS1Q,EAAE,GAAI,IAEjB,KAATA,EAAE,IACJiS,EAAMC,SACND,EAAMO,QAAU,GACC,KAARxS,EAAE,GACXiS,EAAMO,QAAU,GAEhBP,EAAMC,SACND,EAAMO,QAAU9B,SAAS1Q,EAAE,GAAI,KAGjC8U,IAEOA,EAAcpa,EAAKmC,QAAQ,CAChC,IAAImY,EAAOta,EAAKoa,GAAahM,OAAO,GAEpC,IACE,IAAIkB,EAAOuG,UAAU7V,EAAKoa,GAAavP,UAAU,IACjD,MAAOiL,GAEP,MAAM,IAAItL,MAAM,qCAAuC8E,GAGzD,GAAY,KAARgL,EAEF/C,EAAMvM,MAAMnJ,KAAK,IAAIqH,EAAiBS,KAAKD,EAAa4F,SACnD,GAAY,KAARgL,EAET/C,EAAMvM,MAAMnJ,KAAK,IAAIqH,EAAiBS,KA/pE5B,EA+pE8C2F,SACnD,GAAY,KAARgL,EAET/C,EAAMvM,MAAMnJ,KAAK,IAAIqH,EAAiBS,KAjqE7B,EAiqE8C2F,QAClD,CAAA,GAAY,KAARgL,EAET,MACK,GAAa,KAATA,EAGT,MAAM,IAAI9P,MAAM,uBAAyB8P,EAAO,SAAWhL,GAG7D8K,KAIJ,OAAOlC,IAQThP,EAAiBiP,UAAY,WAE3BlS,KAAK+E,MAAQ,GAGb/E,KAAK4R,OAAS,KAGd5R,KAAKuR,OAAS,KAGdvR,KAAKwR,QAAU,EAGfxR,KAAK6R,QAAU,IAUUjO,UAAU0Q,SAAW,WAsB9C,IArBA,IAmBI3Q,EADA5J,EAAO,CAAC,QAhBS,IAAjBiG,KAAKwR,QACGxR,KAAK4R,OAAS,KACC,GAAhB5R,KAAKwR,QACJxR,KAAK4R,OAAS,EAEd5R,KAAK4R,OAAS,EAAI,IAAM5R,KAAKwR,SAWV,MARV,IAAjBxR,KAAK6R,QACG7R,KAAKuR,OAAS,KACC,GAAhBvR,KAAK6R,QACJ7R,KAAKuR,OAAS,EAEdvR,KAAKuR,OAAS,EAAI,IAAMvR,KAAK6R,SAGO,SAGvCrK,EAAI,EAAGA,EAAIxH,KAAK+E,MAAM7I,OAAQsL,IAAK,CAC1C,OAAQxH,KAAK+E,MAAMyC,GAAG,IACpB,KAxuEY,EAyuEV7D,EAAK,IACL,MAEF,KAAKF,EACHE,EAAK,IACL,MAEF,KA/uEW,EAgvETA,EAAK,IAIT5J,EAAKyN,EAAI,GAAK7D,EAAK4L,UAAUvP,KAAK+E,MAAMyC,GAAG,IAAM,KAGnD,OAAOzN,EAAK6P,KAAK,IAAImF,QAAQ,OAAQ,MAIvC/L,EAAOuR,QAAUtR,EACjBD,EAAOuR,QAAQtR,iBAAmBA,EAClCD,EAAOuR,QAAQ9Q,YAAcA,EAC7BT,EAAOuR,QAAQC,YA/vEG,EAgwElBxR,EAAOuR,QAAQE,WA/vEE,GAmwEX,WAOA,KACEC,EAAyBC,EAAqBC,KAKtDA,EAAoBjU,EAAEgU,EAAqB,CACzCE,QAAW,QAIb,IAAIC,EAAYF,EAAoB,KAEhCG,EAAgBH,EAAoB,IAEpCI,EAAcJ,EAAoB,KAElCK,EAAaL,EAAoB,IAEjCM,EAAkBN,EAAoB,KAEtCO,EAAiBP,EAAoB,KAErCQ,EAAkBR,EAAoB,IAEtCS,EAAsB,SAAU5b,QAChB,IAAZA,IAAsBA,EAAUE,UACpC,IAAI2b,EAAU,SAAUC,GACpB,IAAIC,EAAY7b,SAASC,cAAc,OACvC4b,EAAU7V,IAAM4V,EAAGjb,aAAa,YAChCkb,EAAU1T,iBAAiB,QAAQ,WAC1ByT,EAAGjb,aAAa,UAAaib,EAAGjb,aAAa,UAC7Cib,EAAGjb,aAAa,UAAaib,EAAGjb,aAAa,WAC1Ckb,EAAUC,cAAgBD,EAAUE,cACpCF,EAAUE,aAAeF,EAAUC,cAC/B9b,SAAS4I,cAAc,iBAAiBoT,aAAeC,OAAOC,YAAc,KAChFL,EAAUC,cAAiBG,OAAOC,YAAc,KAChDN,EAAG5a,MAAMmb,OAAUF,OAAOC,YAAc,GAAM,MAGtDN,EAAG5V,IAAM6V,EAAU7V,OAEvB4V,EAAGlb,gBAAgB,aAEvB,KAAM,yBAA0Bub,QAM5B,OALAnc,EAAQsc,iBAAiB,OAAOtd,SAAQ,SAAUud,GAC1CA,EAAW1b,aAAa,aACxBgb,EAAQU,OAGT,EAEPJ,OAAOK,iCACPL,OAAOK,gCAAgCC,aACvCzc,EAAQsc,iBAAiB,OAAOtd,SAAQ,SAAUud,GAC9CJ,OAAOK,gCAAgCE,QAAQH,QAInDJ,OAAOK,gCAAkC,IAAIG,sBAAqB,SAAUC,GACxEA,EAAQ5d,SAAQ,SAAU6d,SACgB,IAA1BA,EAAOC,eACgB,IAA7BD,EAAOE,kBACPF,EAAOC,iBACND,EAAOtd,OAAOsB,aAAa,aAC9Bgb,EAAQgB,EAAOtd,cAI3BS,EAAQsc,iBAAiB,OAAOtd,SAAQ,SAAUud,GAC9CJ,OAAOK,gCAAgCE,QAAQH,QAMvDS,EAAa7B,EAAoB,KAEjC8B,EAAc9B,EAAoB,KAElC+B,EAAgB/B,EAAoB,KAEpCgC,EAAgBhC,EAAoB,KAEpCiC,EAAgBjC,EAAoB,KAEpCkC,EAAiBlC,EAAoB,KAErCmC,EAAYnC,EAAoB,KAEhCoC,EAAkBpC,EAAoB,KAEtCqC,EAAYrC,EAAoB,KAEhCsC,EAAatC,EAAoB,KAEjCuC,EAAQvC,EAAoB,KAsB5BwC,EAAUxC,EAAoB,KAE9ByC,EAAYzC,EAAoB,KAGhC0C,EAAe,SAAU7d,EAAS8d,GAElC,QADa,IAATA,IAAmBA,EAAO,SACC,oBAApBC,iBAAuE,oBAA7BC,yBAArD,CAGA,IAAIC,EAAU,wDACVC,EAAW,yDACXC,EAAYje,SAAS4I,cAAc,kBACvC,IAAKqV,EAAW,EACZA,EAAYje,SAASC,cAAc,QACzBie,UAAY,gBACtBle,SAASme,KAAKC,sBAAsB,YAAaH,GACjD,IAAII,EAAW,WACX,IACIC,EACAC,EAYJ,OAdaV,gBAAgBW,YAGtB1f,SAAQ,SAAU2f,GACjBA,EAAKb,OAASA,EAAKxI,QAAQ,IAAK,OAChCkJ,EAAeG,GAEfA,EAAKvD,UACLqD,EAAeE,MAGlBH,IACDA,EAAeC,GAEZD,QAE6B1O,IAApCiO,gBAAgBa,kBAChBb,gBAAgBa,gBAAkBL,GAEtC,IAAIM,EAAUN,IACdJ,EAAUW,QAAU,WAChB,GAA4B,kBAAxBX,EAAUC,UAA+B,CACzC,IAAIW,EAAY,IAAIf,yBAAyBG,EAAUtd,aAAa,cACpEke,EAAUC,MAAQH,EAClBE,EAAUE,MAAQ,WACdd,EAAUC,UAAY,gBACtBL,gBAAgBmB,SAChBf,EAAUgB,UAAYlB,GAE1BF,gBAAgBqB,MAAML,GACtBZ,EAAUC,UAAY,uCACtBD,EAAUgB,UAAYjB,OAGlBH,gBAAgBsB,WACZtB,gBAAgBuB,QAChBvB,gBAAgBwB,SAChBpB,EAAUgB,UAAYjB,IAGtBH,gBAAgByB,QAChBrB,EAAUgB,UAAYlB,KAIlC,EAAGL,EAAiC6B,IAAItD,OAAOuD,oBAEnDxf,SAASme,KAAKhW,iBAAiB,SAAS,WACK,KAArCsX,eAAe9E,WAAW+E,QAA6C,UAA5BzB,EAAUjd,MAAM2e,UAC3D1B,EAAUC,UAAY,gBACtBL,gBAAgBmB,SAChBf,EAAUjd,MAAM2e,QAAU,WAItC7f,EAAQqI,iBAAiB,WAAW,SAAUF,GAC1C,IAAI7H,EAAOqf,eAAe9E,WAAW+E,OAErC,GADA7B,gBAAgBmB,SACyB,KAArCS,eAAe9E,WAAW+E,OAA9B,CAOAzD,OAAOuD,kBAAoBC,eAAeG,WAAW,GAAGC,aACxD,IAAIC,EAAOL,eAAeG,WAAW,GAAGG,wBACxC9B,EAAUgB,UAAYlB,EACtBE,EAAUjd,MAAM2e,QAAU,QAC1B1B,EAAUjd,MAAMgf,IAAOF,EAAKE,IAAMF,EAAK3D,OAASnc,SAAS4I,cAAc,QAAQqX,UAAY,GAAM,KACjGhC,EAAUjd,MAAMkf,KAAQjY,EAAMkY,QAAU,EAAK,KAC7ClC,EAAUrd,aAAa,YAAaR,OAZA,UAA5B6d,EAAUjd,MAAM2e,UAChB1B,EAAUC,UAAY,gBACtBD,EAAUjd,MAAM2e,QAAU,aAetCS,EAAkD,SAAUC,EAASC,EAAYC,EAAGC,GAEpF,OAAO,IAAKD,IAAMA,EAAI1e,WAAU,SAAUC,EAAS2e,GAC/C,SAASC,EAAUjgB,GAAS,IAAMkgB,EAAKH,EAAUI,KAAKngB,IAAW,MAAOqH,GAAK2Y,EAAO3Y,IACpF,SAAS+Y,EAASpgB,GAAS,IAAMkgB,EAAKH,EAAiB,MAAE/f,IAAW,MAAOqH,GAAK2Y,EAAO3Y,IACvF,SAAS6Y,EAAKvf,GAJlB,IAAeX,EAIaW,EAAO0f,KAAOhf,EAAQV,EAAOX,QAJ1CA,EAIyDW,EAAOX,MAJhDA,aAAiB8f,EAAI9f,EAAQ,IAAI8f,GAAE,SAAUze,GAAWA,EAAQrB,OAIT8C,KAAKmd,EAAWG,GAClGF,GAAMH,EAAYA,EAAUO,MAAMV,EAASC,GAAc,KAAKM,YAGlEI,EAAsD,SAAUX,EAASlC,GACzE,IAAsG8C,EAAGnS,EAAGoS,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEP,KAAMa,EAAK,GAAIC,MAASD,EAAK,GAAIE,OAAUF,EAAK,IAAwB,mBAAXG,SAA0BT,EAAES,OAAOC,UAAY,WAAa,OAAOxb,OAAU8a,EACvJ,SAASM,EAAKtL,GAAK,OAAO,SAAU2L,GAAK,OACzC,SAAc9X,GACV,GAAIiX,EAAG,MAAM,IAAIc,UAAU,mCAC3B,KAAOX,OACH,GAAIH,EAAI,EAAGnS,IAAMoS,EAAY,EAARlX,EAAG,GAAS8E,EAAU,OAAI9E,EAAG,GAAK8E,EAAS,SAAOoS,EAAIpS,EAAU,SAAMoS,EAAEc,KAAKlT,GAAI,GAAKA,EAAE8R,SAAWM,EAAIA,EAAEc,KAAKlT,EAAG9E,EAAG,KAAK8W,KAAM,OAAOI,EAE3J,OADIpS,EAAI,EAAGoS,IAAGlX,EAAK,CAAS,EAARA,EAAG,GAAQkX,EAAEzgB,QACzBuJ,EAAG,IACP,KAAK,EAAG,KAAK,EAAGkX,EAAIlX,EAAI,MACxB,KAAK,EAAc,OAAXoX,EAAEC,QAAgB,CAAE5gB,MAAOuJ,EAAG,GAAI8W,MAAM,GAChD,KAAK,EAAGM,EAAEC,QAASvS,EAAI9E,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKoX,EAAEI,IAAI9e,MAAO0e,EAAEG,KAAK7e,MAAO,SACxC,QACI,MAAkBwe,GAAZA,EAAIE,EAAEG,MAAYhf,OAAS,GAAK2e,EAAEA,EAAE3e,OAAS,KAAkB,IAAVyH,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEoX,EAAI,EAAG,SACjG,GAAc,IAAVpX,EAAG,MAAckX,GAAMlX,EAAG,GAAKkX,EAAE,IAAMlX,EAAG,GAAKkX,EAAE,IAAM,CAAEE,EAAEC,MAAQrX,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYoX,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIlX,EAAI,MAC7D,GAAIkX,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIvf,KAAK+H,GAAK,MACvDkX,EAAE,IAAIE,EAAEI,IAAI9e,MAChB0e,EAAEG,KAAK7e,MAAO,SAEtBsH,EAAKmU,EAAK6D,KAAK3B,EAASe,GAC1B,MAAOtZ,GAAKkC,EAAK,CAAC,EAAGlC,GAAIgH,EAAI,UAAemS,EAAIC,EAAI,EACtD,GAAY,EAARlX,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEvJ,MAAOuJ,EAAG,GAAKA,EAAG,QAAK,EAAQ8W,MAAM,GArB9BH,CAAK,CAACxK,EAAG2L,OA4CzDG,EAAe,SAAUve,GACzB,IAAIwe,EAAgB,CAChBziB,OAAQ,EACR0iB,IAAK/E,EAA6B+D,EAAEiB,IACpCC,YAAa,GACbC,WAAa5e,GAAWA,EAAQ4e,WAAclF,EAA6B+D,EAAEiB,KAAO,qBACpFG,KAAMnF,EAAsC+D,EAAEqB,aAC9CC,KAAM,MACN7E,KAAM,QACN8E,SAAUtF,EAA0C+D,EAAEwB,iBACtDC,KAAMxF,EAAsC+D,EAAE0B,aAC9Ctc,KAAM,QACNuc,OAAQ,CACJC,QAAQ,GAEZC,MAAO5F,EAAuC+D,EAAE8B,eAEpD,OAAO,EAAGzF,EAAiB0F,GAAGhB,EAAexe,IAE7Cyf,EAAU,SAAUC,EAAQ1f,GAC5B,IAAI2f,EAAgBpB,EAAave,GACjC,OAAO,EAAG4Z,EAAyBgG,GAAGD,EAAclB,IAAM,4BAA6B,oBAAoB5e,MAAK,WAC5G,IAAIggB,GAAO,EAAG9F,EAAqB+F,GAAG,CAClCC,UAAWJ,EAAcX,SAASe,UAClCC,iBAAkBL,EAAcX,SAASgB,iBACzCC,UAAWN,EAAcf,UACzBsB,OAAQP,EAAchB,YACtBwB,YAAaR,EAAcX,SAASmB,YACpCC,UAAWT,EAAcX,SAASoB,UAClCC,cAAwC,IAAzBV,EAAc5jB,OAC7BukB,gBAAiBX,EAAcT,KAAKqB,YACpCC,cAAeb,EAAca,cAC7BC,SAAUd,EAAcX,SAASyB,SACjCC,WAAYf,EAAcX,SAAS0B,WACnCC,UAAWhB,EAAcX,SAAS2B,UAClCC,KAAMjB,EAAcX,SAAS4B,KAC7BC,iBAAkBlB,EAAcX,SAAS6B,iBACzCC,wBAAyBnB,EAAcX,SAAS8B,wBAChDC,SAAUpB,EAAcX,SAAS+B,SACjCC,IAAKrB,EAAcX,SAASgC,MAUhC,OARIhhB,MAAAA,OAAyC,EAASA,EAAQihB,YAC1DpB,EAAKqB,eAAe,CAChBD,UAAW,CACPE,QAASnhB,EAAQihB,aAI7BpB,EAAKuB,cAAa,GACXvB,EAAKsB,QAAQzB,OAGxB2B,EAAgB,SAAUC,EAAgBtC,EAAUhf,GAAW,OAAO0c,OAAU,OAAQ,OAAQ,GAAQ,WACxG,IAAIiD,EAAetO,EACnB,OAAOiM,EAAY3a,MAAM,SAAU4e,GAC/B,OAAQA,EAAG5D,OACP,KAAK,EAED,OADAgC,EAAgBpB,EAAave,GACtB,CAAC,EAAayf,EAAQT,EAAUW,IAC3C,KAAK,EAOD,GANAtO,EAAOkQ,EAAG3D,OACN+B,EAAc6B,YACdnQ,EAAOsO,EAAc6B,UAAUnQ,IAEnCiQ,EAAe/F,UAAYlK,EAC3BiQ,EAAejc,UAAUlG,IAAI,gBACxBwgB,EAAc8B,KASflJ,OAAOmJ,WAAa/B,EAAc8B,SATb,CACrB,IAAK,CAAC,QAAS,QAAS,QAAS,QAAS,QAAS,SAASE,SAAShC,EAAczF,MAC/E,MAAM,IAAIhT,MAAM,4EAGhB,EAAG0S,EAA6BgI,GAAGjC,EAAclB,IAAM,iBAAmBkB,EAAczF,KAAO,MAAO,oBAiD9G,OA3CA,EAAGP,EAAqCkI,GAAGlC,EAAcL,MAAMwC,QAASnC,EAAcL,MAAMyC,MAC/D,IAAzBpC,EAAc5jB,QACdulB,EAAejc,UAAUlG,IAAI,yBAEjC,EAAGyY,EAA2BoK,GAAGV,IACjC,EAAGvJ,EAAqCjF,GAAG6M,EAAcd,KAAMyC,EAAgB3B,EAAclB,MAC7F,EAAGrF,EAA2B6I,GAAGX,EAAgB,CAC7C7C,IAAKkB,EAAclB,IACnBS,KAAMS,EAAcT,QAExB,EAAG5F,EAAiC1a,GAAG0iB,EAAgB3B,EAAclB,IAAKkB,EAAc9c,OACxF,EAAGgV,EAAqCgF,GAAGyE,EAAgB3B,EAAclB,MACzE,EAAG3G,EAAmCsG,GAAGkD,EAAgB3B,EAAclB,MACvE,EAAG9G,EAA6BnY,GAAG8hB,EAAgB3B,EAAclB,IAAKkB,EAAc9c,OACpF,EAAG0W,EAAiCsD,GAAGyE,EAAgB3B,EAAclB,IAAKkB,EAAc9c,OACxF,EAAG4W,EAAmCyI,GAAGZ,EAAgB3B,EAAclB,MACvE,EAAGhH,EAAyB0K,GAAGb,EAAgB3B,EAAclB,MAC7D,EAAGpF,EAA6B+I,GAAGd,GAC/B3B,EAAcP,OAAOC,QACrBpF,EAAaqH,GAEY,IAAzB3B,EAAc5jB,SA5QL0H,EA6QIkc,EAAc5jB,OA5Q3CO,SAASoc,iBAAiB,kBAAkBtd,SAAQ,SAAUW,GAC7C,IAAT0H,GACA1H,EAAOsJ,UAAUlG,IAAI,uBAEzBpD,EAAOmf,QAAU,WACb,IAAImH,EAAKtmB,EAAOkB,aAAa,QAAQqlB,OAAO,GACxChG,EAAMhgB,SAASimB,eAAe,gBAAkBF,GAAIG,UACxDlmB,SAAS4I,cAAc,QAAQqX,UAAYD,MAGnD/D,OAAOkK,aAAe,WAClB,IAAIrmB,EAAUE,SAASimB,eAAe,gBAAkBG,mBAAmBnK,OAAOpT,SAASH,KAAKsd,OAAO,KACnGlmB,IACAE,SAAS4I,cAAc,QAAQqX,UAAYngB,EAAQomB,aAiQ3C7C,EAAcgD,OACdhD,EAAcgD,QAEdhD,EAAca,eACdxI,EAAoBsJ,GAEpB3B,EAAcZ,OACd,EAAGnF,EAAyBgG,GAAGD,EAAclB,IAAM,kBAAoBkB,EAAcZ,KAAO,MAAO,oBAEvGuC,EAAe7c,iBAAiB,SAAS,SAAUF,GAC/C,IAAIqe,GAAc,EAAG/I,EAAqCgJ,IAAIte,EAAM5I,OAAQ,QAC5E,GAAIinB,IAAe,EAAG/I,EAAsCiJ,IAAIF,EAAa,cAA7E,CACI,IAAIG,EAAiBzB,EAAepc,cAAc,IAAM0d,EAAY3lB,aAAa,mBAC7E8lB,GACAxK,OAAOyK,SAASzK,OAAO0K,QAASF,EAAeP,eAKpD,CAAC,GAlSL,IAAU/e,SAwSzByf,EAAgB3L,EAAoB,KAEpC4L,EAAe5L,EAAoB,KAkEV,MAAM6L,EA7CP,WACxB,SAASC,KA0CT,OAvCAA,EAAO3L,cAAgBA,EAEvB2L,EAAOC,aAAeJ,EAAgCK,EAEtDF,EAAOzL,WAAaA,EAA2BoK,EAE/CqB,EAAOvL,eAAiBA,EAAmCsG,EAE3DiF,EAAOtL,gBAAkBA,EAAqCjF,EAE9DuQ,EAAOjK,WAAaA,EAA2B6I,EAE/CoB,EAAO/J,cAAgBA,EAAiC1a,EAExDykB,EAAOxL,gBAAkBA,EAAqCgF,EAE9DwG,EAAO1L,YAAcA,EAA6BnY,EAElD6jB,EAAO5L,UAAYA,EAAyB0K,EAE5CkB,EAAO9J,cAAgBA,EAAiCsD,EAExDwG,EAAO5J,eAAiBA,EAAmCyI,EAE3DmB,EAAO7J,cAAgBA,EAAiCgK,EAExDH,EAAOhK,YAAcA,EAA6B+I,EAElDiB,EAAOpJ,aAAeA,EAEtBoJ,EAAOrL,oBAAsBA,EAE7BqL,EAAO5D,QAAUA,EAEjB4D,EAAOI,QAAUpC,EAEjBgC,EAAOF,aAAeA,EAA+Bf,EAErDiB,EAAO1J,gBAAkBA,EAAqCkI,EACvDwB,MAOL,KACEhM,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzC2K,EAAK,MACLxE,EAAK,QAE5B,IAAIiG,EAAkB,QAElBC,EAA2B,WAC3B,SAASA,KA0DT,OAxDAA,EAAUC,KAAO,IACjBD,EAAUE,YAAc,qBACxBF,EAAUG,aAAe,IACzBH,EAAUI,oBAAsB,wBAChCJ,EAAUK,cAAgB,CAAC,QAAS,WAAY,OAAQ,SAAU,SAAU,OAAQ,OAChF,eAAgB,UAAW,SAAU,QAAS,OAAQ,QAAS,OAAQ,cAAe,eACtF,gBAAiB,SAAU,SAAU,SACzCL,EAAUM,WAAa,CAAC,OAAQ,QAAS,WAAY,UAAW,SAAU,UAAW,KACjF,WAAY,UAAW,QAAS,WAAY,SAAU,SAAU,OAAQ,WAAY,QAAS,UAC7F,eAAgB,SAAU,SAAU,eAAgB,gBAAiB,SAAU,UAAW,WAC1F,eAAgB,MAAO,iBAAkB,oBAAqB,kBAAmB,UAAW,QAAS,OACrG,MAAO,KAAM,QAAS,cAC1BN,EAAUO,eAAiB,CAAC,UAAW,UAAW,UAAW,WAAY,MAAO,WAAY,YAAa,SACrG,KAAM,KAAM,OAEZ,aAAc,SAAU,OAAQ,IAAK,SAAU,MAAO,MAAO,eAAgB,OAAQ,KAAM,MAAO,OAClG,OAAQ,OAAQ,aAAc,SAAU,OAAQ,MAAO,WAAY,WAAY,QAAS,aAAc,MACtG,eAAgB,OAAQ,YAAa,SAAU,cAAe,IAAK,OAAQ,OAAQ,OAAQ,MAAO,QAClG,QAAS,MAAO,aAAc,QAAS,OACvC,MAAO,UAAW,OAAQ,MAAO,UAAW,SAAU,UAAW,QAAS,aAAc,OAAQ,SAChG,QAAS,aAAc,WAAY,QAAS,QAAS,eACzDP,EAAUjF,IAAM,4CAChBiF,EAAU1E,iBAAmB,CACzBc,WAAW,EACXC,kBAAkB,EAClBG,aAAa,EACbC,WAAW,EACXK,SAAU,GACVC,WAAY,GACZC,WAAW,EACXC,MAAM,EACNC,kBAAkB,EAClBC,yBAAyB,EACzBC,UAAU,EACVC,KAAK,GAET2C,EAAU7E,aAAe,CACrBO,QAAQ,EACR8E,YAAY,EACZ7mB,MAAO,UAEXqmB,EAAUxE,aAAe,CACrBiF,OAAQ,QACR7D,aAAa,EACb8D,OAAQ,IAEZV,EAAUpE,cAAgB,CACtBuC,QAAS,QACTwC,KAAM,CACF,aAAc,aACdC,KAAQ,OACRC,MAAS,QACTC,OAAU,UAEd1C,KAAM4B,EAAUjF,IAAM,2BAEnBiF,MAOL,KACEtM,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzC6K,EAAK,QAEP,IAAIuC,EAA0CnN,EAAoB,KAC9DoN,EAA+CpN,EAAoB,KACnEqN,EAA8CrN,EAAoB,IAIvFE,EAAY,SAAUrb,EAASqiB,QACf,IAAZriB,IAAsBA,EAAUE,eACxB,IAARmiB,IAAkBA,EAAMiG,EAA6DjH,EAAEiB,KAC3F,IAAImG,EAAcD,EAA4CE,iBAAiBC,YAAY3oB,GACvFyoB,EAAYhmB,OAAS,IACrB,EAAG8lB,EAA8D/E,GAAGnB,EAAM,oCAAqC,qBAAqB5e,MAAK,WACrIglB,EAAYzpB,SAAQ,SAAU2f,GACtBA,EAAKiK,cAAc3f,UAAU4f,SAAS,wBACtClK,EAAKiK,cAAc3f,UAAU4f,SAAS,2BAGE,SAAxClK,EAAK9d,aAAa,oBAGtBioB,MAAMC,UAAUpK,EAAM6J,EAA4CE,iBAAiBM,QAAQrK,GAAMiB,QACjGjB,EAAKzd,MAAM+nB,UAAY,OACvBtK,EAAK7d,aAAa,iBAAkB,iBAS9C,IACEma,EAAyBC,EAAqBC,KAGtDA,EAAoB+N,EAAEhO,GACDC,EAAoBjU,EAAEgU,EAAqB,CACzCiO,kBAAqB,MACrBC,qBAAwB,MACxBC,qBAAwB,MACxBC,mBAAsB,MACtBZ,iBAAoB,MACpBa,sBAAyB,MACzBC,uBAA0B,MAC1BC,sBAAyB,QAEhD,IAAIN,EAAoB,CACpBH,QAAS,SAAUU,GAAe,OAAOA,EAAYC,aACrDhB,YAAa,SAAU3oB,GAAW,OAAOA,EAAQsc,iBAAiB,oBAElE8M,EAAuB,CAEvBJ,QAAS,SAAUY,GAAM,OAAOA,EAAGD,aACnChB,YAAa,SAAU3oB,GAAW,OAAOA,EAAQsc,iBAAiB,uBAElE+M,EAAuB,CACvBL,QAAS,SAAUY,GAAM,OAAOA,EAAG/oB,aAAa,cAChD8nB,YAAa,SAAUiB,GAAM,OAAOA,EAAGtN,iBAAiB,uBAExDgN,EAAqB,CACrBN,QAAS,SAAUY,GAAM,OAAOA,EAAGC,WACnClB,YAAa,SAAUiB,GAAM,OAAOA,EAAGtN,iBAAiB,uBAExDoM,EAAmB,CACnBM,QAAS,SAAUY,GAAM,OAAOA,EAAGD,aACnChB,YAAa,SAAUiB,GAAM,OAAOA,EAAGtN,iBAAiB,mBAExDiN,EAAwB,CACxBP,QAAS,SAAUY,GAAM,OAAOA,EAAGD,aACnChB,YAAa,SAAUiB,GAAM,OAAOA,EAAGtN,iBAAiB,wBAExDkN,EAAyB,CACzBR,QAAS,SAAUY,GAAM,OAAOA,EAAGD,aACnChB,YAAa,SAAUiB,GAAM,OAAOA,EAAGtN,iBAAiB,yBAExDmN,EAAwB,CACxBT,QAAS,SAAUY,GAAM,OAAOA,EAAGD,aACnChB,YAAa,SAAUiB,GAAM,OAAOA,EAAGtN,iBAAiB,yBAMtD,KACErB,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzC9X,EAAK,QAEP,IAAIklB,EAA0CnN,EAAoB,KAC9DoN,EAA+CpN,EAAoB,KACnEqN,EAA8CrN,EAAoB,IAIvFI,EAAc,SAAUvb,EAASqiB,EAAKa,QACtB,IAAZljB,IAAsBA,EAAUE,eACxB,IAARmiB,IAAkBA,EAAMiG,EAA6DjH,EAAEiB,KAC3F,IAAIwH,EAAkBtB,EAA4Cc,mBAAmBX,YAAY3oB,GAC7F8pB,EAAgBrnB,OAAS,IACzB,EAAG8lB,EAA8D/E,GAAGnB,EAAM,kCAAmC,uBAAuB5e,MAAK,WACrIqmB,EAAgB9qB,SAAQ,SAAUgJ,GAC9B,IAAIA,EAAE4gB,cAAc3f,UAAU4f,SAAS,yBACnC7gB,EAAE4gB,cAAc3f,UAAU4f,SAAS,0BADvC,CAIA,IAAIvoB,EAAOkoB,EAA4Cc,mBAAmBN,QAAQhhB,GAAG4X,OACrF,GAAKtf,EAGL,IACI,GAAyC,SAArC0H,EAAEnH,aAAa,kBACf,OAEJ,IAAIkpB,EAASC,KAAKC,MAAM3pB,GACxB4pB,QAAQvmB,KAAKqE,EAAa,SAAVkb,EAAmB,YAASpT,GAAWqa,UAAUJ,GACjE/hB,EAAElH,aAAa,iBAAkB,QAErC,MAAOspB,GACHpiB,EAAEoW,UAAY,sBACdpW,EAAEmX,UAAY,6BAA+BiL,YAU3D,IACEnP,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzC0K,EAAK,QAEP,IAAIyE,EAAiDlP,EAAoB,KAE1FK,EAAa,SAAUxb,GACvBA,EAAQsc,iBAAiB,cAActd,SAAQ,SAAUgJ,EAAGV,GACxD,IAAIU,EAAE4gB,cAAc3f,UAAU4f,SAAS,yBACnC7gB,EAAE4gB,cAAc3f,UAAU4f,SAAS,6BAGnC7gB,EAAEiB,UAAU4f,SAAS,qBAAuB7gB,EAAEiB,UAAU4f,SAAS,uBACjE7gB,EAAEiB,UAAU4f,SAAS,qBAAuB7gB,EAAEiB,UAAU4f,SAAS,qBACjE7gB,EAAEiB,UAAU4f,SAAS,sBACrB7gB,EAAEiB,UAAU4f,SAAS,iBAAmB7gB,EAAEiB,UAAU4f,SAAS,sBAC7D7gB,EAAEiB,UAAU4f,SAAS,kBAGrB7gB,EAAE9G,MAAMopB,UAAU/iB,QAAQ,OAAS,GAInCvH,EAAQiJ,UAAU4f,SAAS,mBAAqBvhB,EAAQ,GAA5D,CAGA,IAAIijB,EAAWviB,EAAE6hB,UACjB,GAAI7hB,EAAEiB,UAAU4f,SAAS,oBAAqB,CAC1C,IAAI2B,EAActqB,SAASC,cAAc,QACzCqqB,EAAYrL,UAAYnX,EAAEmX,UAC1BqL,EAAYlO,iBAAiB,iBAAiBtd,SAAQ,SAAU2f,GAC5DA,EAAKxV,YAETohB,EAAWC,EAAYX,UAE3B,IAAIY,EAAavqB,SAASC,cAAc,OACxCsqB,EAAWrM,UAAY,cACvBqM,EAAWtL,UAAY,qBAAwBhD,OAAOmJ,WAAWoF,KAAO,sDAAwDvO,OAAOmJ,WAAWoF,KAA3H,wKACoBvO,OAAOmJ,WAAWqF,OAAS,oEACtE,IAAIC,EAAW1qB,SAASC,cAAc,YACtCyqB,EAASjqB,OAAQ,EAAG0pB,EAAkE3G,GAAG6G,GACzFE,EAAWnM,sBAAsB,aAAcsM,GAC/C5iB,EAAE6iB,OAAOJ,GACTziB,EAAE9G,MAAMopB,UAAanO,OAAO2O,YAAc,GAAM,WAOlD,KACE7P,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzCuF,EAAK,QAEP,IAAI6H,EAA0CnN,EAAoB,KAC9DoN,EAA+CpN,EAAoB,KACnEqN,EAA8CrN,EAAoB,IAIvFM,EAAkB,SAAUzb,EAASqiB,QACzB,IAARA,IAAkBA,EAAMiG,EAA6DjH,EAAEiB,KAC3F,IAAIyI,EAAoBvC,EAA4CgB,uBAAuBb,YAAY3oB,GACtE,IAA7B+qB,EAAkBtoB,SAGtB,EAAG8lB,EAA8D/E,GAAGnB,EAAM,yCAA0C,yBAAyB5e,MAAK,WAC9IsnB,EAAkB/rB,SAAQ,SAAU2f,GAChC,GAA4C,SAAxCA,EAAK9d,aAAa,kBAAtB,CAGA,IAAImqB,EAAeC,UAAUhB,MAAMzB,EAA4CgB,uBAAuBR,QAAQrK,IAC9GA,EAAKQ,UAAY,GACjB6L,EAAaE,QAAQvM,GACrBA,EAAK7d,aAAa,iBAAkB,iBAQ1C,KACEma,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzC8G,EAAK,QAEP,IAAIsG,EAA0CnN,EAAoB,KAC9DoN,EAA+CpN,EAAoB,KACnEqN,EAA8CrN,EAAoB,IAIvFO,EAAiB,SAAU1b,EAASqiB,QACxB,IAARA,IAAkBA,EAAMiG,EAA6DjH,EAAEiB,KAC3F,IAAI6I,EAAmB3C,EAA4Ce,sBAAsBZ,YAAY3oB,GACrE,IAA5BmrB,EAAiB1oB,SAGrB,EAAG8lB,EAA8D/E,GAAGnB,EAAM,2BAA4B,wBAAwB5e,MAAK,WAC/H0nB,EAAiBnsB,SAAQ,SAAUgJ,GAC/B,IAAIojB,EAAO5C,EAA4Ce,sBAAsBP,QAAQhhB,GACrF,IAAIA,EAAE4gB,cAAc3f,UAAU4f,SAAS,yBACnC7gB,EAAE4gB,cAAc3f,UAAU4f,SAAS,2BAGE,SAArC7gB,EAAEnH,aAAa,mBAAgD,KAAhBuqB,EAAKxL,OAAxD,CAGA,IACI,IAAIyL,EAAO,IAAIC,KAAK,CAAC,kBAAoBprB,SAASimB,eAAe,wBAAwBjgB,IAAIoP,QAAQ,SAAU,kBAAoB,OAAQ,CAAEjO,KAAM,2BAE/IkkB,GADMpP,OAAOqP,KAAOrP,OAAOsP,WACbC,gBAAgBL,GAC9BM,EAAS,IAAIC,OAAOL,GACxB,IAAIM,IAAI,CAAEF,OAAQA,IACbG,iBAAiBV,GAAM3nB,MAAK,SAAUnC,GACvC0G,EAAEmX,UAAY7d,EAAOyqB,aACtBC,OAAM,SAAU5B,GACfpiB,EAAEmX,UAAY,8BAAgCiL,EAC9CpiB,EAAEoW,UAAY,yBAGtB,MAAOpW,GACHC,QAAQmiB,MAAM,iBAAkBpiB,GAEpCA,EAAElH,aAAa,iBAAkB,iBAQvC,IACEma,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzCxE,EAAK,QAEP,IAAI4R,EAA0CnN,EAAoB,KAC9DoN,EAA+CpN,EAAoB,KACnE8Q,EAA8C9Q,EAAoB,KAIvFQ,EAAkB,SAAUuQ,EAAYlsB,EAASqiB,QACjC,IAAZriB,IAAsBA,EAAUE,eACxB,IAARmiB,IAAkBA,EAAMiG,EAA6DjH,EAAEiB,KAC3F,IAAIphB,EAAQgrB,EAAWhrB,MAClBonB,EAA6EjH,EAAEwG,WAAWtC,SAASrkB,KACpGA,EAAQ,UAEZ,IAAIirB,EAAkBjsB,SAASimB,eAAe,mBAC1CiG,EAAO/J,EAAM,gCAAkCnhB,EAAQ,OACvDirB,GAAmBA,EAAgBC,OAASA,GAC5CD,EAAgBhjB,UAEpB,EAAG8iB,EAA4D3mB,GAAG+c,EAAM,gCAAkCnhB,EAAQ,OAAQ,oBAChG,IAAtBgrB,EAAWjJ,QAIM,IADTjjB,EAAQsc,iBAAiB,cAC3B7Z,SAGV,EAAG8lB,EAA8D/E,GAAGnB,EAAM,0CAA2C,oBAAoB5e,MAAK,WAC1IzD,EAAQsc,iBAAiB,cAActd,SAAQ,SAAUwG,GAErD,IAAIA,EAAMojB,cAAc3f,UAAU4f,SAAS,4BACvCrjB,EAAMojB,cAAc3f,UAAU4f,SAAS,0BAGvCrjB,EAAMyD,UAAU4f,SAAS,qBAAuBrjB,EAAMyD,UAAU4f,SAAS,uBACzErjB,EAAMyD,UAAU4f,SAAS,qBAAuBrjB,EAAMyD,UAAU4f,SAAS,qBACzErjB,EAAMyD,UAAU4f,SAAS,sBACzBrjB,EAAMyD,UAAU4f,SAAS,iBAAmBrjB,EAAMyD,UAAU4f,SAAS,sBACrErjB,EAAMyD,UAAU4f,SAAS,oBAG7BpG,KAAK4J,iBAAiB7mB,GACjB0mB,EAAWnE,YAAhB,CAGAviB,EAAMyD,UAAUlG,IAAI,qBACpB,IAAIupB,EAAkB9mB,EAAMsD,cAAc,4BACrCwjB,KACDA,EAAkBpsB,SAASC,cAAc,QACzBie,UAAY,0BAC5B5Y,EAAM8Y,sBAAsB,YAAagO,IAE7C,IAAIC,EAAaC,iBAAiBhnB,GAAO+mB,WACrCE,GAAa,EACE,aAAfF,GAA4C,aAAfA,IAC7BE,GAAa,GAEjB,IAAIC,EAAiB,GACjBC,EAAWnnB,EAAMmkB,YAAY9gB,MAAM,eACvC8jB,EAAS/pB,MACT+pB,EAAS7mB,KAAI,SAAU8J,GACnB,IAAIgd,EAAa,GACbH,IACAH,EAAgB3C,YAAc/Z,GAAQ,KACtCgd,EAAa,kBAAqBN,EAAgBrM,wBAAwB5D,OAAS,OAEvFqQ,GAAkB,QAAUE,EAAa,cAE7CN,EAAgBprB,MAAM2e,QAAU,OAChC6M,EAAiB,yCAA6CA,EAAiB,UAC/ElnB,EAAMqnB,mBAAmB,YAAaH,YAQ5C,KACEzR,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzC2K,EAAK,QAEP,IAAIyC,EAA0CnN,EAAoB,KAC9D2R,EAA+C3R,EAAoB,KACnE4R,EAA8C5R,EAAoB,KAClE6R,EAAiD7R,EAAoB,KACrEqN,EAA8CrN,EAAoB,IAMvF6B,EAAa,SAAUhd,EAAS4D,GAChC,IAAIqpB,EAAezE,EAA4CW,kBAAkBR,YAAY3oB,GAC7F,GAA4B,IAAxBitB,EAAaxqB,OAAjB,CAGA,IAAIyqB,EAAiB,CACjB7K,IAAKiG,EAA6DjH,EAAEiB,IACpEQ,KAAM,CACFkF,OAAQ,QACR7D,aAAa,EACb8D,OAAQ,KAQhB,GALIrkB,GAAWA,EAAQkf,OACnBlf,EAAQkf,KACJlkB,OAAOuuB,OAAO,GAAID,EAAepK,KAAMlf,EAAQkf,OAG3B,WAD5Blf,EAAUhF,OAAOuuB,OAAO,GAAID,EAAgBtpB,IAChCkf,KAAKkF,QACb,EAAG+E,EAA4DznB,GAAG1B,EAAQye,IAAM,+BAAgC,qBAChH,EAAGyK,EAA8DtJ,GAAG5f,EAAQye,IAAM,8BAA+B,qBAAqB5e,MAAK,WACvIwpB,EAAajuB,SAAQ,SAAU0qB,GAC3B,IAAIA,EAAYd,cAAc3f,UAAU4f,SAAS,yBAC7Ca,EAAYd,cAAc3f,UAAU4f,SAAS,4BAG7Ca,EAAY7oB,aAAa,aAA7B,CAGA,IAAIiiB,GAAO,EAAGkK,EAAkEtJ,GAAG8E,EAA4CW,kBAAkBH,QAAQU,IACzJA,EAAY5oB,aAAa,YAAagiB,GACtC,IACI4G,EAAYvK,UAAYiO,MAAMC,eAAevK,EAAM,CAC/CwK,YAAqC,QAAxB5D,EAAY6D,QACzBC,OAAQ,SAGhB,MAAOxlB,GACH0hB,EAAYvK,UAAYnX,EAAEylB,QAC1B/D,EAAYtL,UAAY,oCAE5BsL,EAAYrhB,iBAAiB,QAAQ,SAAUF,GAC3CA,EAAMulB,kBACNvlB,EAAMwlB,iBACN,IAAIC,EAAoBzlB,EAAM0lB,cAAcC,QAAQ,kBACpD3lB,EAAM4lB,cAAcC,QAAQ,YAAaJ,EAAkBzO,WAC3DhX,EAAM4lB,cAAcC,QAAQ,aAAcJ,EAAkB/sB,aAAa,6BAKpF,GAA4B,YAAxB+C,EAAQkf,KAAKkF,OAAsB,CAanC7L,OAAO8R,UACR9R,OAAO8R,QAAU,CACbC,OAAQ,CACJC,MAAO,CAAEC,QAASxqB,EAAQye,IAAM,qBAEpCgM,QAAS,CACLC,SAAS,GAEbC,IAAK,CACDtG,OAAQrkB,EAAQkf,KAAKmF,WAKjC,EAAG6E,EAAkEtH,GAAG5hB,EAAQye,IAAM,mCAAoC,wBAC1H,IAAImM,EAAe,SAAU9E,EAAa5I,GACtC,IAAIgC,GAAO,EAAGkK,EAAkEtJ,GAAGgG,EAAYC,aAAa/J,OACxG6O,EAActS,OAAO8R,QAAQS,cAAchF,GAC/C+E,EAAY5O,QAAkC,QAAxB6J,EAAY6D,QAClCpR,OAAO8R,QAAQU,eAAe7L,EAAM2L,GAAahrB,MAAK,SAAUjE,GAC5DkqB,EAAYvK,UAAY,GACxBuK,EAAY5oB,aAAa,YAAagiB,GACtC4G,EAAYpqB,OAAOE,GACnB2c,OAAO8R,QAAQI,QAAQnuB,SAAS8C,QAChCmZ,OAAO8R,QAAQI,QAAQnuB,SAAS0uB,iBAChC,IAAIC,EAAmBrvB,EAAKsJ,cAAc,4BACtC+lB,GAA4D,KAAxCA,EAAiBlF,YAAY/J,SACjD8J,EAAYvK,UAAY0P,EAAiBlF,YAAY/J,OACrD8J,EAAYtL,UAAY,uBAExB0C,GACAA,QAIZ3E,OAAO8R,QAAQI,QAAQS,QAAQrrB,MAAK,WAiBhC,IAhBA,IAAIsrB,EAAS,GACTC,EAAU,SAAUxsB,GACpB,IAAIknB,EAAcuD,EAAazqB,GAC1BknB,EAAYd,cAAc3f,UAAU4f,SAAS,wBAC7Ca,EAAYd,cAAc3f,UAAU4f,SAAS,2BAC7Ca,EAAY7oB,aAAa,gBAAgB,EAAGmsB,EAAkEtJ,GAAGgG,EAAYC,aAAa/J,QAC3ImP,EAAO5sB,MAAK,SAAU2e,GACdte,IAAMyqB,EAAaxqB,OAAS,EAC5B+rB,EAAa9E,GAGb8E,EAAa9E,EAAa5I,OAKjCte,EAAI,EAAGA,EAAIyqB,EAAaxqB,OAAQD,IACrCwsB,EAAQxsB,IAjEG,SAAUzD,GACzB,GAAmB,IAAfA,EAAI0D,OAAR,CAGA,IAAIwsB,EAAO,EACPC,EAAOnwB,EAAIA,EAAI0D,OAAS,GACxBqe,EAAO,WACP,IAAIpiB,EAAKK,EAAIkwB,KACbvwB,IAAOwwB,EAAOxwB,IAAOA,EAAGoiB,IAE5BA,KAyDAqO,CAAaJ,UAQnB,KACE9T,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzC8K,EAAK,QAE5B,IAmDI/I,EAAc,SAAUjd,GACnBA,GAGLA,EAAQsc,iBAAiB,KAAKtd,SAAQ,SAAUowB,GAC5C,IAAIzmB,EAAMymB,EAASvuB,aAAa,QAC3B8H,IAGDA,EAAIqK,MAAM,+BA5DJ,SAAUhT,EAAS2I,GACjC3I,EAAQ6sB,mBAAmB,WAAY,mCAAwClkB,EAAM,cACrF3I,EAAQmJ,SA2DAkmB,CAAYD,EAAUzmB,GAEjBA,EAAIqK,MAAM,uBA3DT,SAAUhT,EAAS2I,GACjC3I,EAAQ6sB,mBAAmB,WAAY,mCAAwClkB,EAAM,cACrF3I,EAAQmJ,SA0DAmmB,CAAYF,EAAUzmB,GAxDf,SAAU3I,EAAS2I,GAClC,IAAI4mB,EAAe5mB,EAAIqK,MAAM,uHACzBwc,EAAa7mB,EAAIqK,MAAM,+CACvByc,EAAU9mB,EAAIqK,MAAM,qDACpB0c,EAAY/mB,EAAIqK,MAAM,wCACtB2c,EAAgBhnB,EAAIqK,MAAM,2DAC1B4c,EAAmBjnB,EAAIqK,MAAM,2CAC7B6c,EAAgBlnB,EAAIqK,MAAM,6CAC1B8c,EAAWnnB,EAAIqK,MAAM,wCACrBuc,GAA2C,KAA3BA,EAAa,GAAG9sB,QAChCzC,EAAQ6sB,mBAAmB,WAAY,8DAAoE0C,EAAa,IACnHA,EAAa,GAAK,UAAYA,EAAa,GAAK,IAAO,eAC5DvvB,EAAQmJ,UAEHqmB,GAAcA,EAAW,IAC9BxvB,EAAQ6sB,mBAAmB,WAAY,+DAAoE2C,EAAW,GAAK,eAC3HxvB,EAAQmJ,UAEHsmB,GAAWA,EAAQ,IACxBzvB,EAAQ6sB,mBAAmB,WAAY,kFAAuF4C,EAAQ,GAAK,eAC3IzvB,EAAQmJ,UAEHumB,GAAaA,EAAU,IAC5B1vB,EAAQ6sB,mBAAmB,WAAY,yDAA8D6C,EAAU,GAAK,8EACpH1vB,EAAQmJ,UAEHwmB,GAAiBA,EAAc,IACpC3vB,EAAQ6sB,mBAAmB,WAAY,wFAA6FkD,mBAAmBJ,EAAc,IAAM,eAC3K3vB,EAAQmJ,UAEHymB,GAAoBA,EAAiB,IAC1C5vB,EAAQ6sB,mBAAmB,WAAY,gFAAqF+C,EAAiB,GAAK,eAClJ5vB,EAAQmJ,UAEH0mB,GAAiBA,EAAc,IACpC7vB,EAAQ6sB,mBAAmB,WAAY,+EAAoFgD,EAAc,GAAK,eAC9I7vB,EAAQmJ,UAEH2mB,GAAYA,EAAS,KAC1B9vB,EAAQ6sB,mBAAmB,WAAY,4DAAiEiD,EAAS,GAAK,eACtH9vB,EAAQmJ,UAmBJ6mB,CAAaZ,EAAUzmB,SAQ7B,KACEsS,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzC1Y,EAAK,QAEP,IAAI8lB,EAA0CnN,EAAoB,KAC9DoN,EAA+CpN,EAAoB,KACnEqN,EAA8CrN,EAAoB,IAIvF+B,EAAgB,SAAUld,EAASqiB,EAAKa,QAC5B,IAARb,IAAkBA,EAAMiG,EAA6DjH,EAAEiB,KAC3F,IAAI2N,EAAkBzH,EAA4CY,qBAAqBT,YAAY3oB,GACpE,IAA3BiwB,EAAgBxtB,SAGpB,EAAG8lB,EAA8D/E,GAAGnB,EAAM,kCAAmC,uBAAuB5e,MAAK,WACrI,IAAIysB,EAAS,CACTC,cAAe,aACflF,UAAW,CACPmF,YAAY,EACZC,aAAa,GAEjBC,WAAY,aACZC,MAAO,CACHC,YAAa,GACbC,aAAc,IAElBC,cAAe,QACfC,SAAU,CACNC,UAAW,EACXC,eAAgB,EAChBC,eAAgB,EAChBT,aAAa,GAEjBU,aAAa,GAEH,SAAV7N,IACAgN,EAAOhN,MAAQ,OACfgN,EAAOc,eAAiB,CACpBC,mBAAoB,0CACpBC,sBAAuB,UACvBC,mBAAoB,UACpBC,sBAAuB,UACvBC,SAAU,UACVC,YAAa,UACbC,eAAgB,YAChBC,eAAgB,YAChBC,cAAe,kBACfC,mBAAoB,OACpBC,eAAgB,YAChBC,WAAY,OACZC,QAAS,UACTC,QAAS,4BACTC,UAAW,UACXC,WAAY,0CACZC,cAAe,4BACfC,aAAc,UACdC,gBAAiB,UACjBC,cAAe,qDACfC,iBAAkB,YAClBC,iBAAkB,YAClBC,oBAAqB,OACrBC,oBAAqB,6BACrBC,cAAe,UACfC,eAAgB,OAChBC,UAAW,UACXC,UAAW,0CACXC,UAAW,0CACXC,UAAW,0CACXC,UAAW,0CACXC,UAAW,0CACXC,UAAW,0CACXC,UAAW,0CACX5C,WAAY,iCACZ6C,SAAU,OACVC,UAAW,YACXC,gBAAiB,UACjBC,iBAAkB,UAClBC,oBAAqB,UACrBC,WAAY,OACZC,eAAgB,YAChBC,UAAW,YACXC,cAAe,YACfC,QAAS,UACTC,kBAAmB,YACnBC,QAAS,UACTC,WAAY,UACZC,aAAc,UACdC,gBAAiB,4BACjBC,cAAe,UACfC,mBAAoB,8BACpBC,aAAc,UACdC,iBAAkB,UAClBC,UAAW,0CACXC,qBAAsB,+BACtBC,eAAgB,0CAChBC,mBAAoB,sDACpBC,gBAAiB,mDACjBC,iBAAkB,UAClBC,oBAAqB,QACrBC,YAAa,YACbC,gBAAiB,YACjBC,aAAc,0CACdC,gBAAiB,UACjBC,uBAAwB,UACxBC,cAAe,qDACfC,kBAAmB,qDACnBC,mBAAoB,YACpBC,qBAAsB,YACtBC,oBAAqB,6BACrBC,cAAe,yCACfC,kBAAmB,sDACnBC,UAAW,OACXC,WAAY,UACZC,eAAgB,YAGxBC,QAAQC,WAAW3F,GACnBD,EAAgBjxB,SAAQ,SAAU2f,GAC9B,IAAIyM,EAAO5C,EAA4CY,qBAAqBJ,QAAQrK,GACxC,SAAxCA,EAAK9d,aAAa,mBAAgD,KAAhBuqB,EAAKxL,SAG3DgW,QAAQjyB,UAAKmM,EAAW6O,GACxBA,EAAK7d,aAAa,iBAAkB,iBAQ1C,KACEma,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzCuF,EAAK,QAEP,IAAI6H,EAA0CnN,EAAoB,KAC9DoN,EAA+CpN,EAAoB,KACnEqN,EAA8CrN,EAAoB,IAIvFgC,EAAgB,SAAUnd,EAASqiB,EAAKa,QACxB,IAAZljB,IAAsBA,EAAUE,eACxB,IAARmiB,IAAkBA,EAAMiG,EAA6DjH,EAAEiB,KAC3F,IAAIwT,EAAkBtN,EAA4Ca,qBAAqBV,YAAY3oB,GAC/F81B,EAAgBrzB,OAAS,IACzB,EAAG8lB,EAA8D/E,GAAGnB,EAAM,kCAAmC,uBAAuB5e,MAAK,WACrIqyB,EAAgB92B,SAAQ,SAAUgJ,GAC9B,IAAIA,EAAE4gB,cAAc3f,UAAU4f,SAAS,yBACnC7gB,EAAE4gB,cAAc3f,UAAU4f,SAAS,0BADvC,CAIA,IAAIvoB,EAAOkoB,EAA4Ca,qBAAqBL,QAAQhhB,GACpF,GAAK1H,EAGL,IACI,GAAyC,SAArC0H,EAAEnH,aAAa,kBACf,OAEJqpB,QAAQvmB,KAAKqE,EAAa,SAAVkb,EAAmB,YAASpT,GAAWqa,UAAU,CAC7D4L,OAAQ,CACJ,CACIx1B,KAAM,CAACypB,KAAKC,MAAM3D,mBAAmBhmB,KACrC01B,kBAAmB,EACnBC,UAAW,CACPC,YAAa,EACbC,MAAO,WAEX5U,MAAO,CACH6U,gBAAiB,UACjBC,YAAa,UACbC,aAAc,EACdJ,YAAa,GACbC,MAAO,UACPvJ,WAAY,GACZ2J,OAAQ,EAAE,EAAG,GACbve,QAAS,CAAC,EAAG,GACbwe,SAAU,eAEdC,UAAW,CACPN,MAAO,UACPO,MAAO,GAEXC,MAAM,EACNC,OAAQ,SAAUj2B,EAAOk2B,GACrB,IAAI1R,EACJ,OAA2E,QAAtEA,EAAK0R,MAAAA,OAAuC,EAASA,EAAOt2B,YAAyB,IAAP4kB,OAAgB,EAASA,EAAG/f,UACpG,SAGA,WAGfiC,KAAM,SAGdyvB,QAAS,CACLC,QAAS,OACTC,UAAW,eAGnBhvB,EAAElH,aAAa,iBAAkB,QAErC,MAAOspB,GACHpiB,EAAEoW,UAAY,sBACdpW,EAAEmX,UAAY,6BAA+BiL,YAU3D,KACEnP,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzCkM,EAAK,QAEP,IAAI6P,EAA0D9b,EAAoB,KAC9E+b,EAA2C/b,EAAoB,KAGpFiC,EAAgB,SAAU+Z,EAAgBC,EAAeC,GACzD,IAAIC,EAAU,GACVC,EAAM,GAWV,GAVAtyB,MAAMC,KAAKiyB,EAAe/xB,UAAUpG,SAAQ,SAAU2f,EAAMrX,GACxD,IAAI,EAAG2vB,EAAoFO,GAAG7Y,GAAO,CACjG,GAAI0Y,EAAQ,CACR,IAAII,EAAY9Y,EAAKsH,GAAG/O,YAAY,KACpCyH,EAAKsH,GAAKtH,EAAKsH,GAAG9a,UAAU,GAAkB,IAAfssB,OAAmB3nB,EAAY2nB,GAAa,IAAMnwB,EAErFiwB,EAAIp1B,KAAKwc,EAAKsH,IACdqR,GAAW3Y,EAAKoN,UAAUzW,QAAQ,QAAS,QAGnC,KAAZgiB,EAEA,OADAF,EAAcjY,UAAY,GACnB,GAEX,IAAIuY,EAAcx3B,SAASC,cAAc,OACzC,GAAIk3B,EACAA,EAAO5T,KAAKkU,QAAO,GACQ,YAAvBN,EAAOO,aAA8BP,EAAOhQ,QAAQrnB,QAAQ6oB,SAASsO,GAGzC,OAAvBE,EAAOO,aAAyBP,EAAOhQ,QAAQrnB,QAAQ6oB,SAASsO,GAIrEO,EAAYvY,UAAYkY,EAAO5T,KAAKoU,eAAe,eAAiBP,GAHpEI,EAAYvY,UAAYkY,EAAO5T,KAAKqU,gBAAgB,eAAiBR,GAHrEI,EAAYvY,UAAYkY,EAAO5T,KAAKsU,cAAc,eAAiBT,GAQvED,EAAO5T,KAAKkU,OAAON,EAAOzzB,QAAQyjB,QAAQzE,SAASgC,SAElD,CACDwS,EAAcnuB,UAAUlG,IAAI,kBAC5B,IAAI0gB,EAAOuU,KAAKC,MAChBxU,EAAKkU,QAAO,GACZD,EAAYvY,UAAYsE,EAAKoU,eAAe,eAAiBP,GAEjE,IAAIY,EAAkBR,EAAYS,kBAAkB7b,iBAAiB,6BAWrE,OAVA4b,EAAgBl5B,SAAQ,SAAU2f,EAAMrX,GAChCqX,EAAKyZ,oBAA0D,OAApCzZ,EAAKyZ,mBAAmB7K,QACnD5O,EAAKQ,UAAY,6FAA+FR,EAAKQ,UAAY,UAGjIR,EAAKQ,UAAY,oBAAsBR,EAAKQ,UAAY,UAE5DR,EAAK7d,aAAa,iBAAkBy2B,EAAIjwB,OAE5CgwB,EAAUI,EAAYS,kBAAkBhZ,UACT,IAA3B+Y,EAAgBz1B,QAChB20B,EAAcjY,UAAY,GACnBmY,IAEXF,EAAcjY,UAAYmY,EACtBD,IACA,EAAGH,EAA2DrR,GAAGuR,EAAe,CAC5E/U,IAAKgV,EAAOzzB,QAAQye,IACpBS,KAAMuU,EAAOzzB,QAAQyjB,QAAQvE,OAGrCsU,EAAce,kBAAkB9vB,iBAAiB,SAAS,SAAUF,GAEhE,IADA,IAAI5I,EAAS4I,EAAM5I,OACZA,IAAWA,EAAO84B,YAAYjB,IAAgB,CACjD,GAAI73B,EAAO0J,UAAU4f,SAAS,0BAA2B,CACjDtpB,EAAO0J,UAAU4f,SAAS,kCAC1BtpB,EAAO0J,UAAUE,OAAO,iCACxB5J,EAAOqpB,cAAcwP,mBAAmBt3B,aAAa,QAAS,mBAG9DvB,EAAO0J,UAAUlG,IAAI,iCACrBxD,EAAOqpB,cAAcwP,mBAAmBt3B,aAAa,QAAS,iBAElEqH,EAAMwlB,iBACNxlB,EAAMulB,kBACN,MAEC,GAAInuB,EAAOsB,aAAa,kBAAmB,CAC5CsH,EAAMwlB,iBACNxlB,EAAMulB,kBACN,IAAI4K,EAAYp4B,SAASimB,eAAe5mB,EAAOsB,aAAa,mBAC5D,IAAKy3B,EACD,OAEJ,GAAIjB,EACA,GAA8B,SAA1BA,EAAOzzB,QAAQyY,OAAmB,CAClC,IAAIkc,EAAgBD,EAAUlS,UAAYiR,EAAOr3B,QAAQomB,UACpDiR,EAAOzzB,QAAQ40B,cAAcC,MAC9BF,GAAiBlB,EAAOqB,QAAQ14B,QAAQ24B,cAE5Cxc,OAAOyK,SAASzK,OAAO0K,QAAS0R,QAG5BlB,EAAOr3B,QAAQomB,UAAYjK,OAAOyc,SAClCzc,OAAOyK,SAASzK,OAAO0K,QAASwQ,EAAOr3B,QAAQomB,WAE/CiR,EAAOhQ,QAAQrnB,QAAQ6oB,SAASsO,GAChCA,EAAevO,cAAczI,UAAYmY,EAAUlS,UAGnD+Q,EAAehX,UAAYmY,EAAUlS,eAK7CjK,OAAOyK,SAASzK,OAAO0K,QAASyR,EAAUlS,WAE9C,MAEJ7mB,EAASA,EAAOqpB,kBAGjB0O,KAML,KACErc,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzC4K,EAAK,QAEP,IAAIwC,EAA0CnN,EAAoB,KAC9DoN,EAA+CpN,EAAoB,KACnEqN,EAA8CrN,EAAoB,IAIvFkC,EAAiB,SAAUrd,EAASqiB,QACpB,IAAZriB,IAAsBA,EAAUE,eACxB,IAARmiB,IAAkBA,EAAMiG,EAA6DjH,EAAEiB,KAC3F,IAAIuW,EAAmBrQ,EAA4CiB,sBAAsBd,YAAY3oB,GACrE,IAA5B64B,EAAiBp2B,SAGrB,EAAG8lB,EAA8D/E,GAAGnB,EAAM,4CAA6C,wBAAwB5e,MAAK,WAChJo1B,EAAiB75B,SAAQ,SAAUgJ,GAC/B,IAAIA,EAAE4gB,cAAc3f,UAAU4f,SAAS,yBACnC7gB,EAAE4gB,cAAc3f,UAAU4f,SAAS,0BADvC,CAIA,IAAIvoB,EAAOkoB,EAA4CiB,sBAAsBT,QAAQhhB,GAAG4X,OACxF,GAAKtf,EAGL,IACI0H,EAAEmX,UAAY,oDAAuD2Z,gBAAgBC,OAAOz4B,GAAQ,KAExG,MAAO8pB,GACHpiB,EAAEoW,UAAY,sBACdpW,EAAEmX,UAAY,8BAAgCiL,YASxD,KACEnP,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzCwI,EAAK,QAE5B,IAAI/F,EAAU,SAAU/Z,GACpB,IAAI6f,EAAOuU,KAAKC,MAoBhB,OAnBAxU,EAAKuV,UAAUp1B,EAAQkgB,QACvBL,EAAKwV,aAAar1B,EAAQigB,WAC1BJ,EAAKyV,iBAAiBt1B,EAAQqgB,eAC9BR,EAAK0V,uCAAuCv1B,EAAQsgB,iBACpDT,EAAK2V,aAAax1B,EAAQ+f,WAC1BF,EAAKkU,OAAO/zB,EAAQghB,KACpBnB,EAAK4V,aAAaz1B,EAAQogB,WAC1BP,EAAK6V,eAAe11B,EAAQmgB,aAC5BN,EAAK8V,0BAA0B31B,EAAQggB,kBACvCH,EAAK+V,0BAA0B51B,EAAQ6gB,kBACvChB,EAAKgW,YAAY71B,EAAQ+gB,UACzBlB,EAAKiW,kCAAkC91B,EAAQ8gB,yBAC/CjB,EAAKkW,mBAAmB/1B,EAAQ2gB,WAChCd,EAAKmW,YAAYh2B,EAAQygB,UACzBZ,EAAKoW,cAAcj2B,EAAQ0gB,YAC3Bb,EAAKqW,QAAQl2B,EAAQ4gB,MACjB5gB,EAAQwgB,eACRX,EAAKsW,oBAAoBn2B,EAAQwgB,eAE9BX,IAML,KACExI,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzCiM,EAAK,QAE5B,IAAID,EAAe,SAAU8S,EAAelc,EAAMoF,QAEhC,IAAVA,IAAoBA,EAAQ,WAChC,IAAI+W,EAAaD,EAAc/Z,wBAE/B/f,SAASme,KAAKwO,mBAAmB,YAAa,iCAA8C,SAAV3J,EAAmB,gBAAkB,IAAM,oKAA+K/G,OAAOmJ,WAAW4U,KAAO,2KAA6K/d,OAAOmJ,WAAW6U,MAAQ,8KAAiLH,EAActD,MAAQ,aAAesD,EAAc3d,OAAS,6BAA+B4d,EAAW7Z,KAAO,QAAU6Z,EAAW/Z,IADlzB,IACk0B,gBAAoB8Z,EAAcn5B,aAAa,OAAS,0BACv4BX,SAASme,KAAKnd,MAAMk5B,SAAW,SAE/B,IAAI7d,EAAarc,SAAS4I,cAAc,mBACpCuxB,EAAc,eAAiB5sB,KAAK2E,IAAI,EAAG+J,OAAOme,WAAaN,EAAc/d,cAAgB,EAAI,OAASxO,KAAK2E,IAAI,EAAG+J,OAAOC,YALpH,GAK2I4d,EAAche,eAAiB,EAAI,SAC3L9S,YAAW,WACPqT,EAAWzb,aAAa,QAAS,oDAAsDu5B,GACvFnxB,YAAW,WACPqT,EAAWqM,cAAchC,UAAUrK,EAAWqM,cAAc2R,YAAche,EAAWqM,cAAc1M,aAAe,GAAIK,EAAWqM,cAAc4R,aAAeje,EAAWqM,cAAc6R,cAAgB,KACxM,QAGP,IAAIC,EAAax6B,SAAS4I,cAAc,oBACxC4xB,EAAWryB,iBAAiB,SAAS,WACjC,IAAIsyB,EAAMrkB,SAASokB,EAAW75B,aAAa,YAAa,IAAM,GACzD85B,EAAM,GAAM,GAAM,GAAKX,EAAc/d,aAAeM,EAAWqM,cAAc6R,aAC9Ele,EAAWrb,MAAMkkB,UAAY,eAAiB3X,KAAK2E,IAAI,EAAG+J,OAAOme,WAAaN,EAAc/d,cAAgB,EAAI,QAAU+d,EAAc/d,aAAe,EAAI+d,EAAche,cAAgB,GAAK,kBAAoB2e,EAAM,OAGxNpe,EAAWrb,MAAMkkB,UAAYiV,EAAc,YAAcM,EAAM,OAEnED,EAAW55B,aAAa,WAAY65B,EAAI9f,YACxC3R,YAAW,WACPqT,EAAWqM,cAAchC,UAAUrK,EAAWqM,cAAc2R,YAAche,EAAWqM,cAAc1M,aAAe,GAAIK,EAAWqM,cAAc4R,aAAeje,EAAWqM,cAAc6R,cAAgB,KACxM,UAOL,KACExf,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzC8K,EAAK,QAEP,IAAIsC,EAA0CnN,EAAoB,KAC9D8Q,EAA8C9Q,EAAoB,KAGvF4L,EAAe,SAAU6T,EAAWvY,QACxB,IAARA,IAAkBA,EAAMiG,EAA6DjH,EAAEiB,KACtFgG,EAA6EjH,EAAEwG,WAAWtC,SAASqV,KACpGA,EAAY,UAEhB,IAAIzO,EAAkBjsB,SAASimB,eAAe,mBAC1CiG,EAAO/J,EAAM,gCAAkCuY,EAAY,OAC1DzO,EAGIA,EAAgBC,OAASA,IAC9BD,EAAgBhjB,UAChB,EAAG8iB,EAA4D3mB,GAAG8mB,EAAM,qBAJxE,EAAGH,EAA4D3mB,GAAG8mB,EAAM,qBAW1E,KACEnR,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzCuK,EAAK,QAEP,IAAIoV,EAA8C1f,EAAoB,KAEvFoC,EAAkB,SAAUud,EAAcnV,GAC1C,GAAKmV,GAAiBnV,EAAtB,CAGA,IAAIoV,EAAqB76B,SAASimB,eAAe,sBAC7C6U,EAAUrV,EAAO,IAAMmV,EAAe,OACrCC,EAGIA,EAAmB3O,OAAS4O,IACjCD,EAAmB5xB,UACnB,EAAG0xB,EAA4Dv1B,GAAG01B,EAAS,wBAJ3E,EAAGH,EAA4Dv1B,GAAG01B,EAAS,yBAW7E,KACE/f,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzCsK,EAAK,MACLhC,EAAK,QAE5B,IAAIyX,EAAgB,SAAUtV,EAAMM,GAChC,GAAI/lB,SAASimB,eAAeF,GACxB,OAAO,EAEX,IAAIiV,EAAS,IAAIC,eACjBD,EAAOE,KAAK,MAAOzV,GAAM,GACzBuV,EAAOG,iBAAiB,SAAU,0GAClCH,EAAOI,KAAK,IACZ,IAAIC,EAAgBr7B,SAASC,cAAc,UAC3Co7B,EAAcl0B,KAAO,kBACrBk0B,EAAcj7B,KAAO46B,EAAOM,aAC5BD,EAActV,GAAKA,EACnB/lB,SAASu7B,KAAKh8B,YAAY87B,IAE1B/d,EAAY,SAAUmI,EAAMM,GAC5B,OAAO,IAAIlkB,SAAQ,SAAUC,EAAS2e,GAClC,GAAIzgB,SAASimB,eAAeF,GAGxB,OADAjkB,KACO,EAEX,IAAIu5B,EAAgBr7B,SAASC,cAAc,UAC3Co7B,EAAcr1B,IAAMyf,EACpB4V,EAAcG,OAAQ,EAEtBx7B,SAASu7B,KAAKh8B,YAAY87B,GAC1BA,EAAcI,OAAS,WACnB,GAAIz7B,SAASimB,eAAeF,GAIxB,OAFAsV,EAAcpyB,SACdnH,KACO,EAEXu5B,EAActV,GAAKA,EACnBjkB,UAQN,KACEiZ,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzC5V,EAAK,QAE5B,IAAIs2B,EAAW,SAAUjzB,EAAKsd,GAC1B,IAAK/lB,SAASimB,eAAeF,GAAK,CAC9B,IAAI4V,EAAe37B,SAASC,cAAc,QAC1C07B,EAAa5V,GAAKA,EAClB4V,EAAaC,IAAM,aACnBD,EAAax0B,KAAO,WACpBw0B,EAAazP,KAAOzjB,EACpBzI,SAAS67B,qBAAqB,QAAQ,GAAGt8B,YAAYo8B,MAOvD,KACE5gB,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzCwI,EAAK,QAE5B,IAAIsY,EAAc,SAAU17B,GAExB,OAAOA,EAAKgV,QAAQ,UAAW,OAM7B,KACE2F,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzC+gB,GAAM,MACNC,GAAM,MACNC,GAAM,MACNC,GAAM,MACNC,GAAM,MACNC,GAAM,MACNC,GAAM,QAE7B,IAAIC,EAAW,WACX,OAAOC,UAAUC,UAAUn1B,QAAQ,WAAa,IAAgD,IAA3Ck1B,UAAUC,UAAUn1B,QAAQ,WAEjFo1B,EAAY,WACZ,OAAOF,UAAUC,UAAUE,cAAcr1B,QAAQ,YAAc,GAE/Ds1B,EAAqB,WACrB,IACI,MAA+B,oBAAjBC,aAElB,MAAO90B,GACH,OAAO,IAIX+0B,EAAe,WACf,OAAIN,UAAUC,UAAUn1B,QAAQ,WAAa,EAClC,aAGA,SAIXy1B,EAAS,SAAU70B,GACnB,OAAIs0B,UAAUQ,SAASC,cAAc31B,QAAQ,QAAU,KAE/CY,EAAMg1B,SAAYh1B,EAAMi1B,WAMvBj1B,EAAMg1B,UAAWh1B,EAAMi1B,UAOhCC,EAAkB,SAAUC,GAuB5B,MAtBI,MAAMC,KAAKd,UAAUQ,WAAoC,WAAvBR,UAAUQ,SACxCK,EAAO/1B,QAAQ,MAAQ,GAAKo1B,MAE5BW,EAASA,EAAOhoB,QAAQ,IAAK,KAAKA,QAAQ,IAAK,KAAKA,QAAQ,IAAK,OAarEgoB,GARIA,EADAA,EAAOE,WAAW,KACTF,EAAOhoB,QAAQ,IAAK,MAExBgoB,EAAOE,WAAW,MAAgC,MAAxBF,EAAOpX,OAAO,EAAG,GACvCoX,EAAOhoB,QAAQ,IAAK,MAGpBgoB,EAAOhoB,QAAQ,KAAM,QAAQA,QAAQ,KAAM,SAExCA,QAAQ,IAAK,QAAQA,QAAQ,IAAK,SAC7CA,QAAQ,IAAK,QACP/N,QAAQ,UAAY,IAC3B+1B,EAASA,EAAOhoB,QAAQ,IAAK,KAAKA,QAAQ,IAAK,KAAKA,QAAQ,IAAK,MAGlEgoB,GAEPG,EAAW,WACX,MAAO,SAASF,KAAKd,UAAUC,YAAc,aAAaa,KAAKd,UAAUiB,UAMvE,KACEziB,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzCyiB,GAAM,MACNC,GAAM,MACNC,GAAM,MACNC,GAAM,MACNC,GAAM,MACNtX,GAAM,MACNC,GAAM,MACNsX,GAAM,QAGR,IAAIC,EAAqD9iB,EAAoB,KAE9F+iB,EAA2B,SAAUl+B,EAASoe,GAI9C,IAHA,IAAI0P,EAAUqQ,EAAsBn+B,EAASoe,GACzCggB,GAAgB,EAChBC,GAAU,EACPvQ,IAAYA,EAAQ7kB,UAAU4f,SAAS,kBAAoBwV,IAC9DD,EAAgBD,EAAsBrQ,EAAQlF,cAAexK,IAEzD0P,EAAUsQ,EAGVC,GAAU,EAGlB,OAAOvQ,IAAW,GAiBlBwQ,EAAqB,SAAUt+B,EAASu+B,GAIxC,IAHA,IAAIzQ,GAAU,EAAGmQ,EAA0EO,GAAGx+B,EAASu+B,GACnGH,GAAgB,EAChBC,GAAU,EACPvQ,IAAYA,EAAQ7kB,UAAU4f,SAAS,kBAAoBwV,IAC9DD,GAAgB,EAAGH,EAA0EO,GAAG1Q,EAAQlF,cAAe2V,IAEnHzQ,EAAUsQ,EAGVC,GAAU,EAGlB,OAAOvQ,IAAW,GAElB2Q,EAAa,SAAUz+B,GACvB,IAAI0+B,EAAeJ,EAAmBt+B,EAAS,MAC3C2+B,EAAeL,EAAmBt+B,EAAS,MAC3C4+B,EAAiBF,EAIrB,OAHIC,KAAkBD,GAAiBA,GAAgBC,EAAa9V,SAAS6V,MACzEE,EAAiBD,GAEdC,GAEPC,EAAwB,SAAU7+B,EAASS,EAAME,GACjD,IAAKX,EACD,OAAO,EAEc,IAArBA,EAAQ8+B,WACR9+B,EAAUA,EAAQ4oB,eAItB,IAFA,IAAI5gB,EAAIhI,EACJ++B,GAAY,EACT/2B,IAAM+2B,IAAc/2B,EAAEiB,UAAU4f,SAAS,iBACxC7gB,EAAEnH,aAAaJ,KAAUE,EACzBo+B,GAAY,EAGZ/2B,EAAIA,EAAE4gB,cAGd,OAAOmW,GAAa/2B,GAEpBg3B,EAAkB,SAAUh/B,GAC5B,IAAKA,EACD,OAAO,EAEc,IAArBA,EAAQ8+B,WACR9+B,EAAUA,EAAQ4oB,eAEtB,IAAI5gB,EAAIhI,EACJ++B,GAAY,EACZE,EAAeJ,EAAsB7+B,EAAS,aAAc,KAChE,GAAIi/B,EACA,OAAOA,EAEX,KAAOj3B,IAAM+2B,IAAc/2B,EAAEiB,UAAU4f,SAAS,iBAC1B,OAAd7gB,EAAEulB,SACY,OAAdvlB,EAAEulB,SACY,OAAdvlB,EAAEulB,SACY,OAAdvlB,EAAEulB,SACY,OAAdvlB,EAAEulB,SACY,OAAdvlB,EAAEulB,SACY,MAAdvlB,EAAEulB,SACY,eAAdvlB,EAAEulB,SACY,OAAdvlB,EAAEulB,SACY,OAAdvlB,EAAEulB,QACFwR,GAAY,EAGZ/2B,EAAIA,EAAE4gB,cAGd,OAAOmW,GAAa/2B,GAEpBk3B,EAAuB,SAAUl/B,EAASu+B,GAC1C,IAAKv+B,EACD,OAAO,EAEc,IAArBA,EAAQ8+B,WACR9+B,EAAUA,EAAQ4oB,eAItB,IAFA,IAAI5gB,EAAIhI,EACJ++B,GAAY,EACT/2B,IAAM+2B,IAAc/2B,EAAEiB,UAAU4f,SAAS,iBACxC7gB,EAAEu2B,WAAaA,EACfQ,GAAY,EAGZ/2B,EAAIA,EAAE4gB,cAGd,OAAOmW,GAAa/2B,GAEpBm2B,EAAwB,SAAUn+B,EAASoe,GAC3C,IAAKpe,EACD,OAAO,EAEc,IAArBA,EAAQ8+B,WACR9+B,EAAUA,EAAQ4oB,eAItB,IAFA,IAAI5gB,EAAIhI,EACJ++B,GAAY,EACT/2B,IAAM+2B,IAAc/2B,EAAEiB,UAAU4f,SAAS,iBACxC7gB,EAAEiB,UAAU4f,SAASzK,GACrB2gB,GAAY,EAGZ/2B,EAAIA,EAAE4gB,cAGd,OAAOmW,GAAa/2B,GAEpBm3B,EAAc,SAAU3/B,GACxB,KAAOA,GAAQA,EAAK4/B,WAChB5/B,EAAOA,EAAK4/B,UAEhB,OAAO5/B,IAML,KACEyb,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzCsjB,EAAK,MACLhH,EAAK,QAG5B,IAAI6H,EAAkB,SAAUr/B,EAASu+B,GACrC,IAAKv+B,EACD,OAAO,EAEc,IAArBA,EAAQ8+B,WACR9+B,EAAUA,EAAQ4oB,eAItB,IAFA,IAAI5gB,EAAIhI,EACJ++B,GAAY,EACT/2B,IAAM+2B,IAAc/2B,EAAEiB,UAAU4f,SAAS,iBACP,IAAjC7gB,EAAEu2B,SAASh3B,QAAQg3B,GACnBQ,GAAY,EAGZ/2B,EAAIA,EAAE4gB,cAGd,OAAOmW,GAAa/2B,GAEpBs3B,EAAuB,SAAUt/B,GACjC,IAAI2mB,EAAiB0Y,EAAgBr/B,EAAS,KAC9C,SAAI2mB,GAAoD,IAAlCA,EAAe4G,QAAQ9qB,QAA2C,OAA3BkkB,EAAe4G,UACjE5G,IAQT,KACE1L,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzCkI,EAAK,QAE5B,IAAI1F,EAAQ,WAER,IADA,IAAI9Z,EAAU,GACL27B,EAAK,EAAGA,EAAKC,UAAU/8B,OAAQ88B,IACpC37B,EAAQ27B,GAAMC,UAAUD,GAe5B,IAbA,IAAIhgC,EAAS,GACTkgC,EAAS,SAAU93B,GACnB,IAAK,IAAI+3B,KAAQ/3B,EACTA,EAAIkI,eAAe6vB,KAC+B,oBAA9C9gC,OAAOuL,UAAU0Q,SAASqH,KAAKva,EAAI+3B,IACnCngC,EAAOmgC,GAAQhiB,EAAMne,EAAOmgC,GAAO/3B,EAAI+3B,IAGvCngC,EAAOmgC,GAAQ/3B,EAAI+3B,KAK1Bl9B,EAAI,EAAGA,EAAIoB,EAAQnB,OAAQD,IAChCi9B,EAAO77B,EAAQpB,IAEnB,OAAOjD,IAML,KACE0b,EAAyBC,EAAqBC,KAGjCA,EAAoBjU,EAAEgU,EAAqB,CACzCykB,GAAM,MACNC,GAAM,MACNC,GAAM,MACNpgB,GAAM,MACNqgB,GAAM,MACNC,GAAM,MACNC,GAAM,MACNC,GAAM,QAER,IAAI3X,EAA0CnN,EAAoB,KAC9D+kB,EAA8C/kB,EAAoB,KAClEglB,EAA2ChlB,EAAoB,KAIpFilB,EAAiB,SAAU/I,GAC3B,IAAIgJ,EACArgC,EAAUq3B,EAAOA,EAAOO,aAAa53B,QACzC,OAAI2f,eAAe2gB,WAAa,IAC5BD,EAAQ1gB,eAAeG,WAAW,GAC9B9f,EAAQq4B,YAAYgI,EAAME,iBAAmBvgC,EAAQ6oB,SAASwX,EAAME,iBAC7DF,EAGXhJ,EAAOA,EAAOO,aAAayI,MACpBhJ,EAAOA,EAAOO,aAAayI,OAEtCrgC,EAAQwgC,SACRH,EAAQrgC,EAAQygC,cAAcC,eACxBC,SAAS3gC,EAAS,GACxBqgC,EAAMO,UAAS,GACRP,IAEPQ,EAAoB,SAAUC,GAC9B,IAAIT,EAAQlkB,OAAOwD,eAAeG,WAAW,GAC7C,IAAKghB,EAAOjY,SAASwX,EAAME,mBAAoB,EAAGJ,EAAsEzZ,IAAI2Z,EAAME,eAAgB,sBAC9I,MAAO,CACHngB,KAAM,EACNF,IAAK,GAGb,IACI6gB,EADAC,EAAaF,EAAOlY,cAAc3I,wBAEtC,GAAsC,IAAlCogB,EAAMY,iBAAiBx+B,OACvB,GAAsC,IAAlC49B,EAAME,eAAezB,SAAgB,CAErC,IAAIoC,EAAWb,EAAME,eAAe3X,cACpC,KAAIsY,GAAYA,EAASD,iBAAiBx+B,OAAS,GAI/C,MAAO,CACH2d,KAAM,EACNF,IAAK,GALT6gB,EAAaG,EAASD,iBAAiB,OAS1C,CACD,IAAI77B,EAAWi7B,EAAME,eAAen7B,SACpC,GAAIA,EAASi7B,EAAMc,cACf/7B,EAASi7B,EAAMc,aAAaF,iBAAiBx+B,OAAS,EAEtDs+B,EAAa37B,EAASi7B,EAAMc,aAAaF,iBAAiB,QAEzD,GAAIZ,EAAME,eAAep7B,WAAW1C,OAAS,EAAG,CAEjD,IAAIsd,EAAasgB,EAAMtgB,aACvBsgB,EAAMe,WAAWf,EAAME,eAAep7B,WAAWsI,KAAK2E,IAAI,EAAGiuB,EAAMc,YAAc,KACjFJ,EAAaV,EAAMY,iBAAiB,GACpCZ,EAAMgB,OAAOthB,EAAWuhB,aAAcvhB,EAAWwhB,WACjDlB,EAAMM,SAAS5gB,EAAWwgB,eAAgBxgB,EAAWohB,kBAGrDJ,EAAaV,EAAME,eAAeU,iBAAiB,GAEvD,IAAKF,EAAY,CAEb,IADA,IAAInY,EAAgByX,EAAME,eAAep7B,WAAWk7B,EAAMc,cAClDvY,EAAcqY,gBACjBrY,EAAcqY,gBAA4D,IAA1CrY,EAAcqY,iBAAiBx+B,QAChEmmB,EAAgBA,EAAcA,cAElCmY,EAAanY,EAAcqY,iBAAiB,SAKpDF,EAAaV,EAAMY,iBAAiB,GAExC,MAAO,CACH7gB,KAAM2gB,EAAW3gB,KAAO4gB,EAAW5gB,KACnCF,IAAK6gB,EAAW7gB,IAAM8gB,EAAW9gB,MAGrCshB,EAAiB,SAAUV,EAAQT,GACnC,IAAKA,EAAO,CACR,GAAkC,IAA9B1gB,eAAe2gB,WACf,OAAO,EAGPD,EAAQ1gB,eAAeG,WAAW,GAG1C,IAAI2hB,EAAYpB,EAAMqB,wBACtB,OAAOZ,EAAOzI,YAAYoJ,IAAcX,EAAOjY,SAAS4Y,IAExDE,EAAoB,SAAUtB,GAC9B,IAAIziB,EAAYzB,OAAOwD,eACvB/B,EAAUgkB,kBACVhkB,EAAUikB,SAASxB,IAEnByB,EAAoB,SAAUC,EAAeC,EAAe3B,GAC5D,IAAI7J,EAAW,CACXyL,IAAK,EACLzqB,MAAO,GAEX,IAAK6oB,EAAO,CACR,GAAkC,IAA9B1gB,eAAe2gB,WACf,OAAO9J,EAEX6J,EAAQlkB,OAAOwD,eAAeG,WAAW,GAE7C,GAAI0hB,EAAeQ,EAAe3B,GAAQ,CACtC,IAAI6B,EAAoB7B,EAAMtgB,aAC1BgiB,EAAc58B,WAAW,IAAM48B,EAAc58B,WAAW,GAAGA,WAAW,GACtE+8B,EAAkBvB,SAASoB,EAAc58B,WAAW,GAAGA,WAAW,GAAI,GAGtE+8B,EAAkBC,mBAAmBJ,GAEzCG,EAAkBb,OAAOhB,EAAME,eAAgBF,EAAMc,aACrD3K,EAAShf,MAAQ0qB,EAAkBrnB,WAAWpY,OAC9C+zB,EAASyL,IAAMzL,EAAShf,MAAQ6oB,EAAMxlB,WAAWpY,OAErD,OAAO+zB,GAEP4L,EAAyB,SAAU5qB,EAAOyqB,EAAKnB,GAC/C,IAAIuB,EAAY,EACZzyB,EAAO,EACP0yB,EAAQxB,EAAO37B,WAAWyK,GAC1B2yB,GAAa,EACbC,GAAO,EACXhrB,EAAQ/J,KAAK2E,IAAI,EAAGoF,GACpByqB,EAAMx0B,KAAK2E,IAAI,EAAG6vB,GAClB,IAAI5B,EAAQS,EAAOL,cAAcC,cAGjC,IAFAL,EAAMM,SAAS2B,GAASxB,EAAQ,GAChCT,EAAMO,UAAS,IACP4B,GAAQF,GAAO,CACnB,IAAIG,EAAgBJ,EAAYC,EAAM3Y,YAAYlnB,OAClD,IAAK8/B,GAAc/qB,GAAS6qB,GAAa7qB,GAASirB,IAChC,IAAVjrB,EACA6oB,EAAMM,SAAS2B,EAAO,GAGe,IAAjCA,EAAMn9B,WAAW,GAAG25B,SACpBuB,EAAMM,SAAS2B,EAAMn9B,WAAW,GAAIqS,EAAQ6qB,GAEvCC,EAAMI,YACXrC,EAAMsC,eAAeL,EAAMI,aAG3BrC,EAAMuC,cAAcN,GAG5BC,GAAa,EACT/qB,IAAUyqB,GAAK,CACfO,GAAO,EACP,MAGJD,GAAcN,GAAOI,GAAaJ,GAAOQ,IAC7B,IAARR,EACA5B,EAAMgB,OAAOiB,EAAO,GAGiB,IAAjCA,EAAMn9B,WAAW,GAAG25B,SACpBuB,EAAMgB,OAAOiB,EAAMn9B,WAAW,GAAI88B,EAAMI,GAEnCC,EAAMI,YACXrC,EAAMwC,aAAaP,EAAMI,aAGzBrC,EAAMyC,YAAYR,GAG1BE,GAAO,GAEXH,EAAYI,EACZH,EAAQxB,EAAO37B,aAAayK,GAMhC,OAJK4yB,GAAQ1B,EAAO37B,WAAWyK,EAAO,IAClCywB,EAAMsC,eAAe7B,EAAO37B,WAAWyK,EAAO,IAElD+xB,EAAkBtB,GACXA,GAEP0C,EAAgB,SAAU/iC,EAASqgC,GACnC,IAAI2C,EAAahjC,EAAQ8I,cAAc,OACvC,GAAKk6B,EAAL,CAGA,GAAKA,EAAWC,uBAqBZ,GAAID,EAAWC,uBAAuBC,WAAWF,EAAWG,iBAAkB,CAC1E,GAAIH,EAAWC,uBAAuB7D,UAalC,OAXAiB,EAAMsC,eAAeK,GACrB3C,EAAMO,UAAS,GACfe,EAAkBtB,KAEd,EAAGH,EAA4D3D,OAAwD,OAA9CyG,EAAWC,uBAAuB1V,SAC7D,WAA9CyV,EAAWC,uBAAuB1V,SACY,MAA9CyV,EAAWC,uBAAuB1V,UAClC8S,EAAM+C,WAAWljC,SAASM,eAAe8nB,EAA8DjH,EAAEmG,OACzG6Y,EAAMO,UAAS,SAEnBoC,EAAW75B,SAKXk3B,EAAMuC,cAAcI,EAAWC,6BAKnC5C,EAAMM,SAASqC,EAAWG,gBAAiBH,EAAWG,gBAAgBxZ,YAAYlnB,aA3ClFugC,EAAWG,gBAEX9C,EAAMM,SAASqC,EAAWG,gBAAiBH,EAAWG,gBAAgBxZ,YAAYlnB,QAE7EugC,EAAWN,YACwB,IAApCM,EAAWN,YAAY5D,SAEvBuB,EAAMM,SAASqC,EAAWN,YAAa,GAIvCrC,EAAMsC,eAAeK,EAAWN,aAKpCrC,EAAMM,SAASqC,EAAWpa,cAAe,GA8BjDyX,EAAMO,UAAS,GACfoC,EAAW75B,SACXw4B,EAAkBtB,KAElBgD,EAAa,SAAUpuB,EAAMoiB,GAE7B,IAAIK,EAAcx3B,SAASC,cAAc,OACzCu3B,EAAYvY,UAAYlK,EACxB,IAAIquB,EAAmB5L,EAAYpb,iBAAiB,KACpB,IAA5BgnB,EAAiB7gC,SAAiB6gC,EAAiB,GAAGH,kBAAoBG,EAAiB,GAAGZ,aAC9FrL,EAAOA,EAAOO,aAAa53B,QAAQoF,SAAS3C,OAAS,GAA+C,MAA1Ci1B,EAAYS,kBAAkB5K,UACxFtY,EAAOquB,EAAiB,GAAGnkB,UAAUS,QAEzC,IAAI2jB,EAAerjC,SAASC,cAAc,OAC1CojC,EAAapkB,UAAYlK,EACzB,IAAIorB,EAAQD,EAAe/I,GAK3B,GAJyB,KAArBgJ,EAAMxlB,aACNwc,EAAOA,EAAOO,aAAa4L,cAAe,EAC1CtjC,SAASujC,YAAY,UAAU,EAAO,KAEtCF,EAAapL,mBACiD,MAA9DoL,EAAapL,kBAAkBt3B,aAAa,cAAuB,CAEnE0iC,EAAaG,iBAAiB7W,mBAAmB,YAAa,SAC9D,IAAIoS,GAAe,EAAGkB,EAAgEpC,IAAIsC,EAAME,gBAC3FtB,EAIDA,EAAapS,mBAAmB,WAAY0W,EAAapkB,WAHzDkY,EAAOA,EAAOO,aAAa53B,QAAQ6sB,mBAAmB,YAAa0W,EAAapkB,WAKpF4jB,EAAc1L,EAAOA,EAAOO,aAAa53B,QAASqgC,OAEjD,CACD,IAAIsD,EAAgBzjC,SAASC,cAAc,YAC3CwjC,EAAcxkB,UAAYlK,EAC1BorB,EAAM+C,WAAWO,EAAcC,QAAQC,WAAU,IACjDxD,EAAMO,UAAS,GACfe,EAAkBtB,OAUZyD,EAA2B,GAG/B,SAAS3oB,EAAoB4oB,GAE5B,IAAIC,EAAeF,EAAyBC,GAC5C,QAAqBj0B,IAAjBk0B,EACH,OAAOA,EAAalpB,QAGrB,IAAIvR,EAASu6B,EAAyBC,GAAY,CAGjDjpB,QAAS,IAOV,OAHAxR,EAAoBy6B,GAAUx6B,EAAQA,EAAOuR,QAASK,GAG/C5R,EAAOuR,QAOdK,EAAoBjU,EAAI,CAAC4T,EAASmpB,KACjC,IAAI,IAAIjjC,KAAOijC,EACX9oB,EAAoB+oB,EAAED,EAAYjjC,KAASma,EAAoB+oB,EAAEppB,EAAS9Z,IAC5EpC,OAAOulC,eAAerpB,EAAS9Z,EAAK,CAAEojC,YAAY,EAAMC,IAAKJ,EAAWjjC,MAQ3Ema,EAAoB+oB,EAAI,CAACv8B,EAAK+3B,IAAU9gC,OAAOuL,UAAU0F,eAAeqS,KAAKva,EAAK+3B,GAMlFvkB,EAAoB+N,EAAKpO,IACH,oBAAXgH,QAA0BA,OAAOwiB,aAC1C1lC,OAAOulC,eAAerpB,EAASgH,OAAOwiB,YAAa,CAAE3jC,MAAO,WAE7D/B,OAAOulC,eAAerpB,EAAS,aAAc,CAAEna,OAAO,KAKlE,IAAIua,EAAsB,GAixUhB,MA/wUV,MAIAC,EAAoBjU,EAAEgU,EAAqB,CACzCE,QAAW,SAIFD,EAAoB,KAE/B,IAk/GQopB,EAqiFJC,EAvhMAxd,EAAS7L,EAAoB,KAE7BmC,EAAYnC,EAAoB,KAEhC6gB,EAAc7gB,EAAoB,KAGlCspB,EAAc,SAAUpN,GACxB,MAA2B,OAAvBA,EAAOO,aACA,EAAGoE,EAA6BtY,IAAI2T,EAAOqN,GAAG1kC,QAAQ2pB,YAAc,MAAMrU,QAAQ,QAAS,OAEtE,YAAvB+hB,EAAOO,YACLP,EAAO5T,KAAKkhB,aAAatN,EAAOuN,QAAQ5kC,QAAQmf,WAE3B,OAAvBkY,EAAOO,YACLP,EAAO5T,KAAKohB,eAAexN,EAAOyN,GAAG9kC,QAAQmf,WAEjD,IAIP3B,EAAYrC,EAAoB,KAIhC4pB,EAA0B,WAC1B,SAASA,IACLx+B,KAAKvG,QAAUE,SAASC,cAAc,OACtCoG,KAAKvG,QAAQoe,UAAY,kBACzB7X,KAAKvG,QAAQmf,UAAY,2EAoE7B,OAlEA4lB,EAAS56B,UAAU66B,aAAe,SAAU3N,GACxC,IAAI4N,EAAQ1+B,KACkC,UAA1C8wB,EAAO6N,SAASllC,QAAQkB,MAAM2e,UAGlC,EAAGrC,EAAyBgG,GAAG6T,EAAOzzB,QAAQye,IAAM,kCAAmC,uBAAuB5e,MAAK,WAC1GwhC,EAAME,WACPF,EAAME,SAAWjb,QAAQvmB,KAAK0zB,EAAO6N,SAASllC,QAAQ0jC,mBAE1D,IACIuB,EAAMjlC,QAAQ0jC,iBAAiBxiC,MAAM2e,QAAU,QAC/ColB,EAAMjlC,QAAQm4B,kBAAkBhZ,UAAY,GAC5C8lB,EAAME,SAAShb,UAAU,CACrB4L,OAAQ,CACJ,CACIx1B,KAAMypB,KAAKC,MAAMoN,EAAO5T,KAAK2hB,kBAAkBX,EAAYpN,KAC3DrB,kBAAmB,EACnBzU,MAAO,CACH8jB,MAAO,OACPjP,gBAAiB,wBACjBE,aAAc,EACdH,MAAO,UACPhD,SAAU,GACVvG,WAAY,GACZ2J,OAAQ,CAAC,EAAG,IACZve,QAAS,CAAC,EAAG,EAAG,EAAG,GACnBwe,SAAU,MACV8O,cAAe,UAEnB7O,UAAW,CACPN,MAAO,UACP9uB,KAAM,QACNqvB,MAAO,GAEX6O,OAAQ,WACR5O,MAAM,EACNtvB,KAAM,SAGdm+B,QAAS,CACLC,OAAQ,GACRC,SAAU,CACNC,UAAW,CACPxP,MAAO,YAGfyP,QAAS,CACLC,QAAS,CACLC,MAAM,GAEVC,YAAa,CACTD,MAAM,IAGdE,MAAO,GACPF,MAAM,KAGdb,EAAME,SAASc,SAEnB,MAAOj+B,GACHi9B,EAAMjlC,QAAQ0jC,iBAAiBxiC,MAAM2e,QAAU,OAC/ColB,EAAMjlC,QAAQm4B,kBAAkBhZ,UAAYnX,OAIjD+8B,KAKPmB,EAAgB/qB,EAAoB,KAIpCgrB,EAAuB,SAAUzN,EAAS0N,GAC1CA,EAAMpnC,SAAQ,SAAUiB,GACpB,GAAKy4B,EAAQz4B,GAAb,CAGA,IAAIomC,EAAc3N,EAAQz4B,GAAMmF,SAAS,GACrCihC,GAAeA,EAAYp9B,UAAU4f,SAAS,yBAC9Cwd,EAAYp9B,UAAUE,OAAO,6BAIrCm9B,EAAoB,SAAU5N,EAAS0N,GACvCA,EAAMpnC,SAAQ,SAAUiB,GACpB,GAAKy4B,EAAQz4B,GAAb,CAGA,IAAIomC,EAAc3N,EAAQz4B,GAAMmF,SAAS,GACrCihC,IAAgBA,EAAYp9B,UAAU4f,SAAS,yBAC/Cwd,EAAYp9B,UAAUlG,IAAI,6BAIlCwjC,EAAgB,SAAU7N,EAAS0N,GACnCA,EAAMpnC,SAAQ,SAAUiB,GACpB,GAAKy4B,EAAQz4B,GAAb,CAGA,IAAIomC,EAAc3N,EAAQz4B,GAAMmF,SAAS,GACrCihC,GAAeA,EAAYp9B,UAAU4f,SAASvL,EAA6C+D,EAAEsG,sBAC7F0e,EAAYp9B,UAAUE,OAAOmU,EAA6C+D,EAAEsG,0BAIpF6e,EAAiB,SAAU9N,EAAS0N,GACpCA,EAAMpnC,SAAQ,SAAUiB,GACpB,GAAKy4B,EAAQz4B,GAAb,CAGA,IAAIomC,EAAc3N,EAAQz4B,GAAMmF,SAAS,GACrCihC,IAAgBA,EAAYp9B,UAAU4f,SAASvL,EAA6C+D,EAAEsG,sBAC9F0e,EAAYp9B,UAAUlG,IAAIua,EAA6C+D,EAAEsG,0BAIjF8e,EAAc,SAAU/N,EAAS0N,GACjCA,EAAMpnC,SAAQ,SAAUiB,GACfy4B,EAAQz4B,IAGTy4B,EAAQz4B,KACRy4B,EAAQz4B,GAAMiB,MAAM2e,QAAU,YAItC6mB,EAAc,SAAUhO,EAAS0N,GACjCA,EAAMpnC,SAAQ,SAAUiB,GACfy4B,EAAQz4B,IAGTy4B,EAAQz4B,KACRy4B,EAAQz4B,GAAMiB,MAAM2e,QAAU,aAKtC8mB,EAAY,SAAUtP,EAAQuP,EAAQC,GAClCD,EAAOrhB,SAAS,gBAChB8R,EAAOqB,QAAQ14B,QAAQsc,iBAAiB,gBAAgBtd,SAAQ,SAAU2f,GAClEkoB,GAAiBloB,EAAK0Z,YAAYwO,KAGtCloB,EAAKzd,MAAM2e,QAAU,WAErBwX,EAAOqB,QAAQoO,SAASC,QACxB1P,EAAOqB,QAAQoO,SAASC,MAAMrD,iBAAiBxiC,MAAM2e,QAAU,SAGnE+mB,EAAOrhB,SAAS,UAChB8R,EAAO2P,KAAKhnC,QAAQkB,MAAM2e,QAAU,QAEpCwX,EAAOuN,QAAQqC,SAAWL,EAAOrhB,SAAS,aAC1C8R,EAAOuN,QAAQqC,QAAQ/lC,MAAM2e,QAAU,SAG3CqnB,EAAgB,SAAU7P,EAAQ8P,EAAcC,EAAWC,GAC3DD,EAAU/+B,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAC3EA,EAAMwlB,iBACNxlB,EAAMulB,kBACF0Z,EAAUn+B,UAAU4f,SAASvL,EAA6C+D,EAAEsG,uBAGhF0P,EAAOqB,QAAQ14B,QAAQsc,iBAAiB,yBAAyBtd,SAAQ,SAAU2f,GAC/EA,EAAK1V,UAAUE,OAAO,2BAES,UAA/Bg+B,EAAajmC,MAAM2e,QACnBsnB,EAAajmC,MAAM2e,QAAU,QAG7B8mB,EAAUtP,EAAQ,CAAC,aAAc,OAAQ,WAAY+P,EAAUxe,cAAcA,eACxEwe,EAAUn+B,UAAU4f,SAAS,sBAC9Bue,EAAUn+B,UAAUlG,IAAI,wBAE5BokC,EAAajmC,MAAM2e,QAAU,QACzBwX,EAAOqB,QAAQ14B,QAAQigB,wBAAwB+lB,MAAQoB,EAAUnnB,wBAAwB+lB,MAAQ,IACjGmB,EAAal+B,UAAUlG,IAAI,sBAG3BokC,EAAal+B,UAAUE,OAAO,4BAO1CsU,EAAatC,EAAoB,KAEjCmkB,EAAuBnkB,EAAoB,KAE3CjT,EAAM,SAAU8e,EAAQ4c,EAASv8B,EAAMigC,GACnCA,GAEAr/B,QAAQC,IAAI8e,EAAS,MAAQ3f,EAAO,KAAOu8B,IAK/CvoB,EAAYF,EAAoB,KAEhCI,EAAcJ,EAAoB,KAElCK,EAAaL,EAAoB,IAEjCM,EAAkBN,EAAoB,KAEtCO,EAAiBP,EAAoB,KAErCQ,EAAkBR,EAAoB,IAEtC6B,EAAa7B,EAAoB,KAEjC+B,EAAgB/B,EAAoB,KAEpCgC,EAAgBhC,EAAoB,KAEpCkC,EAAiBlC,EAAoB,KAuDrCosB,EAAoB,SAAUC,EAAcnQ,GAC5C,GAAKmQ,EAGL,GAA6D,eAAzDA,EAAa5e,cAAc/nB,aAAa,aAA5C,CAIA,IAAI4mC,EAAWD,EAAarP,kBAAkB/Z,UAAU9I,QAAQ,YAAa,IACxEmyB,IAGY,QAAbA,GACA,EAAGpsB,EAAyB0K,GAAGyhB,EAAcnQ,EAAOzzB,QAAQye,KAE1C,YAAbolB,GACL,EAAGvqB,EAAiC1a,GAAGglC,EAAcnQ,EAAOzzB,QAAQye,IAAKgV,EAAOzzB,QAAQsf,OAEtE,cAAbukB,GACL,EAAGhsB,EAAqCgF,GAAG+mB,EAAcnQ,EAAOzzB,QAAQye,KAEtD,YAAbolB,GACL,EAAGlsB,EAA6BnY,GAAGokC,EAAcnQ,EAAOzzB,QAAQye,IAAKgV,EAAOzzB,QAAQsf,OAElE,YAAbukB,GACL,EAAGtqB,EAAiCsD,GAAG+mB,EAAcnQ,EAAOzzB,QAAQye,IAAKgV,EAAOzzB,QAAQsf,OAEtE,aAAbukB,GACL,EAAGpqB,EAAmCyI,GAAG0hB,EAAcnQ,EAAOzzB,QAAQye,KAEpD,aAAbolB,GACL,EAAG/rB,EAAmCsG,GAAGwlB,EAAcnQ,EAAOzzB,QAAQye,KAEpD,SAAbolB,GACL,EAAGzqB,EAA2B6I,GAAG2hB,EAAc,CAAEnlB,IAAKgV,EAAOzzB,QAAQye,IAAKS,KAAMuU,EAAOzzB,QAAQyjB,QAAQvE,SAGvG,EAAGnH,EAAqCjF,GAAG9X,OAAOuuB,OAAO,GAAIkK,EAAOzzB,QAAQyjB,QAAQ5E,MAAO+kB,EAAcnQ,EAAOzzB,QAAQye,MACxH,EAAG7G,EAA2BoK,GAAG4hB,IAErCA,EAAa1mC,aAAa,cAAe,WAnCrC0mC,EAAa1mC,aAAa,cAAe,MAuC7C8c,EAAYzC,EAAoB,KAMhCusB,EAAY,SAAUrQ,GACtB,GAA2B,OAAvBA,EAAOO,YAAX,CAGA,IAAIoK,EAAgB3K,EAAOA,EAAOO,aAAa53B,QAC3Cs3B,EAAUD,EAAOsQ,QAAQC,OAAOvQ,GACpB,KAAZC,IACAA,EAAU,SAEd0K,EAAc1lB,iBAAiB,2BAA2Btd,SAAQ,SAAU2f,GACxEA,EAAKQ,UAAYmY,GACjB,EAAGta,EAA2B6I,GAAGlH,EAAM,CACnC0D,IAAKgV,EAAOzzB,QAAQye,IACpBS,KAAMuU,EAAOzzB,QAAQyjB,QAAQvE,YAIrC+kB,EAAW,SAAU1/B,EAAOkvB,GAC5B,IAAI7Q,GAAc,EAAG/I,EAAqCgJ,IAAIte,EAAM5I,OAAQ,QAC5E,GAAIinB,IAAe,EAAG/I,EAAsCiJ,IAAIF,EAAa,cAA7E,CACI,IAAIG,EAAiB0Q,EAAOA,EAAOO,aAAa53B,QAAQ8I,cAAc,IAAM0d,EAAY3lB,aAAa,mBACrG,GAAI8lB,EACA,GAA8B,SAA1B0Q,EAAOzzB,QAAQyY,OAAmB,CAClC,IAAIkc,EAAgB5R,EAAeP,UAAYiR,EAAOr3B,QAAQomB,UACzDiR,EAAOzzB,QAAQ40B,cAAcC,MAC9BF,GAAiBlB,EAAOqB,QAAQ14B,QAAQ24B,cAE5Cxc,OAAOyK,SAASzK,OAAO0K,QAAS0R,QAG5BlB,EAAOr3B,QAAQomB,UAAYjK,OAAOyc,SAClCzc,OAAOyK,SAASzK,OAAO0K,QAASwQ,EAAOr3B,QAAQomB,WAEnDiR,EAAOA,EAAOO,aAAa53B,QAAQmgB,UAAYwG,EAAeP,YAM1E0hB,EAAa,SAAU7I,EAAc5H,EAAQlvB,EAAOk4B,GAEpD,GAAIpB,EAAagE,wBACbhE,EAAagE,uBAAuBh6B,UAAU4f,SAAS,cAAe,CACtE,GAAkB,cAAd1gB,EAAMnH,KACqG,KAA3G,EAAG4c,EAAiCkiB,IAAIb,EAAc5H,EAAOA,EAAOO,aAAa53B,QAASqgC,GAAO7oB,MAGjG,OAFAynB,EAAagE,uBAAuB95B,SACpC4+B,GAAgB1Q,IACT,EAEX,GAAI2Q,GAAkB3Q,EAAQlvB,EAAOk4B,EAAOpB,EAAcA,EAAagE,wBACnE,OAAO,EAIf,GAAIhE,EAAa7G,oBACb6G,EAAa7G,mBAAmBnvB,UAAU4f,SAAS,cAAe,CAClE,GAAkB,WAAd1gB,EAAMnH,MACN,EAAG4c,EAAiCkiB,IAAIb,EAAc5H,EAAOA,EAAOO,aAAa53B,QAASqgC,GAAO7oB,OAC1FynB,EAAatV,YAAYse,YAAYxlC,OAG5C,OAFAw8B,EAAa7G,mBAAmBjvB,SAChC4+B,GAAgB1Q,IACT,EAEX,GAAI6Q,GAAiB7Q,EAAQlvB,EAAOk4B,EAAOpB,EAAcA,EAAa7G,oBAClE,OAAO,EAIf,GAAkB,cAAdjwB,EAAMnH,KAAqC,WAAdmH,EAAMnH,IAAkB,CACrD,IAAImnC,GAAa,EAAG1qB,EAAsCiJ,IAAI2Z,EAAME,eAAgB,cACpF,GAAI4H,EAGA,OAFAA,EAAWh/B,SACX4+B,GAAgB1Q,IACT,IAef+Q,EAAQ,SAAU/Q,EAAQgJ,EAAOgI,EAAalgC,QAC1B,IAAhBkgC,IAA0BA,GAAc,GAC5C,IAAIpJ,GAAe,EAAGxhB,EAAgCsgB,IAAIsC,EAAME,gBAEhE,GAAItB,IAAiBoJ,GAA0D,eAA3CpJ,EAAap+B,aAAa,aAA+B,CACzF,GAAKynC,GAAOrJ,EAAa9f,YAAc8f,EAAagE,wBAChDsF,GAAYtJ,EAAa9f,WACzB,OAMJ,IAHA,IAAIgiB,GAAc,EAAGvjB,EAAiCkiB,IAAIb,EAAc5H,EAAOyN,GAAG9kC,QAASqgC,GAAO7oB,MAE9FgxB,GAAa,EACRhmC,EAAI2+B,EAAc,EAE3B3+B,EAAIy8B,EAAatV,YAAYzD,OAAO,EAAGib,GAAajqB,YAAY,MAAO1U,IACnE,GAA2C,MAAvCy8B,EAAatV,YAAYjb,OAAOlM,IAEO,OAAvCy8B,EAAatV,YAAYjb,OAAOlM,GAAa,CAC7CgmC,GAAa,EACb,MAGY,IAAhBrH,IACAqH,GAAa,GAGjB,IAAIC,GAAW,EACf,IAASjmC,EAAI2+B,EAAc,EAAG3+B,EAAIy8B,EAAatV,YAAYlnB,OAAQD,IAC/D,GAA2C,MAAvCy8B,EAAatV,YAAYjb,OAAOlM,IAAqD,OAAvCy8B,EAAatV,YAAYjb,OAAOlM,GAAa,CAC3FimC,GAAW,EACX,MAGR,GAAID,EACA,OAEJ,GAAIC,KACoB,EAAGhrB,EAAsCiJ,IAAI2Z,EAAME,eAAgB,qBAIlF,CACD,IAAImI,EAAerI,EAAME,eAAe4C,gBAKxC,YAJIuF,GAA0C,IAA1BA,EAAa5J,UAAkB4J,EAAaz/B,UAAU4f,SAAS,4BAE/E6f,EAAaz/B,UAAUE,OAAO,6BAc9C,GARAkuB,EAAOyN,GAAG9kC,QAAQsc,iBAAiB,4BAA4Btd,SAAQ,SAAU2f,GAC7EA,EAAK1V,UAAUE,OAAO,8BAErB81B,IAEDA,EAAe5H,EAAOyN,GAAG9kC,UAGxBi/B,EAAan2B,cAAc,OAAQ,CACpC,IAAI6/B,GAAuB,EAAGlrB,EAAsCiJ,IAAI2Z,EAAME,eAAgB,sBAC1FoI,EACAA,EAAqB1F,uBAAuBpW,mBAAmB,YAAa,SAG5EwT,EAAM+C,WAAWljC,SAASC,cAAc,QAIhD8+B,EAAa3iB,iBAAiB,WAAWtd,SAAQ,SAAU2f,GACvDA,EAAK/d,gBAAgB,YAEsB,wBAA3Cq+B,EAAap+B,aAAa,eAE1Bo+B,EAAe5H,EAAOyN,GAAG9kC,SAE7B,IAiFI4oC,EAjFAC,EAAc5J,EAAa5G,YAAYhB,EAAOyN,GAAG9kC,SACjD8oC,GAAkB,EAAGrrB,EAAsCqgB,IAAImB,EAAc,YAAa,mBAC1FhqB,EAAO,GACX,GAAK4zB,EAsDD5zB,EAAOgqB,EAAa9f,cAtDN,CACd,IAAI4pB,GAAoB,EAAGzJ,EAA0Cd,GAAG6B,EAAME,eAAgB,cAE1F3B,GAAiB,EAAGnhB,EAA2BogB,IAAIwC,EAAME,gBAa7D,GAZI3B,IACAK,EAAeL,GAGfmK,KAAuBnK,GAAmBA,IAAmBmK,EAAkBlgB,SAAS+V,MACxFK,EAAe8J,GAGfD,IACA7J,EAAe6J,GAEnB7zB,EAAOgqB,EAAalT,UACS,OAAzBkT,EAAa1R,SAA6C,OAAzB0R,EAAa1R,QAAkB,CAEhE,IAAIyb,EAAkB/J,EAAagE,uBAC/BgG,EAAkBhK,EAAa7G,oBAC/B4Q,GAAgD,OAA5BA,EAAgBzb,SAAgD,OAA5Byb,EAAgBzb,UACxEtY,EAAO+zB,EAAgBjd,UAAY9W,EACnC+zB,EAAgB7/B,WAEhB8/B,GAAgD,OAA5BA,EAAgB1b,SAAgD,OAA5B0b,EAAgB1b,UACxEtY,GAAcg0B,EAAgBld,UAC9Bkd,EAAgB9/B,UAGpB8L,EAAOA,EAAKK,QAAQ,uBAAwB,kCAEvC2pB,EAAagE,wBACoF,KAAtGhE,EAAagE,uBAAuBtZ,YAAYrU,QAAQgI,EAA8B+D,EAAEmG,KAAM,KAC9Frf,GAA6B,oBAApBA,EAAM+gC,YAEfj0B,EAAOgqB,EAAagE,uBAAuBlX,UAAY9W,EACvDgqB,EAAagE,uBAAuB95B,UAGxCkuB,EAAOyN,GAAG9kC,QAAQsc,iBAAiB,qCAAqCtd,SAAQ,SAAU2f,GAClFA,IAASsgB,EAAa5G,YAAY1Z,KAClC1J,GAAQ0J,EAAKoN,UACbpN,EAAKxV,aAIbkuB,EAAOyN,GAAG9kC,QAAQsc,iBAAiB,iCAAiCtd,SAAQ,SAAU2f,GAC9EA,IAASsgB,EAAa5G,YAAY1Z,KAClC1J,GAAQ0J,EAAKoN,UACbpN,EAAKxV,aAUjB,GAHAjB,EAAI,kBAAmB+M,EAAM,WAAYoiB,EAAOzzB,QAAQulC,UACxDl0B,EAAOoiB,EAAO5T,KAAKqU,gBAAgB7iB,GACnC/M,EAAI,kBAAmB+M,EAAM,SAAUoiB,EAAOzzB,QAAQulC,UAClDN,EACA5J,EAAa9f,UAAYlK,OAKzB,GAFAgqB,EAAalT,UAAY9W,EAErB6zB,EAAiB,CACjB,IAAIM,GAAsB,EAAG3rB,EAAsCqgB,IAAIzG,EAAOyN,GAAG9kC,QAAQ8I,cAAc,OAAQ,YAAa,iBAC5H,GAAIsgC,EAAqB,CACrB,IAAIC,EAAmBD,EAAoBzf,YACvC2f,EAASD,EAAiBl+B,UAAU,EAAGk+B,EAAiB9hC,QAAQ,OAChEgiC,EAAqBlS,EAAOyN,GAAG9kC,QAAQ8I,cAAc,wDAA6DwgC,EAAS,MAC3HC,GACAA,EAAmBzoC,aAAa,aAAcuoC,EAAiBnjB,OAAOojB,EAAO7mC,OAAS,GAAGmd,OAAOsG,OAAO,EAAG,MAO1H,IAcIsjB,EAdAC,EAAwBpS,EAAOyN,GAAG9kC,QAAQsc,iBAAiB,qCAC/DmtB,EAAsBzqC,SAAQ,SAAU2f,EAAMrX,GAC5B,IAAVA,EACAshC,EAAyBjqB,GAGzBiqB,EAAuB/b,mBAAmB,YAAalO,EAAKQ,WAC5DR,EAAKxV,aAGTsgC,EAAsBhnC,OAAS,GAC/B40B,EAAOyN,GAAG9kC,QAAQse,sBAAsB,YAAamrB,EAAsB,IAI/E,IAAIC,EAAqBrS,EAAOyN,GAAG9kC,QAAQsc,iBAAiB,iCAC5DotB,EAAmB1qC,SAAQ,SAAU2f,EAAMrX,GACzB,IAAVA,EACAkiC,EAAuB7qB,GAGvB6qB,EAAqB3c,mBAAmB,YAAalO,EAAKQ,WAC1DR,EAAKxV,aAGTugC,EAAmBjnC,OAAS,GAC5B40B,EAAOyN,GAAG9kC,QAAQse,sBAAsB,YAAaorB,EAAmB,KAE5E,EAAG9rB,EAA6BoiB,IAAI3I,EAAOyN,GAAG9kC,QAASqgC,GACvDhJ,EAAOyN,GAAG9kC,QAAQsc,iBAAiB,wCAAwCtd,SAAQ,SAAU2f,GACzF4oB,EAAkB5oB,EAAM0Y,MAE5BqQ,EAAUrQ,GACVsS,GAA2BtS,EAAQ,CAC/BuS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,KAOjBC,EAAc,SAAUC,EAAQ7hC,GAChC,GAAe,KAAX6hC,EACA,OAAO,EAGX,IAA6B,IAAzBA,EAAOziC,QAAQ,OAAwC,IAAzByiC,EAAOziC,QAAQ,OAAwC,IAAzByiC,EAAOziC,QAAQ,KAC3E,SAAK,EAAG2+B,EAA0B7J,IAAIl0B,IAAWA,EAAM8hC,QAAW9hC,EAAM+hC,UAAY/hC,EAAMijB,OAAS4e,GAMvG,GAAe,SAAXA,EACA,SAAK,EAAG9D,EAA0B7J,IAAIl0B,IAAWA,EAAM8hC,SAAU9hC,EAAM+hC,UAA2B,QAAf/hC,EAAMijB,MAK7F,IAAI+e,EAAUH,EAAOnhC,MAAM,IAC3B,GAAImhC,EAAOxM,WAAW,KAAM,CAExB,IAAI4M,EAA6B,IAAnBD,EAAQ1nC,OAAe0nC,EAAQ,GAAKA,EAAQ,GAC1D,SAAwB,IAAnBA,EAAQ1nC,SAAe,EAAGyjC,EAA0B7J,IAAIl0B,IAAU,EAAG+9B,EAA0B7J,IAAIl0B,MAAWA,EAAM8hC,QAAW9hC,EAAM+hC,UACtI/hC,EAAMijB,QAAU,UAAUmS,KAAK6M,GAAW,QAAU,OAASA,GAMtD,WAAXJ,IACAG,EAAU,CAAC,IAAK,UAEpB,IAAIE,EAAWF,EAAQ1nC,OAAS,GAAqB,MAAf0nC,EAAQ,GAC1CnpC,EAAOqpC,EAAWF,EAAQ,GAAKA,EAAQ,GAS3C,OARIE,KAAa,EAAGnE,EAA6BhK,OAAU,MAAMqB,KAAKd,UAAUQ,YAChE,MAARj8B,EACAA,EAAM,IAEO,MAARA,IACLA,EAAM,UAGV,EAAGklC,EAA0B7J,IAAIl0B,IAAUA,EAAMnH,IAAI47B,gBAAkB57B,EAAI47B,eAAkBz0B,EAAM8hC,WAC7FI,IAAaliC,EAAM+hC,UAAcG,GAAYliC,EAAM+hC,YA+C7DI,EAAe,SAAUjK,EAAOhJ,GAChCA,EAAOyN,GAAG9kC,QAAQsc,iBAAiB,4BAA4Btd,SAAQ,SAAU2f,GAC7EA,EAAK1V,UAAUE,OAAO,8BAE1B,IAAIohC,GAAc,EAAG9sB,EAAyCkgB,IAAI0C,EAAME,eAAgB,mBACpFiK,GAAkBnK,EAAMoK,YAAa,EAAGhtB,EAAyCkgB,IAAI0C,EAAMiB,aAAc,mBAE7G,GAAKjB,EAAMoK,WAAeF,GAAeA,IAAgBC,EAAzD,CAGID,IACAA,EAAYthC,UAAUlG,IAAI,2BAC1BwnC,EAAYthC,UAAUE,OAAO,4BAE7B,EAAGyU,EAAiC6B,IAAI4gB,IAE5C,IAAIqK,EAtDS,SAAUrK,GACvB,IAAIE,EAAiBF,EAAME,eAC3B,GAAgC,IAA5BA,EAAezB,UAAkByB,EAAeoK,UAAUloC,SAAW49B,EAAMc,YAC3E,OAAO,EAGX,IADA,IAAIuJ,EAAWnK,EAAemC,YACvBgI,GAAqC,KAAzBA,EAAS/gB,aACxB+gB,EAAWA,EAAShI,YAExB,IAAKgI,EAAU,CAEX,IAAIE,GAAgB,EAAGntB,EAAsCiJ,IAAI6Z,EAAgB,qBACjF,GAAIqK,IAAkBA,EAAclI,YAAa,CAC7C,IAAImI,EAAiBtK,EAAe3X,cAAcA,cAAc8Z,YAChE,GAAImI,GAA8C,IAA5BA,EAAe/L,UACjC+L,EAAe5hC,UAAU4f,SAAS,mBAClC,OAAOgiB,EAGf,OAAO,EAEN,SAAIH,GAAkC,IAAtBA,EAAS5L,WAAkB4L,EAASzhC,UAAU4f,SAAS,oBACvE6hB,EAAS7pC,aAAa,gBAEhB6pC,EA8BII,CAAWzK,GAC1B,GAAIqK,EAGA,OAFAA,EAASzhC,UAAUlG,IAAI,gCACvB2nC,EAASzhC,UAAUE,OAAO,2BAG9B,IAAIu/B,EAhCa,SAAUrI,GAC3B,IAAIE,EAAiBF,EAAME,eACvBmI,EAAenI,EAAe4C,gBAClC,QAAgC,IAA5B5C,EAAezB,UAAwC,IAAtBuB,EAAMc,cAAqBuH,GAA0C,IAA1BA,EAAa5J,WAEzF4J,EAAaz/B,UAAU4f,SAAS,oBAAuB6f,EAAa7nC,aAAa,gBAC1E6nC,EA0BQqC,CAAe1K,GAClC,OAAIqI,GACAA,EAAaz/B,UAAUlG,IAAI,gCAC3B2lC,EAAaz/B,UAAUE,OAAO,iCAFlC,IAmNA2d,EAAgB3L,EAAoB,KAMpC6vB,EAAa,SAAU3T,EAAQlvB,GAC/B,IAAIgd,EACAkb,EAAQ1gB,eAAeG,WAAW,GAAGC,aACrCwgB,EAAiBF,EAAME,eACW,IAAlCF,EAAME,eAAezB,UAAmD,QAAjCuB,EAAME,eAAehT,UAC5DgT,EAAiBF,EAAME,eAAep7B,WAAWk7B,EAAMc,YAAc,IAEzE,IAAIlC,GAAe,EAAGxhB,EAAsCqgB,IAAIyC,EAAgB,aAAc,KAE9F,GAAItB,GAAgB92B,IAA8B,0BAApBA,EAAM+gC,WAAwD,MAAf/gC,EAAM5H,MAAe,CAI9F,IAFA,IAAI4gC,GAAc,EAAGvjB,EAAiCkiB,IAAIb,EAAc5H,EAAOqN,GAAG1kC,QAASqgC,GAAO7oB,MAC9FgxB,GAAa,EACRhmC,EAAI2+B,EAAc,EAE3B3+B,EAAIy8B,EAAatV,YAAYzD,OAAO,EAAGib,GAAajqB,YAAY,MAAO1U,IACnE,GAA2C,MAAvCy8B,EAAatV,YAAYjb,OAAOlM,IAEO,OAAvCy8B,EAAatV,YAAYjb,OAAOlM,GAAa,CAC7CgmC,GAAa,EACb,MAMR,GAHoB,IAAhBrH,IACAqH,GAAa,GAEbA,EAEA,YADAyC,GAAmB5T,GAGvB,GAAwB,0BAApBlvB,EAAM+gC,UAAuC,CAE7C,IAAIgC,GAAyB,EAAGztB,EAAsCqgB,IAAIyC,EAAgB,YAAa,4BACnG,EAAG9iB,EAAsCqgB,IAAIyC,EAAgB,YAAa,2BAC9E,GAAI2K,EAAwB,CAEpB,IAQIC,EATR,GAAyD,4BAArDD,EAAuBrqC,aAAa,eAChCsqC,EAAoBC,GAAc7K,EAAgB,2BAIlD,OAFA4K,EAAkBxhB,YAAcuhB,EAAuBvhB,iBACvDshB,GAAmB5T,GAI3B,GAAyD,2BAArD6T,EAAuBrqC,aAAa,eAChCsqC,EAAoBC,GAAc7K,EAAgB,2BAA2B,IAI7E,OAFA4K,EAAkBxhB,YAAcuhB,EAAuBvhB,iBACvDshB,GAAmB5T,GAM/B,IAAIgU,GAAyB,EAAG5tB,EAAsCqgB,IAAIyC,EAAgB,YAAa,0BACvG,GAAI8K,EAAwB,CACxB,IAAIC,EAAwBD,EAAuBjT,mBAAmBA,mBAKtE,YAJIkT,GAA6E,4BAApDA,EAAsBzqC,aAAa,eAC5DyqC,EAAsBniC,SACtB8hC,GAAmB5T,KAI3B4H,EAAa3iB,iBAAiB,wCAAwCtd,SAAQ,SAAU2f,GACpD,IAA5BA,EAAKgL,YAAYlnB,QACjBkc,EAAKxV,YAGb81B,EAAa3iB,iBAAiB,yCAAyCtd,SAAQ,SAAU2f,GACrD,IAA5BA,EAAKgL,YAAYlnB,QACjBkc,EAAKxV,YAIb,IAAIwd,GAAiB,EAAGlJ,EAAsCqgB,IAAIyC,EAAgB,YAAa,kBAC/F,GAAI5Z,IAA+D,IAA7CA,EAAegD,YAAYpiB,QAAQ,KAErD,YADA0jC,GAAmB5T,GAK3B,IAAoB,MAAflvB,EAAM5H,MAAoC,0BAApB4H,EAAM+gC,cAC5B,EAAGzrB,EAAsCqgB,IAAIyC,EAAgB,YAAa,aACpE,EAAG9iB,EAAsCqgB,IAAIyC,EAAgB,YAAa,eAC1E,EAAG9iB,EAAsCqgB,IAAIyC,EAAgB,YAAa,iBAC1E,EAAG9iB,EAAsCqgB,IAAIyC,EAAgB,YAAa,sBAGjF,YADA0K,GAAmB5T,GAI3B,GAAI4H,GAAyD,OAAzCA,EAAatV,YAAYse,YAEzCgD,GAAmB5T,OAFvB,CAKK4H,IACDA,EAAe5H,EAAOqN,GAAG1kC,SAEqF,yBAAnE,QAAzCmlB,EAAK8Z,EAAa9G,yBAAsC,IAAPhT,OAAgB,EAASA,EAAGtkB,aAAa,gBAE5Fo+B,EAAe5H,EAAOqN,GAAG1kC,UAEzB,EAAGyd,EAAsCqgB,IAAIyC,EAAgB,YAAa,oBAE1EtB,EAAe5H,EAAOqN,GAAG1kC,UAGyB,IAAlDi/B,EAAatV,YAAYpiB,QAAQywB,KAAKuT,QAEtClL,EAAM+C,WAAWljC,SAASM,eAAew3B,KAAKuT,QAGlDtM,EAAa3iB,iBAAiB,WAAWtd,SAAQ,SAAU2f,GACvDA,EAAK/d,gBAAgB,YAEzBq+B,EAAa3iB,iBAAiB,QAAQtd,SAAQ,SAAU2f,GACpDA,EAAKoN,UAAYpN,EAAKQ,aAE1B,IAsCIypB,EAtCA3zB,EAAOgqB,EAAatV,YACpB6hB,EAAcvM,EAAa5G,YAAYhB,EAAOqN,GAAG1kC,SACjDwrC,EACAv2B,EAAOgqB,EAAatV,aAIhBsV,EAAagE,yBACbhuB,EAAOgqB,EAAagE,uBAAuBtZ,YAAc1U,EACzDgqB,EAAagE,uBAAuB95B,UAEpC81B,EAAagE,wBAAoD,IAA1BhuB,EAAK1N,QAAQ,WAEpD0N,EAAOgqB,EAAagE,uBAAuBtZ,YAAc1U,EACzDgqB,EAAagE,uBAAuB95B,UAGxCkuB,EAAOqN,GAAG1kC,QAAQsc,iBAAiB,qCAAqCtd,SAAQ,SAAU2f,EAAMrX,GAC9E,IAAVA,GAAeqX,IAASsgB,EAAa5G,YAAY1Z,EAAKiK,iBACtD3T,GAAQ,KAAO0J,EAAKiK,cAAce,YAClChL,EAAKiK,cAAczf,aAI3BkuB,EAAOqN,GAAG1kC,QAAQsc,iBAAiB,gCAAgCtd,SAAQ,SAAU2f,EAAMrX,GACzE,IAAVA,GAAeqX,IAASsgB,EAAa5G,YAAY1Z,EAAKiK,iBACtD3T,GAAQ,KAAO0J,EAAKiK,cAAce,YAClChL,EAAKiK,cAAczf,cAI/B8L,EAAOw2B,GAAuBx2B,EAAMoiB,GAChCmU,EACAvM,EAAa9f,UAAYlK,EAGzBgqB,EAAalT,UAAY9W,EAG7B,IAeIu0B,EAfAC,EAAwBpS,EAAOqN,GAAG1kC,QAAQsc,iBAAiB,qCAC/DmtB,EAAsBzqC,SAAQ,SAAU2f,EAAMrX,GAC5B,IAAVA,EACAshC,EAAyBjqB,EAAKiK,eAG9BggB,EAAuBlF,iBAAiBv6B,SACxCy/B,EAAuB/b,mBAAmB,YAAa,GAAKlO,EAAKiK,cAAczJ,WAC/ER,EAAKiK,cAAczf,aAGvBsgC,EAAsBhnC,OAAS,GAC/B40B,EAAOqN,GAAG1kC,QAAQse,sBAAsB,YAAasqB,GAIzD,IAAIc,EAAqBrS,EAAOqN,GAAG1kC,QAAQsc,iBAAiB,gCAC5DotB,EAAmB1qC,SAAQ,SAAU2f,EAAMrX,GACzB,IAAVA,EACAkiC,EAAuB7qB,EAAKiK,eAG5B4gB,EAAqB9F,iBAAiBv6B,SACtCqgC,EAAqB3c,mBAAmB,YAAa,GAAKlO,EAAKiK,cAAczJ,WAC7ER,EAAKiK,cAAczf,aAGvBugC,EAAmBjnC,OAAS,GAC5B40B,EAAOqN,GAAG1kC,QAAQse,sBAAsB,YAAakrB,IAEzD,EAAG5rB,EAA6BoiB,IAAI3I,EAAOqN,GAAG1kC,QAASqgC,GACvDqL,GAAarU,GACb4T,GAAmB5T,EAAQ,CACvBuS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,MAyMjBvsB,EAAkBpC,EAAoB,KAEtCwwB,EAAW,SAAUtU,GACQ,SAAzBA,EAAOzzB,QAAQsf,MACfmU,EAAOr3B,QAAQiJ,UAAUlG,IAAI,gBAG7Bs0B,EAAOr3B,QAAQiJ,UAAUE,OAAO,iBAgFpCyiC,EAAa,SAAUvU,GACvB,IAAIwU,EAAa1vB,OAAOme,YAAchd,EAAsC+D,EAAEqG,aAAe,GAAK,GAClG,GAA2D,SAAvD2P,EAAOuN,QAAQ5kC,QAAQ4oB,cAAc1nB,MAAM2e,QAAoB,CAC/D,IAAI7H,GAAWqf,EAAOuN,QAAQ5kC,QAAQ4oB,cAAc1M,YAC9Cmb,EAAOzzB,QAAQyjB,QAAQykB,UAAY,EACzCzU,EAAOuN,QAAQ5kC,QAAQkB,MAAM8W,QAAU,QAAUvK,KAAK2E,IAAIy5B,EAAY7zB,GAAW,KAE/B,SAAlDqf,EAAOyN,GAAG9kC,QAAQ4oB,cAAc1nB,MAAM2e,UAClC7H,GAAWqf,EAAOyN,GAAG9kC,QAAQ4oB,cAAc1M,YACzCmb,EAAOzzB,QAAQyjB,QAAQykB,UAAY,EACzCzU,EAAOyN,GAAG9kC,QAAQkB,MAAM8W,QAAU,QAAUvK,KAAK2E,IAAIy5B,EAAY7zB,GAAW,MAEnC,UAAzCqf,EAAOhQ,QAAQrnB,QAAQkB,MAAM2e,SAA8C,OAAvBwX,EAAOO,cAC3DP,EAAOqB,QAAQ14B,QAAQkB,MAAM6qC,YAAct+B,KAAK2E,IAAI,EAAGkE,SAAS+gB,EAAOA,EAAOO,aAAa53B,QAAQkB,MAAM6qC,aAAe,IAAK,KACpF,SAApC1U,EAAOzzB,QAAQ+jC,QAAQnR,SAAsBa,EAAOsQ,QAAQ3nC,QAAQgsC,YAAc,IAAM,OAGjGC,EAAwB,SAAU5U,GAClC,GAAKA,EAAOzzB,QAAQsoC,eAApB,CAGA,IAAI7vB,EAASF,OAAOC,YACiB,iBAA1Bib,EAAOzzB,QAAQyY,SACtBA,EAASgb,EAAOzzB,QAAQyY,OACgB,iBAA7Bgb,EAAOzzB,QAAQuoC,YACtB9vB,EAAS5O,KAAK2E,IAAIiK,EAAQgb,EAAOzzB,QAAQuoC,YAE7C9vB,EAAS5O,KAAK6C,IAAI6L,OAAOC,YAAaC,IAEtCgb,EAAOr3B,QAAQiJ,UAAU4f,SAAS,wBAClCxM,EAASF,OAAOC,aAGpBib,EAAOA,EAAOO,aAAa53B,QAAQkB,MAAMC,YAAY,mBAAqBkb,EAASgb,EAAOqB,QAAQ14B,QAAQ24B,cAAgB,EAAK,QAE/HyT,EAAc,SAAU/U,EAAQF,GAChC8U,EAAsB5U,GACtBlb,OAAO9T,iBAAiB,UAAU,WAC9BujC,EAAWvU,GACX4U,EAAsB5U,MAG1B,IAAIgV,GAAY,EAAGnG,EAAsC/J,OAASW,aAAawP,QAAQjV,EAAOzzB,QAAQ2oC,MAAMtmB,IAY5G,OAXKoR,EAAOzzB,QAAQ2oC,MAAMtpB,QAAWopB,IAC7BhV,EAAOzzB,QAAQjD,MACf0rC,EAAYhV,EAAOzzB,QAAQjD,MAEtB02B,EAAOmV,kBACZH,EAAYhV,EAAO5T,KAAKgpB,QAAQpV,EAAOmV,mBAEjCnV,EAAOzzB,QAAQ2oC,MAAMtpB,SAC3BopB,EAAY,KAGbA,GAAa,IASpBK,EAAqB,SAAUrV,GAC/BsV,aAAatV,EAAOA,EAAOO,aAAagV,oBACxCvV,EAAOA,EAAOO,aAAagV,mBAAqBzwB,OAAOjT,YAAW,WAC9D,GAA2E,UAAvEmuB,EAAOA,EAAOO,aAAa53B,QAAQa,aAAa,qBAG/C,EAAG+c,EAA8BiiB,IAAIxI,EAAOA,EAAOO,aAAa53B,SAArE,CAGAmmC,EAAqB9O,EAAOqB,QAAQoO,SAAUxpB,EAAuC+D,EAAEuG,eACvF2e,EAAclP,EAAOqB,QAAQoO,SAAUxpB,EAAuC+D,EAAEuG,eAChF,IAAIyY,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAC7CwV,EAAcxM,EAAME,eACc,IAAlCF,EAAME,eAAezB,WACrB+N,EAAcxM,EAAME,eAAe3X,eAEnCikB,EAAY5jC,UAAU4f,SAAS,kBAC/BgkB,EAAcA,EAAY1nC,WAAWk7B,EAAMc,eAEH,OAAvB9J,EAAOO,aACxB,EAAGna,EAAsCqgB,IAAI+O,EAAa,YAAa,YAAa,EAAGvN,EAA+C9H,GAAGqV,KAEzIvG,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,cAEN,OAAvBzP,EAAOO,aAAuB,EAAGna,EAAsCqgB,IAAI+O,EAAa,YAAa,eACpH,EAAGpvB,EAAqCgJ,IAAIomB,EAAa,gBAEzDvG,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,WAE5B,EAAGrpB,EAAsCqgB,IAAI+O,EAAa,YAAa,WAEvFvG,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,UAEhC,EAAGrpB,EAAsCqgB,IAAI+O,EAAa,YAAa,OAEnFvG,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,YAEjC,EAAGrpB,EAAsCqgB,IAAI+O,EAAa,YAAa,MAElFvG,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,YAEjC,EAAGrpB,EAAsCqgB,IAAI+O,EAAa,YAAa,MAElFvG,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,SAEhD,IAAIgG,GAAY,EAAGrvB,EAAqCgJ,IAAIomB,EAAa,MACrEC,GACIA,EAAU7jC,UAAU4f,SAAS,eAC7Byd,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,UAEH,OAApCgG,EAAUlkB,cAAc2E,QAC7B+Y,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,iBAEH,OAApCgG,EAAUlkB,cAAc2E,SAC7B+Y,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,SAEhDP,EAAclP,EAAOqB,QAAQoO,SAAU,CAAC,UAAW,YAGnDN,EAAenP,EAAOqB,QAAQoO,SAAU,CAAC,UAAW,YAEjC,EAAGrpB,EAAsCqgB,IAAI+O,EAAa,YAAa,gBAE1FrG,EAAenP,EAAOqB,QAAQoO,SAAU,CAAC,WAAY,OAAQ,SAAU,SAAU,OAAQ,QACrF,OAAQ,eAAgB,QAAS,OAAQ,cAAe,SAAU,OAAQ,QAAS,WACvFR,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,WAE9B,EAAGrpB,EAAsCqgB,IAAI+O,EAAa,YAAa,UAErFrG,EAAenP,EAAOqB,QAAQoO,SAAU,CAAC,WAAY,OAAQ,SAAU,SAAU,OAAQ,QACrF,OAAQ,eAAgB,QAAS,OAAQ,SAAU,OAAQ,QAAS,WACxER,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,kBAE7B,EAAGrpB,EAAsCqgB,IAAI+O,EAAa,YAAa,UAEtFrG,EAAenP,EAAOqB,QAAQoO,SAAU,CAAC,WAAY,OAAQ,eAAgB,QAAS,OAClF,QAAS,OAAQ,aAE1B,MAMHiG,EAAmB,SAAU1V,EAAQzzB,QACrB,IAAZA,IAAsBA,EAAU,CAChCgmC,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEblmC,EAAQimC,YACRxS,EAAO2P,KAAKY,OAAOvQ,GAEvBsV,aAAatV,EAAOuN,QAAQoI,sBAC5B3V,EAAOuN,QAAQoI,qBAAuB7wB,OAAOjT,YAAW,WACpD,IAAImuB,EAAOuN,QAAQqI,cAAnB,CAGA,IAAI3sC,EAAOmkC,EAAYpN,GACa,mBAAzBA,EAAOzzB,QAAQwkC,OAAwBxkC,EAAQkmC,aACtDzS,EAAOzzB,QAAQwkC,MAAM9nC,GAErB+2B,EAAOzzB,QAAQspC,QAAQjqB,QACvBoU,EAAO6V,QAAQtF,OAAOvQ,EAAQ/2B,GAE9B+2B,EAAOzzB,QAAQ2oC,MAAMtpB,SAAU,EAAGijB,EAAsC/J,QACxEW,aAAaqQ,QAAQ9V,EAAOzzB,QAAQ2oC,MAAMtmB,GAAI3lB,GAC1C+2B,EAAOzzB,QAAQ2oC,MAAMhmB,OACrB8Q,EAAOzzB,QAAQ2oC,MAAMhmB,MAAMjmB,IAG/B+2B,EAAO6N,UACP7N,EAAO6N,SAASF,aAAa3N,GAE7BzzB,EAAQgmC,oBACRvS,EAAO+V,KAAKC,eAAehW,MAEhCA,EAAOzzB,QAAQ0pC,YA8BlBC,EAAc,SAAU/tC,GAGxB,IAFA,IAAIyV,EAAO,GACPy1B,EAAWlrC,EAAKkjC,YACbgI,GACuB,IAAtBA,EAAS5L,SACT7pB,GAAQy1B,EAAS/gB,YAGjB1U,GAAQy1B,EAAS3e,UAErB2e,EAAWA,EAAShI,YAExB,OAAOztB,GAEPu4B,EAAkB,SAAUhuC,GAG5B,IAFA,IAAIyV,EAAO,GACPyzB,EAAelpC,EAAK2jC,gBACjBuF,GAECzzB,EAD0B,IAA1ByzB,EAAa5J,SACN4J,EAAa/e,YAAc1U,EAG3ByzB,EAAa3c,UAAY9W,EAEpCyzB,EAAeA,EAAavF,gBAEhC,OAAOluB,GA2BPw4B,EAAY,SAAUpW,EAAQgJ,GAE9Bp7B,MAAMC,KAAKmyB,EAAOuN,QAAQ5kC,QAAQmF,YAAYuoC,MAAK,SAAUluC,GACzD,GAAsB,IAAlBA,EAAKs/B,SAAgB,CACrB,IAAI6O,EAAWztC,SAASC,cAAc,KACtCwtC,EAAS7sC,aAAa,aAAc,KACpC6sC,EAAShkB,YAAcnqB,EAAKmqB,YAE5B,IAAIikB,EAAqD,IAAlCvN,EAAME,eAAezB,SAAiBuB,EAAMc,YAAc3hC,EAAKmqB,YAAYlnB,OAMlG,OALAjD,EAAKM,WAAWF,aAAa+tC,EAAUnuC,GACvCA,EAAK2J,SACLk3B,EAAMM,SAASgN,EAASE,WAAYpgC,KAAK6C,IAAIq9B,EAASE,WAAWlkB,YAAYlnB,OAAQmrC,IACrFvN,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,IACjC,EAEN,IAAK7gC,EAAKqB,aAAa,cAuBxB,MAtBqB,MAAjBrB,EAAK+tB,QACL/tB,EAAK2J,UAGgB,QAAjB3J,EAAK+tB,SACL8S,EAAM+C,WAAWljC,SAASC,cAAc,QAExCX,EAAKusB,UAAY,qBAAyBvsB,EAAK2f,UAAY,QAGtC,OAAjB3f,EAAK+tB,QAEL/tB,EAAKusB,UAAY,qBAAyBvsB,EAAKusB,UAAY,aAG3DsU,EAAM+C,WAAWljC,SAASC,cAAc,QACxCX,EAAKusB,UAAY,qBAAyBvsB,EAAKusB,UAAY,SAGnE,EAAGnO,EAA6BoiB,IAAI3I,EAAOuN,QAAQ5kC,QAASqgC,GAC5DA,EAAQ1gB,eAAeG,WAAW,KAE/B,MASfguB,EAAa,SAAUzW,EAAQ9J,GAC/B,IAAI8S,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAC7C4H,GAAe,EAAGxhB,EAAgCsgB,IAAIsC,EAAME,gBAC3DtB,IACDA,EAAeoB,EAAME,eAAep7B,WAAWk7B,EAAMc,cAEpDlC,GAA2D,IAA3C5H,EAAOuN,QAAQ5kC,QAAQoF,SAAS3C,SACjDw8B,EAAe5H,EAAOuN,QAAQ5kC,SAE9Bi/B,IAAiBA,EAAah2B,UAAU4f,SAAS,2BACjDwX,EAAM+C,WAAWljC,SAASC,cAAc,QAEF,UAAlC8+B,EAAa9f,UAAUS,SAEvBqf,EAAa9f,UAAY,aAEA,eAAzB8f,EAAa1R,SAA4B0R,EAAah2B,UAAU4f,SAAS,gBACzEoW,EAAa9f,UAAY,IAAMoO,EAAU,mBAAuB0R,EAAa9f,UAAUS,OAAS,KAAO2N,EAAU,IAGjH0R,EAAalT,UAAY,IAAMwB,EAAU,mBAAuB0R,EAAa9f,UAAUS,OAAS,KAAO2N,EAAU,KAErH,EAAG3P,EAA6BoiB,IAAI3I,EAAOuN,QAAQ5kC,QAASqgC,GAC5DqH,EAAUrQ,KAGd0W,EAAgB,SAAU1W,GAC1B,IAAIgJ,EAAQ1gB,eAAeG,WAAW,GAClCmf,GAAe,EAAGxhB,EAAgCsgB,IAAIsC,EAAME,gBAC3DtB,IACDA,EAAeoB,EAAME,eAAep7B,WAAWk7B,EAAMc,cAErDlC,IACAoB,EAAM+C,WAAWljC,SAASC,cAAc,QACxC8+B,EAAalT,UAAY,qBAAyBkT,EAAa9f,UAAY,QAC3E,EAAGvB,EAA6BoiB,IAAI3I,EAAOuN,QAAQ5kC,QAASqgC,IAEhEhJ,EAAOuN,QAAQqC,QAAQ/lC,MAAM2e,QAAU,QAMvCmuB,GAAW,SAAU9oB,EAAgBmS,EAAQ4W,QAC/B,IAAVA,IAAoBA,GAAQ,GAChC,IAAIC,EAAkBhpB,EAAe+d,uBACjC5C,EAAQ6N,EAAgBzN,cAAcC,cACV,SAA5BwN,EAAgB3gB,SAChB2gB,EAAgBhtC,MAAM2e,QAAU,eAC5BouB,EACA5N,EAAMM,SAASuN,EAAgBL,WAAY,GAG3CxN,EAAM8B,mBAAmB+L,KAI7BA,EAAgBhtC,MAAM2e,QAAU,QAC3BquB,EAAgBL,WAAWA,YAC5BK,EAAgBL,WAAWpuC,YAAYS,SAASM,eAAe,KAEnE6/B,EAAM8B,mBAAmB+L,EAAgBL,aAEzCI,EACA5N,EAAMO,UAAS,GAGfP,EAAMO,UAAS,IAEnB,EAAGhjB,EAAiC6B,IAAI4gB,GACpCnb,EAAeiT,kBAAkBlvB,UAAU4f,SAAS,qBAGxD6iB,GAAarU,IA8Sb8W,GAAqB,SAAU9W,EAAQlvB,GAEvC,GAAI4hC,EAAY,MAAO5hC,GAAQ,CAC3B,IAAIk+B,EAAchP,EAAOuN,QAAQqC,QAAQn+B,cAAc,wBACvD,GAAIu9B,EAGA,OAFAA,EAAY+H,QACZjmC,EAAMwlB,kBACC,IAoBf0gB,GAA0B,SAAUhX,GACpCsV,aAAatV,EAAOuN,QAAQgI,oBAC5BvV,EAAOuN,QAAQgI,mBAAqBzwB,OAAOjT,YAAW,WAClD,GAA+D,UAA3DmuB,EAAOuN,QAAQ5kC,QAAQa,aAAa,qBAGnC,EAAG+c,EAA8BiiB,IAAIxI,EAAOuN,QAAQ5kC,SAAzD,CAGAmmC,EAAqB9O,EAAOqB,QAAQoO,SAAUxpB,EAAuC+D,EAAEuG,eACvF2e,EAAclP,EAAOqB,QAAQoO,SAAUxpB,EAAuC+D,EAAEuG,eAChF,IAAIyY,EAAQ1gB,eAAeG,WAAW,GAClC+sB,EAAcxM,EAAME,eAEpBsM,EADkC,IAAlCxM,EAAME,eAAezB,SACPuB,EAAME,eAAe3X,cAGrBikB,EAAY1nC,WAAWk7B,EAAMc,aAAe0L,EAAY1nC,WAAW1C,OAC3EoqC,EAAY1nC,WAAW1C,OAAS,EAChC49B,EAAMc,aAEhB,IAAImN,GAAmB,EAAG7wB,EAAsCqgB,IAAI+O,EAAa,YAAa,mBAC9F,GAAIyB,EAIA,OAHAjX,EAAOuN,QAAQqC,QAAQ9nB,UAAY,GACnCovB,GAASD,EAAkBjX,QAC3BmX,GAAmBnX,EAAQiX,GAI/B,IAAIxB,GAAY,EAAGrvB,EAAqCgJ,IAAIomB,EAAa,MACrEC,GACIA,EAAU7jC,UAAU4f,SAAS,eAC7Byd,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,UAEH,OAApCgG,EAAUlkB,cAAc2E,QAC7B+Y,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,iBAEH,OAApCgG,EAAUlkB,cAAc2E,SAC7B+Y,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,SAEhDP,EAAclP,EAAOqB,QAAQoO,SAAU,CAAC,UAAW,YAGnDN,EAAenP,EAAOqB,QAAQoO,SAAU,CAAC,UAAW,YAEpD,EAAGrpB,EAAqCgJ,IAAIomB,EAAa,eACzDvG,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,YAE5C,EAAGrpB,EAAqCgJ,IAAIomB,EAAa,OACzD,EAAGpvB,EAAqCgJ,IAAIomB,EAAa,YACzDvG,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,WAE5C,EAAGrpB,EAAqCgJ,IAAIomB,EAAa,OACzD,EAAGpvB,EAAqCgJ,IAAIomB,EAAa,QACzDvG,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,aAE5C,EAAGrpB,EAAqCgJ,IAAIomB,EAAa,YACzD,EAAGpvB,EAAqCgJ,IAAIomB,EAAa,OACzDvG,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,WAGhDzP,EAAOuN,QAAQ5kC,QACVsc,iBAAiB,0BACjBtd,SAAQ,SAAU2f,GACnBA,EAAK1V,UAAUE,OAAO,4BAE1B,IAAIslC,GAAiB,EAAGhxB,EAAsCiJ,IAAImmB,EAAa,kBAC/E,GAAI4B,EAAgB,CAChB,IAAIC,EAAQD,EAAe5tC,aAAa,eAAegI,MAAM,KAC7D,GAAI6lC,EAAMjsC,OAAS,GAAKgsC,EAAe/L,YAAYQ,WAAWuL,EAAerW,oBAAqB,CAC9F,IAAIuW,EAAYF,EAAerW,mBAC1Bv3B,aAAa,eACbgI,MAAM,KACX6lC,EAAMhB,MAAK,SAAUznB,GACjB,GAAI0oB,EAAUppB,SAASU,GAEnB,OADAyoB,EAAQ,CAACzoB,IACF,KAInBoR,EAAOuN,QAAQ5kC,QACVsc,iBAAiB,mBACjBtd,SAAQ,SAAU2f,GACfA,EAAK9d,aAAa,eAAe0G,QAAQmnC,EAAM,KAAO,GACtD/vB,EAAK1V,UAAUlG,IAAI,4BAI/B,IAAIqsB,GAAW,EAAG3R,EAAqCgJ,IAAIomB,EAAa,KACpEzd,GACAkX,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,SAEhD,IAAI8H,GAAe,EAAGnxB,EAAqCgJ,IAAIomB,EAAa,SACxElmB,GAAiB,EAAG2Y,EAA+C9H,GAAGqV,IACtE,EAAGpvB,EAAqCgJ,IAAIomB,EAAa,SACrD,EAAGpvB,EAAqCgJ,IAAIomB,EAAa,QACzDrG,EAAenP,EAAOqB,QAAQoO,SAAU,CACpC,WACA,OACA,SACA,SACA,OACA,QACA,OACA,eACA,QACA,OACA,cACA,SACA,OACA,QACA,WAEJR,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,WAG5CN,EAAenP,EAAOqB,QAAQoO,SAAU,CACpC,WACA,OACA,SACA,SACA,OACA,QACA,OACA,eACA,QACA,OACA,SACA,OACA,QACA,WAEJR,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,iBAG3CngB,GACL6f,EAAenP,EAAOqB,QAAQoO,SAAU,CAAC,SACzCR,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,cAEvC8H,GACLpI,EAAenP,EAAOqB,QAAQoO,SAAU,CAAC,UAG7C,IAAIqB,GAAa,EAAG1qB,EAAsCiJ,IAAImmB,EAAa,cAC3E,GAAI1E,EAIA,OAHA9Q,EAAOuN,QAAQqC,QAAQ9nB,UAAY,GACnCovB,GAASpG,EAAY9Q,QACrBmX,GAAmBnX,EAAQ8Q,GAI/B,IAAIY,GAAoB,EAAGzJ,EAA0Cd,GAAGqO,EAAa,cAiBrF,GAhBI9D,IACA1R,EAAOuN,QAAQqC,QAAQ9nB,UAAY,GACnC0vB,GAAMxO,EAAO0I,EAAmB1R,GAChCyX,GAAQzO,EAAO0I,EAAmB1R,GAClCkX,GAASxF,EAAmB1R,GAC5BmX,GAAmBnX,EAAQ0R,IAG3B+D,IACAzV,EAAOuN,QAAQqC,QAAQ9nB,UAAY,GACnC0vB,GAAMxO,EAAOyM,EAAWzV,GACxByX,GAAQzO,EAAOyM,EAAWzV,GAC1BkX,GAASzB,EAAWzV,GACpBmX,GAAmBnX,EAAQyV,IAG3B8B,EAAc,CACHvX,EAAOzzB,QAAQka,KACZuZ,EAAOzzB,QACrByzB,EAAOuN,QAAQqC,QAAQ9nB,UAAY,GACnC,IAAI4vB,EAAgB,WAChB,IAAIC,EAASJ,EAAaK,KAAKxsC,OAC3BysC,EAAYN,EAAaK,KAAK,GAAGE,MAAM1sC,OACvC2sC,EAAM94B,SAAS+4B,EAAQ1uC,MAAO,KAAOquC,EACrCM,EAASh5B,SAASi5B,EAAS5uC,MAAO,KAAOuuC,EAC7C,GAAIE,IAAQJ,GAAUE,IAAcI,EAApC,CAGA,GAAIJ,IAAcI,EAEd,IADA,IAAIE,EAAaF,EAASJ,EACjB1sC,EAAI,EAAGA,EAAIosC,EAAaK,KAAKxsC,OAAQD,IAC1C,GAAIgtC,EAAa,EACb,IAAK,IAAIniC,EAAI,EAAGA,EAAImiC,EAAYniC,IAClB,IAAN7K,EACAosC,EAAaK,KAAKzsC,GAAGkhC,iBAAiB7W,mBAAmB,WAAY,cAGrE+hB,EAAaK,KAAKzsC,GAAGkhC,iBAAiB7W,mBAAmB,WAAY,mBAK7E,IAAK,IAAIzF,EAAI8nB,EAAY,EAAG9nB,GAAKkoB,EAAQloB,IACrCwnB,EAAaK,KAAKzsC,GAAG2sC,MAAM/nB,GAAGje,SAK9C,GAAI6lC,IAAWI,EAAK,CAChB,IAAIK,EAAUL,EAAMJ,EACpB,GAAIS,EAAU,EAAG,CAEb,IADA,IAAIC,EAAU,OACL9pC,EAAI,EAAGA,EAAI0pC,EAAQ1pC,IACxB8pC,GAAW,aAEf,IAAK,IAAIrqC,EAAI,EAAGA,EAAIoqC,EAASpqC,IACrBupC,EAAa9lC,cAAc,SAC3B8lC,EACK9lC,cAAc,SACd+jB,mBAAmB,YAAa6iB,GAGrCd,EACK9lC,cAAc,SACd+jB,mBAAmB,WAAY6iB,EAAU,cAKtD,IAAS9pC,EAAIopC,EAAS,EAAGppC,GAAKwpC,EAAKxpC,IAC/BgpC,EAAaK,KAAKrpC,GAAGuD,SACY,IAA7BylC,EAAaK,KAAKxsC,QAClBmsC,EAAa9lC,cAAc,SAASK,YAMpDwmC,EAAa,SAAUtoC,GACvBuoC,GAAchB,EAAcvnC,GACf,UAATA,GACAwoC,EAAO5mC,UAAUE,OAAO,wBACxB2mC,EAAS7mC,UAAUE,OAAO,wBAC1B4mC,EAAQ9mC,UAAUlG,IAAI,yBAER,WAATsE,GACLwoC,EAAO5mC,UAAUE,OAAO,wBACxB4mC,EAAQ9mC,UAAUE,OAAO,wBACzB2mC,EAAS7mC,UAAUlG,IAAI,0BAGvB+sC,EAAS7mC,UAAUE,OAAO,wBAC1B4mC,EAAQ9mC,UAAUE,OAAO,wBACzB0mC,EAAO5mC,UAAUlG,IAAI,0BAEzB,EAAG6a,EAAiC6B,IAAI4gB,GACxC0M,EAAiB1V,IAEjB2Y,GAAK,EAAGvyB,EAAqCgJ,IAAIomB,EAAa,MAC9DoD,GAAK,EAAGxyB,EAAqCgJ,IAAIomB,EAAa,MAC9DqD,EAAY,OACZF,EACAE,EAAYF,EAAGnvC,aAAa,UAAY,OAEnCovC,IACLC,EAAYD,EAAGpvC,aAAa,UAAY,UAE5C,IAAIgvC,EAAS3vC,SAASC,cAAc,UACpC0vC,EAAO/uC,aAAa,OAAQ,UAC5B+uC,EAAO/uC,aAAa,aAAcqb,OAAOmJ,WAAW6qB,UAAY,KAAM,EAAGjK,EAAmC5J,IAAI,OAAS,KACzHuT,EAAO/uC,aAAa,YAAa,QACjC+uC,EAAO1wB,UACH,8DACJ0wB,EAAOzxB,UACH,sDACmB,SAAd8xB,EAAuB,wBAA0B,IAC1DL,EAAO/wB,QAAU,WACb6wB,EAAW,SAEf,IAAIG,EAAW5vC,SAASC,cAAc,UACtC2vC,EAAShvC,aAAa,OAAQ,UAC9BgvC,EAAShvC,aAAa,aAAcqb,OAAOmJ,WAAW8qB,YAAc,KAAM,EAAGlK,EAAmC5J,IAAI,OAAS,KAC7HwT,EAAShvC,aAAa,YAAa,UACnCgvC,EAAS3wB,UACL,gEACJ2wB,EAAS1xB,UACL,sDACmB,WAAd8xB,EAAyB,wBAA0B,IAC5DJ,EAAShxB,QAAU,WACf6wB,EAAW,WAEf,IAAII,EAAU7vC,SAASC,cAAc,UACrC4vC,EAAQjvC,aAAa,OAAQ,UAC7BivC,EAAQjvC,aAAa,aAAcqb,OAAOmJ,WAAW+qB,WAAa,KAAM,EAAGnK,EAAmC5J,IAAI,OAAS,KAC3HyT,EAAQjvC,aAAa,YAAa,SAClCivC,EAAQ5wB,UACJ,+DACJ4wB,EAAQ3xB,UACJ,sDACmB,UAAd8xB,EAAwB,wBAA0B,IAC3DH,EAAQjxB,QAAU,WACd6wB,EAAW,UAEf,IAAIW,EAAmBpwC,SAASC,cAAc,UAC9CmwC,EAAiBxvC,aAAa,OAAQ,UACtCwvC,EAAiBxvC,aAAa,aAAcqb,OAAOmJ,WAAWirB,eAAiB,KAAM,EAAGrK,EAAmC5J,IAAI,MAAQ,KACvIgU,EAAiBxvC,aAAa,YAAa,aAC3CwvC,EAAiBnxB,UACb,8DACJmxB,EAAiBlyB,UACb,qDACJkyB,EAAiBxxB,QAAU,WACvB,IAAIyhB,EAAiB5gB,eAAeG,WAAW,GAC1CygB,eACDiQ,GAAc,EAAG/yB,EAAqCgJ,IAAI8Z,EAAgB,QAC1E,EAAG9iB,EAAqCgJ,IAAI8Z,EAAgB,MAC5DiQ,GACAC,GAAUpZ,EAAQgJ,EAAOmQ,IAGjC,IAAIE,EAAoBxwC,SAASC,cAAc,UAC/CuwC,EAAkB5vC,aAAa,OAAQ,UACvC4vC,EAAkB5vC,aAAa,aAAcqb,OAAOmJ,WAAWqrB,eAAiB,KAAM,EAAGzK,EAAmC5J,IAAI,OAAS,KACzIoU,EAAkB5vC,aAAa,YAAa,aAC5C4vC,EAAkBvxB,UACd,+DACJuxB,EAAkBtyB,UACd,qDACJsyB,EAAkB5xB,QAAU,WACxB,IAAIyhB,EAAiB5gB,eAAeG,WAAW,GAC1CygB,eACDiQ,GAAc,EAAG/yB,EAAqCgJ,IAAI8Z,EAAgB,QAC1E,EAAG9iB,EAAqCgJ,IAAI8Z,EAAgB,MAC5DiQ,GACAG,GAAetZ,EAAQgJ,EAAOmQ,IAGtC,IAAII,EAAsB1wC,SAASC,cAAc,UACjDywC,EAAoB9vC,aAAa,OAAQ,UACzC8vC,EAAoB9vC,aAAa,aAAcqb,OAAOmJ,WAAWurB,kBAAoB,KAAM,EAAG3K,EAAmC5J,IAAI,OAAS,KAC9IsU,EAAoB9vC,aAAa,YAAa,gBAC9C8vC,EAAoBzxB,UAChB,iEACJyxB,EAAoBxyB,UAChB,qDACJwyB,EAAoB9xB,QAAU,WAC1B,IAAIyhB,EAAiB5gB,eAAeG,WAAW,GAC1CygB,eACDiQ,GAAc,EAAG/yB,EAAqCgJ,IAAI8Z,EAAgB,QAC1E,EAAG9iB,EAAqCgJ,IAAI8Z,EAAgB,MAC5DiQ,GACAM,GAAazZ,EAAQuX,EAAc4B,IAG3C,IAAIO,EAAuB7wC,SAASC,cAAc,UAClD4wC,EAAqBjwC,aAAa,OAAQ,UAC1CiwC,EAAqBjwC,aAAa,aAAcqb,OAAOmJ,WAAW0rB,iBAAmB,KAAM,EAAG9K,EAAmC5J,IAAI,OAAS,KAC9IyU,EAAqBjwC,aAAa,YAAa,gBAC/CiwC,EAAqB5xB,UACjB,kEACJ4xB,EAAqB3yB,UACjB,qDACJ2yB,EAAqBjyB,QAAU,WAC3B,IAAIyhB,EAAiB5gB,eAAeG,WAAW,GAC1CygB,eACDiQ,GAAc,EAAG/yB,EAAqCgJ,IAAI8Z,EAAgB,QAC1E,EAAG9iB,EAAqCgJ,IAAI8Z,EAAgB,MAC5DiQ,GACAM,GAAazZ,EAAQuX,EAAc4B,EAAa,gBAGxD,IAAIS,EAAmB/wC,SAASC,cAAc,UAC9C8wC,EAAiBnwC,aAAa,OAAQ,UACtCmwC,EAAiBnwC,aAAa,aAAcqb,OAAOmJ,WAAW,cAAgB,KAAM,EAAG4gB,EAAmC5J,IAAI,MAAQ,KACtI2U,EAAiBnwC,aAAa,YAAa,aAC3CmwC,EAAiB9xB,UACb,8DACJ8xB,EAAiB7yB,UACb,qDACJ6yB,EAAiBnyB,QAAU,WACvB,IAAIyhB,EAAiB5gB,eAAeG,WAAW,GAC1CygB,eACDiQ,GAAc,EAAG/yB,EAAqCgJ,IAAI8Z,EAAgB,QAC1E,EAAG9iB,EAAqCgJ,IAAI8Z,EAAgB,MAC5DiQ,GACAU,GAAU7Z,EAAQgJ,EAAOmQ,IAGjC,IAAIW,EAAsBjxC,SAASC,cAAc,UACjDgxC,EAAoBrwC,aAAa,OAAQ,UACzCqwC,EAAoBrwC,aAAa,aAAcqb,OAAOmJ,WAAW,iBAAmB,KAAM,EAAG4gB,EAAmC5J,IAAI,OAAS,KAC7I6U,EAAoBrwC,aAAa,YAAa,gBAC9CqwC,EAAoBhyB,UAChB,iEACJgyB,EAAoB/yB,UAChB,qDACJ+yB,EAAoBryB,QAAU,WAC1B,IAAIyhB,EAAiB5gB,eAAeG,WAAW,GAC1CygB,eACDiQ,GAAc,EAAG/yB,EAAqCgJ,IAAI8Z,EAAgB,QAC1E,EAAG9iB,EAAqCgJ,IAAI8Z,EAAgB,MAC5DiQ,GACAY,GAAa/Z,EAAQgJ,EAAOuO,EAAc4B,KAG9Ca,EAAYnxC,SAASC,cAAc,SAC7BW,aAAa,aAAcqb,OAAOmJ,WAAW8pB,KACvDiC,EAAUjzB,UAAY,yCACtB,IAAIixB,EAAUnvC,SAASC,cAAc,SACrCkxC,EAAU5xC,YAAY4vC,GACtBA,EAAQhoC,KAAO,SACfgoC,EAAQ/+B,IAAM,IACd++B,EAAQjxB,UAAY,eACpBixB,EAAQnuC,MAAMw1B,MAAQ,OACtB2Y,EAAQnuC,MAAMowC,UAAY,SAC1BjC,EAAQvuC,aAAa,cAAeqb,OAAOmJ,WAAW8pB,KACtDC,EAAQ1uC,MAAQiuC,EAAaK,KAAKxsC,OAAOoY,WACzCw0B,EAAQkC,QAAU,WACdxC,KAEJM,EAAQmC,UAAY,SAAUrpC,GAC1B,IAAIA,EAAMspC,YAGV,MAAkB,QAAdtpC,EAAMnH,KACNuuC,EAAS/O,QACT+O,EAASmC,cACTvpC,EAAMwlB,uBAGVwgB,GAAmB9W,EAAQlvB,IAE/B,IAAIwpC,EAAazxC,SAASC,cAAc,QACxCwxC,EAAW7wC,aAAa,aAAcqb,OAAOmJ,WAAWgqB,QACxDqC,EAAWvzB,UAAY,yCACvB,IAAImxB,EAAWrvC,SAASC,cAAc,SACtCwxC,EAAWlyC,YAAY8vC,GACvBA,EAASloC,KAAO,SAChBkoC,EAASj/B,IAAM,IACfi/B,EAASnxB,UAAY,eACrBmxB,EAASruC,MAAMw1B,MAAQ,OACvB6Y,EAASruC,MAAMowC,UAAY,SAC3B/B,EAASzuC,aAAa,cAAeqb,OAAOmJ,WAAWgqB,QACvDC,EAAS5uC,MAAQiuC,EAAaK,KAAK,GAAGE,MAAM1sC,OAAOoY,WACnD00B,EAASgC,QAAU,WACfxC,KAEJQ,EAASiC,UAAY,SAAUrpC,GAC3B,IAAIA,EAAMspC,YAGV,MAAkB,QAAdtpC,EAAMnH,KACNquC,EAAQ7O,QACR6O,EAAQqC,cACRvpC,EAAMwlB,uBAGVwgB,GAAmB9W,EAAQlvB,IAE/B0mC,GAAMxO,EAAOuO,EAAcvX,GAC3ByX,GAAQzO,EAAOuO,EAAcvX,GAC7BkX,GAASK,EAAcvX,GACvBA,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAauxB,GAC1DxY,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAawxB,GAC1DzY,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAayxB,GAC1D1Y,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAaoyB,GAC1DrZ,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAagyB,GAC1DjZ,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAayyB,GAC1D1Z,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAasyB,GAC1DvZ,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAa2yB,GAC1D5Z,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAa6yB,GAC1D9Z,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAa+yB,GAC1Dha,EAAOuN,QAAQqC,QAAQpa,mBAAmB,YAAa,OACvDwK,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAaqzB,GAC1DnD,GAAmBnX,EAAQuX,GAG/B,IAAIgD,GAAiB,EAAGn0B,EAAsCqgB,IAAI+O,EAAa,YAAa,YACxF+E,GACAC,GAAkBxa,EAAQua,GAG9B,IAAIE,GAAsB,EAAGr0B,EAAsCqgB,IAAI+O,EAAa,YAAa,iBACjG,GAAIiF,EAAqB,CACVza,EAAOzzB,QAAQka,KACZuZ,EAAOzzB,QACrByzB,EAAOuN,QAAQqC,QAAQ9nB,UAAY,IAC/BkyB,EAAYnxC,SAASC,cAAc,SAC7BW,aAAa,aAAcqb,OAAOmJ,WAAWysB,YAAc,KAAM,EAAG7L,EAAmC5J,IAAI,UAAY,KACjI+U,EAAUjzB,UAAY,yCACtB,IAAI4zB,EAAU9xC,SAASC,cAAc,SACrCkxC,EAAU5xC,YAAYuyC,GACtBA,EAAQ5zB,UAAY,eACpB4zB,EAAQlxC,aAAa,cAAeqb,OAAOmJ,WAAWysB,YAAc,KAAM,EAAG7L,EAAmC5J,IAAI,UAAY,KAChI0V,EAAQ9wC,MAAMw1B,MAAQ,QACtBsb,EAAQrxC,MAAQmxC,EAAoBjxC,aAAa,wBACjDmxC,EAAQT,QAAU,WACe,KAAzBS,EAAQrxC,MAAMif,QACdkyB,EAAoBhxC,aAAa,uBAAwBkxC,EAAQrxC,QAGzEqxC,EAAQR,UAAY,SAAUrpC,GAC1B,IAAIA,EAAMspC,YAGV,OAAK,EAAGvL,EAA0B7J,IAAIl0B,IACjCA,EAAM+hC,WACP/hC,EAAM8hC,QACQ,UAAd9hC,EAAMnH,SAOVmtC,GAAmB9W,EAAQlvB,IANvBk4B,EAAM8B,mBAAmB2P,GACzBzR,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,QACxCl4B,EAAMwlB,mBAKd4gB,GAASuD,EAAqBza,GAC9BA,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAa+yB,GAC1D7C,GAAmBnX,EAAQya,GAE/B,IAAIG,GAAqB,EAAGx0B,EAAsCiJ,IAAImmB,EAAa,yBAEnF,GAAIoF,GACAA,EAAmBpxC,aAAa,aAAa0G,QAAQ,UAAY,EAAG,CAOpE,GANW8vB,EAAOzzB,QAAQka,KACZuZ,EAAOzzB,QACrByzB,EAAOuN,QAAQqC,QAAQ9nB,UAAY,GACnC0vB,GAAMxO,EAAO4R,EAAoB5a,GACjCyX,GAAQzO,EAAO4R,EAAoB5a,GACnCkX,GAAS0D,EAAoB5a,GACwB,eAAjD4a,EAAmBpxC,aAAa,aAA+B,CAC/D,IAAIqxC,EAAehyC,SAASC,cAAc,QAC1C+xC,EAAapxC,aAAa,aAAcqb,OAAOmJ,WAAWmiB,SAAW,KAAM,EAAGvB,EAAmC5J,IAAI,UAAY,KACjI4V,EAAa9zB,UAAY,yCACzB,IAAI+zB,EAAajyC,SAASC,cAAc,SACxC+xC,EAAazyC,YAAY0yC,GACzB,IAAIC,EAAgBH,EAAmB9Z,kBAAkBA,kBACzDga,EAAW/zB,UAAY,eACvB+zB,EAAWrxC,aAAa,cAAeqb,OAAOmJ,WAAWmiB,SAAW,KAAM,EAAGvB,EAAmC5J,IAAI,UAAY,KAChI6V,EAAWxxC,MACPyxC,EAAch0B,UAAU7W,QAAQ,cAAgB,EAC1C6qC,EAAch0B,UAAUvV,MAAM,KAAK,GAAGA,MAAM,KAAK,GACjD,GACVspC,EAAWZ,QAAU,WACe,KAA5BY,EAAWxxC,MAAMif,OACjBwyB,EAAch0B,UAAY,YAAc+zB,EAAWxxC,OAGnDyxC,EAAch0B,UAAY,GAC1BiZ,EAAO2P,KAAKqL,eAAiB,IAE7BJ,EAAmBvO,iBAAiBz6B,UAAU4f,SAAS,6BACvDopB,EAAmBvO,iBAAiBvkB,UAChC8yB,EAAmB9Z,kBAAkBhZ,UACzCooB,EAAkB0K,EAAmBvO,iBAAkBrM,IAE3D0V,EAAiB1V,IAErB8a,EAAWX,UAAY,SAAUrpC,GAC7B,IAAIA,EAAMspC,cAGNtD,GAAmB9W,EAAQlvB,GAA/B,CAGA,GAAkB,WAAdA,EAAMnH,KACgC,UAAtCq2B,EAAO2P,KAAKhnC,QAAQkB,MAAM2e,QAG1B,OAFAwX,EAAO2P,KAAKhnC,QAAQkB,MAAM2e,QAAU,YACpC1X,EAAMwlB,kBAGL,EAAGuY,EAA0B7J,IAAIl0B,IACjCA,EAAM+hC,WACP/hC,EAAM8hC,QACQ,UAAd9hC,EAAMnH,MACNq/B,EAAMM,SAASyR,EAAcvE,WAAY,GACzCxN,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,IAE5ChJ,EAAO2P,KAAK0K,OAAOvpC,EAAOkvB,KAE9B8a,EAAWG,QAAU,SAAUnqC,GAC3B,IAAIA,EAAMspC,aACQ,UAAdtpC,EAAMnH,KACQ,YAAdmH,EAAMnH,KACQ,WAAdmH,EAAMnH,KACQ,cAAdmH,EAAMnH,IAJV,CAOA,IAAIuxC,EAAgB,GAChBvxC,EAAMmxC,EAAWxxC,MAAMwK,UAAU,EAAGgnC,EAAWK,gBACnDl1B,EAAgD+D,EAAEyG,eAAe9oB,SAAQ,SAAUyzC,GAC3EA,EAAQlrC,QAAQvG,EAAI47B,gBAAkB,GACtC2V,EAAcpwC,KAAK,CACf8S,KAAMw9B,EACN9xC,MAAO8xC,OAInBpb,EAAO2P,KAAK0L,QAAQH,EAAevxC,EAAKq2B,GACxClvB,EAAMwlB,mBAEV0J,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAa4zB,GAE9D1D,GAAmBnX,EAAQ4a,QAGtBA,GACD5a,EAAOuN,QAAQ5kC,QACVsc,iBAAiB,4BACjBtd,SAAQ,SAAUqnC,GACGA,EAAYpD,uBAClB/hC,MAAM2e,QAAU,UAGxCoyB,OAAqBniC,EAEzB,GAAI6W,EAAgB,CAEhB,IAAI0qB,EADJha,EAAOuN,QAAQqC,QAAQ9nB,UAAY,IAC/BkyB,EAAYnxC,SAASC,cAAc,SAC7BW,aAAa,aAAc,OAAa,EAAGolC,EAAmC5J,IAAI,UAAY,KACxG+U,EAAUjzB,UAAY,yCACtB,IAAIu0B,EAAUzyC,SAASC,cAAc,SACrCkxC,EAAU5xC,YAAYkzC,GACtBA,EAAQv0B,UAAY,eACpBu0B,EAAQ7xC,aAAa,cAAe,OAAa,EAAGolC,EAAmC5J,IAAI,UAAY,KACvGqW,EAAQzxC,MAAMw1B,MAAQ,QACtBic,EAAQhyC,MAAQgmB,EAAe9lB,aAAa,YAAc,GAC1D8xC,EAAQpB,QAAU,WACd5qB,EAAe7lB,aAAa,UAAW6xC,EAAQhyC,QAEnDgyC,EAAQnB,UAAY,SAAUrpC,GAC1B,IAAIA,EAAMspC,YAGV,OAAK,EAAGvL,EAA0B7J,IAAIl0B,IACjCA,EAAM+hC,WACP/hC,EAAM8hC,QACQ,UAAd9hC,EAAMnH,SAOVmtC,GAAmB9W,EAAQlvB,IANvBk4B,EAAM8B,mBAAmBxb,GACzB0Z,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,QACxCl4B,EAAMwlB,mBAKdkhB,GAAMxO,EAAO1Z,EAAgB0Q,GAC7ByX,GAAQzO,EAAO1Z,EAAgB0Q,GAC/BkX,GAAS5nB,EAAgB0Q,GACzBA,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAa+yB,GAC1D7C,GAAmBnX,EAAQ1Q,GAM/B,GAHIyI,GACAwjB,GAAYvb,EAAQjI,KAEnB2Z,GACA+D,GACA8B,GACAqD,GACA7iB,GACAwiB,GACAE,GACAnrB,GACAwhB,GAAY,CACb,IAAIlJ,GAAe,EAAGxhB,EAAsCqgB,IAAI+O,EAAa,aAAc,KACvF5N,GACAA,EAAarW,cAAcyP,YAAYhB,EAAOuN,QAAQ5kC,UACtDq3B,EAAOuN,QAAQqC,QAAQ9nB,UAAY,GACnC0vB,GAAMxO,EAAOpB,EAAc5H,GAC3ByX,GAAQzO,EAAOpB,EAAc5H,GAC7BkX,GAAStP,EAAc5H,GACvBmX,GAAmBnX,EAAQ4H,IAG3B5H,EAAOuN,QAAQqC,QAAQ/lC,MAAM2e,QAAU,OAI/CwX,EAAOuN,QAAQ5kC,QACVsc,iBAAiB,sCACjBtd,SAAQ,SAAU2f,GACnBA,EAAKzd,MAAM2e,QAAU,UAEzB,IAAIgzB,GAAmB,EAAGp1B,EAAsCqgB,IAAIuC,EAAME,eAAgB,YAAa,aACnGsS,IACAA,EAAiB/pC,cAAc,QAAQ5H,MAAM2e,QAAU,aAE5D,MAEH2uB,GAAqB,SAAUnX,EAAQr3B,GACvC,IAAIo3B,EAAgBp3B,EAChB4uC,GAAe,EAAGnxB,EAAqCgJ,IAAIzmB,EAAS,SACpE4uC,IACAxX,EAAgBwX,GAEpBvX,EAAOuN,QAAQqC,QAAQ/lC,MAAMkf,KAAO,IACpCiX,EAAOuN,QAAQqC,QAAQ/lC,MAAM2e,QAAU,QACvCwX,EAAOuN,QAAQqC,QAAQ/lC,MAAMgf,IACzBzS,KAAK2E,KAAK,EAAGglB,EAAchR,UAAY,GAAKiR,EAAOuN,QAAQ5kC,QAAQmgB,WAAa,KACpFkX,EAAOuN,QAAQqC,QAAQ/lC,MAAMkf,KACzB3S,KAAK6C,IAAI8mB,EAAc0b,WAAYzb,EAAOuN,QAAQ5kC,QAAQkc,YAAcmb,EAAOuN,QAAQqC,QAAQ/qB,aAAe,KAClHmb,EAAOuN,QAAQqC,QAAQnmC,aAAa,YAAas2B,EAAchR,UAAY,IAAIvL,aAE/Eg3B,GAAoB,SAAUxa,EAAQua,GACtCva,EAAOuN,QAAQqC,QAAQ9nB,UAAY,GACnC,IAAI4zB,EAAgB,WACW,KAAvB3K,EAAMznC,MAAMif,SACmB,QAA3BgyB,EAAerkB,QACfqkB,EAAe9wC,aAAa,MAAOsnC,EAAMznC,OAGzCixC,EAAejoB,YAAcye,EAAMznC,OAIf,KAAxBqyC,EAAOryC,MAAMif,QACbgyB,EAAe9wC,aAAa,kBAAmBkyC,EAAOryC,QAG1D0wC,EAAYnxC,SAASC,cAAc,QACvCkxC,EAAUvwC,aAAa,aAAcqb,OAAOmJ,WAAW2tB,gBACvD5B,EAAUjzB,UAAY,yCACtB,IAAIgqB,EAAQloC,SAASC,cAAc,SACnCkxC,EAAU5xC,YAAY2oC,GACtBA,EAAMhqB,UAAY,eAClBgqB,EAAMtnC,aAAa,cAAeqb,OAAOmJ,WAAW2tB,gBACpD7K,EAAMlnC,MAAMw1B,MAAQ,QACpB0R,EAAMznC,MACFixC,EAAe/wC,aAAa,QAAU+wC,EAAejoB,YACzDye,EAAMmJ,QAAU,WACZwB,KAEJ3K,EAAMoJ,UAAY,SAAUrpC,GACpBgmC,GAAmB9W,EAAQlvB,IAG/B+qC,GAAW7b,EAAQua,EAAgBzpC,EAAO6qC,IAE9C,IAAIG,EAAajzC,SAASC,cAAc,QACxCgzC,EAAWryC,aAAa,aAAcqb,OAAOmJ,WAAW8tB,SACxDD,EAAW/0B,UAAY,yCACvB,IAAI40B,EAAS9yC,SAASC,cAAc,SACpCgzC,EAAW1zC,YAAYuzC,GACvBA,EAAO50B,UAAY,eACnB40B,EAAOlyC,aAAa,cAAeqb,OAAOmJ,WAAW8tB,SACrDJ,EAAOryC,MAAQixC,EAAe/wC,aAAa,mBAC3CmyC,EAAOzB,QAAU,WACbwB,KAEJC,EAAOxB,UAAY,SAAUrpC,GACrBgmC,GAAmB9W,EAAQlvB,IAG/B+qC,GAAW7b,EAAQua,EAAgBzpC,EAAOigC,IAE9CmG,GAASqD,EAAgBva,GACzBA,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAa+yB,GAC1Dha,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAa60B,GAC1D3E,GAAmBnX,EAAQua,IAE3B/C,GAAQ,SAAUxO,EAAOrgC,EAASq3B,GAClC,IAAI6W,EAAkBluC,EAAQijC,uBAC9B,GAAKiL,IACCluC,EAAQ4oB,cAAcyP,YAAYhB,EAAOuN,QAAQ5kC,UAC3B,OAApBA,EAAQutB,SAFhB,CAKA,IAAI8lB,EAAYnzC,SAASC,cAAc,UACvCkzC,EAAUvyC,aAAa,OAAQ,UAC/BuyC,EAAUvyC,aAAa,YAAa,MACpCuyC,EAAUvyC,aAAa,aAAcqb,OAAOmJ,WAAWguB,GAAK,KAAM,EAAGpN,EAAmC5J,IAAI,OAAS,KACrH+W,EAAUl0B,UAAY,sDACtBk0B,EAAUj1B,UAAY,qDACtBi1B,EAAUv0B,QAAU,WAChBuhB,EAAM+C,WAAWljC,SAASC,cAAc,QACxC+tC,EAAgB5vB,sBAAsB,cAAete,IACrD,EAAG4d,EAA6BoiB,IAAI3I,EAAOuN,QAAQ5kC,QAASqgC,GAC5D0M,EAAiB1V,GACjBgX,GAAwBhX,GACxBqU,GAAarU,IAEjBA,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAa+0B,KAE1DvE,GAAU,SAAUzO,EAAOrgC,EAASq3B,GACpC,IAAIkc,EAAcvzC,EAAQo4B,mBAC1B,GAAKmb,IACCvzC,EAAQ4oB,cAAcyP,YAAYhB,EAAOuN,QAAQ5kC,UAC3B,OAApBA,EAAQutB,SAFhB,CAKA,IAAIimB,EAActzC,SAASC,cAAc,UACzCqzC,EAAY1yC,aAAa,OAAQ,UACjC0yC,EAAY1yC,aAAa,YAAa,QACtC0yC,EAAY1yC,aAAa,aAAcqb,OAAOmJ,WAAWmuB,KAAO,KAAM,EAAGvN,EAAmC5J,IAAI,OAAS,KACzHkX,EAAYr0B,UACR,wDACJq0B,EAAYp1B,UACR,qDACJo1B,EAAY10B,QAAU,WAClBuhB,EAAM+C,WAAWljC,SAASC,cAAc,QACxCozC,EAAYj1B,sBAAsB,WAAYte,IAC9C,EAAG4d,EAA6BoiB,IAAI3I,EAAOuN,QAAQ5kC,QAASqgC,GAC5D0M,EAAiB1V,GACjBgX,GAAwBhX,GACxBqU,GAAarU,IAEjBA,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAak1B,KAE1DjF,GAAW,SAAUvuC,EAASq3B,GAC9B,IAAI8C,EAAQj6B,SAASC,cAAc,UACnCg6B,EAAMr5B,aAAa,OAAQ,UAC3Bq5B,EAAMr5B,aAAa,YAAa,UAChCq5B,EAAMr5B,aAAa,aAAcqb,OAAOmJ,WAAWnc,OAAS,KAAM,EAAG+8B,EAAmC5J,IAAI,OAAS,KACrHnC,EAAMhb,UACF,4DACJgb,EAAM/b,UAAY,qDAClB+b,EAAMrb,QAAU,WACZ,IAAIuhB,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GACjDgJ,EAAMuC,cAAc5iC,IACpB,EAAG4d,EAAiC6B,IAAI4gB,GACxCrgC,EAAQmJ,SACR4jC,EAAiB1V,GACjBgX,GAAwBhX,IAE5BA,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAa6b,IAE1D+Y,GAAa,SAAU7b,EAAQr3B,EAASmI,EAAOurC,GAC/C,IAAIvrC,EAAMspC,YAAV,CAGA,GAAkB,QAAdtpC,EAAMnH,IAIN,OAHA0yC,EAAiBlT,QACjBkT,EAAiBhC,cACjBvpC,EAAMwlB,iBAGV,KAAK,EAAGuY,EAA0B7J,IAAIl0B,KACjCA,EAAM+hC,UACP/hC,EAAM8hC,QACQ,UAAd9hC,EAAMnH,IAAiB,CACvB,IAAIq/B,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAEjDr3B,EAAQ6sB,mBAAmB,WAAYvP,EAA8B+D,EAAEmG,MACvE6Y,EAAMuC,cAAc5iC,EAAQ0iC,aAC5BrC,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,GACxCl4B,EAAMwlB,oBAGVilB,GAAc,SAAUvb,EAAQjI,GACrBiI,EAAOzzB,QAAQka,KACZuZ,EAAOzzB,QACrByzB,EAAOuN,QAAQqC,QAAQ9nB,UAAY,GACnC,IAAIw0B,EAAU,WACiB,KAAvBvL,EAAMznC,MAAMif,SACZwP,EAASjQ,UAAYipB,EAAMznC,OAE/ByuB,EAAStuB,aAAa,OAAQkyC,EAAOryC,OACrCyuB,EAAStuB,aAAa,QAAS8yC,EAAOjzC,QAE1CyuB,EAAS9S,iBAAiB,iBAAiBtd,SAAQ,SAAU2f,GACzDA,EAAK/d,gBAAgB,kBAEzB,IAAIywC,EAAYnxC,SAASC,cAAc,QACvCkxC,EAAUvwC,aAAa,aAAcqb,OAAOmJ,WAAW2tB,gBACvD5B,EAAUjzB,UAAY,yCACtB,IAAIgqB,EAAQloC,SAASC,cAAc,SACnCkxC,EAAU5xC,YAAY2oC,GACtBA,EAAMhqB,UAAY,eAClBgqB,EAAMtnC,aAAa,cAAeqb,OAAOmJ,WAAW2tB,gBACpD7K,EAAMlnC,MAAMw1B,MAAQ,QACpB0R,EAAMznC,MAAQyuB,EAASjQ,WAAa,GACpCipB,EAAMmJ,QAAU,WACZoC,KAEJvL,EAAMoJ,UAAY,SAAUrpC,GACpBgmC,GAAmB9W,EAAQlvB,IAG/B+qC,GAAW7b,EAAQjI,EAAUjnB,EAAO6qC,IAExC,IAAIG,EAAajzC,SAASC,cAAc,QACxCgzC,EAAWryC,aAAa,aAAcqb,OAAOmJ,WAAWuuB,MACxDV,EAAW/0B,UAAY,yCACvB,IAAI40B,EAAS9yC,SAASC,cAAc,SACpCgzC,EAAW1zC,YAAYuzC,GACvBA,EAAO50B,UAAY,eACnB40B,EAAOlyC,aAAa,cAAeqb,OAAOmJ,WAAWuuB,MACrDb,EAAOryC,MAAQyuB,EAASvuB,aAAa,SAAW,GAChDmyC,EAAOzB,QAAU,WACboC,KAEJX,EAAOxB,UAAY,SAAUrpC,GACrBgmC,GAAmB9W,EAAQlvB,IAG/B+qC,GAAW7b,EAAQjI,EAAUjnB,EAAOyrC,IAExC,IAAIjC,EAAazxC,SAASC,cAAc,QACxCwxC,EAAW7wC,aAAa,aAAcqb,OAAOmJ,WAAWwuB,aACxDnC,EAAWvzB,UAAY,yCACvB,IAAIw1B,EAAS1zC,SAASC,cAAc,SACpCwxC,EAAWlyC,YAAYm0C,GACvBA,EAAOx1B,UAAY,eACnBw1B,EAAO9yC,aAAa,cAAeqb,OAAOmJ,WAAWwuB,aACrDF,EAAO1yC,MAAMw1B,MAAQ,OACrBkd,EAAOjzC,MAAQyuB,EAASvuB,aAAa,UAAY,GACjD+yC,EAAOrC,QAAU,WACboC,KAEJC,EAAOpC,UAAY,SAAUrpC,GACrBgmC,GAAmB9W,EAAQlvB,IAG/B+qC,GAAW7b,EAAQjI,EAAUjnB,EAAOigC,IAExCmG,GAASnf,EAAUiI,GACnBA,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAa+yB,GAC1Dha,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAa60B,GAC1D9b,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAaqzB,GAC1DnD,GAAmBnX,EAAQjI,IA+D3B2kB,GAAmB,SAAU1c,GACF,YAAvBA,EAAOO,YACPyW,GAAwBhX,GAEI,OAAvBA,EAAOO,aACZ8U,EAAmBrV,IAOvB2c,GAAgB,SAAU3c,EAAQ4c,EAAIrwC,QACtB,IAAZA,IAAsBA,EAAU,CAChCgmC,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEjB,IAAI9H,EAAgB3K,EAAOuN,QAAQ5kC,QACnCgiC,EAAc7iB,UAAYkY,EAAO5T,KAAKywB,aAAaD,GACnDjS,EAAc1lB,iBAAiB,6CAA6Ctd,SAAQ,SAAU2f,GAC1F4oB,EAAkB5oB,EAAM0Y,GACxB1Y,EAAKskB,uBAAuBniC,aAAa,QAAS,mBAEtDisC,EAAiB1V,EAAQzzB,IAazBuwC,GAAY,SAAU9T,EAAOhJ,EAAQ+c,GAQrC,IAPA,IAAIp0C,EAAUqgC,EAAME,eAAe3X,cAC/ByrB,GAAO,EACPC,EAAc,GACdC,EAAiB,GACjBC,EAh9CW,SAAUnU,GACzB,IAAIoU,EAAejH,EAAgBnN,EAAME,gBACrCmU,EAAWnH,EAAYlN,EAAME,gBAC7BjgC,EAAO+/B,EAAME,eAAe5W,YAC5B4M,EAAS8J,EAAMc,YACfwT,EAAa,GACbC,EAAY,GAOhB,OAN+B,KAA3Bt0C,EAAK4lB,OAAO,EAAGqQ,IAAkBj2B,EAAK4lB,OAAO,EAAGqQ,KAAYjZ,EAA8B+D,EAAEmG,MAAQitB,KACpGE,EAAa,GAAKF,EAAen0C,EAAK4lB,OAAO,EAAGqQ,KAExB,KAAxBj2B,EAAK4lB,OAAOqQ,IAAkBj2B,EAAK4lB,OAAOqQ,KAAYjZ,EAA8B+D,EAAEmG,MAAQktB,KAC9FE,EAAY,GAAKt0C,EAAK4lB,OAAOqQ,GAAUme,GAEpC,CACHE,UAAWA,EACXD,WAAYA,GAi8CAE,CAAaxU,GACzByU,EAAiBN,EAAUG,WAC3BI,EAAgBP,EAAUI,UACvB50C,IAAYq0C,GAAM,CACrB,IAAI9mB,EAAUvtB,EAAQutB,QAUtB,GATgB,WAAZA,IACAA,EAAU,KAEE,MAAZA,IACAA,EAAU,MAEE,MAAZA,IACAA,EAAU,UAEE,MAAZA,GAA+B,WAAZA,GAAoC,OAAZA,EAAkB,CAC7D,IAAI8V,EAAa,GACboR,EAAe,GACfC,EAAW,GAC0C,MAArD10C,EAAQ4oB,cAAc/nB,aAAa,gBACnC4zC,EAAejH,EAAgBxtC,GAC/B00C,EAAWnH,EAAYvtC,KAEvB80C,GAAkBL,KAElBK,EADAzR,EAAaoR,EAAe,IAAMlnB,EAAU,IAAMunB,EAAiB,KAAOvnB,EAAU,MAGnE,SAAhB6mB,GAAsC,WAAZ7mB,GACV,WAAhB6mB,GAAwC,OAAZ7mB,GACZ,kBAAhB6mB,GAA+C,MAAZ7mB,KAEpC8V,GAAc,GAAKiR,EAAch3B,EAA8B+D,EAAEmG,KAAO,QAAU+sB,EAClFF,GAAO,IAEPU,GAAiBL,KAEjBrR,GADA0R,EAAgB,IAAMxnB,EAAU,IAAMwnB,EAAgB,KAAOxnB,EAAU,IAAMmnB,GAGxB,MAArD10C,EAAQ4oB,cAAc/nB,aAAa,eACnCb,EAAUA,EAAQ4oB,eACVzJ,UAAYkkB,GAGpBrjC,EAAQ+rB,UAAYsX,EACpBrjC,EAAUA,EAAQ4oB,eAEtB0rB,EAAc,IAAM/mB,EAAU,IAAM+mB,EACpCC,EAAiB,KAAOhnB,EAAU,IAAMgnB,OAGxCF,GAAO,GAGf,EAAGz2B,EAA6BoiB,IAAI3I,EAAOuN,QAAQ5kC,QAASqgC,IAuR5D2U,GACA,SAAkB3d,EAAQ4d,GACtB,IAAI9vB,EACA8f,EAAQ1+B,KACZA,KAAKvG,QAAUE,SAASC,cAAc,OAClC80C,EAAS72B,YACR+G,EAAK5e,KAAKvG,QAAQiJ,WAAWlG,IAAIke,MAAMkE,EAAI8vB,EAAS72B,UAAUvV,MAAM,MAEzE,IAAIy0B,EAAS2X,EAAS3X,OAAS,MAAO,EAAG4I,EAAmC5J,IAAI2Y,EAAS3X,QAAU,IAAM,GAClF,IAAnB2X,EAAS5N,QACT/J,EAAS2X,EAAS3X,OAAS,SAAU,EAAG4I,EAAmC5J,IAAI2Y,EAAS3X,QAAU,OAAS,IAE/G,IAAI4X,EAAMD,EAASC,IAAMD,EAASC,IAAM5X,EAAS,GAAKnhB,OAAOmJ,WAAW2vB,EAASh1C,MAAQq9B,EACrF/P,EAA4B,WAAlB0nB,EAASh1C,KAAoB,MAAQ,SACnD,GAAuB,IAAnBg1C,EAAS5N,MACT9gC,KAAKvG,QAAQmf,UAAY,IAAMoO,EAAU,eAAkB0nB,EAASh1C,KAAO,KAAQi1C,EAAM,KAAO3nB,EAAU,QAEzG,CACDhnB,KAAKvG,QAAQiJ,UAAUlG,IAAI,wBAC3B,IAAIoyC,EAAcj1C,SAASC,cAAcotB,GACzC4nB,EAAYr0C,aAAa,YAAam0C,EAASh1C,MAC/Ck1C,EAAY/2B,UAAY,wCAA0C62B,EAASG,YAC3ED,EAAYr0C,aAAa,aAAco0C,GACvCC,EAAYh2B,UAAY81B,EAAStyB,KACjCpc,KAAKvG,QAAQP,YAAY01C,GAExBF,EAASh9B,QAGd1R,KAAKvG,QAAQoF,SAAS,GAAGiD,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAC1FA,EAAMwlB,iBACFsX,EAAMjlC,QAAQm4B,kBAAkBlvB,UAAU4f,SAASvL,EAA6C+D,EAAEsG,uBAG3E,YAAvB0P,EAAOO,YAvTJ,SAAUP,EAAQ+P,EAAWj/B,GAC5C,KAAIkvB,EAAOuN,QAAQqI,eACZ9kC,aAAiBktC,aADxB,CAKA,IAAIC,GAAe,EACfC,GAAY,EACZle,EAAOuN,QAAQ5kC,QAAQ8I,cAAc,QACrCuuB,EAAOuN,QAAQ5kC,QAAQ8I,cAAc,OAAOK,SAEhD,IAAIk3B,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAC7C+c,EAAchN,EAAUvmC,aAAa,aAEzC,GAAIumC,EAAUn+B,UAAU4f,SAAS,wBAI7B,GAHoB,WAAhBurB,IACAA,EAAc,iBAEE,UAAhBA,EAAyB,CACzB,IAAIoB,GAAe,EAAG/3B,EAAqCgJ,IAAI4Z,EAAME,eAAgB,cAChFiV,IACDA,EAAenV,EAAME,eAAep7B,WAAWk7B,EAAMc,cAErDqU,IACAF,GAAe,EACflO,EAAUn+B,UAAUE,OAAO,wBAC3Bk3B,EAAM+C,WAAWljC,SAASC,cAAc,QACxCq1C,EAAazpB,UAA8C,KAAlCypB,EAAar2B,UAAUS,OAC5C,qBAAyB41B,EAAar2B,UAAY,OAASq2B,EAAar2B,WAC5E,EAAGvB,EAA6BoiB,IAAI3I,EAAOuN,QAAQ5kC,QAASqgC,SAG/D,GAAoB,gBAAhB+T,EAA+B,CACpC,IAAIqB,GAAoB,EAAGh4B,EAAqCgJ,IAAI4Z,EAAME,eAAgB,QACrFkV,IACDA,EAAoBpV,EAAME,eAAep7B,WAAWk7B,EAAMc,cAE1DsU,IACAA,EAAkB1pB,UAAY0pB,EAAkBt2B,UAAU7J,QAAQgI,EAA8B+D,EAAEmG,KAAM,IAAM,SAC9G,EAAG5J,EAA6BoiB,IAAI3I,EAAOuN,QAAQ5kC,QAASqgC,QAG3C,SAAhB+T,EACA/T,EAAMoK,WAIPpK,EAAMe,WAAWf,EAAME,eAAe3X,eACtC1oB,SAASujC,YAAY,UAAU,EAAO,KAJtCvjC,SAASujC,YAAY,UAAU,EAAO,IAOrB,UAAhB2Q,GAA2C,SAAhBA,GAA0C,iBAAhBA,GAC1DsB,GAAWre,EAAQgJ,EAAO+T,IAC1B,EAAGx2B,EAA6BoiB,IAAI3I,EAAOuN,QAAQ5kC,QAASqgC,GAC5DiV,GAAe,EACflO,EAAUn+B,UAAUE,OAAO,0BAI3BmsC,GAAe,EACflO,EAAUn+B,UAAUE,OAAO,wBACF,KAArBk3B,EAAMxlB,WACNs5B,GAAU9T,EAAOhJ,EAAQ+c,GAGzBl0C,SAASujC,YAAY2Q,GAAa,EAAO,SAIhD,CAEgD,IAA7C/c,EAAOuN,QAAQ5kC,QAAQmF,WAAW1C,SAClC40B,EAAOuN,QAAQ5kC,QAAQmf,UAAY,+BACnC,EAAGvB,EAA6BoiB,IAAI3I,EAAOuN,QAAQ5kC,QAASqgC,IAEhE,IAAIpB,GAAe,EAAGxhB,EAAgCsgB,IAAIsC,EAAME,gBAChE,GAAoB,UAAhB6T,GAIA,GAHKnV,IACDA,EAAeoB,EAAME,eAAep7B,WAAWk7B,EAAMc,cAErDlC,EAAc,CACdqW,GAAe,EACflO,EAAUn+B,UAAUlG,IAAI,wBACxBs9B,EAAM+C,WAAWljC,SAASC,cAAc,QACxC,IAAI2sC,GAAY,EAAGrvB,EAAqCgJ,IAAI4Z,EAAME,eAAgB,MAE9EuM,GAAa7N,EAAapW,SAASikB,GACnCA,EAAU3tB,UAAY,8BAAkC2tB,EAAU3tB,UAAY,gBAG9E8f,EAAalT,UAAY,8BAAkCkT,EAAalT,UAAY,iBAExF,EAAGnO,EAA6BoiB,IAAI3I,EAAOuN,QAAQ5kC,QAASqgC,SAG/D,GAAoB,UAAhB+T,GAA2C,SAAhBA,GAA0C,iBAAhBA,EAC1DsB,GAAWre,EAAQgJ,EAAO+T,GAAa,IACvC,EAAGx2B,EAA6BoiB,IAAI3I,EAAOuN,QAAQ5kC,QAASqgC,GAC5DiV,GAAe,EACfnP,EAAqB9O,EAAOqB,QAAQoO,SAAU,CAAC,QAAS,OAAQ,iBAChEM,EAAUn+B,UAAUlG,IAAI,6BAEvB,GAAoB,gBAAhBqxC,EAA+B,CACpC,GAAyB,KAArB/T,EAAMxlB,YACFrb,EAAOU,SAASC,cAAc,SAC7BwpB,YAAcrM,EAA8B+D,EAAEmG,KACnD6Y,EAAM+C,WAAW5jC,GACjB6gC,EAAMM,SAASnhC,EAAKquC,WAAY,GAChCxN,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,QAEvC,GAAsC,IAAlCA,EAAME,eAAezB,SAAgB,CAC1C,IAAIt/B,EAAOU,SAASC,cAAc,QAClCkgC,EAAMsV,iBAAiBn2C,GACvB6gC,EAAM+C,WAAW5jC,IACjB,EAAGoe,EAAiC6B,IAAI4gB,GAE5C+G,EAAUn+B,UAAUlG,IAAI,6BAEvB,GAAoB,SAAhBqxC,GACD50C,EAAOU,SAASC,cAAc,QAC7Bie,UAAY,wBACjB5e,EAAKsB,aAAa,YAAa,cAC/BtB,EAAKsB,aAAa,aAAc,KAChCtB,EAAKsB,aAAa,cAAe,OACR,KAArBu/B,EAAMxlB,WACNrb,EAAK2f,UAAY,mCAGjB3f,EAAK2f,UAAY,cAAgBkhB,EAAMxlB,WAAa,qBACpDwlB,EAAMuV,kBAEVvV,EAAM+C,WAAW5jC,GACby/B,IACAA,EAAalT,UAAYsL,EAAO5T,KAAKsU,cAAckH,EAAalT,aAEpE,EAAGnO,EAA6BoiB,IAAI3I,EAAOuN,QAAQ5kC,QAASqgC,GAC5DhJ,EAAOuN,QAAQ5kC,QAAQsc,iBAAiB,6CAA6Ctd,SAAQ,SAAU2f,GACnG4oB,EAAkB5oB,EAAM0Y,MAE5B+P,EAAUn+B,UAAUlG,IAAI,8BAEvB,GAAoB,SAAhBqxC,EAAwB,CAC7B,GAAyB,KAArB/T,EAAMxlB,WAAmB,CACzB,IAAIuU,EAAWlvB,SAASC,cAAc,KACtCivB,EAASvF,UAAYvM,EAA8B+D,EAAEmG,KACrD6Y,EAAM+C,WAAWhU,GACjBiR,EAAMM,SAASvR,EAASye,WAAY,GACpCxN,EAAMO,UAAS,GACfgS,GAAYvb,EAAQjI,GACpB,IAAIymB,EAAmBxe,EAAOuN,QAAQqC,QAAQn+B,cAAc,SAC5D+sC,EAAiBl1C,MAAQ,GACzBk1C,EAAiBrV,QACjB+U,GAAY,MAEX,EACG/1C,EAAOU,SAASC,cAAc,MAC7BW,aAAa,OAAQ,IAC1BtB,EAAK2f,UAAYkhB,EAAMxlB,WACvBwlB,EAAMsV,iBAAiBn2C,GACvB6gC,EAAM+C,WAAW5jC,IACjB,EAAGoe,EAAiC6B,IAAI4gB,GACxCuS,GAAYvb,EAAQ73B,GACpB,IAAIs2C,EAAoBze,EAAOuN,QAAQqC,QAAQ3qB,iBAAiB,SAChEw5B,EAAkB,GAAGn1C,MAAQnB,EAAKqqB,UAClCisB,EAAkB,GAAGtV,QAEzB8U,GAAe,EACflO,EAAUn+B,UAAUlG,IAAI,6BAEvB,GAAoB,UAAhBqxC,EAAyB,CAC9B,IAAI2B,EAAc,kMAClB,GAAgC,KAA5B1V,EAAMxlB,WAAW+E,OACbqf,GAAoG,KAApFA,EAAa9f,UAAUS,OAAOtK,QAAQgI,EAA8B+D,EAAEmG,KAAM,IAC5FyX,EAAalT,UAAYgqB,EAGzB71C,SAASujC,YAAY,cAAc,EAAOsS,GAE9C1V,EAAMe,WAAW/J,EAAOuN,QAAQ5kC,QAAQ8I,cAAc,OAAOq6B,iBAC7D9L,EAAOuN,QAAQ5kC,QAAQ8I,cAAc,OAAOK,UAC5C,EAAGyU,EAAiC6B,IAAI4gB,OAEvC,CACD0V,EAAc,oCACd,IAAIC,EAAY3V,EAAMxlB,WAAWhS,MAAM,MACnCotC,EAAcD,EAAU,GAAGntC,MAAM,KAAKpG,OAASuzC,EAAU,GAAGntC,MAAM,MAAMpG,OAAS,IAAM,KAC3FuzC,EAAUh3C,SAAQ,SAAUiwC,EAAM3nC,GAChB,IAAVA,GACA2nC,EAAKpmC,MAAMotC,GAAaj3C,SAAQ,SAAUk3C,EAAQC,GAE1CJ,GADa,IAAbI,EACe,OAASD,EAAS,aAGlB,OAASA,EAAS,WAGzCH,GAAe,kBAIXA,GADU,IAAVzuC,EACe,cAGA,OAEnB2nC,EAAKpmC,MAAMotC,GAAaj3C,SAAQ,SAAUo3C,GACtCL,GAAe,OAASK,EAAO,WAEnCL,GAAe,YAGvBA,GAAe,mBACf71C,SAASujC,YAAY,cAAc,EAAOsS,IAC1C,EAAGn4B,EAA6BoiB,IAAI3I,EAAOuN,QAAQ5kC,QAASqgC,GAEhEiV,GAAe,EACflO,EAAUn+B,UAAUlG,IAAI,8BAEvB,GAAoB,SAAhBqxC,GACL,GAAInV,EAAc,CACd,IAAIoX,EAAS,mDACyB,KAAlCpX,EAAa9f,UAAUS,OACvBqf,EAAalT,UAAYsqB,EAGzBpX,EAAapS,mBAAmB,WAAYwpB,IAEhD,EAAGz4B,EAA6BoiB,IAAI3I,EAAOuN,QAAQ5kC,QAASqgC,SAUhE,GALAiV,GAAe,EACflO,EAAUn+B,UAAUlG,IAAI,wBACJ,WAAhBqxC,IACAA,EAAc,iBAEO,KAArB/T,EAAMxlB,YAAsC,SAAhBu5B,GAA0C,WAAhBA,GAA4C,kBAAhBA,EAoBlFl0C,SAASujC,YAAY2Q,GAAa,EAAO,QApB2E,CACpH,IAAI7mB,EAAU,SACM,WAAhB6mB,EACA7mB,EAAU,KAEW,kBAAhB6mB,IACL7mB,EAAU,MAEV/tB,EAAOU,SAASC,cAAcotB,IAC7B5D,YAAcrM,EAA8B+D,EAAEmG,KACnD6Y,EAAM+C,WAAW5jC,GACbA,EAAK2jC,iBAAmB3jC,EAAK2jC,gBAAgBxZ,cAAgBrM,EAA8B+D,EAAEmG,OAE7FhoB,EAAK2jC,gBAAgBxZ,YAAc,IAEvC0W,EAAMM,SAASnhC,EAAKquC,WAAY,GAChCxN,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,IAOhDiV,GACAjH,GAAwBhX,GAExBke,GACAxI,EAAiB1V,IA8CTif,CAAajf,EAAQ4N,EAAMjlC,QAAQoF,SAAS,GAAI+C,GAEpB,OAAvBkvB,EAAOO,YACZ2e,GAAuBlf,EAAQ4N,EAAMjlC,QAAQoF,SAAS,GAAI6vC,EAASh9B,QAAU,GAAIg9B,EAAS/8B,QAAU,IAGpGs+B,GAAenf,EAAQ4N,EAAMjlC,QAAQoF,SAAS,GAAI6vC,EAASh9B,QAAU,GAAIg9B,EAAS/8B,QAAU,SASxGu+B,IACIlS,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAErB,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,KAgBnFC,GAAc,SAAUxf,EAAQhwB,EAAMc,GACtC,IAAI2uC,EASJ,GARqB,iBAAV3uC,GACPw+B,EAAUtP,EAAQ,CAAC,aAAc,SACjClvB,EAAMwlB,iBACNmpB,EAAerS,EAAYpN,IAG3Byf,EAAe3uC,EAEfkvB,EAAOO,cAAgBvwB,GAAyB,iBAAVc,EAA1C,CAeA,GAZIkvB,EAAO6N,UACP7N,EAAO6N,SAASF,aAAa3N,GAEG,SAAhCA,EAAOzzB,QAAQyjB,QAAQ5gB,MAA4B,OAATY,EAC1CgwB,EAAOhQ,QAAQrnB,QAAQkB,MAAM2e,QAAU,QAGvCwX,EAAOhQ,QAAQrnB,QAAQkB,MAAM2e,QAAU,OAE3C0mB,EAAclP,EAAOqB,QAAQoO,SAAUxpB,EAAuC+D,EAAEuG,eAChFue,EAAqB9O,EAAOqB,QAAQoO,SAAUxpB,EAAuC+D,EAAEuG,eACvF4e,EAAenP,EAAOqB,QAAQoO,SAAU,CAAC,UAAW,WACvC,OAATz/B,EACAo/B,EAAYpP,EAAOqB,QAAQoO,SAAU,CAAC,SACtCJ,EAAYrP,EAAOqB,QAAQoO,SAAU,CAAC,UAAW,SAAU,UAAW,gBAAiB,iBACvFzP,EAAOqN,GAAG1kC,QAAQkB,MAAM2e,QAAU,OAClCwX,EAAOuN,QAAQ5kC,QAAQ4oB,cAAc1nB,MAAM2e,QAAU,OACrDwX,EAAOyN,GAAG9kC,QAAQ4oB,cAAc1nB,MAAM2e,QAAU,QAChDwX,EAAO5T,KAAKszB,aAAY,GACxB1f,EAAO5T,KAAKuzB,kBAAiB,GAC7B3f,EAAO5T,KAAKwzB,aAAY,GACxB5f,EAAOO,YAAc,KACrBP,EAAOyN,GAAG9kC,QAAQmf,UAAYkY,EAAO5T,KAAKyzB,eAAeJ,GACzDnN,GAA2BtS,EAAQ,CAC/BuS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEjB8B,EAAWvU,GACXA,EAAOyN,GAAG9kC,QAAQsc,iBAAiB,wCAAwCtd,SAAQ,SAAU2f,GACzF4oB,EAAkB5oB,EAAM0Y,MAE5BA,EAAOyN,GAAG9kC,QAAQsc,iBAAiB,eAAetd,SAAQ,SAAU2f,IAChE,EAAG3B,EAA2B6I,GAAGlH,EAAM,CACnC0D,IAAKgV,EAAOzzB,QAAQye,IACpBS,KAAMuU,EAAOzzB,QAAQyjB,QAAQvE,eAIpC,GAAa,YAATzb,EACLo/B,EAAYpP,EAAOqB,QAAQoO,SAAU,CAAC,SACtCJ,EAAYrP,EAAOqB,QAAQoO,SAAU,CAAC,UAAW,SAAU,UAAW,gBAAiB,iBACvFzP,EAAOqN,GAAG1kC,QAAQkB,MAAM2e,QAAU,OAClCwX,EAAOuN,QAAQ5kC,QAAQ4oB,cAAc1nB,MAAM2e,QAAU,QACrDwX,EAAOyN,GAAG9kC,QAAQ4oB,cAAc1nB,MAAM2e,QAAU,OAChDwX,EAAO5T,KAAKszB,aAAY,GACxB1f,EAAO5T,KAAKuzB,kBAAiB,GAC7B3f,EAAO5T,KAAKwzB,aAAY,GACxB5f,EAAOO,YAAc,UACrBgU,EAAWvU,GACX2c,GAAc3c,EAAQyf,EAAc,CAChClN,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEjBzS,EAAOuN,QAAQ5kC,QAAQsc,iBAAiB,eAAetd,SAAQ,SAAU2f,IACrE,EAAG3B,EAA2B6I,GAAGlH,EAAM,CACnC0D,IAAKgV,EAAOzzB,QAAQye,IACpBS,KAAMuU,EAAOzzB,QAAQyjB,QAAQvE,UAGrCuU,EAAOuN,QAAQqC,QAAQ/lC,MAAM2e,QAAU,YAEtC,GAAa,OAATxY,EAAe,CACpBq/B,EAAYrP,EAAOqB,QAAQoO,SAAU,CAAC,SACtCL,EAAYpP,EAAOqB,QAAQoO,SAAU,CAAC,UAAW,SAAU,UAAW,gBAAiB,iBACvFzP,EAAOuN,QAAQ5kC,QAAQ4oB,cAAc1nB,MAAM2e,QAAU,OACrDwX,EAAOyN,GAAG9kC,QAAQ4oB,cAAc1nB,MAAM2e,QAAU,QACZ,SAAhCwX,EAAOzzB,QAAQyjB,QAAQ5gB,MAGc,WAAhC4wB,EAAOzzB,QAAQyjB,QAAQ5gB,QAF5B4wB,EAAOqN,GAAG1kC,QAAQkB,MAAM2e,QAAU,SAKtCwX,EAAO5T,KAAKszB,aAAY,GACxB1f,EAAO5T,KAAKuzB,kBAAiB,GAC7B3f,EAAO5T,KAAKwzB,aAAY,GACxB5f,EAAOO,YAAc,KACrB,IAAIuf,EAAS1L,GAAuBqL,EAAczf,GACnC,+BAAX8f,IAEAA,EAAS,IAEb9f,EAAOqN,GAAG1kC,QAAQmf,UAAYg4B,EAC9BlM,GAAmB5T,EAAQ,CACvBuS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEjB8B,EAAWvU,GAEfA,EAAO+V,KAAKgK,UAAU/f,GACD,iBAAVlvB,IAEPkvB,EAAOA,EAAOO,aAAa53B,QAAQwgC,QACnCuT,GAAiB1c,IAErBqQ,EAAUrQ,GACV4U,EAAsB5U,GAClBA,EAAOqB,QAAQoO,SAAS,eACxBzP,EAAOqB,QAAQoO,SAAS,aAAaxqB,iBAAiB,UAAUtd,SAAQ,SAAU2f,GAC9EA,EAAK1V,UAAUE,OAAO,2BAE1BkuB,EAAOqB,QAAQoO,SAAS,aAAah+B,cAAc,qBAAwBuuB,EAAOO,YAAc,MAAO3uB,UAAUlG,IAAI,yBAEzHs0B,EAAOsQ,QAAQ0P,OAAOhgB,EAA+B,OAAvBA,EAAOO,aAAwBP,EAAOzzB,QAAQ+jC,QAAQ1kB,UAEpFq0B,GAA0B,SAAUC,GAEpC,SAASD,EAASjgB,EAAQ4d,GACtB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KAC/C4gC,EAAejnC,SAASC,cAAc,OAK1C,OAJAgnC,EAAa/oB,UAAY,eAAoC,IAAnB62B,EAAS5N,MAAc,GAAK,wBACtEF,EAAahoB,UAAY,+BAAmChD,OAAOmJ,WAAWsf,QAAU,SAAU,EAAGsB,EAAmC5J,IAAI,OAAS,sCAA0CngB,OAAOmJ,WAAWkyB,iBAAmB,SAAU,EAAGtR,EAAmC5J,IAAI,OAAS,sCAA0CngB,OAAOmJ,WAAWmyB,UAAY,SAAU,EAAGvR,EAAmC5J,IAAI,OAAS,aACta2I,EAAMjlC,QAAQP,YAAY0nC,GAC1BlC,EAAMyS,WAAWrgB,EAAQ8P,EAAc8N,GAChChQ,EAwBX,OAhCAwR,GAAUa,EAAUC,GAUpBD,EAASntC,UAAUutC,WAAa,SAAUrgB,EAAQ8P,EAAc8N,GAC5D,IAAI7N,EAAY7gC,KAAKvG,QAAQoF,SAAS,GACtC8hC,EAAc7P,EAAQ8P,EAAcC,EAAW6N,EAAS5N,OACxDF,EAAa/hC,SAASuZ,KAAK,GAAGtW,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAE/F0uC,GAAYxf,EAAQ,UAAWlvB,GAC/BA,EAAMwlB,iBACNxlB,EAAMulB,qBAEVyZ,EAAa/hC,SAASuZ,KAAK,GAAGtW,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAE/F0uC,GAAYxf,EAAQ,KAAMlvB,GAC1BA,EAAMwlB,iBACNxlB,EAAMulB,qBAEVyZ,EAAa/hC,SAASuZ,KAAK,GAAGtW,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAE/F0uC,GAAYxf,EAAQ,KAAMlvB,GAC1BA,EAAMwlB,iBACNxlB,EAAMulB,sBAGP4pB,GACTtC,IAKE2C,GAAgB,SAAU7W,EAAQT,GAClC,OAAI,EAAGziB,EAA8BiiB,IAAIiB,EAAQT,GACtC1gB,eAAe9E,WAEnB,IAsBP+8B,GAAa,SAAUvgB,EAAQ2K,GAC/BA,EAAc35B,iBAAiB,SAAS,WAChCgvB,EAAOzzB,QAAQ48B,OACfnJ,EAAOzzB,QAAQ48B,MAAMiE,EAAYpN,IAErCsP,EAAUtP,EAAQ,CAAC,mBAGvBwgB,GAAgB,SAAUxgB,EAAQ2K,GAClCA,EAAc35B,iBAAiB,YAAY,SAAUF,GACpB,QAAzBA,EAAM5I,OAAOguB,UACb,EAAGzG,EAAgCK,GAAGhf,EAAM5I,OAAQ83B,EAAOzzB,QAAQka,KAAMuZ,EAAOzzB,QAAQsf,WAIhG40B,GAAY,SAAUzgB,EAAQ2K,GAC9BA,EAAc35B,iBAAiB,QAAQ,SAAUF,GAC7C,GAA2B,OAAvBkvB,EAAOO,YAAsB,CAC7B,IAAImgB,EAAgB1gB,EAAOyN,GAAG9kC,QAAQ8I,cAAc,4BAChDivC,GACAA,EAAc9uC,UAAUE,OAAO,+BAGP,YAAvBkuB,EAAOO,aACXP,EAAOuN,QAAQoT,cAAcnvB,SAAS1gB,EAAM8vC,gBAC7C5gB,EAAOuN,QAAQsT,cAEnB7gB,EAAOA,EAAOO,aAAayI,OAAQ,EAAGziB,EAA8B+hB,IAAItI,GACpEA,EAAOzzB,QAAQu0C,MACf9gB,EAAOzzB,QAAQu0C,KAAK1T,EAAYpN,QAIxC+gB,GAAY,SAAU/gB,EAAQ2K,GAC9BA,EAAc35B,iBAAiB,aAAa,SAAUF,GAElDA,EAAMkwC,aAAarqB,QAAQ1Q,EAAqC+D,EAAEoG,YAAanK,EAAqC+D,EAAEoG,gBAE1Hua,EAAc35B,iBAAiB,QAAQ,SAAUF,GACzCA,EAAMkwC,aAAaC,QAAQh7B,EAAqC+D,EAAEoG,aAElEsgB,GAAgB1Q,IAEqB,UAAhClvB,EAAMkwC,aAAaE,MAAM,IAAkBpwC,EAAMkwC,aAAaE,MAAMhzB,SAAS,eAElFizB,GAAMnhB,EAAQlvB,EAAO,CACjBswC,UAAW,SAAUrtB,GACjBlrB,SAASujC,YAAY,cAAc,EAAOrY,UAM1DstB,GAAY,SAAUrhB,EAAQ2K,EAAetX,GAC7CsX,EAAc35B,iBAAiB,QAAQ,SAAUF,GAAS,OAAOuiB,EAAKviB,EAAOkvB,OAE7EshB,GAAW,SAAUthB,EAAQ2K,EAAetX,GAC5CsX,EAAc35B,iBAAiB,OAAO,SAAUF,GAC5CuiB,EAAKviB,EAAOkvB,GAERA,EAAOzzB,QAAQg1C,QAAQ31B,QAAiC,YAAvBoU,EAAOO,aACxCP,EAAOuN,QAAQiU,YAAYxhB,GAE/Bn3B,SAASujC,YAAY,cAGzBiI,GAAe,SAAUrU,GAIzB,GAH2B,YAAvBA,EAAOO,aAA6BP,EAAOzzB,QAAQg1C,QAAQ31B,QAC3DoU,EAAOzzB,QAAQg1C,QAAQE,UAAUzhB,EAAOuN,QAAQiU,YAAYxhB,GAAQ,IAEnEA,EAAOzzB,QAAQsoC,eAApB,CAGA,IAAIlK,EAAgB3K,EAAOA,EAAOO,aAAa53B,QAC3C+4C,GAAY,EAAGn7B,EAAiCgiB,IAAIoC,GAAe9hB,IAClC,iBAA1BmX,EAAOzzB,QAAQyY,QAAwBgb,EAAOr3B,QAAQiJ,UAAU4f,SAAS,uBAChF1M,OAAOyK,SAASzK,OAAO0K,QAASkyB,EAAY1hB,EAAOr3B,QAAQomB,UAAYiR,EAAOqB,QAAQ14B,QAAQ24B,aAAexc,OAAOC,YAAc,EAAI,KAErG,iBAA1Bib,EAAOzzB,QAAQyY,QAAuBgb,EAAOr3B,QAAQiJ,UAAU4f,SAAS,yBAC/EmZ,EAAc7hB,UAAY44B,EAAY/W,EAAc7hB,UAAY6hB,EAAcvH,aAAe,EAAI,MAGrGue,GAAc,SAAU3hB,EAAQ2K,GAChCA,EAAc35B,iBAAiB,WAAW,SAAUF,GAEhD,KAAKkvB,EAAOzzB,QAAQojC,KAAKiS,OAAOx2C,OAAS,GAAK40B,EAAOqB,QAAQoO,SAASC,SAClE1P,EAAO2P,KAAK0K,OAAOvpC,EAAOkvB,GAD9B,CASA,GAJIA,EAAOzzB,QAAQg1C,QAAQ31B,QAAiC,YAAvBoU,EAAOO,cACzB,cAAdzvB,EAAMnH,KAAuB+oC,EAAY,KAAM5hC,KAChDkvB,EAAOuN,QAAQiU,YAAYxhB,GAEJ,OAAvBA,EAAOO,aACP,GAxoFwB,SAAUP,EAAQlvB,GAClD,IAAIgd,EAAI+zB,EAAIC,EAAIC,EAAIC,EAEpB,GADAhiB,EAAOqN,GAAGuI,cAAgB9kC,EAAMspC,YAC5BtpC,EAAMspC,YACN,OAAO,EAOX,IALoC,IAAhCtpC,EAAMnH,IAAIuG,QAAQ,UAAiC,SAAdY,EAAMnH,KAAgC,YAAdmH,EAAMnH,KAAmC,QAAdmH,EAAMnH,KAChF,UAAdmH,EAAMnH,KAAiC,aAAdmH,EAAMnH,KAAoC,WAAdmH,EAAMnH,KAAqB,aAAau8B,KAAKp1B,EAAMnH,MACxGq2B,EAAO+V,KAAKkM,oBAAoBjiB,EAAQlvB,GAG1B,UAAdA,EAAMnH,KAAiC,QAAdmH,EAAMnH,KAA+B,cAAdmH,EAAMnH,MAAuD,IAAhCmH,EAAMnH,IAAIuG,QAAQ,YAC3F,EAAG2+B,EAA0B7J,IAAIl0B,IAAwB,WAAdA,EAAMnH,IACrD,OAAO,EAEX,IAAIq/B,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAC7CkJ,EAAiBF,EAAME,eACW,IAAlCF,EAAME,eAAezB,UAAmD,QAAjCuB,EAAME,eAAehT,UAC5DgT,EAAiBF,EAAME,eAAep7B,WAAWk7B,EAAMc,YAAc,IAEzE,IAAIoY,GAAc,EAAG97B,EAAsCqgB,IAAIyC,EAAgB,YAAa,QAExFiZ,GAA0B,EAAG/7B,EAAsCqgB,IAAIyC,EAAgB,YAAa,qBAMxG,IALKiZ,GAAiD,IAAtBnZ,EAAMc,aAAqBoY,GAAeA,EAAYtW,wBACjB,sBAAjEsW,EAAYtW,uBAAuBpiC,aAAa,eAChD24C,EAA0BD,EAAYtW,wBAGtCuW,GACkB,UAAdrxC,EAAMnH,OAAoB,EAAGklC,EAA0B7J,IAAIl0B,KAAWA,EAAM8hC,QACV,KAAlEuP,EAAwBphB,mBAAmBzO,YAAY/J,SACvD,EAAGhC,EAAiCkiB,IAAI0Z,EAAyBniB,EAAOqN,GAAG1kC,QAASqgC,GAAO7oB,QACvFgiC,EAAwB7vB,YAAYlnB,OAQxC,MAPkI,aAAnE,QAAzD0iB,EAAKq0B,EAAwBvW,8BAA2C,IAAP9d,OAAgB,EAASA,EAAGtkB,aAAa,eAE5G24C,EAAwBvW,uBAAuBniC,aAAa,cAAe,gBAE/E04C,EAAwBrwC,SACxB8hC,GAAmB5T,GACnBlvB,EAAMwlB,kBACC,EAIf,IAAI8rB,GAAoB,EAAGh8B,EAAsCqgB,IAAIyC,EAAgB,YAAa,aAC9FmZ,GAAoB,EAAGj8B,EAAsCqgB,IAAIyC,EAAgB,YAAa,eAC9FoZ,EAAwBF,EAW5B,GAVKE,GACGD,GAAwF,gBAAnEA,EAAkBthB,mBAAmBv3B,aAAa,eACvE84C,EAAwBD,GAG3BC,GAA+C,IAAtBtZ,EAAMc,cAAqBoY,IAAeA,EAAYtW,wBACd,cAAjEsW,EAAYtW,uBAAuBpiC,aAAa,cACoB,gBAAjE04C,EAAYtW,uBAAuBpiC,aAAa,eACpD84C,EAAwBJ,EAAYtW,wBAEpC0W,EAAuB,CACvB,IAAIC,GAAa,EAAGh8B,EAAiCkiB,IAAI6Z,EAAuBtiB,EAAOqN,GAAG1kC,QAASqgC,GAAO7oB,MACtGqiC,EAA6D,gBAApDF,EAAsB94C,aAAa,aAC5Ci5C,EAAyBH,EAK7B,GAJIE,IACAC,EAAyBH,EAAsB1W,uBAAuBA,uBACjEA,wBAEL2W,IAAeD,EAAsBhwB,YAAYlnB,OAAQ,CAEzD,GAAkB,UAAd0F,EAAMnH,OAAoB,EAAGklC,EAA0B7J,IAAIl0B,KAAWA,EAAM8hC,SAAW9hC,EAAM+hC,UAC7B,KAAhEyP,EAAsBvhB,mBAAmBzO,YAAY/J,OAgBrD,MAfiI,aAAnE,QAAxDs5B,EAAKY,EAAuB7W,8BAA2C,IAAPiW,OAAgB,EAASA,EAAGr4C,aAAa,eAC3Gi5C,EAAuB7W,uBAAuB95B,SAC9C6hC,EAAW3T,KAGPwiB,IACAC,EAAuB3wC,SACvBwwC,EAAsB1W,uBAAuBA,uBAAuB95B,SACpEwwC,EAAsB1W,uBAAuB95B,UAEjDwwC,EAAsBvhB,mBAAmBjvB,SACzCwwC,EAAsBxwC,SACtB8hC,GAAmB5T,IAEvBlvB,EAAMwlB,kBACC,EAGX,GAAkB,QAAdxlB,EAAMnH,IASN,OARA84C,EAAuBjtB,mBAAmB,cAAe,6BAAiCitB,EAAuBnwB,YAAYrU,QAAQ,MAAO,KAAO,WAC/I,MAAMioB,KAAKuc,EAAuBnwB,eAClCmwB,EAAuBnwB,YAAcmwB,EAAuBnwB,YAAYrU,QAAQ,UAAW,KAC3F+qB,EAAM8B,mBAAmBwX,EAAsB9L,YAC/CxN,EAAMO,UAAS,IAEnBoK,EAAW3T,GACXlvB,EAAMwlB,kBACC,GAKnB,GAAIosB,GAAO1iB,EAAQgJ,EAAOl4B,GACtB,OAAO,EAEX,IAAI82B,GAAe,EAAGxhB,EAAsCqgB,IAAIyC,EAAgB,aAAc,KAC1F/Z,GAAc,EAAG8Y,EAA0Cd,GAAG+B,EAAgB,QAElF,GAAkB,UAAdp4B,EAAMnH,OAAoB,EAAGklC,EAA0B7J,IAAIl0B,KAAWA,EAAM8hC,SAAW9hC,EAAM+hC,UAAYjL,EAAc,CACvH,IAAI+a,GAAU,EACVC,EAAehb,EAAatV,YAAY3W,MAAM,SAC9C,EAAG4K,EAAiCkiB,IAAIb,EAAc5H,EAAOqN,GAAG1kC,SAASwX,QAAUyiC,EAAeA,EAAa,GAAGx3C,OAAS,KAE3Hu3C,GAAU,GAEd,IAAIE,EAAc,KAClB,GAAI1zB,EAAa,CACb,GAAwH,kBAArE,QAA7C2yB,EAAK3yB,EAAYyc,8BAA2C,IAAPkW,OAAgB,EAASA,EAAGt4C,aAAa,gBAKhG,OAHA2lB,EAAYyc,uBAAuB95B,SACnC8hC,GAAmB5T,GACnBlvB,EAAMwlB,kBACC,EAGPusB,GAAeC,GAAuB3zB,GAY9C,OATA6Z,EAAM+C,WAAWljC,SAASM,eAAe05C,IACzC7Z,EAAMO,UAAS,GACX3B,GAAoD,KAApCA,EAAatV,YAAY/J,SAAkBo6B,EAC3DhP,EAAW3T,GAGX4T,GAAmB5T,GAEvBlvB,EAAMwlB,kBACC,EAGX,GAAkB,cAAdxlB,EAAMnH,OAAwB,EAAGklC,EAA0B7J,IAAIl0B,KAAWA,EAAM8hC,SAAW9hC,EAAM+hC,SAAU,CAC3G,GAAI1jB,GAAiI,aAAnE,QAA7C4yB,EAAK5yB,EAAYyc,8BAA2C,IAAPmW,OAAgB,EAASA,EAAGv4C,aAAa,eACtB,KAAzF,EAAG+c,EAAiCkiB,IAAItZ,EAAa6Q,EAAOqN,GAAG1kC,QAASqgC,GAAO7oB,QAEb,IAAlEgP,EAAY3lB,aAAa,aAAa0G,QAAQ,eAW9C,OATA84B,EAAMM,SAASna,EAAa,GAC5B6Z,EAAM+Z,kBACiC,KAAnC5zB,EAAYmD,YAAY/J,OACxBorB,EAAW3T,GAGX4T,GAAmB5T,GAEvBlvB,EAAMwlB,kBACC,EAGX,GAAIsR,GAA0G,KAA1F,EAAGrhB,EAAiCkiB,IAAIb,EAAc5H,EAAOqN,GAAG1kC,QAASqgC,GAAO7oB,OAChGynB,EAAagE,uBAAwB,CACrC5C,EAAM+Z,kBACN,IAAIC,EAAsBpb,EAAagE,uBAAuBS,iBAsB9D,MArBsD,YAAlD2W,EAAoBx5C,aAAa,eACjCw5C,EAAoBlxC,SACpBkxC,EAAsBpb,EAAagE,uBAAuBS,kBAGR,YAAlD2W,EAAoBx5C,aAAa,eACjCw5C,EAAoBxtB,mBAAmB,WAAYoS,EAAa9f,WAChE8f,EAAa91B,UAEuB,KAApC81B,EAAatV,YAAY/J,SAAkE,QAA9Cy5B,EAAKpa,EAAagE,8BAA2C,IAAPoW,OAAgB,EAASA,EAAGvwC,cAAc,0CAIvF,YAAlDuxC,EAAoBx5C,aAAa,eAEjCw/B,EAAM8B,mBAAmBkY,EAAoBjb,WAC7CiB,EAAMO,UAAS,IAEnBqK,GAAmB5T,IARnB2T,EAAW3T,GAUflvB,EAAMwlB,kBACC,GAGf,OAAO,EA+8EK2sB,CAA8BjjB,EAAQlvB,GACtC,YAGH,GAA2B,YAAvBkvB,EAAOO,aACZ,GAx+DgC,SAAUP,EAAQlvB,GAG1D,GADAkvB,EAAOuN,QAAQqI,cAAgB9kC,EAAMspC,YACjCtpC,EAAMspC,YACN,OAAO,GAGyB,IAAhCtpC,EAAMnH,IAAIuG,QAAQ,UAAiC,SAAdY,EAAMnH,KAAgC,YAAdmH,EAAMnH,KAAmC,QAAdmH,EAAMnH,KAChF,UAAdmH,EAAMnH,KAAiC,aAAdmH,EAAMnH,KAAoC,WAAdmH,EAAMnH,KAAqB,aAAau8B,KAAKp1B,EAAMnH,MACxGq2B,EAAO+V,KAAKkM,oBAAoBjiB,EAAQlvB,GAE5C,IAAIk4B,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAC7CkJ,EAAiBF,EAAME,eAC3B,IAAKga,GAAkBpyC,EAAOkvB,EAAQkJ,GAClC,OAAO,EAKX,GAHAia,GAAena,EAAOhJ,EAAQlvB,GAC9BsyC,GAAMpa,GAEY,UAAdl4B,EAAMnH,KAAiC,QAAdmH,EAAMnH,KAA+B,cAAdmH,EAAMnH,MAAuD,IAAhCmH,EAAMnH,IAAIuG,QAAQ,YAC3F,EAAG2+B,EAA0B7J,IAAIl0B,IAAwB,WAAdA,EAAMnH,KAAkC,WAAdmH,EAAMnH,IAC/E,OAAO,EAEX,IAAIi+B,GAAe,EAAGxhB,EAAgCsgB,IAAIwC,GACtDoN,GAAW,EAAGlwB,EAAqCgJ,IAAI8Z,EAAgB,KAE3E,GAAIma,GAAYvyC,EAAOkvB,EAAQsW,EAAUtN,GACrC,OAAO,EAGX,GAAIsa,GAAQta,EAAOhJ,EAAQsW,EAAUxlC,GACjC,OAAO,EAGX,GAAIyyC,GAASvjB,EAAQlvB,EAAOk4B,GACxB,OAAO,EAGX,IAAIwa,GAAoB,EAAGp9B,EAAsCiJ,IAAI6Z,EAAgB,yBACrF,GAAIsa,EAAmB,CAEnB,GAAkB,WAAd1yC,EAAMnH,KAA0D,IAAtC65C,EAAkBz1C,SAAS3C,OAKrD,OAJA40B,EAAOuN,QAAQqC,QAAQ/lC,MAAM2e,QAAU,OACvCg7B,EAAkB1iB,kBAAkBj3B,MAAM2e,QAAU,OACpDwX,EAAOuN,QAAQ5kC,QAAQm4C,OACvBhwC,EAAMwlB,kBACC,EAGX,KAAK,EAAGuY,EAA0B7J,IAAIl0B,KAAWA,EAAM+hC,UAAY/hC,EAAM8hC,QAAwB,UAAd9hC,EAAMnH,KACrC,eAAhD65C,EAAkBh6C,aAAa,aAA+B,CAC9D,IAAIi6C,EAAgBzjB,EAAOuN,QAAQqC,QAAQn+B,cAAc,iBAIzD,OAHAgyC,EAActa,QACdsa,EAAcpJ,SACdvpC,EAAMwlB,kBACC,EAEX,GAAqD,MAAjDktB,EAAkBh6C,aAAa,cAAuB,CACtD,GAAIk6C,GAAa1jB,EAAQlvB,EAAO0yC,EAAkB1iB,kBAAmBkI,GACjE,OAAO,EAEX,GAAI6H,GAAiB7Q,EAAQlvB,EAAOk4B,EAAOwa,EAAkB1iB,kBAAmB0iB,GAC5E,OAAO,EAEX,GAAoD,sBAAhDA,EAAkBh6C,aAAa,cAC/BmnC,GAAkB3Q,EAAQlvB,EAAOk4B,EAAOwa,EAAkB1iB,kBAAmB0iB,GAC7E,OAAO,GAKnB,GAAIG,GAAc3jB,EAAQgJ,EAAOl4B,EAAOwlC,GACpC,OAAO,EAGX,IAAIsN,GAAe,EAAGx9B,EAAmCmgB,IAAI2C,EAAgB,cAC7E,GAAI0a,IACK9yC,EAAM+hC,UAAY/hC,EAAM8hC,QAAwB,UAAd9hC,EAAMnH,IAAiB,EACrD,EAAGklC,EAA0B7J,IAAIl0B,GAMlCk4B,EAAMsC,eAAesY,GAJrB5a,EAAMuC,cAAcqY,IAMxB,EAAGr9B,EAAiC6B,IAAI4gB,GACxC,IAAI7gC,EAAOU,SAASC,cAAc,KASlC,OARAX,EAAKsB,aAAa,aAAc,KAChCtB,EAAK2f,UAAY,KACjBkhB,EAAM+C,WAAW5jC,GACjB6gC,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,GACxC0M,EAAiB1V,GACjBqU,GAAarU,GACblvB,EAAMwlB,kBACC,EAIf,IA0EQ0Y,EA1EJ1f,GAAiB,EAAG2Y,EAA+C9H,GAAG+I,GAC1E,GAAI5Z,EAAgB,CAChB,GAA+B,OAA3BA,EAAe4G,SAAoBgT,EAAe5W,YAAYlnB,SAAW49B,EAAMc,eAC9E,EAAG+E,EAA0B7J,IAAIl0B,KAAWA,EAAM+hC,WAAa/hC,EAAM8hC,QAAwB,UAAd9hC,EAAMnH,IAAiB,CAEvG,IAAIk6C,EAAeh7C,SAASC,cAAc,KAS1C,OARA+6C,EAAavxB,YAAc,KAC3BuxB,EAAap6C,aAAa,aAAc,KACxCy/B,EAAe3X,cAActK,sBAAsB,WAAY48B,GAC/D7a,EAAMM,SAASua,EAAc,IAC7B,EAAGt9B,EAAiC6B,IAAI4gB,GACxC0M,EAAiB1V,GACjBqU,GAAarU,GACblvB,EAAMwlB,kBACC,EAIP,IAUIrmB,EAXR,GAAIyiC,EAAY,KAAM5hC,GAOlB,OANIb,EAAQgP,SAASqQ,EAAe4G,QAAQrH,OAAO,GAAI,IAAM,GACjD,IACR4nB,EAAWzW,EAAQ,IAAM/vB,GACzBylC,EAAiB1V,IAErBlvB,EAAMwlB,kBACC,EAGX,GAAIoc,EAAY,KAAM5hC,GAOlB,OANIb,EAAQgP,SAASqQ,EAAe4G,QAAQrH,OAAO,GAAI,IAAM,GACjD,IACR4nB,EAAWzW,EAAQ,IAAM/vB,GACzBylC,EAAiB1V,IAErBlvB,EAAMwlB,kBACC,EAEO,cAAdxlB,EAAMnH,MAAwB,EAAGklC,EAA0B7J,IAAIl0B,IAAWA,EAAM+hC,UAAa/hC,EAAM8hC,QAC1D,IAAtCtjB,EAAegD,YAAYlnB,QAE9BsrC,EAAc1W,GAItB,GAAI8jB,GAAQ9jB,EAAQgJ,EAAOl4B,GACvB,OAAO,EAGX,GAAIA,EAAM8hC,QAAwB,UAAd9hC,EAAMnH,OAAoB,EAAGklC,EAA0B7J,IAAIl0B,KAAWA,EAAM+hC,SAAU,CAEtG,IAAI9a,GAAW,EAAG3R,EAAqCgJ,IAAI8Z,EAAgB,KACvE6a,GAAgB,EAAG39B,EAAsCqgB,IAAIyC,EAAgB,YAAa,YAC1FgJ,GAAqB,EAAG9rB,EAAsCqgB,IAAIyC,EAAgB,YAAa,iBACnG,GAAInR,GAAYgsB,GAAiB7R,GAC5B5iB,GAAoD,IAAlCA,EAAe4G,QAAQ9qB,OAAe,CACzD,IAAI44C,EAAehkB,EAAOuN,QAAQqC,QAAQn+B,cAAc,SACxDuyC,EAAa7a,QACb6a,EAAa3J,UAIrB,GAAIvD,GAAmB9W,EAAQlvB,GAC3B,OAAO,EAGX,GAAI4hC,EAAY,MAAO5hC,KACfk+B,EAAchP,EAAOuN,QAAQqC,QAAQn+B,cAAc,qBAInD,OAFAu9B,EAAY+H,QACZjmC,EAAMwlB,kBACC,EAIf,GAAIoc,EAAY,MAAO5hC,KACfk+B,EAAchP,EAAOuN,QAAQqC,QAAQn+B,cAAc,uBAInD,OAFAu9B,EAAY+H,QACZjmC,EAAMwlB,kBACC,EAGf,GAAIosB,GAAO1iB,EAAQgJ,EAAOl4B,GACtB,OAAO,EAGX,KAAK,EAAG+9B,EAA0B7J,IAAIl0B,IAAUA,EAAM+hC,WAAa/hC,EAAM8hC,QAAwB,UAAd9hC,EAAMnH,KAC5C,OAAzCu/B,EAAe3X,cAAc2E,SAA6D,MAAzCgT,EAAe3X,cAAc2E,QAa9E,MAZI,CAAC,SAAU,SAAU,IAAK,IAAK,KAAM,KAAKhI,SAASgb,EAAe3X,cAAc2E,SAEhF8S,EAAM+C,WAAWljC,SAASM,eAAe,KAAO8c,EAA8B+D,EAAEmG,OAGhF6Y,EAAM+C,WAAWljC,SAASM,eAAe,OAE7C6/B,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,GACxC0M,EAAiB1V,GACjBqU,GAAarU,GACblvB,EAAMwlB,kBACC,EAGX,GAAkB,cAAdxlB,EAAMnH,OAAwB,EAAGklC,EAA0B7J,IAAIl0B,KAAWA,EAAM+hC,WAAa/hC,EAAM8hC,QAA+B,KAArB5J,EAAMxlB,WAAmB,CACtI,GAAIygC,GAAUjkB,EAAQgJ,EAAOl4B,EAAOwlC,GAChC,OAAO,EAEX,GAAI1O,EAAc,CACd,GAAIA,EAAagE,wBACVhE,EAAagE,uBAAuBh6B,UAAU4f,SAAS,0BACY,MAAnEoW,EAAagE,uBAAuBpiC,aAAa,eAExB,OAAzBo+B,EAAa1R,SAA6C,OAAzB0R,EAAa1R,QAAkB,CACnE,IAAIguB,GAAa,EAAG39B,EAAiCkiB,IAAIb,EAAc5H,EAAOuN,QAAQ5kC,QAASqgC,GAAO7oB,MACtG,GAAoB,IAAf+jC,GAA0C,IAAtBlb,EAAMc,aACX,IAAfoa,GAAoBtc,EAAapV,UAAU2T,WAAWlgB,EAA8B+D,EAAEmG,MASvF,OAPAwmB,GAAS/O,EAAagE,uBAAuBS,iBAAkBrM,GAAQ,GACiB,KAApF4H,EAAa9f,UAAUS,OAAOtK,QAAQgI,EAA8B+D,EAAEmG,KAAM,MAE5EyX,EAAa91B,SACb4jC,EAAiB1V,IAErBlvB,EAAMwlB,kBACC,EAGf,IAAI6tB,EAAmBnb,EAAMc,YAC7B,GAAyB,KAArBd,EAAMxlB,YAAiD,IAA5B0lB,EAAezB,UACkB,OAA5DyB,EAAe5W,YAAYjb,OAAO8sC,EAAmB,IACrDjb,EAAe5W,YAAYjb,OAAO8sC,EAAmB,KAAOl+B,EAA8B+D,EAAEmG,MACzF,CAAC,SAAU,SAAU,IAAK,IAAK,KAAM,KAAKjC,SAASgb,EAAe3X,cAAc2E,SAQnF,OANAgT,EAAe5W,YAAc4W,EAAe5W,YAAYxe,UAAU,EAAGqwC,EAAmB,GACpFl+B,EAA8B+D,EAAEmG,KACpC6Y,EAAMM,SAASJ,EAAgBib,GAC/Bnb,EAAMO,UAAS,GACfmM,EAAiB1V,GACjBlvB,EAAMwlB,kBACC,EAGP4S,EAAe5W,cAAgBrM,EAA8B+D,EAAEmG,MAA8B,IAAtB6Y,EAAMc,cACzEZ,EAAe4C,iBA9blB,SAAU9C,GAEvB,IADA,IAAIqK,EAAWrK,EAAME,eAAemC,YAC7BgI,GAAqC,KAAzBA,EAAS/gB,aACxB+gB,EAAWA,EAAShI,YAExB,SAAIgI,GAAkC,IAAtBA,EAAS5L,UAAwC,SAArB4L,EAASnd,SACV,gBAAvCmd,EAAS7pC,aAAa,cACiB,gBAAvC6pC,EAAS7pC,aAAa,cACiB,gBAAvC6pC,EAAS7pC,aAAa,cAsbwB46C,CAAWpb,KACjDE,EAAe5W,YAAc,IAIjCsV,EAAa3iB,iBAAiB,uDAAuDtd,SAAQ,SAAU2f,GACnGA,EAAKwZ,kBAAkBj3B,MAAM2e,QAAU,SACvClB,EAAK+kB,iBAAiBxiC,MAAM2e,QAAU,UAE1Cof,EAAa3iB,iBAAiB,uDAAuDtd,SAAQ,SAAU2f,GACnGA,EAAKwZ,kBAAkBj3B,MAAM2e,QAAU,SACvClB,EAAK+kB,iBAAiBxiC,MAAM2e,QAAU,WAIlD,IAAI,EAAGqmB,EAA6BhK,OAA+B,IAAtBmE,EAAMc,aAAqBZ,EAAe5W,YAAYpiB,QAAQ+V,EAA8B+D,EAAEmG,OAAS,GAChJ+Y,EAAe4C,iBAA+D,IAA5C5C,EAAe4C,gBAAgBrE,UACtB,SAA3CyB,EAAe4C,gBAAgB5V,UAChB,cAAdplB,EAAMnH,KAAqC,cAAdmH,EAAMnH,KAKpC,OAHAq/B,EAAM8B,mBAAmB5B,EAAe4C,iBACxC9C,EAAMO,UAAS,GACfz4B,EAAMwlB,kBACC,EAEX,GAAI+tB,GAAuBvzC,EAAO82B,EAAcoB,GAE5C,OADAl4B,EAAMwlB,kBACC,EAGX,GADAguB,GAAwBtb,EAAOl4B,EAAMnH,KACnB,cAAdmH,EAAMnH,IAAqB,CAE3B,IAAIuyC,EAAchT,EAAemC,YAC7B6Q,GAAwC,IAAzBA,EAAYzU,UAA4D,gBAA1CyU,EAAY1yC,aAAa,cACtEw/B,EAAMuC,cAAc2Q,GAG5B,SAAItU,IAAgB6I,EAAW7I,EAAc5H,EAAQlvB,EAAOk4B,KACxDl4B,EAAMwlB,iBACC,IA+sDCiuB,CAAsCvkB,EAAQlvB,GAC9C,YAGH,GAA2B,OAAvBkvB,EAAOO,aAniGH,SAAUP,EAAQlvB,GAEnC,GADAkvB,EAAOyN,GAAGmI,cAAgB9kC,EAAMspC,YAC5BtpC,EAAMspC,YACN,OAAO,GAGyB,IAAhCtpC,EAAMnH,IAAIuG,QAAQ,UAAiC,SAAdY,EAAMnH,KAAgC,YAAdmH,EAAMnH,KAAmC,QAAdmH,EAAMnH,KAChF,UAAdmH,EAAMnH,KAAiC,aAAdmH,EAAMnH,KAAoC,WAAdmH,EAAMnH,KAAqB,aAAau8B,KAAKp1B,EAAMnH,MACxGq2B,EAAO+V,KAAKkM,oBAAoBjiB,EAAQlvB,GAE5C,IAAIk4B,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAC7CkJ,EAAiBF,EAAME,eAC3B,IAAKga,GAAkBpyC,EAAOkvB,EAAQkJ,GAClC,OAAO,EAKX,GAHAia,GAAena,EAAOhJ,EAAQlvB,GAC9BsyC,GAAMpa,GAEY,UAAdl4B,EAAMnH,KAAiC,QAAdmH,EAAMnH,KAA+B,cAAdmH,EAAMnH,MAAuD,IAAhCmH,EAAMnH,IAAIuG,QAAQ,YAC3F,EAAG2+B,EAA0B7J,IAAIl0B,IAAwB,WAAdA,EAAMnH,KAAkC,WAAdmH,EAAMnH,IAC/E,OAAO,EAGX,IAAI66C,GAAiB,EAAGp+B,EAAsCqgB,IAAIyC,EAAgB,eAAgB,KAClG,KAAK,EAAG2F,EAA0B7J,IAAIl0B,KAAWA,EAAM8hC,SAAW9hC,EAAM+hC,UAA0B,UAAd/hC,EAAMnH,KAAmB66C,GACtGxb,EAAMc,YAAc0a,EAAelyB,YAAYlnB,OAAQ,CAC1D,IAAIq5C,EAAsBD,EAAe5Y,uBACrC6Y,IACAzb,EAAM+C,WAAWljC,SAASM,eAAes7C,EAAoBnyB,cAC7D0W,EAAMO,UAAS,IAEnB,IAAImb,EAAqBF,EAAenZ,YACpCqZ,IACA1b,EAAM+C,WAAWljC,SAASM,eAAeu7C,EAAmBpyB,cAC5D0W,EAAMO,UAAS,IAGvB,IAAI+M,GAAW,EAAGlwB,EAAqCgJ,IAAI8Z,EAAgB,KAE3E,GAAIma,GAAYvyC,EAAOkvB,EAAQsW,EAAUtN,GACrC,OAAO,EAGX,GAAIsa,GAAQta,EAAOhJ,EAAQsW,EAAUxlC,GACjC,OAAO,EAGX,GAAI6yC,GAAc3jB,EAAQgJ,EAAOl4B,EAAOwlC,GACpC,OAAO,EAGX,IAAIqO,GAAmB,EAAGv+B,EAAsCiJ,IAAI6Z,EAAgB,0BACpF,GAAIyb,GAAiD,QAA7BA,EAAiBzuB,QAAmB,CACxD,IAAIstB,EAAoBmB,EAAiBnO,WACzC,GAAIkN,GAAa1jB,EAAQlvB,EAAO6zC,EAAkB3b,GAC9C,OAAO,EAGX,IAAqD,eAAhDwa,EAAkBh6C,aAAa,cACmB,eAAhDg6C,EAAkBh6C,aAAa,eAClCmnC,GAAkB3Q,EAAQlvB,EAAOk4B,EAAOwa,EAAmBmB,EAAiBpzB,eAC5E,OAAO,EAGX,GAAIsf,GAAiB7Q,EAAQlvB,EAAOk4B,EAAOwa,EAAmBmB,EAAiBpzB,eAC3E,OAAO,EAIf,IAAIqzB,GAAmB,EAAGx+B,EAAsCqgB,IAAIyC,EAAgB,YAAa,mBACjG,GAAI0b,EAAkB,CAClB,GAAkB,UAAd9zC,EAAMnH,KAAiC,QAAdmH,EAAMnH,IAK/B,OAJAq/B,EAAM8B,mBAAmB8Z,EAAiB7jB,mBAAmByV,YAC7DxN,EAAMO,UAAS,GACfz4B,EAAMwlB,iBACNgZ,EAAUtP,EAAQ,CAAC,UACZ,EAEX,GAAkB,cAAdlvB,EAAMnH,IAAqB,CAC3B,IAAIwW,GAAQ,EAAGoG,EAAiCkiB,IAAImc,EAAkB5kB,EAAOyN,GAAG9kC,SAASwX,MAC3E,IAAVA,GACA6oB,EAAMM,SAASJ,EAAgB,GAErB,IAAV/oB,IACA6f,EAAO2P,KAAKqL,eAAiB,IAGrC,GAAIrK,GAAkB3Q,EAAQlvB,EAAOk4B,EAAO4b,EAAkBA,EAAiBrzB,eAG3E,OADA+d,EAAUtP,EAAQ,CAAC,UACZ,EAIf,IAAImZ,GAAc,EAAG/yB,EAAqCgJ,IAAI8Z,EAAgB,QAC1E,EAAG9iB,EAAqCgJ,IAAI8Z,EAAgB,MAChE,GAAIp4B,EAAMnH,IAAIuG,QAAQ,UAAY,GAAKipC,EAAa,CAChD,IAAI5B,EAAesN,GAAY1L,GAC/B,GAAI5B,GAAgB5G,GAAkB3Q,EAAQlvB,EAAOk4B,EAAOmQ,EAAa5B,GACrE,OAAO,EAEX,IAAIuN,EAAgBC,GAAW5L,GAC/B,GAAI2L,GAAiBjU,GAAiB7Q,EAAQlvB,EAAOk4B,EAAOmQ,EAAa2L,GACrE,OAAO,EAGf,GAAIvB,GAASvjB,EAAQlvB,EAAOk4B,GACxB,OAAO,EAGX,GAAI8a,GAAQ9jB,EAAQgJ,EAAOl4B,GACvB,OAAO,EAGX,GAAI4xC,GAAO1iB,EAAQgJ,EAAOl4B,GACtB,OAAO,EAEX,IAAIwe,GAAiB,EAAG2Y,EAA+C9H,GAAG+I,GAC1E,GAAI5Z,EAAgB,CAGZ,IASI01B,EAVR,GAAItS,EAAY,KAAM5hC,GAMlB,OALIk0C,EAAuB11B,EAAe7d,cAAc,iCAC5BuzC,EAAqB1yB,YAAY/J,OAAOnd,OAAS,GACzE65C,GAAuBjlB,EAAQglB,EAAqB1yB,YAAYzD,OAAO,IAE3E/d,EAAMwlB,kBACC,EAGX,GAAIoc,EAAY,KAAM5hC,GAMlB,OALIk0C,EAAuB11B,EAAe7d,cAAc,iCAC5BuzC,EAAqB1yB,YAAY/J,OAAOnd,OAAS,GACzE65C,GAAuBjlB,EAAQglB,EAAqB1yB,YAAY/J,OAAS,MAE7EzX,EAAMwlB,kBACC,EAGf,IAAIsR,GAAe,EAAGxhB,EAAgCsgB,IAAIwC,GAC1D,GAAkB,cAAdp4B,EAAMnH,OAAwB,EAAGklC,EAA0B7J,IAAIl0B,KAAWA,EAAM+hC,WAAa/hC,EAAM8hC,QAA+B,KAArB5J,EAAMxlB,WAAmB,CACtI,GAAIygC,GAAUjkB,EAAQgJ,EAAOl4B,EAAOwlC,GAChC,OAAO,EAEX,GAAI1O,GAAgBA,EAAagE,wBACD,OAAzBhE,EAAa1R,SAA6C,OAAzB0R,EAAa1R,UACqB,eAAlE0R,EAAagE,uBAAuBpiC,aAAa,cACiB,eAAlEo+B,EAAagE,uBAAuBpiC,aAAa,cAAgC,CACrF,IAAI06C,GAAa,EAAG39B,EAAiCkiB,IAAIb,EAAc5H,EAAOyN,GAAG9kC,QAASqgC,GAAO7oB,MACjG,GAAmB,IAAf+jC,GAAoC,IAAfA,GAAoBtc,EAAapV,UAAU2T,WAAWlgB,EAA8B+D,EAAEmG,MAW3G,OATA6Y,EAAM8B,mBAAmBlD,EAAagE,uBAAuBn6B,cAAc,iCAC3Eu3B,EAAMO,UAAS,GACf0J,EAAajK,EAAOhJ,GACsE,KAAtF4H,EAAatV,YAAY/J,OAAOtK,QAAQgI,EAA8B+D,EAAEmG,KAAM,MAE9EyX,EAAa91B,SACbwgC,GAA2BtS,IAE/BlvB,EAAMwlB,kBACC,EAIf,GAAIhH,EAAgB,CAChB,IAAI41B,EAAgB51B,EAAewR,kBAAkBxO,YAAYlnB,QAC7D,EAAGmb,EAAiCkiB,IAAInZ,EAAgB0Q,EAAOyN,GAAG9kC,SAASwX,QAAU+kC,IACrFlc,EAAMM,SAASha,EAAewR,kBAAkB0V,WAAY0O,EAAgB,GAC5Elc,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,KAIpD,SAAmB,YAAdl4B,EAAMnH,KAAmC,cAAdmH,EAAMnH,MAAwBi+B,IAE1DA,EAAa3iB,iBAAiB,oBAAoBtd,SAAQ,SAAU2f,GAC3DA,EAAKkK,SAAS0X,IACf5hB,EAAK1V,UAAUlG,IAAI,+BAGvB24C,GAAuBvzC,EAAO82B,EAAcoB,OAIpDsb,GAAwBtb,EAAOl4B,EAAMnH,MACjCi+B,IAAgB6I,EAAW7I,EAAc5H,EAAQlvB,EAAOk4B,KACxDl4B,EAAMwlB,iBACC,KA02FC6uB,CAAenlB,EAAQlvB,GACvB,OAGR,GAAIkvB,EAAOzzB,QAAQ64C,WAAa1S,EAAY,SAAU5hC,GAGlD,OAFAkvB,EAAOzzB,QAAQ64C,UAAUhY,EAAYpN,SACrClvB,EAAMwlB,iBAIV,GAAIoc,EAAY,KAAM5hC,KAAWkvB,EAAOqB,QAAQoO,SAASsG,KAGrD,OAFA/V,EAAO+V,KAAKA,KAAK/V,QACjBlvB,EAAMwlB,iBAIV,GAAIoc,EAAY,KAAM5hC,KAAWkvB,EAAOqB,QAAQoO,SAAS4V,KAGrD,OAFArlB,EAAO+V,KAAKsP,KAAKrlB,QACjBlvB,EAAMwlB,iBAIV,GAAkB,WAAdxlB,EAAMnH,IAQN,MAP0C,UAAtCq2B,EAAO2P,KAAKhnC,QAAQkB,MAAM2e,QAC1BwX,EAAO2P,KAAKhnC,QAAQkB,MAAM2e,QAAU,OAE/BwX,EAAOzzB,QAAQ+4C,MAAQx0C,EAAMspC,aAClCpa,EAAOzzB,QAAQ+4C,IAAIlY,EAAYpN,SAEnClvB,EAAMwlB,iBAIV,IAAI,EAAGuY,EAA0B7J,IAAIl0B,IAAUA,EAAM8hC,SAAW9hC,EAAM+hC,UAAY,eAAe3M,KAAKp1B,EAAMijB,MAAO,CAC/G,GAA2B,YAAvBiM,EAAOO,YAA2B,CAClC,IAAIrK,EAAUplB,EAAMijB,KAAK9V,QAAQ,QAAS,MACtC,EAAGmI,EAAqCgJ,IAAI9G,eAAeG,WAAW,GAAGygB,eAAgBhT,GACzFwgB,EAAc1W,GAGdyW,EAAWzW,EAAQ9J,GAEvBwf,EAAiB1V,OAEW,OAAvBA,EAAOO,YACZglB,GAAevlB,EAAQ,IAAIwlB,OAAOvmC,SAASnO,EAAMijB,KAAK9V,QAAQ,QAAS,IAAK,KAAO,KAEvD,OAAvB+hB,EAAOO,aACZ0kB,GAAuBjlB,EAAQ,IAAIwlB,OAAOvmC,SAASnO,EAAMijB,KAAK9V,QAAQ,QAAS,IAAK,KAAO,KAG/F,OADAnN,EAAMwlB,kBACC,EAGX,IAAI,EAAGuY,EAA0B7J,IAAIl0B,IAAUA,EAAM8hC,SAAW9hC,EAAM+hC,UAAY,eAAe3M,KAAKp1B,EAAMijB,MAUxG,MATmB,WAAfjjB,EAAMijB,KACNyrB,GAAYxf,EAAQ,UAAWlvB,GAEX,WAAfA,EAAMijB,KACXyrB,GAAYxf,EAAQ,KAAMlvB,GAEN,WAAfA,EAAMijB,MACXyrB,GAAYxf,EAAQ,KAAMlvB,IAEvB,EAGXkvB,EAAOzzB,QAAQ80B,QAAQgV,MAAK,SAAUuH,GAClC,OAAKA,EAAS3X,QAAU2X,EAASvc,UACzBuc,EAASvc,WACCuc,EAASvc,QAAQgV,MAAK,SAAUoP,GACtC,QAAKA,EAAYxf,SAGbyM,EAAY+S,EAAYxf,OAAQn1B,IAChCkvB,EAAOqB,QAAQoO,SAASgW,EAAY78C,MAAMmF,SAAS,GAC9C23C,cAAc,IAAI1H,aAAY,EAAGnP,EAAgC9J,QACtEj0B,EAAMwlB,kBACC,QAJX,MAWRoc,EAAYkL,EAAS3X,OAAQn1B,IAC7BkvB,EAAOqB,QAAQoO,SAASmO,EAASh1C,MAAMmF,SAAS,GAAG23C,cAAc,IAAI1H,aAAY,EAAGnP,EAAgC9J,QACpHj0B,EAAMwlB,kBACC,QAHX,UAQRqvB,GAAc,SAAU3lB,EAAQ2K,GAChCA,EAAc35B,iBAAiB,eAAe,SAAUF,GACpD65B,EAAcib,UAAY,WACtB/zC,YAAW,WACP,IAAIg0C,EAAavF,GAActgB,EAAOA,EAAOO,aAAa53B,SACtDk9C,EAAWt9B,QACgB,YAAvByX,EAAOO,aAA6BP,EAAOzzB,QAAQg1C,QAAQ31B,UACtD,EAAGxF,EAAsCqgB,IAAI31B,EAAM5I,OAAQ,YAAa,qBACxE,EAAGke,EAAsCqgB,IAAI31B,EAAM5I,OAAQ,YAAa,uBAIzE83B,EAAOuN,QAAQsT,cAHf7gB,EAAOuN,QAAQuY,eAMnB9lB,EAAOzzB,QAAQ8tC,QACfra,EAAOzzB,QAAQ8tC,OAAOwL,IAIC,YAAvB7lB,EAAOO,aAA6BP,EAAOzzB,QAAQg1C,QAAQ31B,QAC3DoU,EAAOuN,QAAQsT,sBAiBnCkF,GAAe,SAAU/lB,EAAQ/2B,GACjC,IAAI+/B,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GACjDgJ,EAAM+Z,kBACN/Z,EAAM+C,WAAWljC,SAASM,eAAew3B,KAAKuT,QAC9ClL,EAAM+C,WAAWljC,SAASM,eAAeF,IACzC,IAAI2+B,GAAe,EAAGxhB,EAAsCqgB,IAAIuC,EAAME,eAAgB,aAAc,KAC/FtB,IACDA,EAAe5H,EAAOqN,GAAG1kC,SAE7B,IAAIiV,EAAO,uBACPoiB,EAAO5T,KAAK45B,eAAepe,EAAatV,aAAarU,QAAQ,mKAAoK,uLACjO,SACA2pB,EAAa5G,YAAYhB,EAAOqN,GAAG1kC,SACnCi/B,EAAa9f,UAAYlK,EAGzBgqB,EAAalT,UAAY9W,GAE7B,EAAG2I,EAA6BoiB,IAAI3I,EAAOqN,GAAG1kC,QAASqgC,GACvDqL,GAAarU,IAEb+T,GAAgB,SAAUkS,EAAUj2C,EAAMk2C,QACvB,IAAfA,IAAyBA,GAAa,GAC1C,IAAIC,EAAcF,EAIlB,IAH6B,IAAzBE,EAAY1e,WACZ0e,EAAcA,EAAY50B,eAEvB40B,GAAa,CAChB,GAAIA,EAAY38C,aAAa,eAAiBwG,EAC1C,OAAOm2C,EAGPA,EADAD,EACcC,EAAYva,uBAGZua,EAAYplB,mBAGlC,OAAO,GAEPqT,GAAyB,SAAUx2B,EAAMoiB,GAMzC,OALAnvB,EAAI,kBAAmB+M,EAAM,WAAYoiB,EAAOzzB,QAAQulC,UACxDl0B,EAAO,uBACHoiB,EAAO5T,KAAKg6B,gBAAgBxoC,GAAMK,QAAQ,mKAAoK,uLAC9M,SACJpN,EAAI,kBAAmB+M,EAAM,SAAUoiB,EAAOzzB,QAAQulC,UAC/Cl0B,GAEPklC,GAAyB,SAAU3zB,GACnC,IAAIk3B,EAAWl3B,EAAY3lB,aAAa,aACpCqtC,EAAkB1nB,EAAYyc,uBAE9B0a,EAAcD,GAAyB,SAAbA,GAAoC,UAAbA,GAAqC,mBAAbA,GAC5D,YAAbA,GAAuC,kCAAbA,GAA6D,mCAAbA,GAC1D,oBAAbA,GAA+C,4BAAbA,GAAuD,2BAAbA,EAC/El3B,EAAYmD,YAAc,GAC1Bi0B,GAAQ,EAIZ,IAHiB,YAAbF,IACAE,GAAQ,GAEL1P,IAAoB0P,GAAO,CAC9B,IAAIC,EAAe3P,EAAgBrtC,aAAa,aAChD,GAAqB,cAAjBg9C,GAAiD,sBAAjBA,GAAyD,gBAAjBA,GACvD,YAAjBA,EAA4B,CAC5B,IAAIC,EAAe5P,EAAgBvkB,YACnC,GAAqB,cAAjBk0B,GACc,2BAAbH,GAAsD,oBAAbA,EAIzC,GAAiB,4BAAbA,GACLxP,EAAgB9V,mBAAmB8K,WAAW1c,GAAc,CAE5D,IAAIu3B,EAAa3S,GAAc5kB,EAAa,0BACxCu3B,GAAcA,EAAW9a,yBACzBiL,EAAkB6P,EAAW9a,uBAC7B0a,EAAaG,EAAeH,QAIhCA,EAAaG,EAAeH,OAZ5BA,EAAaG,EAAaxoC,QAAQ,MAAO,KAAOqoC,MAe9B,YAAjBE,IACLD,GAAQ,GAEZ1P,EAAkBA,EAAgBjL,uBAEtC,OAAO0a,GAEP1S,GAAqB,SAAU5T,EAAQzzB,QACvB,IAAZA,IAAsBA,EAAU,CAChCgmC,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEblmC,EAAQimC,YACRxS,EAAO2P,KAAKY,OAAOvQ,GAEvBA,EAAOhQ,QAAQugB,OAAOvQ,GACtB,IAAI/2B,EAAOmkC,EAAYpN,GACa,mBAAzBA,EAAOzzB,QAAQwkC,OAAwBxkC,EAAQkmC,aACtDzS,EAAOzzB,QAAQwkC,MAAM9nC,GAErB+2B,EAAOzzB,QAAQspC,QAAQjqB,QACvBoU,EAAO6V,QAAQtF,OAAOvQ,EAAQ/2B,GAE9B+2B,EAAOzzB,QAAQ2oC,MAAMtpB,SAAU,EAAGijB,EAAsC/J,QACxEW,aAAaqQ,QAAQ9V,EAAOzzB,QAAQ2oC,MAAMtmB,GAAI3lB,GAC1C+2B,EAAOzzB,QAAQ2oC,MAAMhmB,OACrB8Q,EAAOzzB,QAAQ2oC,MAAMhmB,MAAMjmB,IAG/B+2B,EAAO6N,UACP7N,EAAO6N,SAASF,aAAa3N,GAEjCsV,aAAatV,EAAOqN,GAAGsZ,kBACvB3mB,EAAOqN,GAAGsZ,iBAAmB7hC,OAAOjT,YAAW,WACvCtF,EAAQgmC,qBAAuBvS,EAAOqN,GAAGuI,eACzC5V,EAAO+V,KAAKC,eAAehW,KAEhCA,EAAOzzB,QAAQ0pC,YAElBsP,GAAiB,SAAUvlB,EAAQ12B,GACnC,IAAI0/B,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAC7C1Q,GAAiB,EAAG2Y,EAA0Cd,GAAG6B,EAAME,eAAgB,QACvF5Z,GAAwD,KAAtCA,EAAegD,YAAY/J,SAC7Cjf,EAAQ,KAAOA,GAEnB0/B,EAAMO,UAAS,GACf1gC,SAASujC,YAAY,cAAc,EAAO9iC,IAE1C61C,GAAiB,SAAUnf,EAAQ+P,EAAWnvB,EAAQC,GACtD,IAAImoB,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAC7C+c,EAAchN,EAAUvmC,aAAa,aAEG,IAAxCw2B,EAAOqN,GAAG1kC,QAAQmF,WAAW1C,SAC7B40B,EAAOqN,GAAG1kC,QAAQmf,UAAY,2JAC9B,EAAGvB,EAA6BoiB,IAAI3I,EAAOqN,GAAG1kC,QAASqgC,IAE3D,IAAIpB,GAAe,EAAGxhB,EAAgCsgB,IAAIsC,EAAME,gBAC5D/Z,GAAc,EAAG8Y,EAA0Cd,GAAG6B,EAAME,eAAgB,QACxF,GAAKtB,EAAL,CAGA,GAAoB,SAAhBmV,EAAwB,CACxB,IAAIn/B,OAAO,EAQX,OANIA,EADqB,KAArBorB,EAAMxlB,WACC,GAAK5C,EAAS+f,KAAKuT,MAAQrzB,EAG3B,GAAKD,EAASooB,EAAMxlB,WAAa3C,EAAO5C,QAAQ,IAAK0iB,KAAKuT,MAAQ,UAE7ErrC,SAASujC,YAAY,cAAc,EAAOxuB,GAGzC,GAAoB,WAAhBm/B,GAA4C,SAAhBA,GAA0C,WAAhBA,GAC3C,gBAAhBA,GAAiD,SAAhBA,GAA0C,UAAhBA,GAA2C,SAAhBA,EAgBtF,OAfIn/B,OAAO,EAGPA,EADqB,KAArBorB,EAAMxlB,WACC,GAAK5C,EAAS+f,KAAKuT,OAAyB,SAAhB6I,EAAyB,GAAKl8B,GAG1D,GAAKD,EAASooB,EAAMxlB,WAAamd,KAAKuT,OAAyB,SAAhB6I,EAAyB,GAAKl8B,GAEpE,UAAhBk8B,GAA4C,SAAhBA,GAA0B5tB,GAA2C,KAA5BA,EAAYmD,YACjF1U,EAAO,OAASA,EAEK,SAAhBm/B,IACLn/B,EAAO,OAASgD,EAAS,KAAO+f,KAAKuT,YAEzCrrC,SAASujC,YAAY,cAAc,EAAOxuB,GAGzC,IAAoB,UAAhBm/B,GAA2C,SAAhBA,GAA0C,iBAAhBA,GAC1C,UAAhBA,IACI5tB,EAAa,CACb,IAAI8iB,EAAS,KACO,UAAhB8K,EACA9K,EAAS,SAEY,iBAAhB8K,EACL9K,EAAS,MAEY,UAAhB8K,IACL9K,EAAS,MAEb,IAAI2U,EAAU7S,GAAc5kB,EAAa,WAQzC,OAPIy3B,EACAA,EAAQC,mBAAmB,WAAY5U,GAGvCrK,EAAaif,mBAAmB,aAAc5U,QAElD0B,EAAW3T,IAInB,EAAGzZ,EAA6BoiB,IAAI3I,EAAOqN,GAAG1kC,QAASqgC,GACvD4K,GAAmB5T,KAInB8mB,GAAa,SAAU9mB,GACvB,OAAQA,EAAOO,aACX,IAAK,KACD,OAAOP,EAAOyN,GAAG9kC,QACrB,IAAK,UACD,OAAOq3B,EAAOuN,QAAQ5kC,QAC1B,IAAK,KACD,OAAOq3B,EAAOqN,GAAG1kC,UAKzBo+C,GAAa,SAAU/mB,EAAQgnB,GAC3BhnB,EAAOzzB,QAAQ06C,OAAOF,aACtB/mB,EAAOzzB,QAAQ06C,OAAOC,QAAUlnB,EAAOzzB,QAAQ06C,OAAOF,cAEtD/mB,EAAOzzB,QAAQ06C,OAAOC,SACtB3/C,OAAOiJ,KAAKwvB,EAAOzzB,QAAQ06C,OAAOC,SAASv/C,SAAQ,SAAUgC,GACzDq9C,EAAIhjB,iBAAiBr6B,EAAKq2B,EAAOzzB,QAAQ06C,OAAOC,QAAQv9C,QAMhEsf,GAAkD,SAAUC,EAASC,EAAYC,EAAGC,GAEpF,OAAO,IAAKD,IAAMA,EAAI1e,WAAU,SAAUC,EAAS2e,GAC/C,SAASC,EAAUjgB,GAAS,IAAMkgB,EAAKH,EAAUI,KAAKngB,IAAW,MAAOqH,GAAK2Y,EAAO3Y,IACpF,SAAS+Y,EAASpgB,GAAS,IAAMkgB,EAAKH,EAAiB,MAAE/f,IAAW,MAAOqH,GAAK2Y,EAAO3Y,IACvF,SAAS6Y,EAAKvf,GAJlB,IAAeX,EAIaW,EAAO0f,KAAOhf,EAAQV,EAAOX,QAJ1CA,EAIyDW,EAAOX,MAJhDA,aAAiB8f,EAAI9f,EAAQ,IAAI8f,GAAE,SAAUze,GAAWA,EAAQrB,OAIT8C,KAAKmd,EAAWG,GAClGF,GAAMH,EAAYA,EAAUO,MAAMV,EAASC,GAAc,KAAKM,YAGlEI,GAAsD,SAAUX,EAASlC,GACzE,IAAsG8C,EAAGnS,EAAGoS,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEP,KAAMa,EAAK,GAAIC,MAASD,EAAK,GAAIE,OAAUF,EAAK,IAAwB,mBAAXG,SAA0BT,EAAES,OAAOC,UAAY,WAAa,OAAOxb,OAAU8a,EACvJ,SAASM,EAAKtL,GAAK,OAAO,SAAU2L,GAAK,OACzC,SAAc9X,GACV,GAAIiX,EAAG,MAAM,IAAIc,UAAU,mCAC3B,KAAOX,OACH,GAAIH,EAAI,EAAGnS,IAAMoS,EAAY,EAARlX,EAAG,GAAS8E,EAAU,OAAI9E,EAAG,GAAK8E,EAAS,SAAOoS,EAAIpS,EAAU,SAAMoS,EAAEc,KAAKlT,GAAI,GAAKA,EAAE8R,SAAWM,EAAIA,EAAEc,KAAKlT,EAAG9E,EAAG,KAAK8W,KAAM,OAAOI,EAE3J,OADIpS,EAAI,EAAGoS,IAAGlX,EAAK,CAAS,EAARA,EAAG,GAAQkX,EAAEzgB,QACzBuJ,EAAG,IACP,KAAK,EAAG,KAAK,EAAGkX,EAAIlX,EAAI,MACxB,KAAK,EAAc,OAAXoX,EAAEC,QAAgB,CAAE5gB,MAAOuJ,EAAG,GAAI8W,MAAM,GAChD,KAAK,EAAGM,EAAEC,QAASvS,EAAI9E,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKoX,EAAEI,IAAI9e,MAAO0e,EAAEG,KAAK7e,MAAO,SACxC,QACI,MAAkBwe,GAAZA,EAAIE,EAAEG,MAAYhf,OAAS,GAAK2e,EAAEA,EAAE3e,OAAS,KAAkB,IAAVyH,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEoX,EAAI,EAAG,SACjG,GAAc,IAAVpX,EAAG,MAAckX,GAAMlX,EAAG,GAAKkX,EAAE,IAAMlX,EAAG,GAAKkX,EAAE,IAAM,CAAEE,EAAEC,MAAQrX,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYoX,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIlX,EAAI,MAC7D,GAAIkX,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIvf,KAAK+H,GAAK,MACvDkX,EAAE,IAAIE,EAAEI,IAAI9e,MAChB0e,EAAEG,KAAK7e,MAAO,SAEtBsH,EAAKmU,EAAK6D,KAAK3B,EAASe,GAC1B,MAAOtZ,GAAKkC,EAAK,CAAC,EAAGlC,GAAIgH,EAAI,UAAemS,EAAIC,EAAI,EACtD,GAAY,EAARlX,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEvJ,MAAOuJ,EAAG,GAAKA,EAAG,QAAK,EAAQ8W,MAAM,GArB9BH,CAAK,CAACxK,EAAG2L,OA2BzDw8B,GACA,WACIj4C,KAAKk4C,aAAc,EACnBl4C,KAAKvG,QAAUE,SAASC,cAAc,OACtCoG,KAAKvG,QAAQoe,UAAY,iBA6H7BsgC,GAAc,SAAUrnB,EAAQsnB,EAAO3+C,GAAW,OAAOsgB,QAAU,OAAQ,OAAQ,GAAQ,WAC3F,IAAIs+B,EAAUC,EAAaC,EAAsBC,EAAY/c,EAAegd,EAAgBC,EAAUC,EAAW3f,EAAIpa,EAAInkB,EAAKwB,EAAG28C,EAAMd,EACvI,OAAOn9B,GAAY3a,MAAM,SAAU2yC,GAC/B,OAAQA,EAAG33B,OACP,KAAK,EAGD,IAFAq9B,EAAW,GACXC,GAA8C,IAAnCxnB,EAAOzzB,QAAQ06C,OAAOc,SAAoBT,EAAMl8C,OAAS,EAC/DD,EAAI,EAAGA,EAAIq8C,EAAUr8C,KACtBs8C,EAAWH,EAAMn8C,cACO68C,mBACpBP,EAAWA,EAASQ,aAExBV,EAASz8C,KAAK28C,GAElB,OAAIznB,EAAOzzB,QAAQ06C,OAAOl2C,QAEI,iBAD1B22C,EAAa1nB,EAAOzzB,QAAQ06C,OAAOl2C,QAAQw2C,KAEvCvnB,EAAO6d,IAAIpP,KAAKiZ,GACT,CAAC,IAEL,CAAC,GAEP1nB,EAAOzzB,QAAQ06C,OAAO31C,KAAQ0uB,EAAOinB,OAOrCjnB,EAAOzzB,QAAQ06C,OAAOiB,KACpB,CAAC,EAAaloB,EAAOzzB,QAAQ06C,OAAOiB,KAAKX,IADR,CAAC,EAAa,IAN9C5+C,IACAA,EAAQW,MAAQ,IAEpB02B,EAAO6d,IAAIpP,KAAK,qCACT,CAAC,IAIhB,KAAK,EACD8Y,EAAW1F,EAAG13B,OACd03B,EAAG33B,MAAQ,EACf,KAAK,EACD,GAAI8V,EAAOzzB,QAAQ06C,OAAOkB,UAEI,iBAD1BT,EAAa1nB,EAAOzzB,QAAQ06C,OAAOkB,SAASZ,IAGxC,OADAvnB,EAAO6d,IAAIpP,KAAKiZ,GACT,CAAC,GAMhB,GAHA/c,EAAgBmc,GAAW9mB,GAC3BA,EAAOinB,OAAOje,OAAQ,EAAGziB,EAA8B+hB,IAAItI,GAE7B,KAD9B2nB,EArKG,SAAU3nB,EAAQsnB,GACjCtnB,EAAO6d,IAAIuK,OACX,IAAIC,EAAiB,GACjBC,EAAW,GACXC,EAAe,GACRvoB,EAAOzzB,QAAQka,KACZuZ,EAAOzzB,QAwCrB,IAvCA,IAAIorB,EAAU,SAAUmwB,EAAM38C,GAC1B,IAAI+8C,EAAOZ,EAAMn8C,GACbg9C,GAAW,EACVD,EAAKt/C,OACN0/C,GAAY,OAASxjC,OAAOmJ,WAAWu6B,UAAY,QACnDL,GAAW,GAEXD,EAAKO,KAAOzoB,EAAOzzB,QAAQ06C,OAAOlsC,MAClCutC,GAAY,OAASJ,EAAKt/C,KAAO,IAAMkc,OAAOmJ,WAAWy6B,KAAO,IAAM1oB,EAAOzzB,QAAQ06C,OAAOlsC,IAAM,KAAO,KAAO,SAChHotC,GAAW,GAEf,IAAI/nB,EAAY8nB,EAAKt/C,KAAKiX,YAAY,KAClC8oC,EAAUT,EAAKt/C,KAAKimB,OAAOuR,GAC3BwoB,EAAW5oB,EAAOzzB,QAAQ06C,OAAO2B,SAASV,EAAKt/C,KAAKimB,OAAO,EAAGuR,IAAcuoB,EAC5E3oB,EAAOzzB,QAAQ06C,OAAO4B,SACP7oB,EAAOzzB,QAAQ06C,OAAO4B,OAAOr3C,MAAM,KAAKs3C,MAAK,SAAUxhC,GAClE,IAAItX,EAAOsX,EAAKiB,OAChB,GAA0B,IAAtBvY,EAAKE,QAAQ,MACb,GAAIy4C,EAAQpjB,gBAAkBv1B,EAAKu1B,cAC/B,OAAO,OAIX,GAAI2iB,EAAKl4C,KAAKwB,MAAM,KAAK,KAAOxB,EAAKwB,MAAM,KAAK,GAC5C,OAAO,EAGf,OAAO,OAGP82C,GAAY,OAASJ,EAAKt/C,KAAO,IAAMkc,OAAOmJ,WAAW86B,cAAgB,QACzEZ,GAAW,IAGfA,IACAE,EAAev9C,KAAKo9C,GACpBK,GAAgB,OAASK,EAAW,IAAM9jC,OAAOmJ,WAAW+6B,UAAY,UAGvElB,EAAOR,EAAMl8C,OAAQD,EAAI,EAAGA,EAAI28C,EAAM38C,IAC3CwsB,EAAQmwB,EAAM38C,GAGlB,OADA60B,EAAO6d,IAAIpP,KAAK,OAAS6Z,EAAWC,EAAe,SAC5CF,EAmHsBY,CAAajpB,EAAQunB,IACnBn8C,OAIf,OAHIzC,IACAA,EAAQW,MAAQ,IAEb,CAAC,GAIZ,IAFAs+C,EAAW,IAAIsB,SACfrB,EAAY7nB,EAAOzzB,QAAQ06C,OAAOY,UAC7B3f,EAAK,EAAGpa,EAAKvmB,OAAOiJ,KAAKq3C,GAAY3f,EAAKpa,EAAG1iB,OAAQ88B,IACtDv+B,EAAMmkB,EAAGoa,GACT0f,EAAS3/C,OAAO0B,EAAKk+C,EAAUl+C,IAEnC,IAAKwB,EAAI,EAAG28C,EAAOH,EAAev8C,OAAQD,EAAI28C,EAAM38C,IAChDy8C,EAAS3/C,OAAO+3B,EAAOzzB,QAAQ06C,OAAOkC,UAAWxB,EAAex8C,IAqDpE,OAnDA67C,EAAM,IAAIljB,gBACNC,KAAK,OAAQ/D,EAAOzzB,QAAQ06C,OAAO31C,KACnC0uB,EAAOzzB,QAAQ06C,OAAOmC,OACtBpC,EAAIhjB,iBAAiB,iBAAkBhE,EAAOzzB,QAAQ06C,OAAOmC,OAE7DppB,EAAOzzB,QAAQ06C,OAAOoC,kBACtBrC,EAAIqC,iBAAkB,GAE1BtC,GAAW/mB,EAAQgnB,GACnBhnB,EAAOinB,OAAOG,aAAc,EAC5Bzc,EAAclhC,aAAa,kBAAmB,SAC9Cu9C,EAAIsC,mBAAqB,WACrB,GAAItC,EAAIuC,aAAezlB,eAAe0lB,KAAM,CAGxC,GAFAxpB,EAAOinB,OAAOG,aAAc,EAC5Bzc,EAAclhC,aAAa,kBAAmB,QAC1Cu9C,EAAIyC,QAAU,KAAOzC,EAAIyC,OAAS,IAClC,GAAIzpB,EAAOzzB,QAAQ06C,OAAOyC,QACtB1pB,EAAOzzB,QAAQ06C,OAAOyC,QAAQ/e,EAAeqc,EAAI7iB,kBAEhD,CACD,IAAIA,EAAe6iB,EAAI7iB,aACnBnE,EAAOzzB,QAAQ06C,OAAO0C,SACtBxlB,EAAenE,EAAOzzB,QAAQ06C,OAAO0C,OAAOrC,EAAON,EAAI7iB,eAvJpE,SAAUA,EAAcnE,GACvB8mB,GAAW9mB,GACjBmJ,QACd,IAAIygB,EAAWj3B,KAAKC,MAAMuR,GACtBmkB,EAAW,GACO,IAAlBsB,EAAS71B,OACTu0B,EAAW,GAAKsB,EAASC,KAEzBD,EAAS1gD,KAAK4gD,UAAYF,EAAS1gD,KAAK4gD,SAAS1+C,OAAS,IAC1Dk9C,EAAW,WAAaA,EAAW,QACnCsB,EAAS1gD,KAAK4gD,SAASniD,SAAQ,SAAUuB,GACrC,IAAIk3B,EAAYl3B,EAAK2W,YAAY,KAC7B+oC,EAAW5oB,EAAOzzB,QAAQ06C,OAAO2B,SAAS1/C,EAAK2lB,OAAO,EAAGuR,IAAcl3B,EAAK2lB,OAAOuR,GACvFkoB,GAAY,OAASM,EAAW,IAAM9jC,OAAOmJ,WAAW87B,YAAc,WAE1EzB,GAAY,SAEZA,EACAtoB,EAAO6d,IAAIpP,KAAK6Z,GAGhBtoB,EAAO6d,IAAIuK,OAEf,IAAI4B,EAAe,GACnBziD,OAAOiJ,KAAKo5C,EAAS1gD,KAAK+gD,SAAStiD,SAAQ,SAAUgC,GACjD,IAAI2kB,EAAOs7B,EAAS1gD,KAAK+gD,QAAQtgD,GAC7By2B,EAAYz2B,EAAIkW,YAAY,KAC5B7P,EAAOrG,EAAIklB,OAAOuR,GAClBwoB,EAAW5oB,EAAOzzB,QAAQ06C,OAAO2B,SAASj/C,EAAIklB,OAAO,EAAGuR,IAAcpwB,EAE7C,KAD7BA,EAAOA,EAAKu1B,eACHr1B,QAAQ,SAA0C,IAAzBF,EAAKE,QAAQ,SAA0C,IAAzBF,EAAKE,QAAQ,QAC9C,YAAvB8vB,EAAOO,YACPypB,GAAgB,4HAAuI17B,EAAO,mCAElI,OAAvB0R,EAAOO,YACZypB,GAAgB,mCAAwC17B,EAAO,eAG/D07B,GAAgB,IAAMpB,EAAW,KAAOt6B,EAAO,MAGpB,IAA1Bte,EAAKE,QAAQ,UACU,IAAzBF,EAAKE,QAAQ,SACY,IAAzBF,EAAKE,QAAQ,SACY,IAAzBF,EAAKE,QAAQ,SAA0C,IAAzBF,EAAKE,QAAQ,SAClB,IAAzBF,EAAKE,QAAQ,SAA2C,IAA1BF,EAAKE,QAAQ,UAA4C,IAA1BF,EAAKE,QAAQ,UAA2C,IAAzBF,EAAKE,QAAQ,SAA4C,IAA3BF,EAAKE,QAAQ,WAC9G,IAAzBF,EAAKE,QAAQ,SACY,IAAzBF,EAAKE,QAAQ,SACa,IAA1BF,EAAKE,QAAQ,SACW,YAAvB8vB,EAAOO,YACPypB,GAAgB,aAAgBpB,EAAW,UAAct6B,EAAO,KAGhE07B,GAAgB,KAAOpB,EAAW,KAAOt6B,EAAO,MAIzB,YAAvB0R,EAAOO,YACPypB,GAAgB,YAAe17B,EAAO,KAAQs6B,EAAW,OAGzDoB,GAAgB,IAAMpB,EAAW,KAAOt6B,EAAO,UAI3D,EAAG/H,EAAiC6B,IAAI4X,EAAOinB,OAAOje,OACtDngC,SAASujC,YAAY,cAAc,EAAO4d,GAC1ChqB,EAAOinB,OAAOje,MAAQ1gB,eAAeG,WAAW,GAAGC,aAsFvBwhC,CAAiB/lB,EAAcnE,QAI/BA,EAAOzzB,QAAQ06C,OAAOl0B,MACtBiN,EAAOzzB,QAAQ06C,OAAOl0B,MAAMi0B,EAAI7iB,cAGhCnE,EAAO6d,IAAIpP,KAAKuY,EAAI7iB,cAGxBx7B,IACAA,EAAQW,MAAQ,IAEpB02B,EAAOinB,OAAOt+C,QAAQkB,MAAM2e,QAAU,SAG9Cw+B,EAAIC,OAAOkD,WAAa,SAAUr5C,GAC9B,GAAKA,EAAMs5C,iBAAX,CAGA,IAAIC,EAAWv5C,EAAMw5C,OAASx5C,EAAMy5C,MAAQ,IAC5CvqB,EAAOinB,OAAOt+C,QAAQkB,MAAM2e,QAAU,QACpBwX,EAAOinB,OAAOt+C,QACpBkB,MAAMw1B,MAAQgrB,EAAW,MAEzCrD,EAAI/iB,KAAK2jB,GACF,CAAC,WAepB4C,GAAc,SAAUxqB,EAAQgJ,EAAOl4B,GACvC,IAAIgd,EACA8Z,GAAe,EAAGxhB,EAAgCsgB,IAAIsC,EAAME,gBAKhE,GAJKtB,IAEDA,EAAe5H,EAAOuN,QAAQ5kC,SAE9BmI,GAA6B,iBAApBA,EAAM+gC,WACQ,iBAApB/gC,EAAM+gC,WACc,mBAApB/gC,EAAM+gC,WACc,eAApB/gC,EAAM+gC,WACc,iBAApB/gC,EAAM+gC,WACc,wBAApB/gC,EAAM+gC,WACc,wBAApB/gC,EAAM+gC,WACc,sBAApB/gC,EAAM+gC,WACc,kBAApB/gC,EAAM+gC,WACc,iBAApB/gC,EAAM+gC,WACc,KAApB/gC,EAAM+gC,YACL/gC,EAAO,CACX,IAAI25C,EAp2FW,SAAUtiD,GAE7B,IADA,IAAIkpC,EAAelpC,EAAK2jC,gBACjBuF,GAAc,CACjB,GAA8B,IAA1BA,EAAa5J,UAA2C,MAAzB4J,EAAanb,UAAoBmb,EAAavF,iBACG,KAA7EuF,EAAavpB,UAAU7J,QAAQgI,EAA8B+D,EAAEmG,KAAM,KAAckhB,EAAahG,YACnG,OAAOgG,EAEXA,EAAeA,EAAavF,gBAEhC,OAAO,EA21FyB4e,CAAiB1hB,EAAME,gBAC/CuhB,GAEAA,EAAsB34C,SAG1BkuB,EAAOuN,QAAQ5kC,QAAQsc,iBAAiB,OAAOtd,SAAQ,SAAUgjD,GAC7DA,EAAI74C,YAERk3B,EAAM+C,WAAWljC,SAASC,cAAc,QAExC8+B,EAAa3iB,iBAAiB,WAAWtd,SAAQ,SAAU2f,GACvDA,EAAK/d,gBAAgB,YAGzBq+B,EAAa3iB,iBAAiB,mBAAmBtd,SAAQ,SAAU2f,GAC/B,KAA5BA,EAAKgL,YAAY/J,SACjBjB,EAAK1V,UAAUE,OAAO,iBAAkB,yBACxCwV,EAAK/d,gBAAgB,mBAIkB,QAA9CukB,EAAK8Z,EAAagE,8BAA2C,IAAP9d,GAAyBA,EAAG7I,iBAAiB,mBAAmBtd,SAAQ,SAAU2f,GACrG,KAA5BA,EAAKgL,YAAY/J,SACjBjB,EAAK1V,UAAUE,OAAO,iBAAkB,yBACxCwV,EAAK/d,gBAAgB,mBAG7B,IAAIqhD,EAAS,GACkC,wBAA3ChjB,EAAap+B,aAAa,eAE1Bo+B,EAAe5H,EAAOuN,QAAQ5kC,SAElC,IA+EIkiD,EA/EAC,EAAmBljB,EAAa5G,YAAYhB,EAAOuN,QAAQ5kC,SAC3D8oC,GAAkB,EAAGrrB,EAAsCqgB,IAAImB,EAAc,YAAa,mBAC9F,GAAKkjB,EAiDDF,EAAShjB,EAAa9f,cAjDH,CAEnB,IAAIyf,GAAiB,EAAGnhB,EAA2BogB,IAAIwC,EAAME,gBAC7D,GAAI3B,IAAmBkK,EAAiB,CACpC,IAAIC,GAAoB,EAAGzJ,EAA0Cd,GAAG6B,EAAME,eAAgB,cAG1FtB,EAFA8J,GAEe,EAAGtrB,EAAgCsgB,IAAIsC,EAAME,iBAAmBtB,EAGhEL,EAQvB,GAJIkK,IACA7J,EAAe6J,GAEnBmZ,EAAShjB,EAAalT,UACO,OAAzBkT,EAAa1R,SAA6C,OAAzB0R,EAAa1R,QAAkB,CAEhE,IAAIyb,EAAkB/J,EAAagE,uBAC/BgG,EAAkBhK,EAAa7G,oBAC/B4Q,GAAgD,OAA5BA,EAAgBzb,SAAgD,OAA5Byb,EAAgBzb,UACxE00B,EAASjZ,EAAgBjd,UAAYk2B,EACrCjZ,EAAgB7/B,WAEhB8/B,GAAgD,OAA5BA,EAAgB1b,SAAgD,OAA5B0b,EAAgB1b,UACxE00B,GAAkBhZ,EAAgBld,UAClCkd,EAAgB9/B,UAGpB84C,EAASA,EAAO3sC,QAAQ,uBAAwB,6BAGpD+hB,EAAOuN,QAAQ5kC,QAAQsc,iBAAiB,qCAAqCtd,SAAQ,SAAU2f,GACvFA,IAASsgB,EAAa5G,YAAY1Z,KAClCsjC,GAAUtjC,EAAKoN,UACfpN,EAAKxV,aAIbkuB,EAAOuN,QAAQ5kC,QAAQsc,iBAAiB,iCAAiCtd,SAAQ,SAAU2f,GACnFA,IAASsgB,EAAa5G,YAAY1Z,KAClCsjC,GAAUtjC,EAAKoN,UACfpN,EAAKxV,aAiBjB,GANe,oCAHf84C,EAASA,EAAO3sC,QAAQ,8CAA+C,IAClEA,QAAQ,sCAAuC,IAC/CA,QAAQ,0CAA2C,MACL+hB,EAAO2P,KAAKqL,iBAC3D4P,EAAS,iCAAiC3sC,QAAQ,MAAO,MAAQ+hB,EAAO2P,KAAKqL,iBAEjFnqC,EAAI,gBAAiB+5C,EAAQ,WAAY5qB,EAAOzzB,QAAQulC,UACxD8Y,EAAS5qB,EAAO5T,KAAKsU,cAAckqB,GACnC/5C,EAAI,gBAAiB+5C,EAAQ,SAAU5qB,EAAOzzB,QAAQulC,UAClDgZ,EACAljB,EAAa9f,UAAY8iC,OAIzB,GADAhjB,EAAalT,UAAYk2B,EACrBnZ,EAAiB,CAEjB,IAAIM,GAAsB,EAAG3rB,EAAmCmgB,IAAIvG,EAAOuN,QAAQ5kC,QAAQ8I,cAAc,OAAQ,MACjH,GAAIsgC,EAAqB,CACrB,IAAIG,EAAqBlS,EAAOuN,QAAQ5kC,QAAQ8I,cAAc,wDAA6DsgC,EAAoBvoC,aAAa,eAAiB,MACzK0oC,GACAA,EAAmBzoC,aAAa,aAAcsoC,EAAoBzf,YAAY/J,OAAOsG,OAAO,EAAG,MAM/G,IAcIk8B,EAdA3Y,EAAwBpS,EAAOuN,QAAQ5kC,QAAQsc,iBAAiB,qCACpEmtB,EAAsBzqC,SAAQ,SAAU2f,EAAMrX,GAC5B,IAAVA,EACA46C,EAA2BvjC,GAG3BujC,EAAyBr1B,mBAAmB,YAAalO,EAAKQ,WAC9DR,EAAKxV,aAGTsgC,EAAsBhnC,OAAS,GAC/B40B,EAAOuN,QAAQ5kC,QAAQse,sBAAsB,YAAamrB,EAAsB,IAIpF,IAAIC,EAAqBrS,EAAOuN,QAAQ5kC,QAAQsc,iBAAiB,iCACjEotB,EAAmB1qC,SAAQ,SAAU2f,EAAMrX,GACzB,IAAVA,EACA86C,EAAyBzjC,GAGzByjC,EAAuBv1B,mBAAmB,YAAalO,EAAKQ,WAC5DR,EAAKxV,aAGTugC,EAAmBjnC,OAAS,GAC5B40B,EAAOuN,QAAQ5kC,QAAQse,sBAAsB,YAAaorB,EAAmB,KAGjF,EAAG9rB,EAA6BoiB,IAAI3I,EAAOuN,QAAQ5kC,QAASqgC,GAC5DhJ,EAAOuN,QAAQ5kC,QAAQsc,iBAAiB,6CACnCtd,SAAQ,SAAU2f,GACnB4oB,EAAkB5oB,EAAM0Y,MAExBlvB,IAA8B,0BAApBA,EAAM+gC,WAA6D,yBAApB/gC,EAAM+gC,YAC/D7R,EAAOzzB,QAAQg1C,QAAQ31B,SACvBoU,EAAOuN,QAAQyd,qBAAqBhrB,GACpCA,EAAOzzB,QAAQg1C,QAAQE,UAAUzhB,EAAOuN,QAAQiU,YAAYxhB,GAAQ,KAG5EqQ,EAAUrQ,GACV0V,EAAiB1V,EAAQ,CACrBuS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,KASjBwY,GAAmE,SAAU/hC,EAASC,EAAYC,EAAGC,GAErG,OAAO,IAAKD,IAAMA,EAAI1e,WAAU,SAAUC,EAAS2e,GAC/C,SAASC,EAAUjgB,GAAS,IAAMkgB,EAAKH,EAAUI,KAAKngB,IAAW,MAAOqH,GAAK2Y,EAAO3Y,IACpF,SAAS+Y,EAASpgB,GAAS,IAAMkgB,EAAKH,EAAiB,MAAE/f,IAAW,MAAOqH,GAAK2Y,EAAO3Y,IACvF,SAAS6Y,EAAKvf,GAJlB,IAAeX,EAIaW,EAAO0f,KAAOhf,EAAQV,EAAOX,QAJ1CA,EAIyDW,EAAOX,MAJhDA,aAAiB8f,EAAI9f,EAAQ,IAAI8f,GAAE,SAAUze,GAAWA,EAAQrB,OAIT8C,KAAKmd,EAAWG,GAClGF,GAAMH,EAAYA,EAAUO,MAAMV,EAASC,GAAc,KAAKM,YAGlEyhC,GAAuE,SAAUhiC,EAASlC,GAC1F,IAAsG8C,EAAGnS,EAAGoS,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEP,KAAMa,EAAK,GAAIC,MAASD,EAAK,GAAIE,OAAUF,EAAK,IAAwB,mBAAXG,SAA0BT,EAAES,OAAOC,UAAY,WAAa,OAAOxb,OAAU8a,EACvJ,SAASM,EAAKtL,GAAK,OAAO,SAAU2L,GAAK,OACzC,SAAc9X,GACV,GAAIiX,EAAG,MAAM,IAAIc,UAAU,mCAC3B,KAAOX,OACH,GAAIH,EAAI,EAAGnS,IAAMoS,EAAY,EAARlX,EAAG,GAAS8E,EAAU,OAAI9E,EAAG,GAAK8E,EAAS,SAAOoS,EAAIpS,EAAU,SAAMoS,EAAEc,KAAKlT,GAAI,GAAKA,EAAE8R,SAAWM,EAAIA,EAAEc,KAAKlT,EAAG9E,EAAG,KAAK8W,KAAM,OAAOI,EAE3J,OADIpS,EAAI,EAAGoS,IAAGlX,EAAK,CAAS,EAARA,EAAG,GAAQkX,EAAEzgB,QACzBuJ,EAAG,IACP,KAAK,EAAG,KAAK,EAAGkX,EAAIlX,EAAI,MACxB,KAAK,EAAc,OAAXoX,EAAEC,QAAgB,CAAE5gB,MAAOuJ,EAAG,GAAI8W,MAAM,GAChD,KAAK,EAAGM,EAAEC,QAASvS,EAAI9E,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKoX,EAAEI,IAAI9e,MAAO0e,EAAEG,KAAK7e,MAAO,SACxC,QACI,MAAkBwe,GAAZA,EAAIE,EAAEG,MAAYhf,OAAS,GAAK2e,EAAEA,EAAE3e,OAAS,KAAkB,IAAVyH,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEoX,EAAI,EAAG,SACjG,GAAc,IAAVpX,EAAG,MAAckX,GAAMlX,EAAG,GAAKkX,EAAE,IAAMlX,EAAG,GAAKkX,EAAE,IAAM,CAAEE,EAAEC,MAAQrX,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYoX,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIlX,EAAI,MAC7D,GAAIkX,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIvf,KAAK+H,GAAK,MACvDkX,EAAE,IAAIE,EAAEI,IAAI9e,MAChB0e,EAAEG,KAAK7e,MAAO,SAEtBsH,EAAKmU,EAAK6D,KAAK3B,EAASe,GAC1B,MAAOtZ,GAAKkC,EAAK,CAAC,EAAGlC,GAAIgH,EAAI,UAAemS,EAAIC,EAAI,EACtD,GAAY,EAARlX,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEvJ,MAAOuJ,EAAG,GAAKA,EAAG,QAAK,EAAQ8W,MAAM,GArB9BH,CAAK,CAACxK,EAAG2L,OAyCzDu4B,GAAoB,SAAUpyC,EAAOkvB,EAAQkJ,GAC7C,GAAsB,MAAlBp4B,EAAMiiC,SAAkC,KAAfjiC,EAAMijB,MAA6B,iBAAdjjB,EAAMnH,KAAiD,OAAvBq2B,EAAOO,YAAsB,CAC3G,IAAIqH,GAAe,EAAGxhB,EAAgCsgB,IAAIwC,GAE1D,GAAItB,GAAoD,KAApCA,EAAatV,YAAY/J,OAEzC,OADAyX,EAAOA,EAAOO,aAAaqV,eAAgB,GACpC,EAGf,OAAO,GAGPuN,GAAiB,SAAUna,EAAOhJ,EAAQlvB,GAC1C,KAAkB,UAAdA,EAAMnH,KAAiC,QAAdmH,EAAMnH,KAA+B,cAAdmH,EAAMnH,KAAuBmH,EAAMnH,IAAIuG,QAAQ,UAAY,IACxG,EAAG2+B,EAA0B7J,IAAIl0B,IAAwB,WAAdA,EAAMnH,KAAoBmH,EAAM+hC,UAAY/hC,EAAM8hC,QADpG,CAIA,IAAIuY,GAAa,EAAG/kC,EAAqCgJ,IAAI4Z,EAAME,eAAgB,OAC/E,EAAG9iB,EAAqCgJ,IAAI4Z,EAAME,eAAgB,MACtE,GAAIiiB,GAAuH,KAAzG,EAAG5kC,EAAiCkiB,IAAI0iB,EAAYnrB,EAAOA,EAAOO,aAAa53B,QAASqgC,GAAO7oB,MAAa,CAC1H,IAAIirC,EAAWviD,SAASM,eAAe8c,EAA8B+D,EAAEmG,MACvE6Y,EAAM+C,WAAWqf,GACjBpiB,EAAMuC,cAAc6f,MAIxB9G,GAA0B,SAAUtb,EAAOr/B,GAC3C,GAAY,cAARA,GAA+B,YAARA,EAAmB,CAC1C,IAAI0hD,GAAgB,EAAGjlC,EAAsCqgB,IAAIuC,EAAME,eAAgB,YAAa,iBAChG,EAAG9iB,EAAsCqgB,IAAIuC,EAAME,eAAgB,YAAa,iBAChF,EAAG9iB,EAAsCqgB,IAAIuC,EAAME,eAAgB,YAAa,eAChFmiB,IACY,cAAR1hD,GACAq/B,EAAMuC,cAAc8f,EAAc95B,eAE1B,YAAR5nB,GACAq/B,EAAMsC,eAAe+f,EAAc95B,kBAK/C+5B,GAAmB,SAAUtrB,EAAQb,GACrC,IAAI6J,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAC7C4H,GAAe,EAAGxhB,EAAgCsgB,IAAIsC,EAAME,gBAC5DtB,IACAA,EAAapS,mBAAmB2J,EAAU,qBAAyBlZ,EAA8B+D,EAAEmG,KAAO,gBAC1G,EAAG5J,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,GACxE0T,GAAiB1c,GACjB0Q,GAAgB1Q,KAGpB6kB,GAAc,SAAU1L,GACxB,IAAI5B,GAAe,EAAGnxB,EAAqCgJ,IAAI+pB,EAAa,SAC5E,SAAI5B,IAAgBA,EAAaK,KAAK,GAAGE,MAAM,GAAGjM,WAAWsN,KAClD5B,GAIXwN,GAAa,SAAU5L,GACvB,IAAI5B,GAAe,EAAGnxB,EAAqCgJ,IAAI+pB,EAAa,SAC5E,SAAI5B,IAAgBA,EAAalL,iBAAiBA,iBAAiBA,iBAAiBR,WAAWsN,KACpF5B,GAKXgU,GAAiB,SAAUpS,EAAanQ,EAAOwiB,QAC5B,IAAfA,IAAyBA,GAAa,GAC1C,IAAI3U,EAAkBsC,EAAYvN,uBAqBlC,OApBKiL,IAEGA,EADAsC,EAAY5nB,cAAcqa,uBACRuN,EAAY5nB,cAAcqa,uBAAuBS,iBAEV,UAApD8M,EAAY5nB,cAAcA,cAAc2E,SAC7CijB,EAAY5nB,cAAcA,cAAcqa,uBACtBuN,EAAY5nB,cACzBA,cAAcqa,uBAAuBS,iBAAiBA,iBAGzC,MAGtBwK,IACA7N,EAAM8B,mBAAmB+L,GACpB2U,GACDxiB,EAAMO,UAAS,IAEnB,EAAGhjB,EAAiC6B,IAAI4gB,IAErC6N,GAEPhG,GAAmB,SAAU7Q,EAAQlvB,EAAOk4B,EAAOrgC,EAASi/B,GAC5D,IAAIzI,GAAW,EAAG5Y,EAAiCkiB,IAAI9/B,EAASq3B,EAAOA,EAAOO,aAAa53B,QAASqgC,GACpG,GAAmB,cAAdl4B,EAAMnH,MAAiG,IAA1EhB,EAAQ2pB,YAAYse,YAAY/hB,OAAOsQ,EAAShf,OAAOjQ,QAAQ,OAC9E,eAAdY,EAAMnH,KAAwBw1B,EAAShf,OAASxX,EAAQ2pB,YAAYse,YAAYxlC,OAAS,CAC1F,IAAI8wC,EAActU,EAAa7G,mBAY/B,OAXKmb,GACAA,IAAwC,UAAxBA,EAAYhmB,SAAuBgmB,EAAY1yC,aAAa,eAC7Eo+B,EAAapS,mBAAmB,WAAY,qBAAyBvP,EAA8B+D,EAAEmG,KAAO,cAC5G,EAAG5J,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,KAGxEA,EAAM8B,mBAAmBoR,GACzBlT,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,IAE5Cl4B,EAAMwlB,kBACC,EAEX,OAAO,GAEPqa,GAAoB,SAAU3Q,EAAQlvB,EAAOk4B,EAAOrgC,EAASi/B,GAC7D,IAAIzI,GAAW,EAAG5Y,EAAiCkiB,IAAI9/B,EAASq3B,EAAOA,EAAOO,aAAa53B,QAASqgC,GACpG,GAAmB,YAAdl4B,EAAMnH,MAAsF,IAAjEhB,EAAQ2pB,YAAYzD,OAAO,EAAGsQ,EAAShf,OAAOjQ,QAAQ,QAClE,cAAdY,EAAMnH,KAAsC,cAAdmH,EAAMnH,KAA4C,KAArBq/B,EAAMxlB,aAC5C,IAAnB2b,EAAShf,MAAc,CAC3B,IAAI02B,EAAkBjP,EAAagE,uBAanC,OAXKiL,GACAA,IAAgD,UAA5BA,EAAgB3gB,SAAuB2gB,EAAgBrtC,aAAa,eACzFo+B,EAAapS,mBAAmB,cAAe,qBAAyBvP,EAA8B+D,EAAEmG,KAAO,cAC/G,EAAG5J,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,KAGxEA,EAAM8B,mBAAmB+L,GACzB7N,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,IAE5Cl4B,EAAMwlB,kBACC,EAEX,OAAO,GAEP+nB,GAAa,SAAUre,EAAQgJ,EAAOh5B,EAAM6X,QAC7B,IAAXA,IAAqBA,GAAS,GAClC,IAAImnB,GAAc,EAAG5oB,EAAqCgJ,IAAI4Z,EAAME,eAAgB,MAKpF,GAJAlJ,EAAOA,EAAOO,aAAa53B,QAAQsc,iBAAiB,OAAOtd,SAAQ,SAAUgjD,GACzEA,EAAI74C,YAERk3B,EAAM+C,WAAWljC,SAASC,cAAc,QACpC+e,GAAUmnB,EAAa,CAGvB,IADA,IAAIyc,EAAQ,GACHtgD,EAAI,EAAGA,EAAI6jC,EAAYzd,cAAcm6B,kBAAmBvgD,IAAK,CAClE,IAAI64C,EAAehV,EAAYzd,cAAcxjB,SAAS5C,GAAGsG,cAAc,SACnEuyC,GACAA,EAAalyC,SAEjB25C,GAAS,qBAAyBzc,EAAYzd,cAAcxjB,SAAS5C,GAAG2c,UAAU6jC,WAAa,OAEnG3c,EAAYzd,cAAciE,mBAAmB,cAAei2B,GAC5Dzc,EAAYzd,cAAczf,cAG1B,GAAKk9B,EAuBD,GAAa,UAATh/B,EACAg/B,EAAYzd,cAActM,iBAAiB,MAAMtd,SAAQ,SAAU2f,GAC/DA,EAAKkO,mBAAmB,aAAc,6BAAmE,IAAlClO,EAAKgL,YAAYpiB,QAAQ,KAAa,GAAK,MAClHoX,EAAK1V,UAAUlG,IAAI,sBAGtB,CACGsjC,EAAYv9B,cAAc,UAC1Bu9B,EAAYzd,cAActM,iBAAiB,MAAMtd,SAAQ,SAAU2f,GAC/DA,EAAK7V,cAAc,SAASK,SAC5BwV,EAAK1V,UAAUE,OAAO,kBAG9B,IAAInJ,OAAU,GAEVA,EADS,SAATqH,EACUnH,SAASC,cAAc,MAGvBD,SAASC,cAAc,OAE7Bgf,UAAYknB,EAAYzd,cAAczJ,UAC9CknB,EAAYzd,cAAc9oB,WAAWmjD,aAAajjD,EAASqmC,EAAYzd,mBA5C7D,CAEd,IAAIqW,GAAe,EAAGxhB,EAAsCqgB,IAAIuC,EAAME,eAAgB,aAAc,KAC/FtB,IACD5H,EAAOA,EAAOO,aAAa53B,QAAQ8I,cAAc,OAAOK,UACxD81B,EAAe5H,EAAOA,EAAOO,aAAa53B,QAAQ8I,cAAc,MACnDqW,UAAY,SAEhB,UAAT9X,GACA43B,EAAapS,mBAAmB,cAAe,wEAAgFoS,EAAa9f,UAAY,cACxJ8f,EAAa91B,UAEC,SAAT9B,GACL43B,EAAapS,mBAAmB,cAAe,0BAA8BoS,EAAa9f,UAAY,cACtG8f,EAAa91B,UAEC,iBAAT9B,IACL43B,EAAapS,mBAAmB,cAAe,0BAA8BoS,EAAa9f,UAAY,cACtG8f,EAAa91B,YA+BzB+5C,GAAa,SAAU7rB,EAAQyV,EAAWzM,GAC1C,IAAI6N,EAAkBpB,EAAU7J,uBAChC,GAAI6J,GAAaoB,EAAiB,CAC9B,IAAIiV,EAAe,CAACrW,GACpB7nC,MAAMC,KAAKm7B,EAAM+iB,gBAAgBh+C,UAAUpG,SAAQ,SAAU2f,EAAMrX,GACzC,IAAlBqX,EAAKmgB,UAAkBgO,GAAyC,KAA5BnuB,EAAKgL,YAAY/J,QAClDktB,EAAUjsC,aAAa,kBAAoB8d,EAAK9d,aAAa,kBAClD,IAAVyG,GACA67C,EAAahhD,KAAK2qC,GAEtBA,EAAYA,EAAU1U,uBAG9Bf,EAAOA,EAAOO,aAAa53B,QAAQsc,iBAAiB,OAAOtd,SAAQ,SAAUgjD,GACzEA,EAAI74C,YAERk3B,EAAM+C,WAAWljC,SAASC,cAAc,QACxC,IAAIkjD,EAAkBnV,EAAgBtlB,cAClC06B,EAAW,GACfH,EAAankD,SAAQ,SAAU2f,GAC3B,IAAI2qB,EAAS3qB,EAAK9d,aAAa,eACT,IAAlByoC,EAAO7mC,SACP6mC,EAAS,IAAMA,EAAOia,OAAO,IAEjCD,GAAY,qBAAwB3kC,EAAK9d,aAAa,gBAAkB,kBAAsByoC,EAAS,KAAQ3qB,EAAKQ,UAAY,QAChIR,EAAKxV,YAET+kC,EAAgBrhB,mBAAmB,YAAa,IAAMw2B,EAAgB91B,QAAU,mBAAuB+1B,EAAW,KAAOD,EAAgB91B,QAAU,KACxH,YAAvB8J,EAAOO,YACPyrB,EAAgBt3B,UAAYsL,EAAO5T,KAAKsU,cAAcsrB,EAAgBt3B,WAGtEs3B,EAAgBt3B,UAAYsL,EAAO5T,KAAKqU,gBAAgBurB,EAAgBt3B,YAE5E,EAAGnO,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,GACxE,IAAImjB,GAAqB,EAAG/lC,EAA2BogB,IAAIwC,EAAME,gBAC7DijB,GACAA,EAAmBlnC,iBAAiB,WAAa+a,EAAOO,YAAc,8BACjE54B,SAAQ,SAAU2f,GACnB4oB,EAAkB5oB,EAAM0Y,GACG,YAAvBA,EAAOO,aACPjZ,EAAKskB,uBAAuBniC,aAAa,QAAS,mBAI9DinC,GAAgB1Q,GAChB0c,GAAiB1c,QAGjBA,EAAOA,EAAOO,aAAa53B,QAAQwgC,SAGvCijB,GAAc,SAAUpsB,EAAQyV,EAAWzM,EAAOzB,GAClD,IAAI8kB,GAAoB,EAAGjmC,EAAqCgJ,IAAIqmB,EAAUlkB,cAAe,MAC7F,GAAI86B,EAAmB,CACnBrsB,EAAOA,EAAOO,aAAa53B,QAAQsc,iBAAiB,OAAOtd,SAAQ,SAAUgjD,GACzEA,EAAI74C,YAERk3B,EAAM+C,WAAWljC,SAASC,cAAc,QACxC,IAAIkjD,EAAkBvW,EAAUlkB,cAC5B+6B,EAAuBN,EAAgBxf,YACvC+f,EAAe,CAAC9W,GACpB7nC,MAAMC,KAAKm7B,EAAM+iB,gBAAgBh+C,UAAUpG,SAAQ,SAAU2f,EAAMrX,GACzC,IAAlBqX,EAAKmgB,UAAkBgO,GAAyC,KAA5BnuB,EAAKgL,YAAY/J,QACrDktB,EAAUjsC,aAAa,kBAAoB8d,EAAK9d,aAAa,kBAC/C,IAAVyG,GACAs8C,EAAazhD,KAAK2qC,GAEtBA,EAAYA,EAAU1U,uBAG9B,IAAIyrB,GAAY,EACZC,EAAc,GAClBT,EAAgB/mC,iBAAiB,MAAMtd,SAAQ,SAAU2f,GACjDklC,IACAC,GAAenlC,EAAKoN,UACfpN,EAAKyZ,oBAAuBzZ,EAAKskB,uBAIlCtkB,EAAKxV,SAHLwV,EAAKiK,cAAczf,UAMvBwV,EAAKukB,WAAW0gB,EAAaA,EAAanhD,OAAS,MACnDohD,GAAY,MAGpBD,EAAaG,UAAU/kD,SAAQ,SAAU2f,GACrC+kC,EAAkBplC,sBAAsB,WAAYK,MAEpDmlC,IACAH,EAAqBxkC,UAAY2kC,EACjCF,EAAa,GAAGtlC,sBAAsB,YAAaqlC,IAE5B,YAAvBtsB,EAAOO,YACPgH,EAAe7S,UAAYsL,EAAO5T,KAAKsU,cAAc6G,EAAe7S,WAGpE6S,EAAe7S,UAAYsL,EAAO5T,KAAKqU,gBAAgB8G,EAAe7S,YAE1E,EAAGnO,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,GACxE,IAAImjB,GAAqB,EAAG/lC,EAA2BogB,IAAIwC,EAAME,gBAC7DijB,GACAA,EAAmBlnC,iBAAiB,WAAa+a,EAAOO,YAAc,8BACjE54B,SAAQ,SAAU2f,GACnB4oB,EAAkB5oB,EAAM0Y,GACG,YAAvBA,EAAOO,aACPjZ,EAAKskB,uBAAuBniC,aAAa,QAAS,mBAI9DinC,GAAgB1Q,GAChB0c,GAAiB1c,QAGjBA,EAAOA,EAAOO,aAAa53B,QAAQwgC,SAGvCoP,GAAgB,SAAUhB,EAAcvnC,GAKxC,IAJA,IAAI+uC,EAAOz2B,eAAeG,WAAW,GAAGygB,eAAe3X,cACnDo7B,EAAYpV,EAAaK,KAAK,GAAGE,MAAM1sC,OACvCwhD,EAASrV,EAAaK,KAAKxsC,OAC3ByhD,EAAgB,EACX1hD,EAAI,EAAGA,EAAIyhD,EAAQzhD,IACxB,IAAK,IAAI6K,EAAI,EAAGA,EAAI22C,EAAW32C,IAC3B,GAAIuhC,EAAaK,KAAKzsC,GAAG2sC,MAAM9hC,GAAG61B,WAAWkT,GAAO,CAChD8N,EAAgB72C,EAChB,MAIZ,IAAK,IAAI+Z,EAAI,EAAGA,EAAI68B,EAAQ78B,IACxBwnB,EAAaK,KAAK7nB,GAAG+nB,MAAM+U,GAAepjD,aAAa,QAASuG,IAGpEihC,GAAS,SAAUhoC,GAEnB,IAAIgpC,EAAShpC,EAAK2nC,YAAYp/B,MAAM,MAAMjG,MAC1C,MAAe,KAAX0mC,IAG+B,KAA/BA,EAAOh0B,QAAQ,OAAQ,KACW,KAA/Bg0B,EAAOh0B,QAAQ,OAAQ,KACS,KAAhCg0B,EAAOh0B,QAAQ,QAAS,MACvBg0B,EAAOh0B,QAAQ,KAAM,IAAI7S,OAAS,KAC9B6mC,EAAO/hC,QAAQ,MAAQ,IAAyC,IAApC+hC,EAAO0Z,WAAWz7C,QAAQ,MACnDjH,EAAK2nC,YAAYp/B,MAAM,MAAMpG,OAAS,IAId,IAA3B6mC,EAAO/hC,QAAQ,SAA0C,IAAzB+hC,EAAO/hC,QAAQ,OAU3DghC,GAAc,SAAUjoC,GAExB,IAAI6jD,EAAY7jD,EAAK2nC,YAAYp/B,MAAM,MAEvC,OAA6B,KAD7BvI,EAAO6jD,EAAUvhD,OACR2E,QAAQ,SAAwC,IAAvBjH,EAAKiH,QAAQ,OAIlC,MADbjH,EAAOA,EAAK0iD,aAC4B,IAArBmB,EAAU1hD,SAGE,KAA3BnC,EAAKgV,QAAQ,KAAM,KACW,KAA3BhV,EAAKgV,QAAQ,KAAM,MAK1ByyB,GAAkB,SAAU1Q,EAAQzzB,QACpB,IAAZA,IAAsBA,EAAU,CAChCgmC,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEU,YAAvBzS,EAAOO,YACPmV,EAAiB1V,EAAQzzB,GAEG,OAAvByzB,EAAOO,YACZ+R,GAA2BtS,EAAQzzB,GAEP,OAAvByzB,EAAOO,aACZqT,GAAmB5T,EAAQzzB,IAG/B+2C,GAAU,SAAUta,EAAOhJ,EAAQsW,EAAUxlC,GAC7C,IAAIgd,EACAob,EAAiBF,EAAME,eACvBuM,GAAY,EAAGrvB,EAAqCgJ,IAAI8Z,EAAgB,MAC5E,GAAIuM,EAAW,CACX,KAAK,EAAG5G,EAA0B7J,IAAIl0B,KAAWA,EAAM8hC,QAAwB,UAAd9hC,EAAMnH,MAEjEmH,EAAM+hC,UAAYyD,GAAYb,EAAUjkB,SAAS8kB,IAAaA,EAASvV,mBASzE,OARI0U,IAAcA,EAAUnjB,YAAYy6B,SAAS,OAE7CtX,EAAUoR,mBAAmB,YAAa,MAE9C7d,EAAM+C,WAAWljC,SAASM,eAAe,SACzC6/B,EAAMO,UAAS,GACfmH,GAAgB1Q,GAChBlvB,EAAMwlB,kBACC,EAEX,MAAK,EAAGuY,EAA0B7J,IAAIl0B,IAAWA,EAAM+hC,UAAa/hC,EAAM8hC,QAAwB,cAAd9hC,EAAMnH,KACrF8rC,EAAU7J,wBAA+C,KAArB5C,EAAMxlB,YAC6D,KAAxG,EAAG+C,EAAiCkiB,IAAIgN,EAAWzV,EAAOA,EAAOO,aAAa53B,QAASqgC,GAAO7oB,OAY9F,OAVIs1B,EAAU1U,oBACV0U,EAAUlkB,cAAciE,mBAAmB,cAAe,0BAA8BigB,EAAU3tB,UAAY,QAC9G2tB,EAAU3jC,UAGV2jC,EAAUlkB,cAAcmD,UAAY,0BAA8B+gB,EAAU3tB,UAAY,QAE5F,EAAGvB,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,GACxE0H,GAAgB1Q,GAChBlvB,EAAMwlB,kBACC,EAGX,KAAK,EAAGuY,EAA0B7J,IAAIl0B,KAAWA,EAAM+hC,WAAa/hC,EAAM8hC,QAAwB,cAAd9hC,EAAMnH,KACH,KAAnF8rC,EAAUnjB,YAAY/J,OAAOtK,QAAQgI,EAA8B+D,EAAEmG,KAAM,KACtD,KAArB6Y,EAAMxlB,YAAmH,QAAjD,QAA3CsK,EAAK2nB,EAAU7J,8BAA2C,IAAP9d,OAAgB,EAASA,EAAGoI,SAQ5G,OAPAuf,EAAU7J,uBAAuBib,mBAAmB,YAAa,QACjE7d,EAAM8B,mBAAmB2K,EAAU7J,wBACnC5C,EAAMO,UAAS,GACfkM,EAAU3jC,UACV,EAAGyU,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,GACxE0H,GAAgB1Q,GAChBlvB,EAAMwlB,kBACC,EAEX,KAAK,EAAGuY,EAA0B7J,IAAIl0B,KAAWA,EAAM8hC,QAAwB,QAAd9hC,EAAMnH,IAAe,CAElF,IAAIg5C,GAAU,EAad,IAZ0B,IAAtB3Z,EAAMc,cAC2B,IAA5BZ,EAAezB,WAAmByB,EAAe4C,iBAClB,IAA5B5C,EAAezB,UAA8C,OAA5ByB,EAAehC,WAInDuO,EAAU7jC,UAAU4f,SAAS,gBAAwC,IAAtBwX,EAAMc,aACX,IAA5CZ,EAAe4C,gBAAgBrE,UACY,UAA3CyB,EAAe4C,gBAAgB5V,WAJlCysB,GAAU,GAQVA,GAAgC,KAArB3Z,EAAMxlB,WAQjB,OAPI1S,EAAM+hC,SACNuZ,GAAYpsB,EAAQyV,EAAWzM,EAAOyM,EAAUlkB,eAGhDs6B,GAAW7rB,EAAQyV,EAAWzM,GAElCl4B,EAAMwlB,kBACC,GAInB,OAAO,GAGPosB,GAAS,SAAU1iB,EAAQgJ,EAAOl4B,GAClC,GAAIkvB,EAAOzzB,QAAQygD,KAAqB,QAAdl8C,EAAMnH,IAkB5B,OAjBImH,EAAM+hC,WAImB,KAArB7J,EAAMxlB,YACNwlB,EAAM+C,WAAWljC,SAASM,eAAe62B,EAAOzzB,QAAQygD,MACxDhkB,EAAMO,UAAS,KAGfP,EAAM+Z,kBACN/Z,EAAM+C,WAAWljC,SAASM,eAAe62B,EAAOzzB,QAAQygD,MACxDhkB,EAAMO,UAAS,MAGvB,EAAGhjB,EAAiC6B,IAAI4gB,GACxC0H,GAAgB1Q,GAChBlvB,EAAMwlB,kBACC,GAGX+sB,GAAc,SAAUvyC,EAAOkvB,EAAQsW,EAAUtN,GACjD,GAAKsN,EAAL,CAGA,KAAK,EAAGzH,EAA0B7J,IAAIl0B,KAAWA,EAAM8hC,QAAwB,UAAd9hC,EAAMnH,IAAiB,CACpF,IAAIsjD,EAAQv0C,OAAOw0C,IAAI/f,IA7iBuDggB,EA6iBM,CAAC,GAAI,IA7iBHD,EA6iBQ,CAAC,GAAI,IA5iBnG3lD,OAAOulC,eAAkBvlC,OAAOulC,eAAeqgB,EAAQ,MAAO,CAAE7jD,MAAO4jD,IAAiBC,EAAOD,IAAMA,EA4iBzD/f,EA3iBzCggB,GA2iBuG7W,EAAShkB,aAAarU,QAAQ,QAAS,IAAIsK,OACjJ6kC,EAAYH,EAAMz7C,MAAM,KAC5B,GAAIy7C,EAAM9mB,WAAW,MAAQ8mB,EAAMF,SAAS,MAAQK,EAAUhiD,OAAS,EAAG,CAEtE,IAAIiiD,EAAgBD,EAAU3+C,KAAI,WAAc,MAAO,SAAUqK,KAAK,KAQtE,OAPAu0C,EACI/W,EAAShkB,YAAc,KAAO+6B,EAAcv5C,UAAU,EAAGu5C,EAAcjiD,OAAS,GAAK,WACzFkrC,EAAS5hB,UAAYsL,EAAO5T,KAAKsU,cAAc2sB,IAC/C,EAAG9mC,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,GACxE0H,GAAgB1Q,GAChBqU,GAAarU,GACblvB,EAAMwlB,kBACC,EAGX,GAAI2a,GAAOqF,EAASxuB,YAAcwuB,EAAS1K,uBAAwB,CAE/D,IAAI0hB,EAAa,GACbC,EAAgBjX,EAASxuB,UAAU8oB,YAAYp/B,MAAM,MAWzD,OAVI+7C,EAAcniD,OAAS,IACvBmiD,EAAchiD,MACd+hD,EAAa,qBAAyBC,EAAcz0C,KAAK,MAAQ,QAErEw9B,EAAS9gB,mBAAmB,WAAY83B,EAAa,oDACrDhX,EAASxkC,UACT,EAAGyU,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,GACxE0H,GAAgB1Q,GAChBqU,GAAarU,GACblvB,EAAMwlB,kBACC,EAEX,GAAI4a,GAAYoF,EAASxuB,WAYrB,MAV2B,YAAvBkY,EAAOO,YACP+V,EAAS5hB,UAAYsL,EAAO5T,KAAKsU,cAAc4V,EAASxuB,UAAY,iCAGpEwuB,EAAS5hB,UAAYsL,EAAO5T,KAAKqU,gBAAgB6V,EAASxuB,UAAY,kCAE1E,EAAGvB,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,GACxE0H,GAAgB1Q,GAChBqU,GAAarU,GACblvB,EAAMwlB,kBACC,EAxlByD,IAAU62B,EAAQD,EA4lB1F,GAAIlkB,EAAMoK,WAAakD,EAAS1K,wBAAwC,cAAd96B,EAAMnH,OAC3D,EAAGklC,EAA0B7J,IAAIl0B,KAAWA,EAAM8hC,SAAW9hC,EAAM+hC,UACpEyD,EAAShkB,YAAYse,YAAYp/B,MAAM,MAAMpG,OAAS,GACiD,KAAvG,EAAGmb,EAAiCkiB,IAAI6N,EAAUtW,EAAOA,EAAOO,aAAa53B,QAASqgC,GAAO7oB,MAAa,CAC1G,IAAIqtC,GAAc,EAAGpnC,EAA4BugB,IAAI2P,EAAS1K,wBAO9D,OANK4hB,EAAYl7B,YAAYy6B,SAAS,QAClCS,EAAYl7B,YAAck7B,EAAYl7B,YAAc,MAExDk7B,EAAYj8B,cAAciE,mBAAmB,YAAa,QAAU8gB,EAASxuB,WAC7EwuB,EAASxkC,UACT,EAAGyU,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,IACjE,EAEX,OAAO,IAEPoQ,GAAY,SAAUpZ,EAAQgJ,EAAOmQ,GAErC,IADA,IAAId,EAAU,GACL9pC,EAAI,EAAGA,EAAI4qC,EAAY5nB,cAAcm6B,kBAAmBn9C,IAC7D8pC,GAAW,cAAiBc,EAAY5nB,cAAcxjB,SAASQ,GAAG/E,aAAa,SAAW,WAElE,OAAxB2vC,EAAYjjB,QACZijB,EAAY5nB,cAAcA,cAAciE,mBAAmB,WAAY,cAAgB6iB,EAAU,iBAGjGc,EAAY5nB,cAAciE,mBAAmB,WAAY,OAAS6iB,EAAU,SAEhF3H,GAAgB1Q,IAEhBsZ,GAAiB,SAAUtZ,EAAQgJ,EAAOmQ,GAE1C,IADA,IAAId,EAAU,GACL9pC,EAAI,EAAGA,EAAI4qC,EAAY5nB,cAAcm6B,kBAAmBn9C,IACjC,OAAxB4qC,EAAYjjB,QACZmiB,GAAW,cAAiBc,EAAY5nB,cAAcxjB,SAASQ,GAAG/E,aAAa,SAAW,WAG1F6uC,GAAW,cAAiBc,EAAY5nB,cAAcxjB,SAASQ,GAAG/E,aAAa,SAAW,WAGlG,GAA4B,OAAxB2vC,EAAYjjB,QAAkB,CAC9BijB,EAAY5nB,cAAcA,cAAciE,mBAAmB,cAAe,cAAgB6iB,EAAU,iBACpGrP,EAAM+C,WAAWljC,SAASC,cAAc,QACxC,IAAI2kD,EAAYtU,EAAY5nB,cAAczJ,UAAU7J,QAAQ,QAAS,QAAQA,QAAQ,UAAW,SAChGk7B,EAAY5nB,cAAcA,cAAcwP,mBAAmBvL,mBAAmB,aAAci4B,GAC5FtU,EAAY5nB,cAAcA,cAAczf,UACxC,EAAGyU,EAA6BoiB,IAAI3I,EAAOyN,GAAG9kC,QAASqgC,QAGvDmQ,EAAY5nB,cAAciE,mBAAmB,cAAe,OAAS6iB,EAAU,SAEnF3H,GAAgB1Q,IAEhByZ,GAAe,SAAUzZ,EAAQuX,EAAc4B,EAAanpC,QAC/C,IAATA,IAAmBA,EAAO,YAG9B,IAFA,IAAIC,EAAQ,EACR4mC,EAAkBsC,EAAYvN,uBAC3BiL,GACH5mC,IACA4mC,EAAkBA,EAAgBjL,uBAEtC,IAAK,IAAIzgC,EAAI,EAAGA,EAAIosC,EAAaK,KAAKxsC,OAAQD,IAChC,IAANA,EACAosC,EAAaK,KAAKzsC,GAAG2sC,MAAM7nC,GAAOulB,mBAAmBxlB,EAAM,cAG3DunC,EAAaK,KAAKzsC,GAAG2sC,MAAM7nC,GAAOulB,mBAAmBxlB,EAAM,cAGnE0gC,GAAgB1Q,IAEhB6Z,GAAY,SAAU7Z,EAAQgJ,EAAOmQ,GACrC,GAA4B,OAAxBA,EAAYjjB,QAAkB,CAC9B,IAAIw3B,EAAevU,EAAY5nB,cAAcA,cACzC4nB,EAAY5nB,cAAcqa,uBAC1B5C,EAAM8B,mBAAmBqO,EAAY5nB,cAAcqa,uBAAuBS,kBAG1ErD,EAAM8B,mBAAmB4iB,EAAa9hB,uBAAuBS,iBAAiBA,kBAE3C,IAAnCqhB,EAAahC,kBACbgC,EAAa57C,SAGbqnC,EAAY5nB,cAAczf,SAE9Bk3B,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,GACxC0H,GAAgB1Q,KAGpB+Z,GAAe,SAAU/Z,EAAQgJ,EAAOuO,EAAc4B,GAGtD,IAFA,IAAIlpC,EAAQ,EACR4mC,EAAkBsC,EAAYvN,uBAC3BiL,GACH5mC,IACA4mC,EAAkBA,EAAgBjL,wBAElCuN,EAAYvN,wBAA0BuN,EAAYpY,sBAClDiI,EAAM8B,mBAAmBqO,EAAYvN,wBAA0BuN,EAAYpY,oBAC3EiI,EAAMO,UAAS,IAEnB,IAAK,IAAIp+B,EAAI,EAAGA,EAAIosC,EAAaK,KAAKxsC,OAAQD,IAAK,CAC/C,IAAI2sC,EAAQP,EAAaK,KAAKzsC,GAAG2sC,MACjC,GAAqB,IAAjBA,EAAM1sC,OAAc,CACpBmsC,EAAazlC,SACb4qC,GAAiB1c,GACjB,MAEJ8X,EAAM7nC,GAAO6B,UAEjB,EAAGyU,EAAiC6B,IAAI4gB,GACxC0H,GAAgB1Q,IAEhBujB,GAAW,SAAUvjB,EAAQlvB,EAAOk4B,GACpC,IAAIE,EAAiBF,EAAME,eACvBiQ,GAAc,EAAG/yB,EAAqCgJ,IAAI8Z,EAAgB,QAC1E,EAAG9iB,EAAqCgJ,IAAI8Z,EAAgB,MAChE,GAAIiQ,EAAa,CAEb,KAAK,EAAGtK,EAA0B7J,IAAIl0B,KAAWA,EAAM8hC,QAAwB,UAAd9hC,EAAMnH,IAAiB,CAC/EwvC,EAAY9M,oBACZ8M,EAAY9M,kBAAsB8M,EAAY9M,iBAAiBR,WAAWsN,EAAYpR,YAC1C,OAAzCoR,EAAY9M,iBAAiBnW,UACjCijB,EAAY3jB,mBAAmB,YAAa,QAEhD,IAAIm4B,EAAY9kD,SAASC,cAAc,MAMvC,OALAkgC,EAAM+C,WAAW4hB,GACjB3kB,EAAMuC,cAAcoiB,GACpBjd,GAAgB1Q,GAChBqU,GAAarU,GACblvB,EAAMwlB,kBACC,EAGX,GAAkB,QAAdxlB,EAAMnH,IACN,OAAImH,EAAM+hC,UAEN0Y,GAAepS,EAAanQ,GAC5Bl4B,EAAMwlB,kBACC,KAEP4lB,EAAc/C,EAAYpY,sBAGtBmb,EADA/C,EAAY5nB,cAAcwP,mBACZoY,EAAY5nB,cAAcwP,mBAAmBD,kBAEF,UAApDqY,EAAY5nB,cAAcA,cAAc2E,SAC7CijB,EAAY5nB,cAAcA,cAAcwP,mBAEpCoY,EAAY5nB,cAAcA,cAAcwP,mBAAmBD,kBAAkBA,kBAGnE,MAGlBob,IACAlT,EAAM8B,mBAAmBoR,IACzB,EAAG31B,EAAiC6B,IAAI4gB,IAE5Cl4B,EAAMwlB,kBACC,GAEX,IAAIihB,EAAe4B,EAAY5nB,cAAcA,cAAcA,cAC3D,GAAkB,YAAdzgB,EAAMnH,IAAmB,CAEzB,GADAmH,EAAMwlB,iBACsB,OAAxB6iB,EAAYjjB,QASZ,OARIqhB,EAAa3L,wBACb5C,EAAM8B,mBAAmByM,EAAa3L,wBACtC5C,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,IAGxCsiB,GAAiBtrB,EAAQ,gBAEtB,EAIX,IAFA,IAAIzxB,EAAI,EACJq/C,EAAYzU,EAAY5nB,cACrBhjB,EAAIq/C,EAAU9V,MAAM1sC,SACnBwiD,EAAU9V,MAAMvpC,GAAGs9B,WAAWsN,GADH5qC,KAKnC,IAAIsoC,EAAkB+W,EAAUhiB,uBAOhC,OANKiL,IACDA,EAAkB+W,EAAUr8B,cAAcqa,uBAAuB4K,YAErExN,EAAM8B,mBAAmB+L,EAAgBiB,MAAMvpC,IAC/Cy6B,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,IACjC,EAEX,GAAkB,cAAdl4B,EAAMnH,IAAqB,CAE3B,IAkBIuyC,EAjBJ,GAFAprC,EAAMwlB,mBACFs3B,EAAYzU,EAAY5nB,eACbwP,oBAA8C,OAAxBoY,EAAYjjB,QAS7C,OARIqhB,EAAaxW,oBACbiI,EAAM8B,mBAAmByM,EAAaxW,oBACtCiI,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,IAGxCsiB,GAAiBtrB,EAAQ,aAEtB,EAGX,IADIzxB,EAAI,EACDA,EAAIq/C,EAAU9V,MAAM1sC,SACnBwiD,EAAU9V,MAAMvpC,GAAGs9B,WAAWsN,GADH5qC,KAYnC,OAPI2tC,EAAc0R,EAAU7sB,sBAExBmb,EAAc0R,EAAUr8B,cAAcwP,mBAAmByV,YAE7DxN,EAAM8B,mBAAmBoR,EAAYpE,MAAMvpC,IAC3Cy6B,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,IACjC,EAGX,GAA2B,YAAvBhJ,EAAOO,eACN,EAAGsO,EAA0B7J,IAAIl0B,IAAwB,UAAdA,EAAMnH,MAAoBmH,EAAM+hC,UAAY/hC,EAAM8hC,OAAQ,CACtG,IAAIoR,EAAehkB,EAAOuN,QAAQqC,QAAQn+B,cAAc,iBAIxD,OAHAuyC,EAAa7a,QACb6a,EAAa3J,SACbvpC,EAAMwlB,kBACC,EAGX,KAAK,EAAGuY,EAA0B7J,IAAIl0B,KAAWA,EAAM+hC,WAAa/hC,EAAM8hC,QAAwB,cAAd9hC,EAAMnH,KAC7D,IAAtBq/B,EAAMc,aAA0C,KAArBd,EAAMxlB,WAcpC,OAb0B+nC,GAAepS,EAAanQ,GAAO,IACjCuO,IACgB,KAApCA,EAAajlB,YAAY/J,QACzBgvB,EAAa7iB,UAAY,iCACzB,EAAGnO,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,KAGxEA,EAAMsC,eAAeiM,GACrBvO,EAAMO,UAAS,IAEnBmH,GAAgB1Q,IAEpBlvB,EAAMwlB,kBACC,EAGX,GAAIoc,EAAY,MAAO5hC,GAGnB,OAFAwoC,GAAetZ,EAAQgJ,EAAOmQ,GAC9BroC,EAAMwlB,kBACC,EAGX,GAAIoc,EAAY,KAAM5hC,GAGlB,OAFAsoC,GAAUpZ,EAAQgJ,EAAOmQ,GACzBroC,EAAMwlB,kBACC,EAGX,GAAIoc,EAAY,MAAO5hC,GAGnB,OAFA2oC,GAAazZ,EAAQuX,EAAc4B,EAAa,eAChDroC,EAAMwlB,kBACC,EAGX,GAAIoc,EAAY,MAAO5hC,GAGnB,OAFA2oC,GAAazZ,EAAQuX,EAAc4B,GACnCroC,EAAMwlB,kBACC,EAGX,GAAIoc,EAAY,KAAM5hC,GAGlB,OAFA+oC,GAAU7Z,EAAQgJ,EAAOmQ,GACzBroC,EAAMwlB,kBACC,EAGX,GAAIoc,EAAY,MAAO5hC,GAGnB,OAFAipC,GAAa/Z,EAAQgJ,EAAOuO,EAAc4B,GAC1CroC,EAAMwlB,kBACC,EAGX,GAAIoc,EAAY,MAAO5hC,GAAQ,CAC3B,GAA2B,OAAvBkvB,EAAOO,YAIP,OAHAgY,GAAchB,EAAc,QAC5B7G,GAAgB1Q,GAChBlvB,EAAMwlB,kBACC,EAIP,GADI0Y,EAAchP,EAAOuN,QAAQqC,QAAQn+B,cAAc,sBAInD,OAFAu9B,EAAY+H,QACZjmC,EAAMwlB,kBACC,EAKnB,GAAIoc,EAAY,MAAO5hC,GAAQ,CAC3B,GAA2B,OAAvBkvB,EAAOO,YAIP,OAHAgY,GAAchB,EAAc,UAC5B7G,GAAgB1Q,GAChBlvB,EAAMwlB,kBACC,EAIP,GADI0Y,EAAchP,EAAOuN,QAAQqC,QAAQn+B,cAAc,wBAInD,OAFAu9B,EAAY+H,QACZjmC,EAAMwlB,kBACC,EAKnB,GAAIoc,EAAY,MAAO5hC,GAAQ,CAC3B,GAA2B,OAAvBkvB,EAAOO,YAIP,OAHAgY,GAAchB,EAAc,SAC5B7G,GAAgB1Q,GAChBlvB,EAAMwlB,kBACC,EAGP,IAAI0Y,EACJ,GADIA,EAAchP,EAAOuN,QAAQqC,QAAQn+B,cAAc,uBAInD,OAFAu9B,EAAY+H,QACZjmC,EAAMwlB,kBACC,GAKvB,OAAO,GAEPotB,GAAe,SAAU1jB,EAAQlvB,EAAO0yC,EAAmBxa,GAE3D,GAAkC,QAA9Bwa,EAAkBttB,SAAqBwc,EAAY,KAAM5hC,GAGzD,OAFAk4B,EAAM8B,mBAAmB0Y,EAAkB1iB,mBAC3ChwB,EAAMwlB,kBACC,EAIX,GAAI0J,EAAOzzB,QAAQygD,KAAqB,QAAdl8C,EAAMnH,MAAkBmH,EAAM+hC,UAAiC,KAArB7J,EAAMxlB,WAKtE,OAJAwlB,EAAM+C,WAAWljC,SAASM,eAAe62B,EAAOzzB,QAAQygD,MACxDhkB,EAAMO,UAAS,GACfmH,GAAgB1Q,GAChBlvB,EAAMwlB,kBACC,EAGX,GAAkB,cAAdxlB,EAAMnH,OAAwB,EAAGklC,EAA0B7J,IAAIl0B,KAAWA,EAAM+hC,WAAa/hC,EAAM8hC,OAAQ,CAC3G,IAAIib,GAAe,EAAGtnC,EAAiCkiB,IAAI+a,EAAmBxjB,EAAOA,EAAOO,aAAa53B,QAASqgC,GAClH,IAA4B,IAAvB6kB,EAAa1tC,OACU,IAAvB0tC,EAAa1tC,OAA+C,OAAhCqjC,EAAkBhxB,YACvB,KAArBwW,EAAMxlB,WAMT,OALAggC,EAAkBjyB,cAAcmD,UAC5B,0BAA8B8uB,EAAkB1iB,kBAAkBhZ,UAAY,QAClF,EAAGvB,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,GACxE0H,GAAgB1Q,GAChBlvB,EAAMwlB,kBACC,EAIf,QAAK,EAAGuY,EAA0B7J,IAAIl0B,KAAWA,EAAM8hC,QAAwB,UAAd9hC,EAAMnH,MAC9D65C,EAAkB1iB,kBAAkBxO,YAAYy6B,SAAS,OAC1DvJ,EAAkB1iB,kBAAkB+lB,mBAAmB,YAAa,MAExE7d,EAAM+Z,kBACN/Z,EAAM+C,WAAWljC,SAASM,eAAe,OACzC6/B,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,IACnC,EAAG6F,EAA6BhK,QACN,YAAvB7E,EAAOO,YACPiqB,GAAYxqB,EAAQgJ,GAGpB+H,EAAM/Q,EAAQgJ,IAGtBqL,GAAarU,GACblvB,EAAMwlB,kBACC,IAIXqtB,GAAgB,SAAU3jB,EAAQgJ,EAAOl4B,EAAOwlC,GAChD,IAAIpN,EAAiBF,EAAME,eACvBwI,GAAoB,EAAGtrB,EAAqCgJ,IAAI8Z,EAAgB,cACpF,GAAIwI,GAA0C,KAArB1I,EAAMxlB,WAAmB,CAC9C,GAAkB,cAAd1S,EAAMnH,OAAwB,EAAGklC,EAA0B7J,IAAIl0B,KAAWA,EAAM+hC,WAAa/hC,EAAM8hC,QACa,KAAhH,EAAGrsB,EAAiCkiB,IAAIiJ,EAAmB1R,EAAOA,EAAOO,aAAa53B,QAASqgC,GAAO7oB,MAOtG,OALA6oB,EAAM+C,WAAWljC,SAASC,cAAc,QACxC4oC,EAAkBhd,UAAYgd,EAAkB5pB,WAChD,EAAGvB,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,GACxE0H,GAAgB1Q,GAChBlvB,EAAMwlB,kBACC,EAEX,GAAIggB,GAA0B,UAAdxlC,EAAMnH,OAAoB,EAAGklC,EAA0B7J,IAAIl0B,KAAWA,EAAM+hC,WAAa/hC,EAAM8hC,QACrE,eAAnC0D,EAAS/kB,cAAc2E,QAA0B,CAEpD,IAAI43B,GAAU,EAcd,GAb6E,OAAzExX,EAASxuB,UAAU7J,QAAQgI,EAA8B+D,EAAEmG,KAAM,KACQ,KAAzEmmB,EAASxuB,UAAU7J,QAAQgI,EAA8B+D,EAAEmG,KAAM,KAEjE29B,GAAU,EACVxX,EAASxkC,UAEJwkC,EAASxuB,UAAUilC,SAAS,UACjC,EAAGxmC,EAAiCkiB,IAAI6N,EAAUtW,EAAOA,EAAOO,aAAa53B,QAASqgC,GAAO7oB,QACzFm2B,EAAShkB,YAAYlnB,OAAS,IAElCkrC,EAASxuB,UAAYwuB,EAASxuB,UAAU+G,OAAO,EAAGynB,EAASxuB,UAAU1c,OAAS,GAC9E0iD,GAAU,GAEVA,EAMA,OAJApc,EAAkBlc,mBAAmB,WAAY,qBAAyBvP,EAA8B+D,EAAEmG,KAAO,gBACjH,EAAG5J,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,GACxE0H,GAAgB1Q,GAChBlvB,EAAMwlB,kBACC,EAGf,IAAIsR,GAAe,EAAGxhB,EAAgCsgB,IAAIwC,GAC1D,GAA2B,YAAvBlJ,EAAOO,aAA6BqH,GAAgB8K,EAAY,MAAO5hC,GAOvE,OALAk4B,EAAM+C,WAAWljC,SAASC,cAAc,QACxC8+B,EAAalT,UAAY,8BAAkCkT,EAAalT,UAAY,iBACpF,EAAGnO,EAA6BoiB,IAAI3I,EAAOuN,QAAQ5kC,QAASqgC,GAC5D0M,EAAiB1V,GACjBlvB,EAAMwlB,kBACC,EAEX,GAAIua,GAAiB7Q,EAAQlvB,EAAOk4B,EAAO0I,EAAmBA,GAC1D,OAAO,EAEX,GAAIf,GAAkB3Q,EAAQlvB,EAAOk4B,EAAO0I,EAAmBA,GAC3D,OAAO,EAGf,OAAO,GAEPoS,GAAU,SAAU9jB,EAAQgJ,EAAOl4B,GACnC,IAAIo4B,EAAiBF,EAAME,eACvB6kB,GAAkB,EAAG3nC,EAAsCiJ,IAAI6Z,EAAgB,eACnF,GAAI6kB,EAAiB,CACjB,GAAIrb,EAAY,MAAO5hC,GAAQ,CAE3B,IAAIkzC,EAAe+J,EAAgBjtB,kBASnC,OARIkjB,EAAagK,QACbhK,EAAaz6C,gBAAgB,WAG7By6C,EAAav6C,aAAa,UAAW,WAEzCinC,GAAgB1Q,GAChBlvB,EAAMwlB,kBACC,EAGX,GAAkB,cAAdxlB,EAAMnH,OAAwB,EAAGklC,EAA0B7J,IAAIl0B,KAAWA,EAAM+hC,WAAa/hC,EAAM8hC,QAA+B,KAArB5J,EAAMxlB,YAC1F,IAAtBwlB,EAAMc,cACwB,IAA5BZ,EAAezB,UAAkByB,EAAe4C,iBACN,UAA3C5C,EAAe4C,gBAAgB5V,SACA,IAA5BgT,EAAezB,UAAiB,CACvC,IAAIoP,EAAkBkX,EAAgBniB,uBAmBtC,OAlBAmiB,EAAgBt8C,cAAc,SAASK,SACnC+kC,IACe,EAAGzwB,EAA4BugB,IAAIkQ,GACzCtlB,cAAciE,mBAAmB,YAAa,QAAUu4B,EAAgBjmC,UAAUS,QAC3FwlC,EAAgBj8C,WAGhBi8C,EAAgBx8B,cAAciE,mBAAmB,cAAe,2BAA+Bu4B,EAAgBjmC,UAAUS,QAAU,MAAQ,QACvIwlC,EAAgBhtB,mBAChBgtB,EAAgBj8C,SAGhBi8C,EAAgBx8B,cAAczf,WAGtC,EAAGyU,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,GACxE0H,GAAgB1Q,GAChBlvB,EAAMwlB,kBACC,EAEX,GAAkB,UAAdxlB,EAAMnH,OAAoB,EAAGklC,EAA0B7J,IAAIl0B,KAAWA,EAAM+hC,WAAa/hC,EAAM8hC,OAAQ,CACvG,GAA2C,KAAvCmb,EAAgBz7B,YAAY/J,OAE5B,IAAI,EAAGnC,EAAsCiJ,IAAI0+B,EAAgBx8B,cAAe,eAAgB,CAE5F,IAAIgW,GAAiB,EAAGnhB,EAA2BogB,IAAI0C,GACnD3B,GACA6kB,GAAYpsB,EAAQ+tB,EAAiB/kB,EAAOzB,QAKhD,GAAIwmB,EAAgBhtB,mBAAoB,CAEpC,IAAIktB,EAAc,GACdC,EAAe,GACfC,GAAY,EAChBvgD,MAAMC,KAAKkgD,EAAgBx8B,cAAcxjB,UAAUpG,SAAQ,SAAUymD,GAC7DL,EAAgBliB,WAAWuiB,GAC3BD,GAAY,EAGRA,EACAF,GAAeG,EAAS15B,UAGxBw5B,GAAgBE,EAAS15B,aAIrC,IAAI25B,EAAgBN,EAAgBx8B,cAAc2E,QAC9Co4B,EAAuD,OAA1CP,EAAgBx8B,cAAc2E,QAAmB,GAAK,iBAAoB63B,EAAgBx8B,cAAc/nB,aAAa,eAAiB,IACnJ+kD,EAAiB,GACjBL,IACAK,EAA2D,OAA1CR,EAAgBx8B,cAAc2E,QAAmB,GAAK,aACvEg4B,EAAe,IAAMG,EAAgB,qBAAyBC,EAAa,mBAAuBJ,EAAe,KAAOG,EAAgB,KAI5IN,EAAgBx8B,cAAcmD,UAAYw5B,EAAe,iCAAqCG,EAAgB,uBAA2BC,EAAa,kBAAsBC,EAAiB,IAAMN,EAAc,KAAOI,EAAgB,SAIxON,EAAgBx8B,cAAciE,mBAAmB,WAAY,iCACO,IAAhEu4B,EAAgBx8B,cAActM,iBAAiB,MAAM7Z,OAErD2iD,EAAgBx8B,cAAczf,SAI9Bi8C,EAAgBj8C,cAKK,IAA5Bo3B,EAAezB,UAAwC,IAAtBuB,EAAMc,aACN,UAAtCZ,EAAesN,WAAWtgB,QAE1B8S,EAAMM,SAASJ,EAAep7B,WAAW,GAAI,IAI7Ck7B,EAAMyC,YAAYsiB,EAAgBhmB,WAClCgmB,EAAgBv4B,mBAAmB,WAAY,wCAA6Cu4B,EAAgBvkD,aAAa,eAAiB,wCAC1IX,SAAS4I,cAAc,OAAOyd,MAAM8Z,EAAM+Z,oBAM9C,OAJA,EAAGx8B,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,GACxE0H,GAAgB1Q,GAChBqU,GAAarU,GACblvB,EAAMwlB,kBACC,GAGf,OAAO,GAEP2tB,GAAY,SAAUjkB,EAAQgJ,EAAOl4B,EAAOwlC,GAC5C,GAAsC,IAAlCtN,EAAME,eAAezB,SAAgB,CAErC,IAAI+mB,EAAexlB,EAAME,eAAen7B,SAASi7B,EAAMc,aACvD,GAAI0kB,GAAyC,OAAzBA,EAAat4B,QAI7B,OAHA8S,EAAM8B,mBAAmB0jB,EAAa5iB,wBACtC5C,EAAMO,UAAS,GACfz4B,EAAMwlB,kBACC,EAGf,GAAIggB,EAAU,CACV,IAAIO,EAAkBP,EAAS1K,uBAC/B,GAAIiL,GAA0H,KAAvG,EAAGtwB,EAAiCkiB,IAAI6N,EAAUtW,EAAOA,EAAOO,aAAa53B,QAASqgC,GAAO7oB,SAC9G,EAAG0uB,EAA6BhK,OAAqC,OAA5BgS,EAAgB3gB,SAAiD,UAA5B2gB,EAAgB3gB,SAAsB,CACtH,GAAgC,UAA5B2gB,EAAgB3gB,QAAqB,CAErC,IAAIu4B,EAAkB5X,EAAgBxK,iBAAiBA,iBAAiBA,iBACxEoiB,EAAgB3mC,UACZ2mC,EAAgB3mC,UAAU6jC,WAAa,QAAUrV,EAAShkB,YAAY/J,OAC1E+tB,EAASxkC,cAIT+kC,EAAgB/kC,SAKpB,OAHA,EAAGyU,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,GACxE0H,GAAgB1Q,GAChBlvB,EAAMwlB,kBACC,GAGf,OAAO,GAEP8sB,GAAQ,SAAUpa,IACd,EAAG6F,EAA6BhK,OAA2C,IAAlCmE,EAAME,eAAezB,UAC7B,OAAjCuB,EAAME,eAAehT,SACrB8S,EAAMsC,eAAetC,EAAME,iBAI/Bmb,GAAyB,SAAUvzC,EAAO82B,EAAcoB,GACxD,IAAIlb,EAAI+zB,EACR,KAAK,EAAGhT,EAA6BhK,MACjC,OAAO,EAEX,GAAkB,YAAd/zB,EAAMnH,KAAqBi+B,GAAiH,WAAjD,QAA9C9Z,EAAK8Z,EAAagE,8BAA2C,IAAP9d,OAAgB,EAASA,EAAGoI,SAAsB,CACrJ,IAAIqhB,EAAe3P,EAAagE,uBAIhC,OAHA5C,EAAM8B,mBAAmByM,EAAaK,KAAKL,EAAaK,KAAKxsC,OAAS,GAAGihC,kBACzErD,EAAMO,UAAS,GACfz4B,EAAMwlB,kBACC,EAEX,QAAkB,cAAdxlB,EAAMnH,MAAuBi+B,GAA6G,WAAjD,QAA1Cia,EAAKja,EAAa7G,0BAAuC,IAAP8gB,OAAgB,EAASA,EAAG3rB,WAC7H8S,EAAM8B,mBAAmBlD,EAAa7G,mBAAmB6W,KAAK,GAAGE,MAAM,IACvE9O,EAAMO,UAAS,GACfz4B,EAAMwlB,iBACC,KAIX6qB,GAAQ,SAAUnhB,EAAQlvB,EAAOtF,GAAY,OAAOy/C,QAA2B,OAAQ,OAAQ,GAAQ,WACvG,IAAIyD,EAAUC,EAAWrH,EAAO95B,EAAWohC,EAAgBC,EAAK7pC,EAAQ+O,EAAMZ,EAAagM,EAAUkB,EAAauH,EAAcoB,EAC5Hlb,EACJ,OAAOo9B,GAA6Bh8C,MAAM,SAAU2yC,GAChD,OAAQA,EAAG33B,OACP,KAAK,EAqGD,OApGApZ,EAAMulB,kBACNvlB,EAAMwlB,iBACF,kBAAmBxlB,GACnB49C,EAAW59C,EAAM4lB,cAAcuqB,QAAQ,aACvC0N,EAAY79C,EAAM4lB,cAAcuqB,QAAQ,cACxCqG,EAAQx2C,EAAM4lB,cAAc4wB,QAG5BoH,EAAW59C,EAAMkwC,aAAaC,QAAQ,aACtC0N,EAAY79C,EAAMkwC,aAAaC,QAAQ,cACH,UAAhCnwC,EAAMkwC,aAAaE,MAAM,KACzBoG,EAAQx2C,EAAMkwC,aAAa8N,QAGnCthC,EAAY,GACZohC,EAAiB,SAAUzmD,EAAM4mD,GAC7B,IAAKA,EACD,MAAO,CAAC,GAAIpuB,KAAKquB,cAErB,IAAIngD,EAAM1G,EAAK8mD,YACf,GAA6C,KAAzC9mD,EAAK+mD,oBAAoBC,OAAOC,MAAevgD,IAAmC,IAA5BA,EAAIqB,QAAQ,YAClE8vB,EAAOzzB,QAAQ06C,OAAOoI,aAAc,CACpC,IAAIC,EAAQ,IAAIxrB,eAChBwrB,EAAMvrB,KAAK,OAAQ/D,EAAOzzB,QAAQ06C,OAAOoI,cACrCrvB,EAAOzzB,QAAQ06C,OAAOmC,OACtBkG,EAAMtrB,iBAAiB,iBAAkBhE,EAAOzzB,QAAQ06C,OAAOmC,OAE/DppB,EAAOzzB,QAAQ06C,OAAOoC,kBACtBiG,EAAMjG,iBAAkB,GAE5BtC,GAAW/mB,EAAQsvB,GACnBA,EAAMtrB,iBAAiB,eAAgB,mCACvCsrB,EAAMhG,mBAAqB,WACvB,GAAIgG,EAAM/F,aAAezlB,eAAe0lB,KAAM,CAC1C,GAAqB,MAAjB8F,EAAM7F,OAAgB,CACtB,IAAItlB,EAAemrB,EAAMnrB,aACrBnE,EAAOzzB,QAAQ06C,OAAOsI,kBACtBprB,EAAenE,EAAOzzB,QAAQ06C,OAAOsI,gBAAgBD,EAAMnrB,eAE/D,IAAIqrB,EAAiB78B,KAAKC,MAAMuR,GAChC,GAA4B,IAAxBqrB,EAAez7B,KAEf,YADAiM,EAAO6d,IAAIpP,KAAK+gB,EAAe3F,KAGnC,IAAI4F,EAAaD,EAAetmD,KAAKwmD,YACrC,GAA2B,OAAvB1vB,EAAOO,YACPP,EAAOqN,GAAG1kC,QAAQsc,iBAAiB,4BAC9Btd,SAAQ,SAAU2f,GACfA,EAAKgL,cAAgBm9B,IACrBnoC,EAAKgL,YAAck9B,EAAetmD,KAAKoI,YAI9C,CACD,IAAI4T,EAAa8a,EAAOA,EAAOO,aAAa53B,QAAQ8I,cAAc,YAAeg+C,EAAa,MAC9FvqC,EAAWrW,IAAM2gD,EAAetmD,KAAKoI,IACV,OAAvB0uB,EAAOO,cACPrb,EAAW0mB,uBAAuBA,uBAAuB9jB,UACrD0nC,EAAetmD,KAAKoI,KAGhCo/B,GAAgB1Q,QAGhBA,EAAO6d,IAAIpP,KAAK6gB,EAAMnrB,cAEtBnE,EAAOzzB,QAAQ06C,OAAO0I,mBACtB3vB,EAAOzzB,QAAQ06C,OAAO0I,kBAAkBL,EAAMnrB,gBAI1DmrB,EAAMrrB,KAAKtR,KAAKi9B,UAAU,CAAEt+C,IAAKzC,KAErC,MAA2B,OAAvBmxB,EAAOO,YACA,CAAC,2DAA+D1xB,EAAM,UAAW8xB,KAAKquB,cAEjE,YAAvBhvB,EAAOO,YACL,CAAC,GAAII,KAAKquB,cAGV,CAAC,yCAA6CngD,EAAM,UAAW8xB,KAAKquB,eAI/EN,EAASzwC,QAAQ,SAAU,KAAKA,QAAQ,kCAAmC,IAAIsK,SAC/E,YAAeomC,EAAY,KAAQA,EAAY,QAC/CD,EAASzwC,QAAQ,SAAU,KAAKA,QAAQ,kCAAmC,IAAIsK,SAC3E,sCAAmComC,EAAY,KAAQA,EAAY,iCACvED,EAAW,KAEfG,GAAM,IAAIgB,WAAYC,gBAAgBpB,EAAU,cACxC1nC,OACJ0nC,EAAWG,EAAI7nC,KAAKc,WAExBkY,EAAOuN,QAAQiU,YAAYxhB,GAC3Bhb,EAASgb,EAAOA,EAAOO,aAAa53B,QAAQw6B,aAC5CpP,EAhqLO,SAAUnW,EAAM3U,EAAM+G,QAC5B,IAATA,IAAmBA,EAAO,MAC9B,IAAIqwB,EAAcx3B,SAASC,cAAc,OACzCu3B,EAAYvY,UAAYlK,EACxB,IAAImyC,GAAS,EACyB,IAAlC1vB,EAAYqrB,mBACZrrB,EAAYgM,iBAAiBxiC,MAAMovB,WAAW/oB,QAAQ,cAAgB,IAEtE6/C,GAAS,GAEb,IAAIC,EAAO3vB,EAAYpb,iBAAiB,OAgBxC,GAfsC,IAAlCob,EAAYqrB,mBAA2C,IAAhBsE,EAAK5kD,QACnB,mBAAtB4kD,EAAK,GAAGjpC,WACc,cAAtBipC,EAAK,GAAGjpC,YAEXgpC,GAAS,GAE4B,IAArCnyC,EAAK1N,QAAQ,sBAEb6/C,GAAS,GAEyB,IAAlC1vB,EAAYqrB,mBAAqE,UAA1CrrB,EAAYS,kBAAkB5K,SACrEmK,EAAY5uB,cAAc,iBAAmB4uB,EAAY5uB,cAAc,mBAEvEs+C,GAAS,GAETA,EAAQ,CACR,IAAIh8B,EAAO9qB,GAAQ2U,EACnB,MAAI,KAAKsoB,KAAKnS,IAAyB,IAAhBi8B,EAAK5kD,OACX,YAAT4E,EACO,uFAA+F+jB,EAAK9V,QAAQ,KAAM,SAASA,QAAQ,KAAM,QAAU,2BAEvJ,UAAY8V,EAAK9V,QAAQ,KAAM,SAASA,QAAQ,KAAM,QAAU,QAG1D,YAATjO,EACO,SAAW+jB,EAAK9V,QAAQ,KAAM,SAASA,QAAQ,KAAM,QAAU,eAEnE,IAAM8V,EAAO,IAG5B,OAAO,EAunLYk8B,CAAiBvB,EAAUC,EAAW3uB,EAAOO,cACpDpN,EAAqC,OAAvB6M,EAAOO,aACjB,EAAGna,EAAsCqgB,IAAI31B,EAAM5I,OAAQ,YAAa,eACxE,EAAGke,EAAqCgJ,IAAIte,EAAM5I,OAAQ,UAGnC,OAAvB83B,EAAOO,YACP13B,SAASujC,YAAY,cAAc,EAAOuiB,EAAU1wC,QAAQ,KAAM,SAASA,QAAQ,KAAM,UAGzFkhB,GAAW,EAAG5Y,EAAiCkiB,IAAI33B,EAAM5I,OAAQ83B,EAAOA,EAAOO,aAAa53B,SAClD,QAAtCwqB,EAAY5B,cAAc2E,UAE1By4B,GAAa1oC,EAA8B+D,EAAEmG,MAEjDgD,EAAYb,YAAca,EAAYb,YAAYxe,UAAU,EAAGqrB,EAAShf,OAClEwuC,EAAYx7B,EAAYb,YAAYxe,UAAUqrB,EAASyL,MAC7D,EAAGrkB,EAAsCmiB,IAAIvJ,EAAShf,MAAQwuC,EAAUvjD,OAAQ+zB,EAAShf,MAAQwuC,EAAUvjD,OAAQ+nB,EAAY5B,gBACtF,QAApCzD,EAAKqF,EAAY5B,qBAAkC,IAAPzD,OAAgB,EAASA,EAAGiT,mBAAmBnvB,UAAU4f,SAAS,UAAYwO,EAAOO,YAAc,gBAChJpN,EAAY5B,cAAcwP,mBAAmBjZ,UAAYqL,EAAYuB,UACrEwb,EAAkB/c,EAAY5B,cAAcwP,mBAAoBf,KAGjE,CAAC,EAAa,IAnBI,CAAC,EAAa,GAoB3C,KAAK,EACD,OAAKjM,GACLvoB,EAAS41C,UAAUrtB,GACZ,CAAC,EAAa,IAFH,CAAC,EAAa,GAGpC,KAAK,EACD,MAA0B,KAApB26B,EAASnmC,OAAuB,CAAC,EAAa,KACpD8X,EAAcx3B,SAASC,cAAc,QACzBgf,UAAY4mC,EACxBruB,EAAYpb,iBAAiB,WAAWtd,SAAQ,SAAUgJ,GACtDA,EAAEpH,gBAAgB,YAEtB82B,EAAYpb,iBAAiB,gBAAgBtd,SAAQ,SAAUgJ,GAC3DA,EAAEmB,YAEqB,OAAvBkuB,EAAOO,aACP/S,EAAU0iC,iBAAmB,CAAEtB,eAAgBA,GAC/C5uB,EAAO5T,KAAKqB,eAAe,CAAED,UAAWA,KACxC,EAAGjH,EAA0BqiB,IAAI5I,EAAO5T,KAAK8jC,iBAAiB7vB,EAAYvY,WAAYkY,IAE1D,YAAvBA,EAAOO,aACZ/S,EAAUgT,eAAiB,CAAEouB,eAAgBA,GAC7C5uB,EAAO5T,KAAKqB,eAAe,CAAED,UAAWA,KACxC,EAAGjH,EAA0BqiB,IAAI5I,EAAO5T,KAAKoU,eAAeH,EAAYvY,WAAYkY,KAGpFxS,EAAUw4B,eAAiB,CAAE4I,eAAgBA,GAC7C5uB,EAAO5T,KAAKqB,eAAe,CAAED,UAAWA,IACxCu4B,GAAa/lB,EAAQA,EAAO5T,KAAKgpB,QAAQ/U,EAAYvY,WAAW8oB,cAEpE5Q,EAAOsQ,QAAQC,OAAOvQ,GACf,CAAC,EAAa,IACzB,KAAK,EACD,OAAMsnB,EAAMl8C,OAAS,GAAK40B,EAAOzzB,QAAQ06C,OAAO31C,IACzC,CAAC,EAAa+1C,GAAYrnB,EAAQsnB,IADoB,CAAC,EAAa,GAE/E,KAAK,EAED,OADAzF,EAAG13B,OACI,CAAC,EAAa,GACzB,KAAK,EACwB,KAArBwkC,EAAUpmC,QAAkC,IAAjB++B,EAAMl8C,SACN,OAAvB40B,EAAOO,aACP/S,EAAUqyB,eAAiB,CAAE+O,eAAgBA,GAC7C5uB,EAAO5T,KAAKqB,eAAe,CAAED,UAAWA,KACxC,EAAGjH,EAA0BqiB,IAAI5I,EAAO5T,KAAKyzB,eAAe8O,GAAY3uB,IAE5C,YAAvBA,EAAOO,aACZ/S,EAAUqvB,aAAe,CAAE+R,eAAgBA,GAC3C5uB,EAAO5T,KAAKqB,eAAe,CAAED,UAAWA,KACxC,EAAGjH,EAA0BqiB,IAAI5I,EAAO5T,KAAKywB,aAAa8R,GAAY3uB,KAGtExS,EAAUw4B,eAAiB,CAAE4I,eAAgBA,GAC7C5uB,EAAO5T,KAAKqB,eAAe,CAAED,UAAWA,IACxCu4B,GAAa/lB,EAAQ2uB,IAEzB3uB,EAAOsQ,QAAQC,OAAOvQ,IAE1B6hB,EAAG33B,MAAQ,EACf,KAAK,EA4BD,MA3B2B,OAAvB8V,EAAOO,eACPqH,GAAe,EAAGxhB,EAAgCsgB,KAAI,EAAGngB,EAA8B+hB,IAAItI,GAAQkJ,mBAE/FF,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAC7CA,EAAOA,EAAOO,aAAa53B,QAAQsc,iBAAiB,OAAOtd,SAAQ,SAAUgjD,GACzEA,EAAI74C,YAERk3B,EAAM+C,WAAWljC,SAASC,cAAc,QACb,YAAvBk3B,EAAOO,YACPqH,EAAalT,UAAYsL,EAAO5T,KAAKsU,cAAckH,EAAalT,WAGhEkT,EAAalT,UAAYsL,EAAO5T,KAAKqU,gBAAgBmH,EAAalT,YAEtE,EAAGnO,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASqgC,IAE5EhJ,EAAOA,EAAOO,aAAa53B,QAAQsc,iBAAiB,WAAa+a,EAAOO,YAAc,8BACjF54B,SAAQ,SAAU2f,GACnB4oB,EAAkB5oB,EAAM0Y,OAGhCA,EAAOuN,QAAQyd,qBAAqBhrB,GACpC0Q,GAAgB1Q,GACZA,EAAOA,EAAOO,aAAa53B,QAAQw6B,aAAene,EAClD5O,KAAK6C,IAAI+mB,EAAOA,EAAOO,aAAa53B,QAAQy6B,aAActe,OAAOC,aAAe,GAChFsvB,GAAarU,GAEV,CAAC,WAgBpBmwB,GAAc,SAAUnwB,GACxBA,EAAO2P,KAAKY,OAAOvQ,GACnB,IAAIkJ,GAAiB,EAAG3iB,EAA8B+hB,IAAItI,GAAQkJ,eAE9D0b,GAAmB,EAAGx+B,EAAsCqgB,IAAIyC,EAAgB,YAAa,mBACjG,GAAI0b,EACA,GAAuF,KAAnFA,EAAiBtyB,YAAYrU,QAAQgI,EAA8B+D,EAAEmG,KAAM,KAAc6P,EAAO2P,KAAKqL,eACrG4J,EAAiBtyB,YAAcrM,EAA8B+D,EAAEmG,KAAO6P,EAAO2P,KAAKqL,gBACtE,EAAGz0B,EAA8B+hB,IAAItI,GAC3C8K,mBAAmB8Z,OAExB,CACD,IAAIwL,EAAkB,GAClBC,EAAQzL,EAAiBtyB,YAAYxe,UAAU,GAAG,EAAGyS,EAAiCkiB,IAAImc,EAAkB5kB,EAAOyN,GAAG9kC,SAASwX,OAC9HlC,QAAQgI,EAA8B+D,EAAEmG,KAAM,IACnDlK,EAAgD+D,EAAEyG,eAAe9oB,SAAQ,SAAUyzC,GAC3EA,EAAQlrC,QAAQmgD,EAAM9qB,gBAAkB,GACxC6qB,EAAgBtlD,KAAK,CACjB8S,KAAMw9B,EACN9xC,MAAO8xC,OAInBpb,EAAO2P,KAAK0L,QAAQ+U,EAAiBC,EAAOrwB,KAIpDsS,GAA6B,SAAUtS,EAAQzzB,QAC/B,IAAZA,IAAsBA,EAAU,CAChCgmC,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEblmC,EAAQimC,YACR2d,GAAYnwB,GAEhBsV,aAAatV,EAAOyN,GAAGkZ,kBACvB3mB,EAAOyN,GAAGkZ,iBAAmB7hC,OAAOjT,YAAW,WAC3C,IAAImuB,EAAOyN,GAAGmI,cAAd,CAGA,IAAI3sC,EAAOmkC,EAAYpN,GACa,mBAAzBA,EAAOzzB,QAAQwkC,OAAwBxkC,EAAQkmC,aACtDzS,EAAOzzB,QAAQwkC,MAAM9nC,GAErB+2B,EAAOzzB,QAAQspC,QAAQjqB,QACvBoU,EAAO6V,QAAQtF,OAAOvQ,EAAQ/2B,GAE9B+2B,EAAOzzB,QAAQ2oC,MAAMtpB,SAAU,EAAGijB,EAAsC/J,QACxEW,aAAaqQ,QAAQ9V,EAAOzzB,QAAQ2oC,MAAMtmB,GAAI3lB,GAC1C+2B,EAAOzzB,QAAQ2oC,MAAMhmB,OACrB8Q,EAAOzzB,QAAQ2oC,MAAMhmB,MAAMjmB,IAG/B+2B,EAAO6N,UACP7N,EAAO6N,SAASF,aAAa3N,GAE7BzzB,EAAQgmC,oBACRvS,EAAO+V,KAAKC,eAAehW,MAEhCA,EAAOzzB,QAAQ0pC,YAElBgP,GAAyB,SAAUjlB,EAAQ12B,GAC3C,IAAI0/B,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAC7C1Q,GAAiB,EAAGlJ,EAAgCsgB,IAAIsC,EAAME,iBAAmBF,EAAME,eAC3F,GAAI5Z,EAAgB,CAChB,IAAI01B,EAAuB11B,EAAe7d,cAAc,+BACpDuzC,EACAA,EAAqBl9B,UAAYxe,GAGjCgmB,EAAeu3B,mBAAmB,aAAcv9C,GAChD0/B,EAAM8B,mBAAmBxb,GACzB0Z,EAAMO,UAAS,IAEnBwH,EAAM/Q,EAAQgJ,EAAMtgB,cACpB2sB,EAAmBrV,KAGvBswB,GAAe,SAAUtnB,EAAOhJ,EAAQhwB,GACxC,IAAIq7C,GAAgB,EAAGjlC,EAAsCqgB,IAAIuC,EAAME,eAAgB,YAAal5B,GACpG,GAAIq7C,EAAe,CACfA,EAAcvqB,kBAAkBhvB,SAChCu5C,EAAchf,iBAAiBv6B,SAC/Bk3B,EAAM+C,WAAWljC,SAASC,cAAc,QACxC,IAAIu3B,EAAcx3B,SAASC,cAAc,OACzCu3B,EAAYvY,UAAYkY,EAAO5T,KAAKqU,gBAAgB4qB,EAAc32B,WAClE22B,EAAc32B,UAAY2L,EAAYS,kBAAkBhZ,UAAUS,SAGtE22B,GAAyB,SAAUlf,EAAQ+P,EAAWnvB,EAAQC,GAC9D,IAAImoB,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAC7C+c,EAAchN,EAAUvmC,aAAa,aACrCgsC,EAAcxM,EAAME,eACK,IAAzBsM,EAAY/N,WACZ+N,EAAcA,EAAYjkB,eAE9B,IAAI0sB,GAAe,EAEnB,GAAIlO,EAAUn+B,UAAU4f,SAAS,wBAC7B,GAAoB,UAAhBurB,EAAyB,CACzB,IAAIoB,GAAe,EAAG/3B,EAAqCgJ,IAAIomB,EAAa,cACxE2I,IACAnV,EAAM+C,WAAWljC,SAASC,cAAc,QACxCq1C,EAAazpB,UAA8C,KAAlCypB,EAAar2B,UAAUS,OAC5C,qBAAyB41B,EAAar2B,UAAY,OAASq2B,EAAar2B,gBAG/E,GAAoB,SAAhBi1B,EAAwB,CAC7B,IAAIhlB,GAAW,EAAG3R,EAAsCqgB,IAAIuC,EAAME,eAAgB,YAAa,KAC/F,GAAInR,EAAU,CACV,IAAIw4B,GAAe,EAAGnqC,EAAsCiJ,IAAI2Z,EAAME,eAAgB,mBAClFqnB,GACAvnB,EAAM+C,WAAWljC,SAASC,cAAc,QACxCivB,EAASrD,UAAY67B,EAAazoC,WAGlCiQ,EAASrD,UAAYqD,EAAStmB,cAAc,oBAAoBqW,UAAY,aAI/D,WAAhBi1B,EACLuT,GAAatnB,EAAOhJ,EAAQ,MAEP,SAAhB+c,EACLuT,GAAatnB,EAAOhJ,EAAQ,UAEP,WAAhB+c,EACLuT,GAAatnB,EAAOhJ,EAAQ,KAEP,gBAAhB+c,EACLuT,GAAatnB,EAAOhJ,EAAQ,QAEP,UAAhB+c,GAA2C,SAAhBA,GAA0C,iBAAhBA,IAC1DsB,GAAWre,EAAQgJ,EAAO+T,GAC1BkB,GAAe,EACflO,EAAUn+B,UAAUE,OAAO,6BAG9B,CAE2C,IAAxCkuB,EAAOyN,GAAG9kC,QAAQmF,WAAW1C,SAC7B40B,EAAOyN,GAAG9kC,QAAQmf,UAAY,+BAC9B,EAAGvB,EAA6BoiB,IAAI3I,EAAOyN,GAAG9kC,QAASqgC,IAE3D,IAAIpB,GAAe,EAAGxhB,EAAgCsgB,IAAIsC,EAAME,gBAChE,GAAoB,SAAhB6T,GACA,GAAInV,EAAc,CACd,IAAIoX,EAAS,mDACyB,KAAlCpX,EAAa9f,UAAUS,OACvBqf,EAAalT,UAAYsqB,EAGzBpX,EAAapS,mBAAmB,WAAYwpB,SAInD,GAAoB,UAAhBjC,EACDnV,IACAoB,EAAM+C,WAAWljC,SAASC,cAAc,QACxC8+B,EAAalT,UAAY,8BAAkCkT,EAAalT,UAAY,gBACpFupB,GAAe,EACflO,EAAUn+B,UAAUlG,IAAI,8BAG3B,GAAoB,SAAhBqxC,EAAwB,CAC7B,IAAIn/B,OAAO,EAEPA,EADqB,KAArBorB,EAAMxlB,WACC5C,EAAS,QAAUC,EAGnB,GAAKD,EAASooB,EAAMxlB,WAAa3C,EAAO5C,QAAQ,IAAK,UAEhEpV,SAASujC,YAAY,cAAc,EAAOxuB,GAC1CqgC,GAAe,EACflO,EAAUn+B,UAAUlG,IAAI,6BAEvB,GAAoB,WAAhBqxC,GAA4C,SAAhBA,GAA0C,WAAhBA,GACxC,gBAAhBA,GAAiD,SAAhBA,GAA0C,UAAhBA,EAAyB,CACnFn/B,OAAO,EACc,KAArBorB,EAAMxlB,WACN5F,EAAOgD,EAAS,QAAUC,GAItBjD,EADgB,SAAhBm/B,GAA0C,UAAhBA,EACnB,GAAKn8B,EAASooB,EAAMxlB,WAAa,QAAU3C,EAG3C,GAAKD,EAASooB,EAAMxlB,WAAa3C,EAAS,QAErDmoB,EAAMuV,kBAEU,UAAhBxB,GAA2C,SAAhBA,IAC3Bn/B,EAAO,KAAOA,EAAO,QAEzB,IAAIuR,EAActmB,SAASC,cAAc,QACzCqmB,EAAYrH,UAAYlK,EACxBorB,EAAM+C,WAAW5c,GACjB4hB,EAAM/Q,EAAQgJ,GACM,UAAhB+T,IACA/T,EAAM8B,mBAAmBxiB,eAAeG,WAAW,GAAGygB,eAAe3X,gBACrE,EAAGhL,EAAiC6B,IAAI4gB,QAGvB,UAAhB+T,GAA2C,SAAhBA,GAA0C,iBAAhBA,IAC1DsB,GAAWre,EAAQgJ,EAAO+T,GAAa,GACvCkB,GAAe,EACfnP,EAAqB9O,EAAOqB,QAAQoO,SAAU,CAAC,QAAS,OAAQ,iBAChEM,EAAUn+B,UAAUlG,IAAI,0BAGhC,EAAG6a,EAA6BoiB,IAAI3I,EAAOyN,GAAG9kC,QAASqgC,GACvDsJ,GAA2BtS,GACvBie,GACA5I,EAAmBrV,IAavBwwB,GAAsB,WACtB,SAASA,EAAKC,GACV,IAAI7iB,EAAQ1+B,KACZA,KAAKwhD,UAAY,GACjBxhD,KAAKkxB,WAAa,EAClBlxB,KAAKyhD,UAAY,SAAUhoD,EAASq3B,GAChC4N,EAAMjlC,QAAQkB,MAAM2e,QAAU,OAC9B,IAAIlf,EAAQ2lB,mBAAmBtmB,EAAQa,aAAa,eAChDw/B,EAAQlkB,OAAOwD,eAAeG,WAAW,GAE7C,GAA2B,OAAvBuX,EAAOO,YAAsB,CAC7B,IAAIqkB,GAAmB,EAAGx+B,EAAsCqgB,IAAIuC,EAAME,eAAgB,YAAa,mBACvG,GAAI0b,EAUA,OATAA,EAAiBtyB,YAAcrM,EAA8B+D,EAAEmG,KAAO7mB,EAAMsnC,YAC5E5H,EAAM8B,mBAAmB8Z,GACzB5b,EAAMO,UAAS,GACf+I,GAA2BtS,GAC3B4kB,EAAiBrzB,cAActM,iBAAiB,QAAQtd,SAAQ,SAAU2f,GACtEA,EAAKP,UAAY,YAAczd,EAAMsnC,eAEzCV,EAAkB0U,EAAiBrzB,cAAc9f,cAAc,uBAAwBuuB,QACvF4N,EAAMoN,eAAiB1xC,EAAMsnC,aAIrC,GAA2B,YAAvB5Q,EAAOO,aAA+D,IAAlCyI,EAAME,eAAezB,UACzDuB,EAAME,eAAepI,kBAAkBlvB,UAAU4f,SAAS,gBAAiB,CAC3E,IAAIwyB,EAAehb,EAAME,eAAepI,kBAMxC,OALAkjB,EAAa16C,MAAQA,EAAMsnC,YAC3B5H,EAAM8B,mBAAmBkZ,GACzBhb,EAAMO,UAAS,GACfya,EAAa0B,cAAc,IAAI1H,YAAY,eAC3CpQ,EAAMoN,eAAiB1xC,EAAMsnC,aAwBjC,GArBA5H,EAAMM,SAASN,EAAME,eAAgB0E,EAAMxN,WAC3C4I,EAAMuV,iBACFve,EAAOzzB,QAAQojC,KAAK/c,MACO,OAAvBoN,EAAOO,aACP,EAAGha,EAA0BqiB,IAAI5I,EAAO5T,KAAKg6B,gBAAgB98C,GAAQ02B,GAEzC,YAAvBA,EAAOO,aACZ,EAAGha,EAA0BqiB,IAAI5I,EAAO5T,KAAKsU,cAAcp3B,GAAQ02B,IAGnE,EAAGzZ,EAA0BqiB,IAAI5I,EAAO5T,KAAKqU,gBAAgBn3B,GAAQ02B,IAIzE,EAAGzZ,EAA0BqiB,IAAIt/B,EAAO02B,GAEpB,MAApB4N,EAAM8iB,WAAqBpnD,EAAM4G,QAAQ,MAAQ,GAA4B,OAAvB8vB,EAAOO,aAC7DyI,EAAM+C,WAAWljC,SAASM,eAAe,MAE7C6/B,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,GACb,YAAvBhJ,EAAOO,aACHqwB,GAAa,EAAGxqC,EAAsCiJ,IAAI2Z,EAAME,eAAgB,2BAClE0nB,EAAWvkB,iBAAiBz6B,UAAU4f,SAAS,6BAC7Do/B,EAAWvkB,iBAAiBvkB,UAAY8oC,EAAW9vB,kBAAkBhZ,UACrEooB,EAAkB0gB,EAAWvkB,iBAAkBrM,SAGlD,GAA2B,OAAvBA,EAAOO,YAAsB,CAClC,IAAIqwB,GAAAA,GAAa,EAAGxqC,EAAsCiJ,IAAI2Z,EAAME,eAAgB,4BAClE0nB,EAAW7vB,mBAAmBnvB,UAAU4f,SAAS,wBAC/Do/B,EAAW7vB,mBAAmBjZ,UAAY8oC,EAAW9oC,UACrDooB,EAAkB0gB,EAAW7vB,mBAAoBf,IAGzD0Q,GAAgB1Q,IAEpB9wB,KAAK2hD,QAAU,EACf3hD,KAAKvG,QAAUE,SAASC,cAAc,OACtCoG,KAAKvG,QAAQoe,UAAY,cACzB7X,KAAK8rC,eAAiB,GACtByV,EAAY3lD,KAAK,CAAEnB,IAAK,MA4K5B,OA1KA6mD,EAAK19C,UAAUy9B,OAAS,SAAUvQ,GAC9B,IAAI4N,EAAQ1+B,KACZ,GAAK4V,OAAOwD,eAAewoC,UAA3B,CAGA,IAAIC,EACA/nB,EAAQ1gB,eAAeG,WAAW,GACtCsoC,EAAmB/nB,EAAME,eAAe5W,YAAYxe,UAAU,EAAGk1B,EAAMc,cAAgB,GACvF,IAAIngC,EAAMuF,KAAK8hD,OAAOD,EAAkB/wB,EAAOzzB,QAAQojC,KAAKiS,QAC5D,QAAmB,IAARj4C,EACPuF,KAAKvG,QAAQkB,MAAM2e,QAAU,OAC7B8sB,aAAapmC,KAAK2hD,aAGlB,GAAuB,MAAnB3hD,KAAKwhD,UAAmB,CACxB,IAAIO,EAAsB,KAARtnD,EAAaq2B,EAAOzzB,QAAQojC,KAAKD,MAAQ1P,EAAO5T,KAAK8kC,YACnEC,EAAmB,GACvB5pD,OAAOiJ,KAAKygD,GAAatpD,SAAQ,SAAUyzC,GACI,IAAvCA,EAAQlrC,QAAQvG,EAAI47B,iBAChB0rB,EAAY7V,GAASlrC,QAAQ,MAAQ,EACrCihD,EAAiBrmD,KAAK,CAClB8S,KAAM,aAAgBqzC,EAAY7V,GAAW,aAAiBA,EAAU,SAAYA,EAAU,IAC9F9xC,MAAO,IAAM8xC,EAAU,MAI3B+V,EAAiBrmD,KAAK,CAClB8S,KAAM,oCAAwCqzC,EAAY7V,GAAW,UAAYA,EACjF9xC,MAAO2nD,EAAY7V,SAKnClsC,KAAKmsC,QAAQ8V,EAAkBxnD,EAAKq2B,QAGpCA,EAAOzzB,QAAQojC,KAAKiS,OAAOj6C,SAAQ,SAAU2f,GACrCA,EAAK3d,MAAQikC,EAAM8iB,YACnBpb,aAAa1H,EAAMijB,QACnBjjB,EAAMijB,OAAS/rC,OAAOjT,YAAW,WAC7B+7B,EAAMyN,QAAQ/zB,EAAKqoB,KAAKhmC,GAAMA,EAAKq2B,KACpCA,EAAOzzB,QAAQojC,KAAKyhB,aAM3CZ,EAAK19C,UAAUuoC,QAAU,SAAUnyC,EAAMS,EAAKq2B,GAC1C,IAAI4N,EAAQ1+B,KACZ,GAAoB,IAAhBhG,EAAKkC,OAAT,CAIA,IAAIu/B,EAAgB3K,EAAOA,EAAOO,aAAa53B,QAC3C0oD,GAAmB,EAAG9qC,EAAiCgiB,IAAIoC,GAC3Dj0B,EAAI26C,EAAiBtoC,MACgB,SAApCiX,EAAOzzB,QAAQ+jC,QAAQnR,SAAsBa,EAAOsQ,QAAQ3nC,QAAQgsC,YAAc,GACnFh9B,EAAI05C,EAAiBxoC,IACrByoC,EAAY,GAChBpoD,EAAKvB,SAAQ,SAAU4pD,EAAUpmD,GAC7B,KAAIA,EAAI,GAAR,CAIA,IAAIyS,EAAO2zC,EAAS3zC,KACpB,GAAY,KAARjU,EAAY,CACZ,IAAIy2B,EAAYxiB,EAAKiC,YAAY,KAAO,EACpC2xC,EAAc5zC,EAAKiR,OAAOuR,GAC1BqxB,EAAeD,EAAYjsB,cAAcr1B,QAAQvG,EAAI47B,eACrDksB,GAAgB,IAChBD,EAAcA,EAAY19C,UAAU,EAAG29C,GAAgB,MACnDD,EAAY19C,UAAU29C,EAAcA,EAAe9nD,EAAIyB,QAAU,OACjEomD,EAAY19C,UAAU29C,EAAe9nD,EAAIyB,QAC7CwS,EAAOA,EAAKiR,OAAO,EAAGuR,GAAaoxB,GAG3CF,GAAa,uBAA0B54B,mBAAmB64B,EAASjoD,OAAS,QAAiB,IAAN6B,EAAU,+BAAiC,IAAM,KAAOyS,EAAO,gBAE1J1O,KAAKvG,QAAQmf,UAAYwpC,EACzB,IAAI/7B,EAAatW,SAASpW,SAAS6oD,YAAYv8B,iBAAiBwV,EAAe,MAC1EgnB,iBAAiB,eAAgB,IACtCziD,KAAKvG,QAAQkB,MAAMgf,IAAMlR,GAAK4d,GAAc,IAAM,KAClDrmB,KAAKvG,QAAQkB,MAAMkf,KAAOrS,EAAI,KAC9BxH,KAAKvG,QAAQkB,MAAM2e,QAAU,QAC7BtZ,KAAKvG,QAAQkB,MAAM8kC,MAAQ,OAC3Bz/B,KAAKvG,QAAQsc,iBAAiB,UAAUtd,SAAQ,SAAUgB,GACtDA,EAAQqI,iBAAiB,SAAS,SAAUF,GACxC88B,EAAM+iB,UAAUhoD,EAASq3B,GACzBlvB,EAAMwlB,uBAIVpnB,KAAKvG,QAAQigB,wBAAwBwlB,OAAStpB,OAAOC,cACrD7V,KAAKvG,QAAQkB,MAAMgf,IAAMlR,EAAIzI,KAAKvG,QAAQ24B,aAAe,MAEzDpyB,KAAKvG,QAAQigB,wBAAwB+lB,MAAQ7pB,OAAOme,aACpD/zB,KAAKvG,QAAQkB,MAAMkf,KAAO,OAC1B7Z,KAAKvG,QAAQkB,MAAM8kC,MAAQ,UA/C3Bz/B,KAAKvG,QAAQkB,MAAM2e,QAAU,QAkDrCgoC,EAAK19C,UAAUunC,OAAS,SAAUvpC,EAAOkvB,GACrC,GAAuD,IAAnD9wB,KAAKvG,QAAQsc,iBAAiB,UAAU7Z,QACT,SAA/B8D,KAAKvG,QAAQkB,MAAM2e,QACnB,OAAO,EAEX,IAAIopC,EAAqB1iD,KAAKvG,QAAQ8I,cAAc,yBACpD,GAAkB,cAAdX,EAAMnH,IAUN,OATAmH,EAAMwlB,iBACNxlB,EAAMulB,kBACNu7B,EAAmBroD,gBAAgB,SAC9BqoD,EAAmB7wB,mBAIpB6wB,EAAmB7wB,mBAAmBha,UAAY,uBAHlD7X,KAAKvG,QAAQoF,SAAS,GAAGgZ,UAAY,wBAKlC,EAEN,GAAkB,YAAdjW,EAAMnH,IAAmB,CAI9B,GAHAmH,EAAMwlB,iBACNxlB,EAAMulB,kBACNu7B,EAAmBroD,gBAAgB,SAC9BqoD,EAAmBhmB,uBAKpBgmB,EAAmBhmB,uBAAuB7kB,UAAY,2BALV,CAC5C,IAAI8qC,EAAW3iD,KAAKvG,QAAQoF,SAAS3C,OACrC8D,KAAKvG,QAAQoF,SAAS8jD,EAAW,GAAG9qC,UAAY,uBAKpD,OAAO,EAEN,SAAK,EAAG8nB,EAA0B7J,IAAIl0B,IAAWA,EAAM+hC,UAAa/hC,EAAM8hC,QAAwB,UAAd9hC,EAAMnH,KAAoBmH,EAAMspC,cACrHtpC,EAAMwlB,iBACNxlB,EAAMulB,kBACNnnB,KAAKyhD,UAAUiB,EAAoB5xB,GAC5B,KAIfwwB,EAAK19C,UAAUk+C,OAAS,SAAUD,EAAkBnP,GAChD,IAUIj4C,EAVAikC,EAAQ1+B,KAWZ,GAVAA,KAAKkxB,WAAa,EAClBlxB,KAAKwhD,UAAY,GACjB9O,EAAOj6C,SAAQ,SAAU2f,GACrB,IAAIwqC,EAAmBf,EAAiBlxC,YAAYyH,EAAK3d,KACrDikC,EAAMxN,UAAY0xB,IAClBlkB,EAAM8iB,UAAYppC,EAAK3d,IACvBikC,EAAMxN,UAAY0xB,OAIF,IAApB5iD,KAAKkxB,UACL,OAAOz2B,EAEX,IAAI4L,EAAYw7C,EAAiBv/C,MAAMtC,KAAKwhD,WACxCqB,EAAWx8C,EAAUA,EAAUnK,OAAS,GAE5C,GAAImK,EAAUnK,OAAS,GAAK2mD,EAASxpC,SAAWwpC,EAC5C,GAAyB,IAArBx8C,EAAUnK,QAAiC,KAAjBmK,EAAU,IAAaA,EAAU,GAAGnK,OAFtD,GAGRzB,EAAM4L,EAAU,OAEf,CACD,IAAIy8C,EAAUz8C,EAAUA,EAAUnK,OAAS,GAAG8gD,OAAO,GACD,OAAhD,EAAGvnB,EAA6BtY,GAAG2lC,IAAoBD,EAAS3mD,OAP5D,KAQJzB,EAAMooD,GAIlB,OAAOpoD,GAEJ6mD,KAgBPyB,GAAoB,WACpB,SAASA,EAAGjyB,GACR9wB,KAAK0mC,eAAgB,EACrB,IAAIxiB,EAAavqB,SAASC,cAAc,OACxCsqB,EAAWrM,UAAY,YACvBqM,EAAWtL,UAAY,0CAA+CkY,EAAOzzB,QAAQ2lD,YAAc,uDACnGhjD,KAAKvG,QAAUyqB,EAAW0N,kBAC1B5xB,KAAKijD,UAAUnyB,GACfugB,GAAWvgB,EAAQ9wB,KAAKvG,SACxB63C,GAAcxgB,EAAQ9wB,KAAKvG,SAC3B83C,GAAUzgB,EAAQ9wB,KAAKvG,SACvBg5C,GAAY3hB,EAAQ9wB,KAAKvG,SACzBg9C,GAAY3lB,EAAQ9wB,KAAKvG,SACzBo4C,GAAU/gB,EAAQ9wB,KAAKvG,SACvB04C,GAAUrhB,EAAQ9wB,KAAKvG,QAASuG,KAAKmkB,MACrCiuB,GAASthB,EAAQ9wB,KAAKvG,QAASuG,KAAKmkB,MA6LxC,OA3LA4+B,EAAGn/C,UAAUugB,KAAO,SAAUviB,EAAOkvB,GACjC,IAAIgJ,EAAQ1gB,eAAeG,WAAW,GACtC,GAAyB,KAArBugB,EAAMxlB,WAAV,CAGA1S,EAAMulB,kBACNvlB,EAAMwlB,iBACN,IAAI+J,EAAcx3B,SAASC,cAAc,OACzCu3B,EAAYj4B,YAAY4gC,EAAM+iB,iBAC9Bj7C,EAAM4lB,cAAcC,QAAQ,aAAcqJ,EAAO5T,KAAKohB,eAAenN,EAAYvY,WAAWS,QAC5FzX,EAAM4lB,cAAcC,QAAQ,YAAa,MAE7Cs7B,EAAGn/C,UAAUq/C,UAAY,SAAUnyB,GAC/B,IAAI4N,EAAQ1+B,KACZA,KAAKvG,QAAQqI,iBAAiB,SAAS,SAAUF,GAC7CqwC,GAAMnhB,EAAQlvB,EAAO,CACjBswC,UAAW,SAAUrtB,GACjBlrB,SAASujC,YAAY,cAAc,EAAOrY,SAItD7kB,KAAKvG,QAAQqI,iBAAiB,oBAAoB,SAAUF,GACxD88B,EAAMgI,eAAgB,KAE1B1mC,KAAKvG,QAAQqI,iBAAiB,kBAAkB,SAAUF,IACjD,EAAG+9B,EAA6BhK,OACjCkM,EAAM/Q,EAAQ1X,eAAeG,WAAW,GAAGC,cAE/CklB,EAAMgI,eAAgB,KAE1B1mC,KAAKvG,QAAQqI,iBAAiB,SAAS,SAAUF,GACrB,iBAApBA,EAAM+gC,WAAoD,mBAApB/gC,EAAM+gC,YAI5CjE,EAAMzB,aACNyB,EAAMzB,cAAe,EAGrByB,EAAMgI,eAAgC,MAAf9kC,EAAM5H,MAA+B,MAAf4H,EAAM5H,MAA+B,MAAf4H,EAAM5H,MAG7E6nC,EAAM/Q,EAAQ1X,eAAeG,WAAW,GAAGC,cAAc,EAAO5X,OAEpE5B,KAAKvG,QAAQqI,iBAAiB,SAAS,SAAUF,GAC7C,GAA6B,UAAzBA,EAAM5I,OAAOguB,QASb,OARIplB,EAAM5I,OAAO8lD,QACbl9C,EAAM5I,OAAOuB,aAAa,UAAW,WAGrCqH,EAAM5I,OAAOqB,gBAAgB,WAEjCqkC,EAAMzB,cAAe,OACrBmG,GAA2BtS,GAG/B,IAAIgJ,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAE7CnS,GAAiB,EAAGzH,EAAsCiJ,IAAIve,EAAM5I,OAAQ,sBAiBhF,GAhBK2lB,IACDA,GAAiB,EAAGzH,EAAsCiJ,IAAI2Z,EAAME,eAAgB,uBAEpFrb,IACIA,EAAe+d,uBAAuB9K,kBACtCkI,EAAM8B,mBAAmBjd,EAAe+d,uBAAuB9K,mBAI/DkI,EAAM8B,mBAAmBjd,EAAe+d,wBAE5C5C,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,GACxCqL,GAAarU,IAGY,QAAzBlvB,EAAM5I,OAAOguB,QAAmB,CAChC,IAAIk8B,EAActhD,EAAM5I,OAAOqpB,cAAc9f,cAAc,4BACvD2gD,IACAppB,EAAMe,WAAWqoB,IACjB,EAAG7rC,EAAiC6B,IAAI4gB,IAIhD,IAAIjR,GAAW,EAAG3R,EAAsCqgB,IAAI31B,EAAM5I,OAAQ,YAAa,KACvF,IAAI6vB,GAAcA,EAASnmB,UAAU4f,SAAS,2BAA9C,CAIA,GAAI1gB,EAAM5I,OAAO84B,YAAY4M,EAAMjlC,UAAYilC,EAAMjlC,QAAQ0jC,kBAAoBrD,EAAMoK,UAAW,CAC9F,IAAIif,EAAWzkB,EAAMjlC,QAAQ0jC,iBAAiBzjB,wBAC1C9X,EAAM6G,EAAI06C,EAASxpC,IAAMwpC,EAASrtC,SACa,MAA3C4oB,EAAMjlC,QAAQ0jC,iBAAiBnW,SACyE,KAAxG0X,EAAMjlC,QAAQ0jC,iBAAiB/Z,YAAY/J,OAAOtK,QAAQgI,EAA8B+D,EAAEmG,KAAM,KAChG6Y,EAAM8B,mBAAmB8C,EAAMjlC,QAAQ0jC,kBACvCrD,EAAMO,UAAS,KAGfqE,EAAMjlC,QAAQ6sB,mBAAmB,YAAa,qBAAyBvP,EAA8B+D,EAAEmG,KAAO,cAC9G,EAAG5J,EAA6BoiB,IAAIiF,EAAMjlC,QAASqgC,KAItC,KAArBA,EAAMxlB,WACNyvB,EAAajK,EAAOhJ,GAIpBnuB,YAAW,WACPohC,GAAa,EAAG1sB,EAA8B+hB,IAAItI,GAASA,MAGnEwQ,EAAS1/B,EAAOkvB,GAChBqV,EAAmBrV,QA3Bflb,OAAOif,KAAKhM,EAAStmB,cAAc,qCAAqC6gB,gBA6BhFpjB,KAAKvG,QAAQqI,iBAAiB,SAAS,SAAUF,GAC7C,IAAIA,EAAMspC,eAAe,EAAGvL,EAA0B7J,IAAIl0B,GAO1D,GAJkB,UAAdA,EAAMnH,KACN0qC,GAAarU,GAEjBqV,EAAmBrV,GACA,cAAdlvB,EAAMnH,KAAqC,WAAdmH,EAAMnH,KACJ,KAAhCq2B,EAAOyN,GAAG9kC,QAAQmf,WAA4D,IAAxCkY,EAAOyN,GAAG9kC,QAAQmF,WAAW1C,SACnE40B,EAAOyN,GAAG9kC,QAAQm4B,mBAAqE,MAAhDd,EAAOyN,GAAG9kC,QAAQm4B,kBAAkB5K,SACd,IAA1D8J,EAAOyN,GAAG9kC,QAAQm4B,kBAAkB4qB,mBACD,KAAlC1rB,EAAOyN,GAAG9kC,QAAQ2pB,aAAwD,OAAlC0N,EAAOyN,GAAG9kC,QAAQ2pB,YAJlE,CASA,IAAI0W,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAC/B,cAAdlvB,EAAMnH,MAEF,EAAGklC,EAA6BhK,OAA8C,OAArCmE,EAAME,eAAe5W,aAA8C,IAAtB0W,EAAMc,cAC5Fd,EAAME,eAAe5W,YAAc,GACnC2gB,EAAajK,EAAOhJ,IAGxB4N,EAAMjlC,QAAQsc,iBAAiB,kBAAkBtd,SAAQ,SAAU2f,GAC/D,IAAIqmC,EAAYrmC,EAAK7V,cAAc,MAC/Bk8C,GACAA,EAAU77C,aAIbhB,EAAMnH,IAAIuG,QAAQ,UAAY,GACjB,cAAdY,EAAMnH,KAAqC,eAAdmH,EAAMnH,KACnCwmD,GAAYnwB,GAEhBiT,EAAajK,EAAOhJ,IAEG,MAAlBlvB,EAAMiiC,SAAkC,KAAfjiC,EAAMijB,MAA6B,iBAAdjjB,EAAMnH,KAEzDspC,EAAajK,EAAOhJ,GAExB,IAAIsR,GAAuB,EAAGlrB,EAAsCiJ,IAAI2Z,EAAME,eAAgB,sBAC9F,GAAIoI,EAAsB,CACtB,GAAkB,YAAdxgC,EAAMnH,KAAmC,cAAdmH,EAAMnH,IAUjC,OATI2nC,EAAqB1F,uBAAuB9K,kBAC5CkI,EAAM8B,mBAAmBwG,EAAqB1F,uBAAuB9K,mBAIrEkI,EAAM8B,mBAAmBwG,EAAqB1F,wBAElD5C,EAAMO,UAAS,GACfz4B,EAAMwlB,kBACC,EAEX,GAAqC,SAAjCgb,EAAqBpb,UACN,cAAdplB,EAAMnH,KAAqC,eAAdmH,EAAMnH,KAWpC,MAVqE,gBAAjE2nC,EAAqB/f,cAAc/nB,aAAa,cAEhD8nC,EAAqB/f,cAAcs1B,mBAAmB,WAAY5gC,EAA8B+D,EAAEmG,MAClG6Y,EAAMM,SAASgI,EAAqB/f,cAAc8Z,YAAa,IAG/DrC,EAAM8B,mBAAmBwG,EAAqB/f,cAAc8a,kBAEhErD,EAAMO,UAAS,GACfz4B,EAAMwlB,kBACC,QAtDX0J,EAAOyN,GAAG9kC,QAAQmf,UAAY,OA2DnCmqC,KAMPK,GAAU,SAAUtyB,GACpB,MAA2B,OAAvBA,EAAOO,YACAP,EAAO5T,KAAKsB,QAAQ0f,EAAYpN,IAEX,YAAvBA,EAAOO,YACLP,EAAO5T,KAAKmmC,eAAevyB,EAAOuN,QAAQ5kC,QAAQmf,WAE7B,OAAvBkY,EAAOO,YACLP,EAAO5T,KAAKomC,iBAAiBxyB,EAAOyN,GAAG9kC,QAAQmf,gBADrD,GAMLxB,GAAUxC,EAAoB,KAE9BiC,GAAgBjC,EAAoB,KAMpC2uC,GAAyB,WACzB,SAASA,EAAQC,GACbxjD,KAAKvG,QAAUE,SAASC,cAAc,OACtCoG,KAAKvG,QAAQoe,UAAY,iBACzB7X,KAAKvG,QAAQmf,UAAY,sCAA0C4qC,EAAe,sDAoCtF,OAlCAD,EAAQ3/C,UAAUy9B,OAAS,SAAUvQ,GAQjC,MAN6C,UAAzCA,EAAOhQ,QAAQrnB,QAAQkB,MAAM2e,SACtB,EAAGzC,GAAiCgK,GAAGiQ,EAAOhQ,QAAQrnB,QAAQ0jC,iBAAkBn9B,KAAKvG,QAAQ0jC,iBAAkBrM,IAG/G,EAAGja,GAAiCgK,GAAGiQ,EAAOA,EAAOO,aAAa53B,QAASuG,KAAKvG,QAAQ0jC,iBAAkBrM,IAIzHyyB,EAAQ3/C,UAAUktC,OAAS,SAAUhgB,EAAQyO,GACzC,IAAI3gB,OACS,IAAT2gB,IAAmBA,GAAO,GAC9B,IAAIpL,EAAwD,QAA1CvV,EAAKkS,EAAOqB,QAAQoO,SAASa,eAA4B,IAAPxiB,OAAgB,EAASA,EAAGgT,kBAUhG,GATI2N,GAAQ3pB,OAAOme,YAAchd,EAAsC+D,EAAEqG,cACrEnhB,KAAKvG,QAAQkB,MAAM2e,QAAU,QAC7BtZ,KAAKqhC,OAAOvQ,GACZqD,MAAAA,GAAwDA,EAAWzxB,UAAUlG,IAAI,0BAGjFwD,KAAKvG,QAAQkB,MAAM2e,QAAU,OAC7B6a,MAAAA,GAAwDA,EAAWzxB,UAAUE,OAAO,yBAEpFwW,eAAe2gB,WAAa,EAAG,CAC/B,IAAID,EAAQ1gB,eAAeG,WAAW,GAClCuX,EAAOA,EAAOO,aAAa53B,QAAQ6oB,SAASwX,EAAME,iBAClD,EAAG3iB,EAAiC6B,IAAI4gB,GAGxChJ,EAAOA,EAAOO,aAAa53B,QAAQwgC,QAG3CoL,EAAWvU,IAERyyB,KAKP7sC,GAAc9B,EAAoB,KAmBlC6uC,GAAyB,WACzB,SAASA,EAAQ3yB,GACb,IAAI4N,EAAQ1+B,KACZA,KAAKvG,QAAUE,SAASC,cAAc,OACtCoG,KAAKvG,QAAQoe,UAAY,iBACzB,IAAI8G,EAAiBhlB,SAASC,cAAc,OAC5C+kB,EAAe9G,UAAY,eACvBiZ,EAAOzzB,QAAQqmD,QAAQ5iC,SACvBnC,EAAejc,UAAUlG,IAAIs0B,EAAOzzB,QAAQqmD,QAAQ5iC,SAExDnC,EAAehkB,MAAM4qC,SAAWzU,EAAOzzB,QAAQyjB,QAAQykB,SAAW,KAClE5mB,EAAe7c,iBAAiB,QAAQ,SAAUF,GAC9C,GAA6B,aAAzBA,EAAM5I,OAAOguB,QAAjB,CAIA,IAAImK,EAAcx3B,SAASC,cAAc,OACzCu3B,EAAYtZ,UAAY,eACxBsZ,EAAYj4B,YAAYkgB,eAAeG,WAAW,GAAGsjC,iBACrDne,EAAMilB,QAAQ7yB,EAAQK,GACtBvvB,EAAMwlB,qBAEVzI,EAAe7c,iBAAiB,SAAS,SAAUF,GAC/C,IAAIqe,GAAc,EAAG/I,EAAqCgJ,IAAIte,EAAM5I,OAAQ,QAC5E,GAAIinB,IAAe,EAAG/I,EAAsCiJ,IAAIF,EAAa,cAA7E,CACI,IAAIG,EAAiBzB,EAAepc,cAAc,IAAM0d,EAAY3lB,aAAa,mBAC7E8lB,IACAse,EAAMjlC,QAAQmgB,UAAYwG,EAAeP,eAIpB,QAAzBje,EAAM5I,OAAOguB,UACb,EAAGzG,EAAgCK,GAAGhf,EAAM5I,OAAQ83B,EAAOzzB,QAAQka,KAAMuZ,EAAOzzB,QAAQsf,UAGhG,IAAIinC,EAAU9yB,EAAOzzB,QAAQyjB,QAAQ8iC,QACjCC,EAAgBlqD,SAASC,cAAc,OAC3CiqD,EAAchsC,UAAY,yBAE1B,IADA,IAAIisC,EAAa,GACR7nD,EAAI,EAAGA,EAAI2nD,EAAQ1nD,OAAQD,IAAK,CACrC,IAAI8nD,EAASH,EAAQ3nD,GACrB,GAAsB,iBAAX8nD,EAIX,OAAQA,GACJ,IAAK,UACDD,EAAWloD,KAAK,sGAChB,MACJ,IAAK,SACDkoD,EAAWloD,KAAK,4DAChB,MACJ,IAAK,SACDkoD,EAAWloD,KAAK,mEAChB,MACJ,IAAK,YACDkoD,EAAWloD,KAAK,sLAChB,MACJ,IAAK,QACDkoD,EAAWloD,KAAK,kLAjBpBkoD,EAAWloD,KAAK,oCAAyCmoD,EAAOtpD,IAAM,YAAgBspD,EAAOlsC,UAAY,KAAQksC,EAAOxzB,QAAU,gBAAmBwzB,EAAOxzB,QAAU,IAAO,IAAM,KAAQwzB,EAAOhqD,KAAO,aAqBjN8pD,EAAcjrC,UAAYkrC,EAAWl6C,KAAK,IACnB,IAAnBg6C,EAAQ1nD,SACR2nD,EAAclpD,MAAM2e,QAAU,QAElCtZ,KAAKvG,QAAQP,YAAY2qD,GACzB7jD,KAAKvG,QAAQP,YAAYylB,GACzBklC,EAAc/hD,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAC/E,IAAIoiD,GAAM,EAAGjrB,EAA0Cd,GAAGr2B,EAAM5I,OAAQ,UACxE,GAAKgrD,EAAL,CAGA,IAAIljD,EAAOkjD,EAAI1pD,aAAa,aACxB2pD,EAAeL,EAAQzc,MAAK,SAAU+c,GAAK,OAAQA,MAAAA,OAA6B,EAASA,EAAEzpD,OAASqG,KACpGmjD,EACAA,EAAapc,MAAM/mC,GAGV,cAATA,GAAiC,UAATA,GAKxB6d,EAAehkB,MAAMw1B,MADZ,YAATrvB,EAC6B,OAEf,WAATA,EACwB,QAGA,QAE7B6d,EAAeqV,YAAcrV,EAAe0D,cAAc1M,cAC1DgJ,EAAehkB,MAAMw1B,MAAQ,QAEjCuO,EAAM2C,OAAOvQ,GACb+yB,EAAc9tC,iBAAiB,UAAUtd,SAAQ,SAAU2f,GACvDA,EAAK1V,UAAUE,OAAO,sCAE1BohD,EAAIthD,UAAUlG,IAAI,oCAnBdkiC,EAAMilB,QAAQ7yB,EAAQ4N,EAAMjlC,QAAQ0jC,iBAAiBG,WAAU,GAAOx8B,OA4JlF,OAtIA2iD,EAAQ7/C,UAAUy9B,OAAS,SAAUvQ,EAAQ12B,GACzC,IAAIskC,EAAQ1+B,KAEZ,GADAomC,aAAapmC,KAAKmkD,aACiB,SAA/BnkD,KAAKvG,QAAQkB,MAAM2e,QAMvB,GAAIlf,EACA4F,KAAKvG,QAAQ0jC,iBAAiBvkB,UAAYxe,OAG9C,GAC2D,KADvD8jC,EAAYpN,GACX/hB,QAAQ,qCAAsC,IADnD,CAKA,IAAIq1C,GAAkB,IAAIhgD,MAAOC,UAC7BksC,EAAerS,EAAYpN,GAC/B9wB,KAAKmkD,YAAcvuC,OAAOjT,YAAW,WACjC,GAAImuB,EAAOzzB,QAAQyjB,QAAQ1e,IAAK,CAC5B,IAAIg+C,EAAQ,IAAIxrB,eAChBwrB,EAAMvrB,KAAK,OAAQ/D,EAAOzzB,QAAQyjB,QAAQ1e,KAC1Cg+C,EAAMtrB,iBAAiB,eAAgB,kCACvCsrB,EAAMhG,mBAAqB,WACvB,GAAIgG,EAAM/F,aAAezlB,eAAe0lB,KACpC,GAAqB,MAAjB8F,EAAM7F,OAAgB,CACtB,IAAI8J,EAAe5gC,KAAKC,MAAM08B,EAAMnrB,cACpC,GAA0B,IAAtBovB,EAAax/B,KAEb,YADAiM,EAAO6d,IAAIpP,KAAK8kB,EAAa1J,KAG7B7pB,EAAOzzB,QAAQyjB,QAAQjC,YACvBwlC,EAAarqD,KAAO82B,EAAOzzB,QAAQyjB,QAAQjC,UAAUwlC,EAAarqD,OAEtE0kC,EAAMjlC,QAAQ0jC,iBAAiBvkB,UAAYyrC,EAAarqD,KACxD0kC,EAAMmH,YAAY/U,EAAQszB,OAEzB,CACD,IAAI11C,EAAOoiB,EAAO5T,KAAKsB,QAAQ+xB,GAC3Bzf,EAAOzzB,QAAQyjB,QAAQjC,YACvBnQ,EAAOoiB,EAAOzzB,QAAQyjB,QAAQjC,UAAUnQ,IAE5CgwB,EAAMjlC,QAAQ0jC,iBAAiBvkB,UAAYlK,EAC3CgwB,EAAMmH,YAAY/U,EAAQszB,KAItChE,EAAMrrB,KAAKtR,KAAKi9B,UAAU,CAAEnQ,aAAcA,SAEzC,CACD,IAAI7hC,EAAOoiB,EAAO5T,KAAKsB,QAAQ+xB,GAC3Bzf,EAAOzzB,QAAQyjB,QAAQjC,YACvBnQ,EAAOoiB,EAAOzzB,QAAQyjB,QAAQjC,UAAUnQ,IAE5CgwB,EAAMjlC,QAAQ0jC,iBAAiBvkB,UAAYlK,EAC3CgwB,EAAMmH,YAAY/U,EAAQszB,MAE/BtzB,EAAOzzB,QAAQyjB,QAAQohC,YA5CtBliD,KAAKvG,QAAQ0jC,iBAAiBvkB,UAAY,OAXK,sBAA3C5Y,KAAKvG,QAAQa,aAAa,cAC1Bw2B,EAAO6d,IAAIuK,QAwDvBuK,EAAQ7/C,UAAUiiC,YAAc,SAAU/U,EAAQwzB,GAC1CxzB,EAAOzzB,QAAQyjB,QAAQ4C,OACvBoN,EAAOzzB,QAAQyjB,QAAQ4C,MAAM1jB,KAAKvG,SAEtC,IAAI8qD,GAAQ,IAAIngD,MAAOC,UAAYigD,GAC9B,IAAIlgD,MAAOC,UAAYigD,EAAa,MAErCxzB,EAAO6d,IAAIpP,KAAK3pB,OAAOmJ,WAAWylC,eAAez1C,QAAQ,OAAQw1C,EAAKjwC,aACtEwc,EAAOhQ,QAAQrnB,QAAQc,aAAa,YAAa,sBAES,sBAArDu2B,EAAOhQ,QAAQrnB,QAAQa,aAAa,eACzCw2B,EAAO6d,IAAIuK,OACXpoB,EAAOhQ,QAAQrnB,QAAQY,gBAAgB,cAE3C,IAAIoqD,EAAkB3zB,EAAOhQ,QAAQrnB,QAAQ8I,cAAc,0BACvDkiD,GACAA,EAAgB/hD,UAAUE,OAAO,0BAErC,EAAGqS,EAA2BoK,GAAGyR,EAAOhQ,QAAQrnB,QAAQ0jC,mBACxD,EAAG/nB,EAAqCjF,GAAG2gB,EAAOzzB,QAAQyjB,QAAQ5E,KAAM4U,EAAOhQ,QAAQrnB,QAAQ0jC,iBAAkBrM,EAAOzzB,QAAQye,MAChI,EAAGnF,EAAiC1a,GAAG60B,EAAOhQ,QAAQrnB,QAAQ0jC,iBAAkBrM,EAAOzzB,QAAQye,IAAKgV,EAAOzzB,QAAQsf,QACnH,EAAGzH,EAAqCgF,GAAG4W,EAAOhQ,QAAQrnB,QAAQ0jC,iBAAkBrM,EAAOzzB,QAAQye,MACnG,EAAG3G,EAAmCsG,GAAGqV,EAAOhQ,QAAQrnB,QAAQ0jC,iBAAkBrM,EAAOzzB,QAAQye,MACjG,EAAG9G,EAA6BnY,GAAGi0B,EAAOhQ,QAAQrnB,QAAQ0jC,iBAAkBrM,EAAOzzB,QAAQye,IAAKgV,EAAOzzB,QAAQsf,QAC/G,EAAG/F,EAAiCsD,GAAG4W,EAAOhQ,QAAQrnB,QAAQ0jC,iBAAkBrM,EAAOzzB,QAAQye,IAAKgV,EAAOzzB,QAAQsf,QACnH,EAAG7F,EAAmCyI,GAAGuR,EAAOhQ,QAAQrnB,QAAQ0jC,iBAAkBrM,EAAOzzB,QAAQye,MACjG,EAAGhH,EAAyB0K,GAAGsR,EAAOhQ,QAAQrnB,QAAQ0jC,iBAAkBrM,EAAOzzB,QAAQye,MACvF,EAAGpF,GAA6B+I,GAAGqR,EAAOhQ,QAAQrnB,QAAQ0jC,kBAE1D,IAAI1B,EAAgB3K,EAAOhQ,QAAQrnB,QAC/Bs3B,EAAUD,EAAOsQ,QAAQC,OAAOvQ,GACpB,KAAZC,IACAA,EAAU,SAEd0K,EAAc1lB,iBAAiB,2BAA2Btd,SAAQ,SAAU2f,GACxEA,EAAKQ,UAAYmY,GACjB,EAAGta,EAA2B6I,GAAGlH,EAAM,CACnC0D,IAAKgV,EAAOzzB,QAAQye,IACpBS,KAAMuU,EAAOzzB,QAAQyjB,QAAQvE,WAGrC,EAAG9F,EAA2B6I,GAAGwR,EAAOhQ,QAAQrnB,QAAQ0jC,iBAAkB,CACtErhB,IAAKgV,EAAOzzB,QAAQye,IACpBS,KAAMuU,EAAOzzB,QAAQyjB,QAAQvE,QAGrCknC,EAAQ7/C,UAAU+/C,QAAU,SAAU7yB,EAAQ4zB,EAAa5jD,QAC1C,IAATA,IAAmBA,EAAO,aAEjB,UAATA,EACA4jD,EAAY3uC,iBAAiB,qBAAqBtd,SAAQ,SAAU2f,GAChEA,EAAKzd,MAAM2e,QAAU,aAIzBorC,EAAY3uC,iBAAiB,kBAAkBtd,SAAQ,SAAU2f,GAC7DA,EAAKoN,UAAY,yFAAkGpN,EAAK9d,aAAa,aAAe,mEAI5JoqD,EAAY/pD,MAAMk1B,gBAAkB,OAEpC60B,EAAY3uC,iBAAiB,QAAQtd,SAAQ,SAAU2f,GACnDA,EAAKzd,MAAMgqD,gBAAkB,UAEjC3kD,KAAKvG,QAAQV,OAAO2rD,GACpB,IAAI5qB,EAAQ4qB,EAAYxqB,cAAcC,cACtCL,EAAMe,WAAW6pB,IACjB,EAAGrtC,EAAiC6B,IAAI4gB,GACxCngC,SAASujC,YAAY,QACrBl9B,KAAKvG,QAAQ0jC,iBAAiBv6B,SAC9BkuB,EAAO6d,IAAIpP,KAAK,UAAmD,UAATz+B,EAAmB,KAAO,WAAa,SAE9F2iD,KAKPmB,GAAwB,WACxB,SAASA,EAAO9zB,GACZ9wB,KAAKvG,QAAUE,SAASC,cAAc,OACtCoG,KAAKvG,QAAQoe,UAAY,gCAAkCiZ,EAAOzzB,QAAQqiC,OAAOzP,SACjFjwB,KAAKvG,QAAQmf,UAAY,qEACzB5Y,KAAKijD,UAAUnyB,GA0CnB,OAxCA8zB,EAAOhhD,UAAUq/C,UAAY,SAAUnyB,GACnC,IAAI4N,EAAQ1+B,KACZA,KAAKvG,QAAQqI,iBAAiB,aAAa,SAAUF,GACjD,IAAIijD,EAAelrD,SACf8O,EAAI7G,EAAMkjD,QACVhvC,EAASgb,EAAOr3B,QAAQ24B,aACxBwT,EAAY,GAAK9U,EAAOr3B,QAAQ8I,cAAc,mBAAmB2xB,aACrE2wB,EAAaE,YAAc,WAAc,OAAO,GAC5CnvC,OAAOovC,eACPpvC,OAAOovC,gBAEXtmB,EAAMjlC,QAAQiJ,UAAUlG,IAAI,2BAC5BqoD,EAAaI,YAAc,SAAUC,GACM,QAAnCp0B,EAAOzzB,QAAQqiC,OAAOzP,SACtBa,EAAOr3B,QAAQkB,MAAMmb,OAAS5O,KAAK2E,IAAI+5B,EAAW9vB,GAAUrN,EAAIy8C,EAAUJ,UAAY,KAGtFh0B,EAAOr3B,QAAQkB,MAAMmb,OAAS5O,KAAK2E,IAAI+5B,EAAW9vB,GAAUovC,EAAUJ,QAAUr8C,IAAM,KAEtFqoB,EAAOzzB,QAAQsoC,iBACf7U,EAAOqN,GAAG1kC,QAAQkB,MAAMwqD,cACpBr0B,EAAOqN,GAAG1kC,QAAQ4oB,cAAc+P,aAAe,EAAI,OAG/DyyB,EAAanO,UAAY,WACjB5lB,EAAOzzB,QAAQqiC,OAAO1f,OACtB8Q,EAAOzzB,QAAQqiC,OAAO1f,MAAM8Q,EAAOr3B,QAAQ24B,aAAetc,GAE1DF,OAAOovC,eACPpvC,OAAOovC,gBAEXH,EAAaI,YAAc,KAC3BJ,EAAanO,UAAY,KACzBmO,EAAaE,YAAc,KAC3BF,EAAaO,cAAgB,KAC7BP,EAAaQ,SAAW,KACxB3mB,EAAMjlC,QAAQiJ,UAAUE,OAAO,gCAIpCgiD,KAUPU,GAAwB,WACxB,SAASA,EAAOx0B,GACZ9wB,KAAK0mC,eAAgB,EACrB1mC,KAAKvG,QAAUE,SAASC,cAAc,OACtCoG,KAAKvG,QAAQoe,UAAY,yBACzB7X,KAAKvG,QAAQc,aAAa,cAAeu2B,EAAOzzB,QAAQ2lD,aACxDhjD,KAAKvG,QAAQc,aAAa,kBAAmB,QAC7CyF,KAAKvG,QAAQc,aAAa,aAAc,SACxCyF,KAAKijD,UAAUnyB,GACfugB,GAAWvgB,EAAQ9wB,KAAKvG,SACxB83C,GAAUzgB,EAAQ9wB,KAAKvG,SACvBg5C,GAAY3hB,EAAQ9wB,KAAKvG,SACzBg9C,GAAY3lB,EAAQ9wB,KAAKvG,SACzBo4C,GAAU/gB,EAAQ9wB,KAAKvG,SACvB04C,GAAUrhB,EAAQ9wB,KAAKvG,QAASuG,KAAKmkB,MACrCiuB,GAASthB,EAAQ9wB,KAAKvG,QAASuG,KAAKmkB,MA0ExC,OAxEAmhC,EAAO1hD,UAAUugB,KAAO,SAAUviB,EAAOkvB,GACrClvB,EAAMulB,kBACNvlB,EAAMwlB,iBACNxlB,EAAM4lB,cAAcC,QAAQ,aAAc2pB,GAActgB,EAAOA,EAAOO,aAAa53B,WAEvF6rD,EAAO1hD,UAAUq/C,UAAY,SAAUnyB,GACnC,IAAI4N,EAAQ1+B,KACZA,KAAKvG,QAAQqI,iBAAiB,SAAS,SAAUF,GAC7CqwC,GAAMnhB,EAAQlvB,EAAO,CACjBswC,UAAW,SAAUrtB,GACjBlrB,SAASujC,YAAY,cAAc,EAAOrY,SAItD7kB,KAAKvG,QAAQqI,iBAAiB,UAAU,WACpC,GAA6C,UAAzCgvB,EAAOhQ,QAAQrnB,QAAQkB,MAAM2e,QAAjC,CAGA,IAAIisC,EAAgB7mB,EAAMjlC,QAAQmgB,UAC9B4rC,EAAa9mB,EAAMjlC,QAAQy6B,aAC3BuxB,EAAmB/mB,EAAMjlC,QAAQw6B,aAAeyxB,WAAWhnB,EAAMjlC,QAAQkB,MAAMwqD,eAAiB,KAChGrkC,EAAUgQ,EAAOhQ,QAAQrnB,QAEzBqnB,EAAQlH,UADP2rC,EAAgBC,EAAa,IACTD,EAAgBC,GACjC1kC,EAAQmT,aAAewxB,EAAmBD,EAG1BD,EAChBzkC,EAAQmT,aAAewxB,MAGnCzlD,KAAKvG,QAAQqI,iBAAiB,oBAAoB,SAAUF,GACxD88B,EAAMgI,eAAgB,KAE1B1mC,KAAKvG,QAAQqI,iBAAiB,kBAAkB,SAAUF,IACjD,EAAG+9B,EAA6BhK,OACjC8O,EAAW3T,EAAQlvB,GAEvB88B,EAAMgI,eAAgB,KAE1B1mC,KAAKvG,QAAQqI,iBAAiB,SAAS,SAAUF,GACrB,iBAApBA,EAAM+gC,WAAoD,mBAApB/gC,EAAM+gC,YAI5CjE,EAAMgI,eAAgC,MAAf9kC,EAAM5H,MAA+B,MAAf4H,EAAM5H,MAA+B,MAAf4H,EAAM5H,OAGzE0kC,EAAMzB,aACNyB,EAAMzB,cAAe,EAGzBwH,EAAW3T,EAAQlvB,QAEvB5B,KAAKvG,QAAQqI,iBAAiB,SAAS,SAAUF,GACzCA,EAAMspC,cAAe,EAAGvL,EAA0B7J,IAAIl0B,KAGvC,cAAdA,EAAMnH,KAAqC,WAAdmH,EAAMnH,KACJ,KAAhCq2B,EAAOqN,GAAG1kC,QAAQmf,WAA4D,IAAxCkY,EAAOqN,GAAG1kC,QAAQmF,WAAW1C,SACnE40B,EAAOqN,GAAG1kC,QAAQm4B,mBAAqE,QAAhDd,EAAOqN,GAAG1kC,QAAQm4B,kBAAkB5K,SACd,IAA1D8J,EAAOqN,GAAG1kC,QAAQm4B,kBAAkB4qB,mBACiB,KAApD1rB,EAAOqN,GAAG1kC,QAAQm4B,kBAAkBxO,aAAwD,OAAlC0N,EAAOqN,GAAG1kC,QAAQ2pB,YAKlE,UAAdxhB,EAAMnH,KACN0qC,GAAarU,GAJbA,EAAOqN,GAAG1kC,QAAQmf,UAAY,QAQnC0sC,KAKPK,GAAqB,WACrB,SAASA,IACL3lD,KAAKvG,QAAUE,SAASC,cAAc,OACtCoG,KAAKvG,QAAQoe,UAAY,aAsB7B,OApBA8tC,EAAI/hD,UAAU27B,KAAO,SAAUxlC,EAAMwqD,GACjC,IAAI7lB,EAAQ1+B,KAGZ,QAFa,IAATukD,IAAmBA,EAAO,KAC9BvkD,KAAKvG,QAAQoe,UAAY,8BACZ,IAAT0sC,EAKA,OAJAvkD,KAAKvG,QAAQmf,UAAY,oCAAwC7e,EAAO,sDACxEiG,KAAKvG,QAAQ8I,cAAc,sBAAsBT,iBAAiB,SAAS,WACvE48B,EAAMwa,UAIdl5C,KAAKvG,QAAQmf,UAAY,oCAAwC7e,EAAO,SACxE4I,YAAW,WACP+7B,EAAMwa,SACPqL,IAEPoB,EAAI/hD,UAAUs1C,KAAO,WACjBl5C,KAAKvG,QAAQoe,UAAY,2BACzB7X,KAAKvG,QAAQmf,UAAY,IAEtB+sC,KAOPC,GAAiB,SAAU1lD,EAAM4wB,GACjC,GAAIA,EAAOzzB,QAAQyjB,QAAQ5gB,OAASA,EAApC,CAIA,OADA4wB,EAAOzzB,QAAQyjB,QAAQ5gB,KAAOA,EACtBA,GACJ,IAAK,OACD4wB,EAAOqN,GAAG1kC,QAAQkB,MAAM2e,QAAU,QAClCwX,EAAOhQ,QAAQrnB,QAAQkB,MAAM2e,QAAU,QACvCwX,EAAOhQ,QAAQugB,OAAOvQ,GACtBiP,EAAkBjP,EAAOqB,QAAQoO,SAAU,CAAC,SAC5C,MACJ,IAAK,SACDzP,EAAOqN,GAAG1kC,QAAQkB,MAAM2e,QAAU,QAClCwX,EAAOhQ,QAAQrnB,QAAQkB,MAAM2e,QAAU,OACvCsmB,EAAqB9O,EAAOqB,QAAQoO,SAAU,CAAC,SAKnDzP,EAAO6N,UACP7N,EAAO6N,SAASF,aAAa3N,KAKjC+0B,GAAqD,WACrD,IAAI7nB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAV9B,GAiBrDyV,GAAsB,SAAU9U,GAEhC,SAAS8U,EAAKh1B,EAAQ4d,GAClB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KAoBnD,MAnBoC,SAAhC8wB,EAAOzzB,QAAQyjB,QAAQ5gB,MACvBw+B,EAAMjlC,QAAQoF,SAAS,GAAG6D,UAAUlG,IAAI,wBAE5CkiC,EAAMjlC,QAAQoF,SAAS,GAAGiD,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAC1E88B,EAAMjlC,QAAQm4B,kBAChBlvB,UAAU4f,SAASvL,EAA6C+D,EAAEsG,uBAGjFxf,EAAMwlB,iBACqB,OAAvB0J,EAAOO,cAGyB,SAAhCP,EAAOzzB,QAAQyjB,QAAQ5gB,KACvB0lD,GAAe,SAAU90B,GAGzB80B,GAAe,OAAQ90B,QAGxB4N,EAEX,OAxBAmnB,GAAaC,EAAM9U,GAwBZ8U,GACTrX,IAIEsX,GACA,WACI/lD,KAAKvG,QAAUE,SAASC,cAAc,OACtCoG,KAAKvG,QAAQoe,UAAY,sBAO7B2I,GAAe5L,EAAoB,KAEnCoxC,GAA0D,WAC1D,IAAIhoB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAVzB,GAkB1D4V,GAA2B,SAAUjV,GAErC,SAASiV,EAAUn1B,EAAQ4d,GACvB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KAC/C6gC,EAAYnC,EAAMjlC,QAAQoF,SAAS,GACnC+hC,EAAejnC,SAASC,cAAc,OAC1CgnC,EAAa/oB,UAAY,eAAoC,IAAnB62B,EAAS5N,MAAc,GAAK,wBACtE,IAAIloB,EAAY,GAiBhB,OAhBA7B,EAA4C+D,EAAEwG,WAAW7oB,SAAQ,SAAUkkB,GACvE/D,GAAa,WAAa+D,EAAQ,eAEtCikB,EAAahoB,UACT,yCAA4ChD,OAAOC,YAAc,EAAI,OAAU+C,EAAY,SAC/FgoB,EAAa9+B,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GACjD,WAAzBA,EAAM5I,OAAOguB,UACboZ,EAAUtP,EAAQ,CAAC,eACnBA,EAAOzzB,QAAQyjB,QAAQ5E,KAAKvhB,MAAQiH,EAAM5I,OAAOoqB,aACjD,EAAG5C,GAA+Bf,GAAG7d,EAAM5I,OAAOoqB,YAAa0N,EAAOzzB,QAAQye,KAC9Ela,EAAMwlB,iBACNxlB,EAAMulB,sBAGduX,EAAMjlC,QAAQP,YAAY0nC,GAC1BD,EAAc7P,EAAQ8P,EAAcC,EAAW6N,EAAS5N,OACjDpC,EAEX,OAzBAsnB,GAAkBC,EAAWjV,GAyBtBiV,GACTxX,IAIEyX,GAA6D,WAC7D,IAAIloB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAVtB,GAiB7D8V,GAA8B,SAAUnV,GAExC,SAASmV,EAAar1B,EAAQ4d,GAC1B,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KAC/C6gC,EAAYnC,EAAMjlC,QAAQoF,SAAS,GACnC+hC,EAAejnC,SAASC,cAAc,OAC1CgnC,EAAa/oB,UAAY,eAAoC,IAAnB62B,EAAS5N,MAAc,GAAK,wBACtE,IAAIloB,EAAY,GAiBhB,OAhBAvgB,OAAOiJ,KAAKwvB,EAAOzzB,QAAQyjB,QAAQnE,MAAMgF,MAAMlpB,SAAQ,SAAUgC,GAC7Dme,GAAa,sBAAyBne,EAAM,KAAQq2B,EAAOzzB,QAAQyjB,QAAQnE,MAAMgF,KAAKlnB,GAAO,eAEjGmmC,EAAahoB,UACT,yCAA4ChD,OAAOC,YAAc,EAAI,OAAU+C,EAAY,SAC/FgoB,EAAa9+B,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GACjD,WAAzBA,EAAM5I,OAAOguB,UACboZ,EAAUtP,EAAQ,CAAC,eACnBA,EAAOzzB,QAAQyjB,QAAQnE,MAAMwC,QAAUvd,EAAM5I,OAAOsB,aAAa,cACjE,EAAG0c,EAAqCkI,GAAG4R,EAAOzzB,QAAQyjB,QAAQnE,MAAMwC,QAAS2R,EAAOzzB,QAAQyjB,QAAQnE,MAAMyC,MAC9Gxd,EAAMwlB,iBACNxlB,EAAMulB,sBAGduX,EAAMjlC,QAAQP,YAAY0nC,GAC1BD,EAAc7P,EAAQ8P,EAAcC,EAAW6N,EAAS5N,OACjDpC,EAEX,OAzBAwnB,GAAqBC,EAAcnV,GAyB5BmV,GACT1X,IAIE2X,GAAyB,WACzB,SAASA,EAAQt1B,GACb9wB,KAAKvG,QAAUE,SAASC,cAAc,QACtCoG,KAAKvG,QAAQoe,UAAY,yDACzB7X,KAAKqhC,OAAOvQ,EAAQ,IAgCxB,OA9BAs1B,EAAQxiD,UAAUy9B,OAAS,SAAUvQ,EAAQ/T,GACzC,IAAI7gB,EAAS6gB,EAAO8gC,SAAS,MAAQ9gC,EAAO7gB,OAAS,EAAI6gB,EAAO7gB,OAChE,GAAoC,SAAhC40B,EAAOzzB,QAAQspC,QAAQ7lC,MAAmBgwB,EAAOA,EAAOO,aAAc,CACtE,IAAIF,EAAcL,EAAOA,EAAOO,aAAa53B,QAAQ6jC,WAAU,GAC/DnM,EAAYpb,iBAAiB,4BAA4Btd,SAAQ,SAAU2f,GACvEA,EAAKxV,YAET1G,EAASi1B,EAAY/N,YAAYlnB,OAEK,iBAA/B40B,EAAOzzB,QAAQspC,QAAQ96B,KAC1B3P,EAAS40B,EAAOzzB,QAAQspC,QAAQ96B,IAChC7L,KAAKvG,QAAQoe,UAAY,uCAGzB7X,KAAKvG,QAAQoe,UAAY,iBAE7B7X,KAAKvG,QAAQmf,UAAY1c,EAAS,IAAM40B,EAAOzzB,QAAQspC,QAAQ96B,KAG/D7L,KAAKvG,QAAQmf,UAAY,GAAK1c,EAElC8D,KAAKvG,QAAQc,aAAa,aAAcu2B,EAAOzzB,QAAQspC,QAAQ7lC,MAC3DgwB,EAAOzzB,QAAQspC,QAAQ3mB,OACvB8Q,EAAOzzB,QAAQspC,QAAQ3mB,MAAM9jB,EAAQ,CACjCwgB,OAAQoU,EAAOzzB,QAAQspC,QAAQjqB,OAC/B7Q,IAAKilB,EAAOzzB,QAAQspC,QAAQ96B,IAC5B/K,KAAMgwB,EAAOzzB,QAAQspC,QAAQ7lC,QAIlCslD,KAKPC,GAAuD,WACvD,IAAIroB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAV5B,GAgBvDiW,GAAwB,SAAUtV,GAElC,SAASsV,EAAOx1B,EAAQ4d,GACpB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KASnD,OARA0+B,EAAMjlC,QAAQoF,SAAS,GAAG+Z,UAAY81B,EAAStyB,KAC/CsiB,EAAMjlC,QAAQoF,SAAS,GAAGiD,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAC3FA,EAAMwlB,iBACFxlB,EAAM0lB,cAAc5kB,UAAU4f,SAASvL,EAA6C+D,EAAEsG,sBAG1FstB,EAAS7G,MAAMjmC,EAAOkvB,MAEnB4N,EAEX,OAbA2nB,GAAeC,EAAQtV,GAahBsV,GACT7X,IAIE8X,GAAyD,WACzD,IAAIvoB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAV1B,GAiBzDmW,GAA0B,SAAUxV,GAEpC,SAASwV,EAAS11B,EAAQ4d,GACtB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KAmBnD,OAlBA0+B,EAAMjlC,QAAQm4B,kBAAkB9vB,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GACjG,IAAIuyB,EAAauK,EAAMjlC,QAAQm4B,kBAC3BuC,EAAWzxB,UAAU4f,SAASvL,EAA6C+D,EAAEsG,uBAGjFxf,EAAMwlB,iBACF+M,EAAWzxB,UAAU4f,SAAS,yBAC9B6R,EAAWzxB,UAAUE,OAAO,wBAC5BkuB,EAAO6N,SAASllC,QAAQkB,MAAM2e,QAAU,OACxC+rB,EAAWvU,KAGXqD,EAAWzxB,UAAUlG,IAAI,wBACzBs0B,EAAO6N,SAASllC,QAAQkB,MAAM2e,QAAU,QACxC+rB,EAAWvU,GACXA,EAAO6N,SAASF,aAAa3N,QAG9B4N,EAEX,OAvBA6nB,GAAiBC,EAAUxV,GAuBpBwV,GACT/X,IAIEgY,GACA,WACIzmD,KAAKvG,QAAUE,SAASC,cAAc,OACtCoG,KAAKvG,QAAQoe,UAAY,2BAO7B6uC,GAAsD,WACtD,IAAI1oB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAV7B,GAkBtDsW,GAAuB,SAAU3V,GAEjC,SAAS2V,EAAM71B,EAAQ4d,GACnB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KAC/C4gC,EAAejnC,SAASC,cAAc,OAC1CgnC,EAAa/oB,UAAY,mCACzB,IAAI+uC,EAAkB,GACtBvuD,OAAOiJ,KAAKwvB,EAAOzzB,QAAQojC,KAAKD,OAAO/nC,SAAQ,SAAUgC,GACrD,IAAIosD,EAAa/1B,EAAOzzB,QAAQojC,KAAKD,MAAM/lC,GACvCosD,EAAW7lD,QAAQ,MAAQ,EAC3B4lD,GAAmB,wBAA2BnsD,EAAM,kBAAsBA,EAAM,yBAA6BA,EAAM,kBAAsBA,EAAM,uCAA6CosD,EAAa,eAGzMD,GAAmB,uBAA0BC,EAAa,kBAAsBpsD,EAAM,uCAA4CosD,EAAa,sBAGvJ,IAAIC,EAAW,yFAA+Fh2B,EAAOzzB,QAAQojC,KAAKsmB,WAAa,IAAM,kBAKrJ,OAJAnmB,EAAahoB,UAAY,kDAAiF,SAA1BkY,EAAOzzB,QAAQyY,OAAoB,OAASgb,EAAOzzB,QAAQyY,OAAS,IAAM,OAAU8wC,EAAkB,SAAWE,EACjMpoB,EAAMjlC,QAAQP,YAAY0nC,GAC1BD,EAAc7P,EAAQ8P,EAAclC,EAAMjlC,QAAQoF,SAAS,GAAI6vC,EAAS5N,OACxEpC,EAAMyS,WAAWrgB,EAAQ8P,GAClBlC,EAsCX,OA1DAgoB,GAAcC,EAAO3V,GAsBrB2V,EAAM/iD,UAAUutC,WAAa,SAAUrgB,EAAQ8P,GAC3CA,EAAa7qB,iBAAiB,yBAAyBtd,SAAQ,SAAUgB,GACrEA,EAAQqI,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GACzEA,EAAMwlB,iBACN,IAAIhtB,EAAQX,EAAQa,aAAa,cAC7Bw/B,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAC7CpiB,EAAOtU,EAOX,GAN2B,YAAvB02B,EAAOO,YACP3iB,EAAOoiB,EAAO5T,KAAKsU,cAAcp3B,GAEL,OAAvB02B,EAAOO,cACZ3iB,EAAOoiB,EAAO5T,KAAKqU,gBAAgBn3B,IAEnCA,EAAM4G,QAAQ,MAAQ,GAA4B,OAAvB8vB,EAAOO,YAAsB,CACxD,IAAIF,EAAcx3B,SAASC,cAAc,OACzCu3B,EAAYvY,UAAYlK,EACxBA,EAAOyiB,EAAYS,kBAAkBA,kBAAkBpM,UAAY,KACnE,EAAGnO,EAA0BqiB,IAAIhrB,EAAMoiB,QAGvCgJ,EAAM+Z,kBACN/Z,EAAM+C,WAAWljC,SAASM,eAAeG,IAE7C0/B,EAAMO,UAAS,IACf,EAAGhjB,EAAiC6B,IAAI4gB,GACxC8G,EAAajmC,MAAM2e,QAAU,OAC7BkoB,GAAgB1Q,MAEpBr3B,EAAQqI,iBAAiB,aAAa,SAAUF,GACf,WAAzBA,EAAM5I,OAAOguB,UACb4Z,EAAar+B,cAAc,uBAAuBqW,UAC9ChX,EAAM5I,OAAOsB,aAAa,oBAKvCqsD,GACTlY,IAMEuY,GAAW,SAAUl2B,EAAQuM,EAASqc,GACtC,IAAI7wB,EAAWlvB,SAASC,cAAc,KAClC,aAAcivB,GACdA,EAASm+B,SAAWtN,EACpB7wB,EAASluB,MAAM2e,QAAU,OACzBuP,EAAShD,KAAOZ,IAAIE,gBAAgB,IAAIJ,KAAK,CAACsY,KAC9C1jC,SAASme,KAAK5e,YAAY2vB,GAC1BA,EAASgf,QACThf,EAASjmB,UAGTkuB,EAAO6d,IAAIpP,KAAK3pB,OAAOmJ,WAAWkoC,YAAa,IAwBnDC,GAAuD,WACvD,IAAIlpB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAV5B,GAiBvD8W,GAAwB,SAAUnW,GAElC,SAASmW,EAAOr2B,EAAQ4d,GACpB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KAC/C6gC,EAAYnC,EAAMjlC,QAAQoF,SAAS,GACnC+hC,EAAejnC,SAASC,cAAc,OA0B1C,OAzBAgnC,EAAa/oB,UAAY,eAAoC,IAAnB62B,EAAS5N,MAAc,GAAK,wBACtEF,EAAahoB,UAAY,+HACzBgoB,EAAa9+B,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAC9E,IAAIuyB,EAAavyB,EAAM5I,OACvB,GAA2B,WAAvBm7B,EAAWnN,QAAsB,CACjC,OAAQmN,EAAW75B,aAAa,cAC5B,IAAK,YAlDJ,SAAUw2B,GAC3B,IAAIuM,EAAUa,EAAYpN,GAC1Bk2B,GAASl2B,EAAQuM,EAASA,EAAQ1d,OAAO,EAAG,IAAM,OAiD9BynC,CAAet2B,GACf,MACJ,IAAK,OAjDT,SAAUA,GACtBA,EAAO6d,IAAIpP,KAAK3pB,OAAOmJ,WAAWsoC,SAAU,MAC5C,IAAIC,EAAS3tD,SAAS4I,cAAc,UACpC+kD,EAAOC,gBAAgB1yB,OACvByyB,EAAOC,gBAAgBC,MAAM,gCAAqC12B,EAAOzzB,QAAQye,IAAM,oCAAwCgV,EAAOzzB,QAAQye,IAAM,yPAA8PgV,EAAOzzB,QAAQyjB,QAAQnE,MAAQ,yCAA6CmU,EAAOzzB,QAAQyjB,QAAQ5E,KAAKvhB,MAAQ,yGAClgB2sD,EAAOC,gBAAgB3zB,QACvBjxB,YAAW,WACP2kD,EAAOG,cAAcC,YAAYxpB,EAAYpN,GAAS,OACvD,KA0CiB62B,CAAU72B,GACV,MACJ,IAAK,QA1CR,SAAUA,GACvB,IAAIuM,EAAU+lB,GAAQtyB,GAClBpiB,EAAO,4DAAmEoiB,EAAOzzB,QAAQye,IAAM,oCAAwCgV,EAAOzzB,QAAQye,IAAM,iBAAmBgV,EAAOzzB,QAAQka,KAAO,iCAAoCuZ,EAAOzzB,QAAQye,IAAM,wFAA8FuhB,EAAU,gHAAkHvM,EAAOzzB,QAAQyjB,QAAQnE,MAAMwC,QAAU,OAAS2R,EAAOzzB,QAAQyjB,QAAQnE,MAAMyC,KAAO,2EAA6EqE,KAAKi9B,UAAU5vB,EAAOzzB,QAAQyjB,QAAQ5E,MAAQ,sBAAwB4U,EAAOzzB,QAAQye,IAAM,+DAAiEgV,EAAOzzB,QAAQye,IAAM,qBAAuB2H,KAAKi9B,UAAU5vB,EAAOzzB,QAAQyjB,QAAQvE,MAAQ,yDAA2DuU,EAAOzzB,QAAQye,IAAM,OAASgV,EAAOzzB,QAAQsf,MAAQ,oDAAsDmU,EAAOzzB,QAAQye,IAAM,mDAAqDgV,EAAOzzB,QAAQye,IAAM,gDAAkDgV,EAAOzzB,QAAQye,IAAM,OAASgV,EAAOzzB,QAAQsf,MAAQ,kDAAoDmU,EAAOzzB,QAAQye,IAAM,OAASgV,EAAOzzB,QAAQsf,MAAQ,8CAAgDmU,EAAOzzB,QAAQye,IAAM,qHAAsHgV,EAAOzzB,QAAQye,IAAM,kBAAoBgV,EAAOzzB,QAAQ+e,KAAO,gCAClkD4qC,GAASl2B,EAAQpiB,EAAM2uB,EAAQ1d,OAAO,EAAG,IAAM,SAwC3BioC,CAAW92B,GAKnBsP,EAAUtP,EAAQ,CAAC,eACnBlvB,EAAMwlB,iBACNxlB,EAAMulB,sBAGduX,EAAMjlC,QAAQP,YAAY0nC,GAC1BD,EAAc7P,EAAQ8P,EAAcC,EAAW6N,EAAS5N,OACjDpC,EAEX,OAhCAwoB,GAAeC,EAAQnW,GAgChBmW,GACT1Y,IAIEoZ,GAA2D,WAC3D,IAAI7pB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAVxB,GAgB3DyX,GAA4B,SAAU9W,GAEtC,SAAS8W,EAAWh3B,EAAQ4d,GACxB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KAEnD,OADA0+B,EAAMyS,WAAWrgB,EAAQ4d,GAClBhQ,EAiDX,OArDAmpB,GAAmBC,EAAY9W,GAM/B8W,EAAWlkD,UAAUutC,WAAa,SAAUrgB,EAAQ4d,GAChD1uC,KAAKvG,QAAQoF,SAAS,GAAGiD,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAC1FA,EAAMwlB,iBACF0J,EAAOr3B,QAAQoe,UAAUmH,SAAS,uBAC7B0vB,EAAS5N,QACV9gC,KAAK4Y,UAAY81B,EAAStyB,MAE9B0U,EAAOr3B,QAAQkB,MAAMotD,OAAS,GAC9BpuD,SAASme,KAAKnd,MAAMk5B,SAAW,GAC/B/C,EAAOr3B,QAAQiJ,UAAUE,OAAO,sBAChCvK,OAAOiJ,KAAKwvB,EAAOqB,QAAQoO,UAAU9nC,SAAQ,SAAUgC,GACnD,IAAIutD,EAAal3B,EAAOqB,QAAQoO,SAAS9lC,GAAK6sC,WAC1C0gB,IACAA,EAAWnwC,UAAYmwC,EAAWnwC,UAAU9I,QAAQ,MAAO,WAG/D+hB,EAAO6V,UACP7V,EAAO6V,QAAQltC,QAAQoe,UAAYiZ,EAAO6V,QAAQltC,QAAQoe,UAAU9I,QAAQ,MAAO,UAIlF2/B,EAAS5N,QACV9gC,KAAK4Y,UAAY,6DAErBkY,EAAOr3B,QAAQkB,MAAMotD,OAASj3B,EAAOzzB,QAAQ4qD,WAAWlnD,MAAMuT,WAC9D3a,SAASme,KAAKnd,MAAMk5B,SAAW,SAC/B/C,EAAOr3B,QAAQiJ,UAAUlG,IAAI,sBAC7BnE,OAAOiJ,KAAKwvB,EAAOqB,QAAQoO,UAAU9nC,SAAQ,SAAUgC,GACnD,IAAIutD,EAAal3B,EAAOqB,QAAQoO,SAAS9lC,GAAK6sC,WAC1C0gB,IACAA,EAAWnwC,UAAYmwC,EAAWnwC,UAAU9I,QAAQ,MAAO,WAG/D+hB,EAAO6V,UACP7V,EAAO6V,QAAQltC,QAAQoe,UAAYiZ,EAAO6V,QAAQltC,QAAQoe,UAAU9I,QAAQ,MAAO,SAGvF+hB,EAAO6N,UACP7N,EAAO6N,SAASF,aAAa3N,GAE7B4d,EAAS7G,OACT6G,EAAS7G,MAAMjmC,EAAOkvB,GAE1BuU,EAAWvU,GACX4U,EAAsB5U,OAGvBg3B,GACTrZ,IAIEyZ,GAAyD,WACzD,IAAIlqB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAV1B,GAqBzD8X,GAA0B,SAAUnX,GAEpC,SAASmX,EAASr3B,EAAQ4d,GACtB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KAC/C4gC,EAAejnC,SAASC,cAAc,OAK1C,OAJAgnC,EAAa/oB,UAAY,kCACzB+oB,EAAahoB,UAAY,yCAA+ChD,OAAOmJ,WAAWqpC,SAAW,KAAM,EAAGzoB,EAAmC5J,IAAI,YAAc,qDAA2DngB,OAAOmJ,WAAWspC,SAAW,SAAU,EAAG1oB,EAAmC5J,IAAI,OAAS,uDAA6DngB,OAAOmJ,WAAWupC,SAAW,SAAU,EAAG3oB,EAAmC5J,IAAI,OAAS,wDAA8DngB,OAAOmJ,WAAWwpC,SAAW,SAAU,EAAG5oB,EAAmC5J,IAAI,OAAS,yDAA+DngB,OAAOmJ,WAAWypC,SAAW,SAAU,EAAG7oB,EAAmC5J,IAAI,OAAS,0DAAgEngB,OAAOmJ,WAAW0pC,SAAW,SAAU,EAAG9oB,EAAmC5J,IAAI,OAAS,aAC15B2I,EAAMjlC,QAAQP,YAAY0nC,GAC1BlC,EAAMyS,WAAWrgB,EAAQ8P,GAClBlC,EA4CX,OApDAwpB,GAAiBC,EAAUnX,GAU3BmX,EAASvkD,UAAUutC,WAAa,SAAUrgB,EAAQ8P,GAC9C,IAAIC,EAAY7gC,KAAKvG,QAAQoF,SAAS,GACtCgiC,EAAU/+B,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAC3EA,EAAMwlB,iBACFyZ,EAAUn+B,UAAU4f,SAASvL,EAA6C+D,EAAEsG,uBAGhFyf,EAAU+Q,OACN/Q,EAAUn+B,UAAU4f,SAAS,yBACF,YAAvBwO,EAAOO,aACPmW,EAAc1W,GACd0V,EAAiB1V,IAEW,OAAvBA,EAAOO,aACZ0kB,GAAuBjlB,EAAQ,IAEnC+P,EAAUn+B,UAAUE,OAAO,0BAG3Bw9B,EAAUtP,EAAQ,CAAC,eACnB8P,EAAajmC,MAAM2e,QAAU,aAGrC,IAAK,IAAIrd,EAAI,EAAGA,EAAI,EAAGA,IACnB2kC,EAAa/hC,SAASuZ,KAAKnc,GAAG6F,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAC/FA,EAAMwlB,iBACqB,YAAvB0J,EAAOO,aACPkW,EAAWzW,EAAQlvB,EAAM5I,OAAOsB,aAAa,aAC7CksC,EAAiB1V,GACjB+P,EAAUn+B,UAAUlG,IAAI,yBAEI,OAAvBs0B,EAAOO,aACZ0kB,GAAuBjlB,EAAQlvB,EAAM5I,OAAOsB,aAAa,eACzDumC,EAAUn+B,UAAUlG,IAAI,yBAGxB65C,GAAevlB,EAAQlvB,EAAM5I,OAAOsB,aAAa,eAErDsmC,EAAajmC,MAAM2e,QAAU,WAIlC6uC,GACT1Z,IAIEia,GAAqD,WACrD,IAAI1qB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAV9B,GAerDsY,GAAsB,SAAU3X,GAEhC,SAAS2X,EAAK73B,EAAQ4d,GAClB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KAKnD,OAJA0+B,EAAMjlC,QAAQoF,SAAS,GAAGiD,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAC3FA,EAAMwlB,iBACN0J,EAAO6d,IAAIpP,KAAK,+kCAAwzC,MAEr0Cb,EAEX,OATAgqB,GAAaC,EAAM3X,GASZ2X,GACTla,IAIEma,GAAuD,WACvD,IAAI5qB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAV5B,GAmBvDwY,GAAwB,SAAU7X,GAElC,SAAS6X,EAAO/3B,EAAQ4d,GACpB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KAanD,OAZA0+B,EAAMjlC,QAAQoF,SAAS,GAAGiD,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAE3F,GADAA,EAAMwlB,kBACFsX,EAAMjlC,QAAQm4B,kBAAkBlvB,UAAU4f,SAASvL,EAA6C+D,EAAEsG,sBAC3E,OAAvB0P,EAAOO,YADX,CAIA,IAAIyI,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAC7CyV,GAAY,EAAGrvB,EAAqCgJ,IAAI4Z,EAAME,eAAgB,MAC9EuM,GACAoW,GAAW7rB,EAAQyV,EAAWzM,OAG/B4E,EAEX,OAjBAkqB,GAAeC,EAAQ7X,GAiBhB6X,GACTpa,IAIEqa,GAAqD,WACrD,IAAI9qB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAV9B,GAgBrD0Y,GAAsB,SAAU/X,GAEhC,SAAS+X,EAAKj4B,EAAQ4d,GAClB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KAKnD,OAJA0+B,EAAMjlC,QAAQoF,SAAS,GAAGiD,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAC3FA,EAAMwlB,iBACN0J,EAAO6d,IAAIpP,KAAK,8gCAAm9CxoB,EAA8BuI,EAAI,YAAcmS,KAAKu3B,QAAU,0KAAwM,MAEvuDtqB,EAEX,OATAoqB,GAAaC,EAAM/X,GASZ+X,GACTta,IAIEwa,GAA4D,WAC5D,IAAIjrB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAVvB,GAiB5D6Y,GAA6B,SAAUlY,GAEvC,SAASkY,EAAYp4B,EAAQ4d,GACzB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KASnD,OARA0+B,EAAMjlC,QAAQoF,SAAS,GAAGiD,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAC3FA,EAAMwlB,iBACFsX,EAAMjlC,QAAQm4B,kBAAkBlvB,UAAU4f,SAASvL,EAA6C+D,EAAEsG,sBAC3E,OAAvB0P,EAAOO,aAGX+qB,GAAiBtrB,EAAQ,eAEtB4N,EAEX,OAbAuqB,GAAoBC,EAAalY,GAa1BkY,GACTza,IAIE0a,GAA6D,WAC7D,IAAInrB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAVtB,GAiB7D+Y,GAA8B,SAAUpY,GAExC,SAASoY,EAAat4B,EAAQ4d,GAC1B,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KASnD,OARA0+B,EAAMjlC,QAAQoF,SAAS,GAAGiD,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAC3FA,EAAMwlB,iBACFsX,EAAMjlC,QAAQm4B,kBAAkBlvB,UAAU4f,SAASvL,EAA6C+D,EAAEsG,sBAC3E,OAAvB0P,EAAOO,aAGX+qB,GAAiBtrB,EAAQ,kBAEtB4N,EAEX,OAbAyqB,GAAqBC,EAAcpY,GAa5BoY,GACT3a,IAIE4a,GAAwD,WACxD,IAAIrrB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAV3B,GAmBxDiZ,GAAyB,SAAUtY,GAEnC,SAASsY,EAAQx4B,EAAQ4d,GACrB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KAanD,OAZA0+B,EAAMjlC,QAAQoF,SAAS,GAAGiD,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAE3F,GADAA,EAAMwlB,kBACFsX,EAAMjlC,QAAQm4B,kBAAkBlvB,UAAU4f,SAASvL,EAA6C+D,EAAEsG,sBAC3E,OAAvB0P,EAAOO,YADX,CAIA,IAAIyI,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAC7CyV,GAAY,EAAGrvB,EAAqCgJ,IAAI4Z,EAAME,eAAgB,MAC9EuM,GACA2W,GAAYpsB,EAAQyV,EAAWzM,EAAOyM,EAAUlkB,mBAGjDqc,EAEX,OAjBA2qB,GAAgBC,EAAStY,GAiBlBsY,GACT7a,IAIE8a,GAAwD,WACxD,IAAIvrB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAV3B,GAgBxDmZ,GAAiC,SAAUxY,GAE3C,SAASuS,EAAQzyB,EAAQ4d,GACrB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KAanD,OAZI8wB,EAAOzzB,QAAQ+jC,SACf1C,EAAMjlC,QAAQm4B,kBAAkBlvB,UAAUlG,IAAI,wBAElDkiC,EAAMjlC,QAAQoF,SAAS,GAAGiD,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAC3FA,EAAMwlB,iBACW0J,EAAOqB,QAAQoO,SAASa,QAAQxP,kBAClClvB,UAAU4f,SAASvL,EAA6C+D,EAAEsG,uBAGjF0P,EAAOzzB,QAAQ+jC,QAAQ1kB,QAAUgiB,EAAMjlC,QAAQm4B,kBAAkBlvB,UAAU4f,SAAS,wBACpFwO,EAAOsQ,QAAQ0P,OAAOhgB,EAAQA,EAAOzzB,QAAQ+jC,QAAQ1kB,YAElDgiB,EAEX,OAjBA6qB,GAAgBhG,EAASvS,GAiBlBuS,GACT9U,IAIEgb,GAAwD,WACxD,IAAIzrB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAV3B,GAkBxDqZ,GAAiC,SAAU1Y,GAE3C,SAASyS,EAAQ3yB,EAAQ4d,GACrB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KAEnD,OADA0+B,EAAMyS,WAAWrgB,GACV4N,EAgDX,OApDA+qB,GAAgBhG,EAASzS,GAMzByS,EAAQ7/C,UAAUutC,WAAa,SAAUrgB,GACrC,IAAI4N,EAAQ1+B,KACZA,KAAKvG,QAAQoF,SAAS,GAAGiD,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAC1FA,EAAMwlB,iBACN,IAAI+M,EAAauK,EAAMjlC,QAAQm4B,kBAC/B,IAAIuC,EAAWzxB,UAAU4f,SAASvL,EAA6C+D,EAAEsG,qBAAjF,CAGA,IAAIuoC,EAAW5yC,EAA8C+D,EAAEuG,cAAcvb,OAAO,CAAC,OAAQ,YAAa,aACtGquB,EAAWzxB,UAAU4f,SAAS,yBAC9B6R,EAAWzxB,UAAUE,OAAO,wBACD,OAAvBkuB,EAAOO,aACPP,EAAOqN,GAAG1kC,QAAQkB,MAAM2e,QAAU,QACE,SAAhCwX,EAAOzzB,QAAQyjB,QAAQ5gB,KACvB4wB,EAAOhQ,QAAQrnB,QAAQkB,MAAM2e,QAAU,QAGvCwX,EAAOhQ,QAAQrnB,QAAQkB,MAAM2e,QAAU,SAI3CwX,EAAOA,EAAOO,aAAa53B,QAAQ4oB,cAAc1nB,MAAM2e,QAAU,QACjEwX,EAAOhQ,QAAQrnB,QAAQkB,MAAM2e,QAAU,QAE3C0mB,EAAclP,EAAOqB,QAAQoO,SAAUopB,GACvC74B,EAAOsQ,QAAQC,OAAOvQ,KAGtBmP,EAAenP,EAAOqB,QAAQoO,SAAUopB,GACxC74B,EAAOhQ,QAAQrnB,QAAQkB,MAAM2e,QAAU,QACZ,OAAvBwX,EAAOO,YACPP,EAAOqN,GAAG1kC,QAAQkB,MAAM2e,QAAU,OAGlCwX,EAAOA,EAAOO,aAAa53B,QAAQ4oB,cAAc1nB,MAAM2e,QAAU,OAErEwX,EAAOhQ,QAAQugB,OAAOvQ,GACtBqD,EAAWzxB,UAAUlG,IAAI,wBACzB4jC,EAAUtP,EAAQ,CAAC,aAAc,OAAQ,YACzCnuB,YAAW,WACPmuB,EAAOsQ,QAAQC,OAAOvQ,KACvBA,EAAOzzB,QAAQyjB,QAAQohC,MAAQ,KAEtC7c,EAAWvU,QAGZ2yB,GACThV,IAIEmb,GAA6B,WAC7B,SAASA,EAAYnoD,GAOjB,IAAIzD,EAEJ,GARAgC,KAAK6pD,YAAc,IACnB7pD,KAAK8pD,aAAc,EACnB9pD,KAAK+pD,WAAY,EACjB/pD,KAAKgqD,YAAc,GACnBhqD,KAAKiqD,aAAe,GACpBjqD,KAAKkqD,gBAAkB,EAGK,oBAAjBC,aACPnsD,EAAU,IAAImsD,iBAEb,CAAA,IAAIC,mBAIL,OAHApsD,EAAU,IAAIosD,mBAKlBpqD,KAAKqqD,oBAAsBrsD,EAAQssD,WAEnC,IAAIC,EAASvsD,EAAQwsD,aAEJxsD,EAAQysD,wBAAwBhpD,GAEtCipD,QAAQH,GAKnBvqD,KAAK2qD,SAAW3sD,EAAQ4sD,sBAAsB,KAAM,EAAG,GAEvD5qD,KAAK2qD,SAASE,eAAiB,KAE/BN,EAAOG,QAAQ1qD,KAAK2qD,UACpB3qD,KAAK2qD,SAASD,QAAQ1sD,EAAQ8sD,aAC9B9qD,KAAK+pD,WAAY,EAyGrB,OAtGAH,EAAYhmD,UAAUmnD,iBAAmB,SAAUC,EAAiBC,GAChEjrD,KAAKgqD,YAAYpuD,KAAK,IAAIsvD,aAAaF,IACvChrD,KAAKiqD,aAAaruD,KAAK,IAAIsvD,aAAaD,IACxCjrD,KAAKkqD,iBAAmB,MAE5BN,EAAYhmD,UAAUunD,yBAA2B,WACzCnrD,KAAK+pD,YACL/pD,KAAK8pD,aAAc,EACnB9pD,KAAKgqD,YAAY9tD,OAAS8D,KAAKiqD,aAAa/tD,OAAS,EACrD8D,KAAKkqD,gBAAkB,IAG/BN,EAAYhmD,UAAUwnD,cAAgB,WAClCprD,KAAK8pD,aAAc,GAEvBF,EAAYhmD,UAAUynD,iBAAmB,WAMrC,IAJA,IAAIC,EAAatrD,KAAKurD,aAAavrD,KAAKgqD,aACpCwB,EAAcxrD,KAAKurD,aAAavrD,KAAKiqD,cAErCwB,EAAc,IAAIP,aAAaI,EAAWpvD,QACrCD,EAAI,EAAGA,EAAIqvD,EAAWpvD,SAAUD,EACrCwvD,EAAYxvD,GAAK,IAAOqvD,EAAWrvD,GAAKuvD,EAAYvvD,IAGpD+D,KAAKqqD,oBAAsBrqD,KAAK6pD,cAChC4B,EAAczrD,KAAK0rD,iBAAiBD,EAAazrD,KAAK6pD,cAE1D,IAAI8B,EAAkB,GAA0B,EAArBF,EAAYvvD,OACnC0vD,EAAS,IAAIC,YAAYF,GACzBG,EAAO,IAAIC,SAASH,GAExB5rD,KAAKgsD,cAAcF,EAAM,EAAG,QAC5BA,EAAKG,UAAU,EAAGN,GAAgB,GAClC3rD,KAAKgsD,cAAcF,EAAM,EAAG,QAE5B9rD,KAAKgsD,cAAcF,EAAM,GAAI,QAC7BA,EAAKG,UAAU,GAAI,IAAI,GACvBH,EAAKI,UAAU,GAAI,GAAG,GACtBJ,EAAKI,UAAU,GAAI,GAAG,GACtBJ,EAAKG,UAAU,GAAIjsD,KAAK6pD,aAAa,GACrCiC,EAAKG,UAAU,GAAuB,EAAnBjsD,KAAK6pD,aAAiB,GACzCiC,EAAKI,UAAU,GAAI,GAAG,GACtBJ,EAAKI,UAAU,GAAI,IAAI,GAEvB,IAAIC,EAA0C,EAArBV,EAAYvvD,OACrC8D,KAAKgsD,cAAcF,EAAM,GAAI,QAC7BA,EAAKG,UAAU,GAAIE,GAAoB,GAKvC,IAHA,IAAIC,EAAMX,EAAYvvD,OAClB6E,EAAQ,GAEH+F,EAAI,EAAGA,EAAIslD,EAAKtlD,IACrBglD,EAAKO,SAAStrD,QAAO0qD,EAAY3kD,IAAwB,GACzD/F,GAAS,EAEb,OAAO,IAAIgkB,KAAK,CAAC+mC,GAAO,CAAEhrD,KAAM,eAEpC8oD,EAAYhmD,UAAU8nD,iBAAmB,SAAUE,EAAQU,GACvD,GAAIA,IAAStsD,KAAKqqD,oBACd,OAAOuB,EAEX,GAAIU,EAAOtsD,KAAKqqD,oBAEZ,OAAOuB,EAOX,IALA,IAAIW,EAAkBvsD,KAAKqqD,oBAAsBiC,EAC7CE,EAAYtlD,KAAKulD,MAAMb,EAAO1vD,OAASqwD,GACvCxxD,EAAS,IAAImwD,aAAasB,GAC1BE,EAAe,EACfC,EAAe,EACZD,EAAe3xD,EAAOmB,QAAQ,CAIjC,IAHA,IAAI0wD,EAAmB1lD,KAAKulD,OAAOC,EAAe,GAAKH,GACnDM,EAAQ,EACRC,EAAQ,EACH7wD,EAAI0wD,EAAc1wD,EAAI2wD,GAAoB3wD,EAAI2vD,EAAO1vD,OAAQD,IAClE4wD,GAASjB,EAAO3vD,GAChB6wD,IAEJ/xD,EAAO2xD,GAAgBG,EAAQC,EAC/BJ,IACAC,EAAeC,EAEnB,OAAO7xD,GAEX6uD,EAAYhmD,UAAU2nD,aAAe,SAAUwB,GAI3C,IAHA,IAAIhyD,EAAS,IAAImwD,aAAalrD,KAAKkqD,iBAC/Bl6B,EAAS,EACTo8B,EAAMW,EAAqB7wD,OACtBD,EAAI,EAAGA,EAAImwD,IAAOnwD,EAAG,CAC1B,IAAI2vD,EAASmB,EAAqB9wD,GAClClB,EAAOiyD,IAAIpB,EAAQ57B,GACnBA,GAAU47B,EAAO1vD,OAErB,OAAOnB,GAEX6uD,EAAYhmD,UAAUooD,cAAgB,SAAUF,EAAM97B,EAAQ51B,GAE1D,IADA,IAAIgyD,EAAMhyD,EAAM8B,OACPD,EAAI,EAAGA,EAAImwD,EAAKnwD,IACrB6vD,EAAKmB,SAASj9B,EAAS/zB,EAAG7B,EAAMuP,WAAW1N,KAG5C2tD,KAKPsD,GAAuD,WACvD,IAAIlvB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAV5B,GAkBvD8c,GAAwB,SAAUnc,GAElC,SAASmc,EAAOr8B,EAAQ4d,GACpB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KAEnD,OADA0+B,EAAMyS,WAAWrgB,GACV4N,EAgDX,OApDAwuB,GAAeC,EAAQnc,GAMvBmc,EAAOvpD,UAAUutC,WAAa,SAAUrgB,GACpC,IACIs8B,EADA1uB,EAAQ1+B,KAEZA,KAAKvG,QAAQoF,SAAS,GAAGiD,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAE1F,GADAA,EAAMwlB,kBACFsX,EAAMjlC,QAAQm4B,kBAAkBlvB,UAAU4f,SAASvL,EAA6C+D,EAAEsG,qBAAtG,CAGA,IAAIqa,EAAgB3K,EAAOA,EAAOO,aAAa53B,QAC/C,GAAK2zD,EAsBL,GAAIA,EAActD,YAAa,CAC3BsD,EAAchC,gBACdt6B,EAAO6d,IAAIuK,OACX,IAAIF,EAAO,IAAIqU,KAAK,CAACD,EAAc/B,oBAAqB,UAAW,IAAKjnD,MAAQC,UAAY,OAAQ,CAAEvD,KAAM,eAC5Gq3C,GAAYrnB,EAAQ,CAACkoB,IACrBta,EAAMjlC,QAAQoF,SAAS,GAAG6D,UAAUE,OAAO,6BAG3CkuB,EAAO6d,IAAIpP,KAAK3pB,OAAOmJ,WAAWuuC,WAClC7xB,EAAclhC,aAAa,kBAAmB,SAC9C6yD,EAAcjC,2BACdzsB,EAAMjlC,QAAQoF,SAAS,GAAG6D,UAAUlG,IAAI,6BAhCxC05B,UAAUq3B,aAAaC,aAAa,CAAEC,OAAO,IAAQvwD,MAAK,SAAUwwD,IAChEN,EAAgB,IAAIxD,GAAY8D,IAClB/C,SAASE,eAAiB,SAAUppD,GAE9C,GAAK2rD,EAActD,YAAnB,CAIA,IAAIjwC,EAAOpY,EAAEksD,YAAYC,eAAe,GACpCnuB,EAAQh+B,EAAEksD,YAAYC,eAAe,GACzCR,EAAcrC,iBAAiBlxC,EAAM4lB,KAEzC2tB,EAAcjC,2BACdr6B,EAAO6d,IAAIpP,KAAK3pB,OAAOmJ,WAAWuuC,WAClC7xB,EAAclhC,aAAa,kBAAmB,SAC9CmkC,EAAMjlC,QAAQoF,SAAS,GAAG6D,UAAUlG,IAAI,2BACzCipB,OAAM,WACLqL,EAAO6d,IAAIpP,KAAK3pB,OAAOmJ,WAAW,uBAmB3CouC,GACT1e,IAIEof,GAAqD,WACrD,IAAI7vB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAV9B,GAiBrDyd,GAAsB,SAAU9c,GAEhC,SAAS8c,EAAKh9B,EAAQ4d,GAClB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KASnD,OARAigC,EAAe,CAAEkW,KAAMzX,EAAMjlC,SAAW,CAAC,SACzCilC,EAAMjlC,QAAQoF,SAAS,GAAGiD,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAC3FA,EAAMwlB,iBACFsX,EAAMjlC,QAAQm4B,kBAAkBlvB,UAAU4f,SAASvL,EAA6C+D,EAAEsG,sBAGtG0P,EAAO+V,KAAKsP,KAAKrlB,MAEd4N,EAEX,OAbAmvB,GAAaC,EAAM9c,GAaZ8c,GACTrf,IAIEsf,GAAqD,WACrD,IAAI/vB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAV9B,GAiBrD2d,GAAsB,SAAUhd,GAEhC,SAASgd,EAAKl9B,EAAQ4d,GAClB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KASnD,OARAigC,EAAe,CAAE4G,KAAMnI,EAAMjlC,SAAW,CAAC,SACzCilC,EAAMjlC,QAAQoF,SAAS,GAAGiD,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAC3FA,EAAMwlB,iBACFsX,EAAMjlC,QAAQm4B,kBAAkBlvB,UAAU4f,SAASvL,EAA6C+D,EAAEsG,sBAGtG0P,EAAO+V,KAAKA,KAAK/V,MAEd4N,EAEX,OAbAqvB,GAAaC,EAAMhd,GAaZgd,GACTvf,IAIEwf,GAAuD,WACvD,IAAIjwB,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAV5B,GAiBvD6d,GAA+B,SAAUld,GAEzC,SAASiH,EAAOnnB,EAAQ4d,GACpB,IAAIhQ,EAAQsS,EAAOr1B,KAAK3b,KAAM8wB,EAAQ4d,IAAa1uC,KAC/CmuD,EAAY,qBAShB,OARIr9B,EAAOzzB,QAAQ06C,OAAOc,WACtBsV,GAAa,wBAEbr9B,EAAOzzB,QAAQ06C,OAAO4B,SACtBwU,GAAa,YAAer9B,EAAOzzB,QAAQ06C,OAAO4B,OAAS,KAE/Djb,EAAMjlC,QAAQoF,SAAS,GAAG+Z,UAAY,IAAM81B,EAAStyB,MAAQ,2DAA6D+xC,EAAY,IACtIzvB,EAAMyS,WAAWrgB,GACV4N,EAuBX,OAnCAuvB,GAAehW,EAAQjH,GAcvBiH,EAAOr0C,UAAUutC,WAAa,SAAUrgB,GACpC,IAAI4N,EAAQ1+B,KACZA,KAAKvG,QAAQoF,SAAS,GAAGiD,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAC1F,GAAI88B,EAAMjlC,QAAQm4B,kBAAkBlvB,UAAU4f,SAASvL,EAA6C+D,EAAEsG,qBAGlG,OAFAxf,EAAMulB,uBACNvlB,EAAMwlB,oBAIdpnB,KAAKvG,QAAQ8I,cAAc,SAAST,iBAAiB,UAAU,SAAUF,GACrE,GAAI88B,EAAMjlC,QAAQm4B,kBAAkBlvB,UAAU4f,SAASvL,EAA6C+D,EAAEsG,qBAGlG,OAFAxf,EAAMulB,uBACNvlB,EAAMwlB,iBAGwB,IAA9BxlB,EAAM5I,OAAOo/C,MAAMl8C,QAGvBi8C,GAAYrnB,EAAQlvB,EAAM5I,OAAOo/C,MAAOx2C,EAAM5I,YAG/Ci/C,GACTxJ,IAgCE2f,GAAyB,WACzB,SAASA,EAAQt9B,GACb,IAAI4N,EAAQ1+B,KACR3C,EAAUyzB,EAAOzzB,QACrB2C,KAAKugC,SAAW,GAChBvgC,KAAKvG,QAAUE,SAASC,cAAc,OACtCoG,KAAKvG,QAAQoe,UAAY,iBACzBxa,EAAQ80B,QAAQ15B,SAAQ,SAAUi2C,EAAUzyC,GACxC,IAAI6jC,EAAcpB,EAAM2vB,QAAQv9B,EAAQ4d,EAAUzyC,GAElD,GADAyiC,EAAMjlC,QAAQP,YAAY4mC,GACtB4O,EAASvc,QAAS,CAClB,IAAIm8B,EAAiB30D,SAASC,cAAc,OAC5C00D,EAAez2C,UAAY,kCAC3By2C,EAAexsD,kBAAiB,EAAG69B,EAAgC9J,OAAO,SAAUj0B,GAChF0sD,EAAe3zD,MAAM2e,QAAU,UAEnCo1B,EAASvc,QAAQ15B,SAAQ,SAAU89C,EAAagY,GAC5ChY,EAAYzV,MAAQ,EACpBwtB,EAAep1D,YAAYwlC,EAAM2vB,QAAQv9B,EAAQylB,EAAat6C,EAAIsyD,OAEtEzuB,EAAY5mC,YAAYo1D,GACxB3tB,EAAc7P,EAAQw9B,EAAgBxuB,EAAYjhC,SAAS,QAG/DiyB,EAAOzzB,QAAQ40B,cAAcinB,MAC7Bl5C,KAAKvG,QAAQiJ,UAAUlG,IAAI,wBAE3Bs0B,EAAOzzB,QAAQ40B,cAAcC,KAC7BlyB,KAAKvG,QAAQiJ,UAAUlG,IAAI,uBAE3Bs0B,EAAOzzB,QAAQspC,QAAQjqB,SACvBoU,EAAO6V,QAAU,IAAIyf,GAAQt1B,GAC7B9wB,KAAKvG,QAAQP,YAAY43B,EAAO6V,QAAQltC,UAwGhD,OArGA20D,EAAQxqD,UAAUyqD,QAAU,SAAUv9B,EAAQ4d,EAAU3tC,GACpD,IAAIytD,EACJ,OAAQ9f,EAASh1C,MACb,IAAK,OACL,IAAK,SACL,IAAK,OACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,OACL,IAAK,eACL,IAAK,QACL,IAAK,OACL,IAAK,cACL,IAAK,OACL,IAAK,QACD80D,EAAc,IAAI/f,GAAS3d,EAAQ4d,GACnC,MACJ,IAAK,QACD8f,EAAc,IAAI7H,GAAM71B,EAAQ4d,GAChC,MACJ,IAAK,WACD8f,EAAc,IAAIrG,GAASr3B,EAAQ4d,GACnC,MACJ,IAAK,IACD8f,EAAc,IAAI/H,GAClB,MACJ,IAAK,KACD+H,EAAc,IAAIzI,GAClB,MACJ,IAAK,OACDyI,EAAc,IAAIR,GAAKl9B,EAAQ4d,GAC/B,MACJ,IAAK,OACD8f,EAAc,IAAIV,GAAKh9B,EAAQ4d,GAC/B,MACJ,IAAK,OACD8f,EAAc,IAAI7F,GAAK73B,EAAQ4d,GAC/B,MACJ,IAAK,OACD8f,EAAc,IAAI1I,GAAKh1B,EAAQ4d,GAC/B,MACJ,IAAK,UACD8f,EAAc,IAAI9E,GAAgB54B,EAAQ4d,GAC1C,MACJ,IAAK,aACD8f,EAAc,IAAI1G,GAAWh3B,EAAQ4d,GACrC,MACJ,IAAK,SACD8f,EAAc,IAAIN,GAAcp9B,EAAQ4d,GACxC,MACJ,IAAK,SACD8f,EAAc,IAAIrB,GAAOr8B,EAAQ4d,GACjC,MACJ,IAAK,OACD8f,EAAc,IAAIzF,GAAKj4B,EAAQ4d,GAC/B,MACJ,IAAK,YACD8f,EAAc,IAAIzd,GAASjgB,EAAQ4d,GACnC,MACJ,IAAK,WACD8f,EAAc,IAAIhI,GAAS11B,EAAQ4d,GACnC,MACJ,IAAK,UACD8f,EAAc,IAAIlF,GAAQx4B,EAAQ4d,GAClC,MACJ,IAAK,SACD8f,EAAc,IAAI3F,GAAO/3B,EAAQ4d,GACjC,MACJ,IAAK,UACD8f,EAAc,IAAIhF,GAAgB14B,EAAQ4d,GAC1C,MACJ,IAAK,eACD8f,EAAc,IAAItF,GAAYp4B,EAAQ4d,GACtC,MACJ,IAAK,gBACD8f,EAAc,IAAIpF,GAAat4B,EAAQ4d,GACvC,MACJ,IAAK,aACD8f,EAAc,IAAIvI,GAAUn1B,EAAQ4d,GACpC,MACJ,IAAK,gBACD8f,EAAc,IAAIrI,GAAar1B,EAAQ4d,GACvC,MACJ,IAAK,SACD8f,EAAc,IAAIrH,GAAOr2B,EAAQ4d,GACjC,MACJ,QACI8f,EAAc,IAAIlI,GAAOx1B,EAAQ4d,GAGzC,GAAK8f,EAAL,CAGA,IAAI/zD,EAAMi0C,EAASh1C,KAKnB,MAJY,OAARe,GAAwB,MAARA,IAChBA,GAAYsG,GAEhBf,KAAKugC,SAAS9lC,GAAO+zD,EAAY/0D,QAC1B+0D,EAAY/0D,UAEhB20D,KAKPnrD,GAAmB2R,EAAoB,KAUvC65C,GAA2B,WAC3B,SAAST,IACLhuD,KAAK0uD,UAAY,GACjB1uD,KAAK2uD,aAEL3uD,KAAKyK,IAAM,IAAIxH,GAuNnB,OArNA+qD,EAAKpqD,UAAUgrD,WAAa,SAAU99B,GAClC9wB,KAAK2uD,aACL3uD,KAAK6wC,UAAU/f,IAEnBk9B,EAAKpqD,UAAUitC,UAAY,SAAU/f,GAC5BA,EAAOqB,UAGRnyB,KAAK8wB,EAAOO,aAAaw9B,UAAU3yD,OAAS,EAC5C8jC,EAAclP,EAAOqB,QAAQoO,SAAU,CAAC,SAGxCN,EAAenP,EAAOqB,QAAQoO,SAAU,CAAC,SAEK,IAA9CvgC,KAAK8wB,EAAOO,aAAay9B,UAAU5yD,OACnC8jC,EAAclP,EAAOqB,QAAQoO,SAAU,CAAC,SAGxCN,EAAenP,EAAOqB,QAAQoO,SAAU,CAAC,WAGjDytB,EAAKpqD,UAAUijC,KAAO,SAAU/V,GAC5B,GAA2E,UAAvEA,EAAOA,EAAOO,aAAa53B,QAAQa,aAAa,sBAGhD0F,KAAK8wB,EAAOO,aAAaw9B,UAAU3yD,OAAS,GAAhD,CAGA,IAAI6yD,EAAQ/uD,KAAK8wB,EAAOO,aAAaw9B,UAAUxyD,MAC1C0yD,IAGL/uD,KAAK8wB,EAAOO,aAAay9B,UAAUlzD,KAAKmzD,GACxC/uD,KAAKgvD,WAAWD,EAAOj+B,GACvB9wB,KAAK8wB,EAAOO,aAAa49B,SAAU,EAEnC7uB,EAAUtP,EAAQ,CAAC,YAEvBk9B,EAAKpqD,UAAUuyC,KAAO,SAAUrlB,GAC5B,GAA2E,UAAvEA,EAAOA,EAAOO,aAAa53B,QAAQa,aAAa,mBAApD,CAGA,IAAIy0D,EAAQ/uD,KAAK8wB,EAAOO,aAAay9B,UAAUzyD,MAC1C0yD,IAGL/uD,KAAK8wB,EAAOO,aAAaw9B,UAAUjzD,KAAKmzD,GACxC/uD,KAAKgvD,WAAWD,EAAOj+B,GAAQ,MAEnCk9B,EAAKpqD,UAAUmvC,oBAAsB,SAAUjiB,EAAQlvB,GACnD,GAAkC,IAA9BwX,eAAe2gB,cAG+B,IAA9C/5B,KAAK8wB,EAAOO,aAAaw9B,UAAU3yD,QAAiE,IAAjD8D,KAAK8wB,EAAOO,aAAaw9B,UAAU,GAAG3yD,QACzF8D,KAAK8wB,EAAOO,aAAay9B,UAAU5yD,OAAS,IAG5C,EAAGyjC,EAA6BhK,OAAuB,cAAd/zB,EAAMnH,MAI/C,EAAGklC,EAA4BjK,OAAnC,CAIA,IAAI37B,EAAOiG,KAAKkvD,SAASp+B,GACrB/2B,EAAKgV,QAAQ,QAAS,IAAIA,QAAQ,2BAA4B,MAC1D/O,KAAK8wB,EAAOO,aAAaw9B,UAAU,GAAG,GAAG9pD,MAAM,GAAG,GAAGgK,QAAQ,QAAS,MAI9E/O,KAAK8wB,EAAOO,aAAaw9B,UAAU,GAAG,GAAG9pD,MAAM,GAAG,GAAKhL,EACvDiG,KAAK8wB,EAAOO,aAAa89B,SAAWp1D,KAGxCi0D,EAAKpqD,UAAUkjC,eAAiB,SAAUhW,GAEtC,IAAI/2B,EAAOiG,KAAKkvD,SAASp+B,GAAQ,GAC7Bs+B,EAAOpvD,KAAKyK,IAAI5G,UAAU9J,EAAMiG,KAAK8wB,EAAOO,aAAa89B,UAAU,GACnEE,EAAYrvD,KAAKyK,IAAIqH,WAAW/X,EAAMiG,KAAK8wB,EAAOO,aAAa89B,SAAUC,GACpD,IAArBC,EAAUnzD,QAAgB8D,KAAK8wB,EAAOO,aAAaw9B,UAAU3yD,OAAS,IAG1E8D,KAAK8wB,EAAOO,aAAa89B,SAAWp1D,EACpCiG,KAAK8wB,EAAOO,aAAaw9B,UAAUjzD,KAAKyzD,GACpCrvD,KAAK8wB,EAAOO,aAAaw9B,UAAU3yD,OAAS8D,KAAK0uD,WACjD1uD,KAAK8wB,EAAOO,aAAaw9B,UAAU/6C,QAEnC9T,KAAK8wB,EAAOO,aAAa49B,UACzBjvD,KAAK8wB,EAAOO,aAAay9B,UAAY,GACrC9uD,KAAK8wB,EAAOO,aAAa49B,SAAU,EACnChvB,EAAenP,EAAOqB,QAAQoO,SAAU,CAAC,UAEzCvgC,KAAK8wB,EAAOO,aAAaw9B,UAAU3yD,OAAS,GAC5C8jC,EAAclP,EAAOqB,QAAQoO,SAAU,CAAC,WAGhDytB,EAAKpqD,UAAUorD,WAAa,SAAUD,EAAOj+B,EAAQw+B,GAEjD,IAAIv1D,EACJ,QAFe,IAAXu1D,IAAqBA,GAAS,GAE9BA,EAAQ,CACR,IAAIC,EAAgBvvD,KAAKyK,IAAIiI,eAAeq8C,GAAOvR,UACnD+R,EAAc92D,SAAQ,SAAU6Y,GAC5BA,EAAMvM,MAAMtM,SAAQ,SAAU22D,GAC1BA,EAAK,IAAMA,EAAK,SAGxBr1D,EAAOiG,KAAKyK,IAAIoI,YAAY08C,EAAevvD,KAAK8wB,EAAOO,aAAa89B,UAAU,QAG9Ep1D,EAAOiG,KAAKyK,IAAIoI,YAAYk8C,EAAO/uD,KAAK8wB,EAAOO,aAAa89B,UAAU,GAU1E,GARAnvD,KAAK8wB,EAAOO,aAAa89B,SAAWp1D,EACpC+2B,EAAOA,EAAOO,aAAa53B,QAAQmf,UAAY7e,EACpB,OAAvB+2B,EAAOO,aACPP,EAAOA,EAAOO,aAAa53B,QAAQsc,iBAAiB,WAAa+a,EAAOO,YAAc,8BACjF54B,SAAQ,SAAUigC,GACnBsI,EAAkBtI,EAAc5H,MAGnCA,EAAOA,EAAOO,aAAa53B,QAAQ8I,cAAc,QAOlD,EAAG8U,EAA6BoiB,IAAI3I,EAAOA,EAAOO,aAAa53B,QAASq3B,EAAOA,EAAOO,aAAa53B,QAAQygC,cAAcC,eACzHgL,GAAarU,OAR6C,CAE1D,IAAIgJ,EAAQ1gB,eAAeG,WAAW,GACtCugB,EAAMwC,aAAaxL,EAAOA,EAAOO,aAAa53B,SAC9CqgC,EAAMO,UAAS,GAMnBmH,GAAgB1Q,EAAQ,CACpBuS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEjBiK,GAAiB1c,GACjBA,EAAOA,EAAOO,aAAa53B,QAAQsc,iBAAiB,WAAa+a,EAAOO,YAAc,8BACjF54B,SAAQ,SAAU2f,GACnB4oB,EAAkB5oB,EAAM0Y,MAExB9wB,KAAK8wB,EAAOO,aAAaw9B,UAAU3yD,OAAS,EAC5C8jC,EAAclP,EAAOqB,QAAQoO,SAAU,CAAC,SAGxCN,EAAenP,EAAOqB,QAAQoO,SAAU,CAAC,SAEK,IAA9CvgC,KAAK8wB,EAAOO,aAAay9B,UAAU5yD,OACnC8jC,EAAclP,EAAOqB,QAAQoO,SAAU,CAAC,SAGxCN,EAAenP,EAAOqB,QAAQoO,SAAU,CAAC,UAGjDytB,EAAKpqD,UAAU+qD,WAAa,WACxB3uD,KAAKu+B,GAAK,CACN0wB,SAAS,EACTE,SAAU,GACVL,UAAW,GACXD,UAAW,IAEf7uD,KAAKm+B,GAAK,CACN8wB,SAAS,EACTE,SAAU,GACVL,UAAW,GACXD,UAAW,IAEf7uD,KAAKq+B,QAAU,CACX4wB,SAAS,EACTE,SAAU,GACVL,UAAW,GACXD,UAAW,KAGnBb,EAAKpqD,UAAUsrD,SAAW,SAAUp+B,EAAQ0+B,GAExC,IAAIh2C,EACJ,QAFiB,IAAbg2C,IAAuBA,GAAW,GAEJ,IAA9Bp2C,eAAe2gB,aAAqBjJ,EAAOA,EAAOO,aAAa53B,QAAQ8I,cAAc,OAAQ,CAC7F,IAAIu3B,EAAQ1gB,eAAeG,WAAW,GACtC,GAAIuX,EAAOA,EAAOO,aAAa53B,QAAQ6oB,SAASwX,EAAME,gBAAiB,CACnExgB,EAAasgB,EAAMtgB,aACnB,IAAIijB,EAAa9iC,SAASC,cAAc,QACxC6iC,EAAW5kB,UAAY,aACvBiiB,EAAM+C,WAAWJ,IAIN3L,EAAOyN,GAAG9kC,QAAQ6jC,WAAU,GAClCvnB,iBAAiB,WAAa+a,EAAOO,YAAc,8BAC3D54B,SAAQ,SAAU2f,IACfA,EAAKwZ,kBAAkBlvB,UAAU4f,SAAS,qBAC1ClK,EAAKwZ,kBAAkBlvB,UAAU4f,SAAS,sBAC1ClK,EAAKwZ,kBAAkBlvB,UAAU4f,SAAS,uBAC1ClK,EAAKwZ,kBAAkBv3B,gBAAgB,sBACvC+d,EAAKwZ,kBAAkBv3B,gBAAgB,kBACvC+d,EAAKwZ,kBAAkBhZ,UAAYR,EAAKskB,uBAAuB9K,kBAAkBhZ,UACjFR,EAAK7d,aAAa,cAAe,MAEjC6d,EAAKwZ,kBAAkBlvB,UAAU4f,SAAS,mBAC1ClK,EAAK7d,aAAa,cAAe,KACjC6d,EAAKwZ,kBAAkBxO,YAAchL,EAAKwZ,kBAAkBt3B,aAAa,aACzE8d,EAAKwZ,kBAAkBv3B,gBAAgB,iBAG/C,IAAIN,EAAO+2B,EAAOA,EAAOO,aAAa53B,QAAQmf,UAQ9C,OAPAkY,EAAOA,EAAOO,aAAa53B,QAAQsc,iBAAiB,eAAetd,SAAQ,SAAU2f,GACjFA,EAAKxV,YAGL4sD,GAAYh2C,IACZ,EAAGnC,EAAiC6B,IAAIM,GAErCzf,EAAKgV,QAAQ,mCAAoC,UAErDi/C,KAKP72C,GAAQvC,EAAoB,KAI5B66C,GAAyB,WACzB,SAASA,EAAQpyD,GACb2C,KAAK2mB,eAAiB,CAClB3G,WAAOzW,EACPy8B,MAAO,CACHtpB,QAAQ,GAEZZ,IAAK/E,EAA6B+D,EAAEiB,IACpC2nC,QAAS,CACL5iC,QAAS,IAEbuxB,QAAS,CACL31B,QAAQ,GAEZiqB,QAAS,CACLjqB,QAAQ,EACR5b,KAAM,YAEV8hC,UAAU,EACVqlB,WAAY,CACRlnD,MAAO,IAEX+U,OAAQ,OACR2qB,KAAM,CACFyhB,MAAO,IACP1hB,MAAO,CACH,KAAM,KACN,KAAM,KACNkvB,SAAY,KACZC,KAAQ,MACRC,MAAS,KACTC,OAAU,MACVC,MAAS,KACTC,KAAQ,OAEZ9zC,UAAWlF,EAA6B+D,EAAEiB,IAAM,qBAChD22B,OAAQ,GACRhvB,OAAO,GAEXtH,KAAM,MACN7E,KAAM,QACNrX,KAAM,KACNkhC,QAAS,CACL1kB,QAAQ,EACRuT,SAAU,QAEd+yB,YAAa,GACbliC,QAAS,CACL8iC,QAAS,CAAC,UAAW,SAAU,SAAU,YAAa,SACtD1B,MAAO,IACPhmC,KAAMnF,EAAsC+D,EAAEqB,aAC9CE,SAAUtF,EAA0C+D,EAAEwB,iBACtDC,KAAMxF,EAAsC+D,EAAE0B,aAC9C+oB,SAAU,IACVrlC,KAAM,OACNyc,MAAO5F,EAAuC+D,EAAE8B,eAEpD8iB,OAAQ,CACJhjB,QAAQ,EACRuT,SAAU,UAEdtT,MAAO,UACPwV,QAAS,CACL,QACA,WACA,OACA,SACA,SACA,OACA,IACA,OACA,eACA,QACA,UACA,SACA,IACA,QACA,OACA,OACA,cACA,gBACA,eACA,IACA,SACA,SACA,QACA,IACA,OACA,OACA,IACA,aACA,YACA,CACIz4B,KAAM,OACNy4B,QAAS,CACL,OACA,aACA,gBACA,SACA,UACA,UACA,WACA,OACA,UAIZF,cAAe,CACXinB,MAAM,EACNhnB,KAAK,GAETyT,gBAAgB,EAChBoB,UAAW,IACXgR,OAAQ,CACJY,UAAW,GACXsB,UAAW,SACXP,SAAU,SAAUhgD,GAAQ,OAAOA,EAAKqV,QAAQ,MAAO,KACvDoxC,aAAc,GACdt0C,IAAK,SACLgtC,UAAU,EACVz2C,IAAK,GACL+3C,iBAAiB,GAErB//C,MAAO,GACP+1B,MAAO,QAEXnwB,KAAK3C,QAAUA,EAwRnB,OAtRAoyD,EAAQ7rD,UAAUuT,MAAQ,WACtB,IAAIyH,EAAI+zB,EAAIC,EACR5yC,KAAK3C,UACD2C,KAAK3C,QAAQ80B,QACbnyB,KAAK3C,QAAQ80B,QAAUnyB,KAAKgwD,aAAahwD,KAAK3C,QAAQ80B,SAGtDnyB,KAAK3C,QAAQ80B,QAAUnyB,KAAKgwD,aAAahwD,KAAK2mB,eAAewL,UAEwB,QAApFwgB,EAAqC,QAA/B/zB,EAAK5e,KAAK3C,QAAQyjB,eAA4B,IAAPlC,OAAgB,EAASA,EAAGjC,aAA0B,IAAPg2B,OAAgB,EAASA,EAAGhxB,QACzH3hB,KAAK2mB,eAAe7F,QAAQnE,MAAMgF,KAAO3hB,KAAK3C,QAAQyjB,QAAQnE,MAAMgF,OAEvC,QAA5BixB,EAAK5yC,KAAK3C,QAAQojC,YAAyB,IAAPmS,OAAgB,EAASA,EAAGpS,SACjExgC,KAAK2mB,eAAe8Z,KAAKD,MAAQxgC,KAAK3C,QAAQojC,KAAKD,OAEnDxgC,KAAK3C,QAAQg1C,UACbryC,KAAK2mB,eAAe0rB,QAAUryC,KAAK3C,QAAQg1C,UAGnD,IAAIr1B,GAAgB,EAAG7F,GAAiB0F,GAAG7c,KAAK2mB,eAAgB3mB,KAAK3C,SACrE,GAAI2f,EAAcgpB,MAAMtpB,SAAWM,EAAcgpB,MAAMtmB,GACnD,MAAM,IAAInb,MAAM,8EAEpB,OAAOyY,GAEXyyC,EAAQ7rD,UAAUosD,aAAe,SAAU79B,GACvC,IAAIuM,EAAQ1+B,KACRiwD,EAAc,CACd,CACI7zC,KAAM,0DACN1iB,KAAM,SACNm1C,YAAa,MAEjB,CACI9X,OAAQ,KACR3a,KAAM,yDACN1iB,KAAM,QACNm1C,YAAa,MAEjB,CACI9X,OAAQ,KACR3a,KAAM,4DACN1iB,KAAM,WACNm1C,YAAa,MAEjB,CACI9X,OAAQ,KACR3a,KAAM,wDACN1iB,KAAM,OACNgY,OAAQ,KACRC,OAAQ,KACRk9B,YAAa,MAEjB,CACI9X,OAAQ,KACR3a,KAAM,0DACN1iB,KAAM,SACNgY,OAAQ,IACRC,OAAQ,IACRk9B,YAAa,MAEjB,CACI9X,OAAQ,KACR3a,KAAM,0DACN1iB,KAAM,SACNgY,OAAQ,KACRC,OAAQ,KACRk9B,YAAa,MAEjB,CACI9X,OAAQ,KACR3a,KAAM,wDACN1iB,KAAM,OACNgY,OAAQ,IACRC,OAAQ,cACRk9B,YAAa,KAEjB,CACIn1C,KAAM,KAEV,CACIq9B,OAAQ,KACR3a,KAAM,wDACN1iB,KAAM,OACNgY,OAAQ,KACRm9B,YAAa,KAEjB,CACI9X,OAAQ,KACR3a,KAAM,gEACN1iB,KAAM,eACNgY,OAAQ,MACRm9B,YAAa,KAEjB,CACI9X,OAAQ,KACR3a,KAAM,yDACN1iB,KAAM,QACNgY,OAAQ,SACRm9B,YAAa,KAEjB,CACI9X,OAAQ,MACR3a,KAAM,2DACN1iB,KAAM,UACNm1C,YAAa,KAEjB,CACI9X,OAAQ,MACR3a,KAAM,0DACN1iB,KAAM,SACNm1C,YAAa,KAEjB,CACIn1C,KAAM,KAEV,CACIq9B,OAAQ,KACR3a,KAAM,yDACN1iB,KAAM,QACNgY,OAAQ,KACRm9B,YAAa,KAEjB,CACI9X,OAAQ,MACR3a,KAAM,wDACN1iB,KAAM,OACNgY,OAAQ,MACRm9B,YAAa,KAEjB,CACI9X,OAAQ,KACR3a,KAAM,wDACN1iB,KAAM,OACNgY,OAAQ,MACRC,OAAQ,QACRk9B,YAAa,KAEjB,CACI9X,OAAQ,KACR3a,KAAM,+DACN1iB,KAAM,cACNgY,OAAQ,IACRC,OAAQ,IACRk9B,YAAa,KAEjB,CACI9X,OAAQ,MACR3a,KAAM,0DACN1iB,KAAM,gBACNm1C,YAAa,KAEjB,CACI9X,OAAQ,MACR3a,KAAM,yDACN1iB,KAAM,eACNm1C,YAAa,KAEjB,CACIn1C,KAAM,KAEV,CACI0iB,KAAM,0DACN1iB,KAAM,SACNm1C,YAAa,KAEjB,CACIzyB,KAAM,0DACN1iB,KAAM,SACNm1C,YAAa,KAEjB,CACI9X,OAAQ,KACR3a,KAAM,yDACN1iB,KAAM,QACNgY,OAAQ,SACRC,OAAQ,gEACRk9B,YAAa,KAEjB,CACIn1C,KAAM,KAEV,CACIq9B,OAAQ,KACR3a,KAAM,wDACN1iB,KAAM,OACNm1C,YAAa,MAEjB,CACI9X,OAAQ,KACR3a,KAAM,wDACN1iB,KAAM,OACNm1C,YAAa,MAEjB,CACIn1C,KAAM,KAEV,CACI0iB,KAAM,wDACN1iB,KAAM,OACNm1C,YAAa,KAEjB,CACI9X,OAAQ,KACR3a,KAAM,8DACN1iB,KAAM,aACNm1C,YAAa,MAEjB,CACIzyB,KAAM,wDACN1iB,KAAM,YACNm1C,YAAa,MAEjB,CACI9X,OAAQ,KACR3a,KAAM,wDACN1iB,KAAM,OACNm1C,YAAa,MAEjB,CACIzyB,KAAM,2DACN1iB,KAAM,UACNm1C,YAAa,MAEjB,CACIzyB,KAAM,gEACN1iB,KAAM,UACNm1C,YAAa,MAEjB,CACIzyB,KAAM,yDACN1iB,KAAM,gBACNm1C,YAAa,MAEjB,CACIzyB,KAAM,8DACN1iB,KAAM,aACNm1C,YAAa,MAEjB,CACIzyB,KAAM,uDACN1iB,KAAM,WACNm1C,YAAa,MAEjB,CACIzyB,KAAM,wDACN1iB,KAAM,OACNm1C,YAAa,MAEjB,CACIzyB,KAAM,wDACN1iB,KAAM,OACNm1C,YAAa,MAEjB,CACIn1C,KAAM,OAGVw2D,EAAgB,GAkBpB,OAjBA/9B,EAAQ15B,SAAQ,SAAUi2C,GACtB,IAAIyhB,EAAkBzhB,EACtBuhB,EAAYx3D,SAAQ,SAAU23D,GACF,iBAAb1hB,GACP0hB,EAAgB12D,OAASg1C,IACzByhB,EAAkBC,GAEE,iBAAb1hB,GACP0hB,EAAgB12D,OAASg1C,EAASh1C,OAClCy2D,EAAkB93D,OAAOuuB,OAAO,GAAIwpC,EAAiB1hB,OAGzDA,EAASvc,UACTg+B,EAAgBh+B,QAAUuM,EAAMsxB,aAAathB,EAASvc,UAE1D+9B,EAAct0D,KAAKu0D,MAEhBD,GAEJT,KAmBPY,GAAyB,WACzB,SAASA,EAAQv/B,GACb,IAAI4N,EAAQ1+B,KACZA,KAAK0mC,eAAgB,EACrB1mC,KAAKswD,WAAa,GAClB,IAAIpsC,EAAavqB,SAASC,cAAc,OACxCsqB,EAAWrM,UAAY,iBACvBqM,EAAWtL,UAAY,0CAA+CkY,EAAOzzB,QAAQ2lD,YAAc,mMAAiNptC,OAAOmJ,WAAWszB,QAAU,yJAChVryC,KAAKvG,QAAUyqB,EAAW0N,kBAC1B5xB,KAAK0gC,QAAUxc,EAAW0N,kBAAkBC,mBAC5C7xB,KAAKyxC,cAAgBvtB,EAAWiZ,iBAChCn9B,KAAKijD,UAAUnyB,GACfugB,GAAWvgB,EAAQ9wB,KAAKvG,SACxB63C,GAAcxgB,EAAQ9wB,KAAKvG,SAC3B83C,GAAUzgB,EAAQ9wB,KAAKvG,SACvBg5C,GAAY3hB,EAAQ9wB,KAAKvG,SACzBg9C,GAAY3lB,EAAQ9wB,KAAKvG,SACzBo4C,GAAU/gB,EAAQ9wB,KAAKvG,SACvB04C,GAAUrhB,EAAQ9wB,KAAKvG,QAASuG,KAAKmkB,MACrCiuB,GAASthB,EAAQ9wB,KAAKvG,QAASuG,KAAKmkB,MAChC2M,EAAOzzB,QAAQg1C,QAAQ31B,SACvB1c,KAAKyxC,cAAclvC,cAAc,UAAUgW,QAAU,WACjD,IAIIg4C,EACAC,EALA9wC,EAAK+R,KAAKg/B,YACV32B,EAAQ1gB,eAAeG,WAAW,GAClCm3C,EAAa52B,EAAMtgB,aACnBm3C,EAAW72B,EAAM+Z,kBAGjB+c,GAAc,EACdC,GAAY,EAChBF,EAAS/xD,WAAWnG,SAAQ,SAAU2f,EAAMrX,GACxC,IAAI+vD,GAAO,EAUX,GATsB,IAAlB14C,EAAKmgB,SACLu4B,GAAO,EAED14C,EAAK1V,UAAU4f,SAAS,kBAGzBlK,EAAK1V,UAAU4f,SAAS,mBAC7BlK,EAAK7d,aAAa,cAAe6d,EAAK9d,aAAa,eAAiB,IAAMolB,GAH1EoxC,GAAO,EAKPA,EACA,GAAsB,IAAlB14C,EAAKmgB,UAAsD,MAApCngB,EAAK9d,aAAa,eAC5B,IAAVyG,GAAe2vD,EAAW91B,YAAc,EAC3CxiB,EAAKQ,UACD,6CAAkD8G,EAAK,KAAQtH,EAAKQ,UAAY,UACpF23C,EAAoBn4C,OAEnB,GAAsB,IAAlBA,EAAKmgB,UAAsD,MAApCngB,EAAK9d,aAAa,eAC3CyG,IAAU4vD,EAAS/xD,WAAW1C,OAAS,GACvCw0D,EAAW11B,UAAY01B,EAAW31B,aAAa3X,YAAYlnB,OAC9Dkc,EAAKQ,UACD,6CAAkD8G,EAAK,KAAQtH,EAAKQ,UAAY,UACpF43C,EAAkBp4C,OAEjB,GAAsB,IAAlBA,EAAKmgB,UAAsD,MAApCngB,EAAK9d,aAAa,cAChC,IAAVyG,EACA6vD,GAAc,EAET7vD,IAAU4vD,EAAS/xD,WAAW1C,OAAS,IAC5C20D,GAAY,GAEhBz4C,EAAKQ,UACD,6CAAkD8G,EAAK,KAAQtH,EAAKQ,UAAY,cAEnF,CACD,IAAIsvB,EAAiBvuC,SAASC,cAAc,QAC5CsuC,EAAexlC,UAAUlG,IAAI,kBAC7B0rC,EAAe3tC,aAAa,cAAemlB,GAC3CtH,EAAK7e,WAAWF,aAAa6uC,EAAgB9vB,GAC7C8vB,EAAehvC,YAAYkf,OAIvC,IAAI24C,GAAe,EAAG75C,EAAgCsgB,IAAIk5B,EAAW12B,gBACjE+2B,IACIR,GACAQ,EAAazqC,mBAAmB,YAAaiqC,EAAkB33C,WAC/D23C,EAAkB3tD,UAEyE,KAAtFmuD,EAAa3tC,YAAY/J,OAAOtK,QAAQgI,EAA8B+D,EAAEmG,KAAM,KAAc2vC,GACjGG,EAAanuD,UAGrB,IAAIouD,GAAa,EAAG95C,EAAgCsgB,IAAIk5B,EAAW31B,cAC/Di2B,IACIR,GACAQ,EAAW1qC,mBAAmB,aAAckqC,EAAgB53C,WAC5D43C,EAAgB5tD,UAEyE,KAApFouD,EAAW5tC,YAAY/J,OAAOtK,QAAQgI,EAA8B+D,EAAEmG,KAAM,KAAc4vC,GAC/FG,EAAWpuD,UAGnBk3B,EAAM+C,WAAW8zB,GACjB7/B,EAAOzzB,QAAQg1C,QAAQ71C,IAAIkjB,EAAIoa,EAAMxlB,WAAYoqB,EAAM4T,YAAYxhB,GAAQ,IAC3E0V,EAAiB1V,EAAQ,CACrBuS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,IAEjB7E,EAAMiT,gBAqXlB,OAjXA0e,EAAQzsD,UAAU0uC,YAAc,SAAUxhB,EAAQihB,GAC9C,IAAIrT,EAAQ1+B,KAEZ,QADgB,IAAZ+xC,IAAsBA,GAAU,GACT,YAAvBjhB,EAAOO,cAA6BP,EAAOzzB,QAAQg1C,QAAQ31B,OAmB3D,MAAO,GAlBP1c,KAAKswD,WAAa,GAClBtwD,KAAKvG,QAAQsc,iBAAiB,mBAAmBtd,SAAQ,SAAU2f,GAC/DsmB,EAAM4xB,WACF5xB,EAAM4xB,WAAWxqD,OAAOsS,EAAK9d,aAAa,eAAegI,MAAM,SAEvEtC,KAAKswD,WAAa5xD,MAAMC,KAAK,IAAI5C,IAAIiE,KAAKswD,aAC1C,IAAIW,EAAa,GACjB,OAAIlf,GACA/xC,KAAKswD,WAAW73D,SAAQ,SAAUinB,GAC9BuxC,EAAWr1D,KAAK,CACZ8jB,GAAIA,EACJ/F,IAAK+kB,EAAMjlC,QAAQ8I,cAAc,gCAAmCmd,EAAK,MAAOG,eAGjFoxC,QAPX,GAcRZ,EAAQzsD,UAAUk4C,qBAAuB,SAAUhrB,GAC/C,IAA2Bj4B,EAAGC,EACtBqX,EAGR,GAA2B,YAAvB2gB,EAAOO,aAA6BP,EAAOzzB,QAAQg1C,QAAQ31B,QAAUoU,EAAOuN,QAAQiyB,WAAWp0D,OAAS,EAAG,CAC3G,IAAIg1D,EAASztC,KAAKC,MAAMD,KAAKi9B,UAAU1gD,KAAKswD,aAC5CtwD,KAAKsyC,YAAYxhB,GACjB,IAAIqgC,GAPmBt4D,EAOKq4D,EAPFp4D,EAOUkH,KAAKswD,WANrCngD,EAAI,IAAIpU,IAAIjD,GACTD,EAAE2G,QAAO,SAAUgI,GAAK,OAAQ2I,EAAE5T,IAAIiL,OAMzC2pD,EAAWj1D,OAAS,GACpB40B,EAAOzzB,QAAQg1C,QAAQzvC,OAAOuuD,KAI1Cd,EAAQzsD,UAAUgzC,YAAc,WAC5B,IAAI3mB,GAAW,EAAG5Y,EAAiCgiB,IAAIr5B,KAAKvG,SAC5DuG,KAAKyxC,cAAcl3C,aAAa,QAAS,QAAU01B,EAASpW,KAAO,wBAA0B3S,KAAK2E,KAAK,EAAGokB,EAAStW,IAAM,IAAM,OAEnI02C,EAAQzsD,UAAU+tC,YAAc,WAC5B3xC,KAAKyxC,cAAcl3C,aAAa,QAAS,iBAE7C81D,EAAQzsD,UAAUugB,KAAO,SAAUviB,EAAOkvB,GACtC,IAAIgJ,EAAQ1gB,eAAeG,WAAW,GACtC,GAAyB,KAArBugB,EAAMxlB,WAAV,CAGA1S,EAAMulB,kBACNvlB,EAAMwlB,iBACN,IAAInD,GAAc,EAAG/M,EAAqCgJ,IAAI4Z,EAAME,eAAgB,QAChFo3B,GAAiB,EAAGl6C,EAAqCgJ,IAAI4Z,EAAMiB,aAAc,QACrF,GAAI9W,GAAemtC,GAAkBA,EAAez0B,WAAW1Y,GAAc,CACzE,IAAID,EAAW,GASf,OAPIA,EADsC,QAAtCC,EAAY5B,cAAc2E,QACf8S,EAAMxlB,WAGN,IAAMwlB,EAAMxlB,WAAa,IAExC1S,EAAM4lB,cAAcC,QAAQ,aAAczD,QAC1CpiB,EAAM4lB,cAAcC,QAAQ,YAAa,IAG7C,IAAIoB,GAAW,EAAG3R,EAAqCgJ,IAAI4Z,EAAME,eAAgB,KAC7Eq3B,GAAc,EAAGn6C,EAAqCgJ,IAAI4Z,EAAMiB,aAAc,KAClF,GAAIlS,GAAYwoC,GAAeA,EAAY10B,WAAW9T,GAAW,CAC7D,IAAIyoC,EAASzoC,EAASvuB,aAAa,UAAY,GAM/C,OALIg3D,IACAA,EAAS,KAAQA,EAAS,KAE9B1vD,EAAM4lB,cAAcC,QAAQ,aAAc,IAAMqS,EAAMxlB,WAAa,KAAOuU,EAASvuB,aAAa,QAAUg3D,EAAS,UACnH1vD,EAAM4lB,cAAcC,QAAQ,YAAa,IAG7C,IAAI0J,EAAcx3B,SAASC,cAAc,OACzCu3B,EAAYj4B,YAAY4gC,EAAM+iB,iBAC9Bj7C,EAAM4lB,cAAcC,QAAQ,aAAcqJ,EAAO5T,KAAKkhB,aAAajN,EAAYvY,WAAWS,QAC1FzX,EAAM4lB,cAAcC,QAAQ,YAAa,MAE7C4oC,EAAQzsD,UAAUq/C,UAAY,SAAUnyB,GACpC,IAAI4N,EAAQ1+B,KACZ4V,OAAO9T,iBAAiB,UAAU,WAE9B,GADAs+B,EAAUtP,EAAQ,CAAC,SACiB,UAAhC4N,EAAMgC,QAAQ/lC,MAAM2e,SAA6D,UAAtColB,EAAM+S,cAAc92C,MAAM2e,QAAzE,CAGA,IAAIK,EAAM5J,SAAS2uB,EAAMgC,QAAQpmC,aAAa,YAAa,IAC3D,GAA8B,SAA1Bw2B,EAAOzzB,QAAQyY,QAYd,GAAKgb,EAAOzzB,QAAQ40B,cAAcC,IAAlC,CAGL,IAAIq/B,EAAcrqD,KAAK2E,IAAI8N,EAAM/D,OAAOyc,QAAUvB,EAAOr3B,QAAQomB,UAAY,GAAM,KAC/C,UAAhC6e,EAAMgC,QAAQ/lC,MAAM2e,UACpBolB,EAAMgC,QAAQ/lC,MAAMgf,IAAM43C,GAEY,UAAtC7yB,EAAM+S,cAAc92C,MAAM2e,UAC1BolB,EAAM+S,cAAc92C,MAAMgf,IAAM43C,SAnBhC,GAAIzgC,EAAOzzB,QAAQ40B,cAAcC,KAA8D,IAAvDpB,EAAOqB,QAAQ14B,QAAQigB,wBAAwBC,IAAW,CAC9F,IAAI63C,EAAatqD,KAAK2E,IAAI+J,OAAOyc,QAAUvB,EAAOr3B,QAAQomB,UAAY,EAAG3Y,KAAK6C,IAAI4P,EAAMmX,EAAOuN,QAAQ5kC,QAAQmgB,UAAW8kB,EAAMjlC,QAAQy6B,aAAe,KAAO,KAC1H,UAAhCwK,EAAMgC,QAAQ/lC,MAAM2e,UACpBolB,EAAMgC,QAAQ/lC,MAAMgf,IAAM63C,GAEY,UAAtC9yB,EAAM+S,cAAc92C,MAAM2e,UAC1BolB,EAAM+S,cAAc92C,MAAMgf,IAAM63C,QAgBhDxxD,KAAKvG,QAAQqI,iBAAiB,UAAU,WAKpC,GAJAs+B,EAAUtP,EAAQ,CAAC,SACfA,EAAOzzB,QAAQg1C,SAAWvhB,EAAOzzB,QAAQg1C,QAAQ31B,QAAUoU,EAAOzzB,QAAQg1C,QAAQof,QAClF3gC,EAAOzzB,QAAQg1C,QAAQof,OAAO3gC,EAAOuN,QAAQ5kC,QAAQmgB,WAErB,UAAhC8kB,EAAMgC,QAAQ/lC,MAAM2e,QAAxB,CAGA,IAAIK,EAAM5J,SAAS2uB,EAAMgC,QAAQpmC,aAAa,YAAa,IAAMw2B,EAAOuN,QAAQ5kC,QAAQmgB,UACpF/N,GAAO,EACPilB,EAAOzzB,QAAQ40B,cAAcC,KAA8D,IAAvDpB,EAAOqB,QAAQ14B,QAAQigB,wBAAwBC,MACnF9N,EAAM+J,OAAOyc,QAAUvB,EAAOr3B,QAAQomB,UAAYhU,GAEtD,IAAI6lD,EAAQxqD,KAAK2E,IAAIA,EAAK3E,KAAK6C,IAAI4P,EAAK+kB,EAAMjlC,QAAQy6B,aAAe,KAAO,KAC5EwK,EAAMgC,QAAQ/lC,MAAMgf,IAAM+3C,EAC1BhzB,EAAM+S,cAAc92C,MAAMgf,IAAM+3C,MAEpC1xD,KAAKvG,QAAQqI,iBAAiB,SAAS,SAAUF,GAC7CqwC,GAAMnhB,EAAQlvB,EAAO,CACjBswC,UAAW,SAAUrtB,GACjB,IAAIiV,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAC7C73B,EAAOU,SAASC,cAAc,YAClCX,EAAK2f,UAAYiM,EACjBiV,EAAM+C,WAAW5jC,EAAKokC,QAAQC,WAAU,IACxC,IAAI5E,GAAe,EAAGxhB,EAAsCqgB,IAAIuC,EAAME,eAAgB,aAAc,KAChGtB,EACAA,EAAalT,UAAYsL,EAAO5T,KAAKsU,cAAckH,EAAalT,WAGhEsL,EAAOuN,QAAQ5kC,QAAQmf,UAAYkY,EAAO5T,KAAKsU,cAAcV,EAAOuN,QAAQ5kC,QAAQmf,YAExF,EAAGvB,EAA6BoiB,IAAI3I,EAAOuN,QAAQ5kC,QAASqgC,SAKxE95B,KAAKvG,QAAQqI,iBAAiB,oBAAoB,WAC9C48B,EAAMgI,eAAgB,KAE1B1mC,KAAKvG,QAAQqI,iBAAiB,kBAAkB,SAAUF,GACtD,IAAIwe,GAAiB,EAAG2Y,EAA+C9H,GAAG7X,eAAeG,WAAW,GAAGygB,gBACnG5Z,GAAiD,KAA/BA,EAAegD,YAEjC+d,EAAUrQ,KAGT,EAAG6O,EAA6BhK,OACjC2lB,GAAYxqB,EAAQ1X,eAAeG,WAAW,GAAGC,aAAc5X,GAEnE88B,EAAMgI,eAAgB,MAE1B1mC,KAAKvG,QAAQqI,iBAAiB,SAAS,SAAUF,GAC7C,GAAwB,iBAApBA,EAAM+gC,WAAoD,mBAApB/gC,EAAM+gC,UAIhD,GAAIjE,EAAMzB,aACNyB,EAAMzB,cAAe,OAGzB,IAAIyB,EAAMgI,eAAgC,MAAf9kC,EAAM5H,MAA+B,MAAf4H,EAAM5H,MAA+B,MAAf4H,EAAM5H,KAA7E,CAGA,IAAI8/B,EAAQ1gB,eAAeG,WAAW,GAClCmf,GAAe,EAAGxhB,EAAgCsgB,IAAIsC,EAAME,gBAMhE,GALKtB,IAEDwO,EAAUpW,EAAQgJ,GAClBpB,GAAe,EAAGxhB,EAAgCsgB,IAAIsC,EAAME,iBAE3DtB,EAAL,CAOA,IAHA,IAAIkC,GAAc,EAAGvjB,EAAiCkiB,IAAIb,EAAc5H,EAAOuN,QAAQ5kC,QAASqgC,GAAO7oB,MAEnGgxB,GAAa,EACRhmC,EAAI2+B,EAAc,EAAG3+B,EAAIy8B,EAAatV,YAAYzD,OAAO,EAAGib,GAAajqB,YAAY,MAAO1U,IACjG,GAA2C,MAAvCy8B,EAAatV,YAAYjb,OAAOlM,IAEO,OAAvCy8B,EAAatV,YAAYjb,OAAOlM,GAAa,CAC7CgmC,GAAa,EACb,MAGY,IAAhBrH,IACAqH,GAAa,GAGjB,IAAIC,GAAW,EACf,IAASjmC,EAAI2+B,EAAc,EAAG3+B,EAAIy8B,EAAatV,YAAYlnB,OAAQD,IAC/D,GAA2C,MAAvCy8B,EAAatV,YAAYjb,OAAOlM,IAAqD,OAAvCy8B,EAAatV,YAAYjb,OAAOlM,GAAa,CAC3FimC,GAAW,EACX,MAGR,IAAI9hB,GAAiB,EAAG2Y,EAA+C9H,GAAG7X,eAAeG,WAAW,GAAGygB,gBACnG5Z,GAAiD,KAA/BA,EAAegD,cAEjC+d,EAAUrQ,GACV1Q,EAAexd,UAEdq/B,GAAyD,eAA3CvJ,EAAap+B,aAAa,cACtC4nC,GAAYF,GAAYtJ,EAAa9f,YACvCmpB,GAAOrJ,EAAa9f,YAAc8f,EAAagE,wBAGpD4e,GAAYxqB,EAAQgJ,EAAOl4B,QAE/B5B,KAAKvG,QAAQqI,iBAAiB,SAAS,SAAUF,GAC7C,GAA6B,UAAzBA,EAAM5I,OAAOguB,QAAqB,CAClC,IAAI2qC,EAAe/vD,EAAM5I,OASzB,OARI24D,EAAa7S,QACb6S,EAAap3D,aAAa,UAAW,WAGrCo3D,EAAat3D,gBAAgB,WAEjCqkC,EAAMzB,cAAe,OACrBuJ,EAAiB1V,GAGrB,GAA6B,QAAzBlvB,EAAM5I,OAAOguB,SAEZplB,EAAM5I,OAAOqpB,cAAc3f,UAAU4f,SAAS,2BAFnD,CAY6B,MAAzB1gB,EAAM5I,OAAOguB,SACbpR,OAAOif,KAAKjzB,EAAM5I,OAAOsB,aAAa,SAE1C,IAAIw/B,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GACjD,GAAIlvB,EAAM5I,OAAO84B,YAAY4M,EAAMjlC,UAAYilC,EAAMjlC,QAAQ0jC,kBAAoBrD,EAAMoK,UAAW,CAC9F,IAAIif,EAAWzkB,EAAMjlC,QAAQ0jC,iBAAiBzjB,wBAC1C9X,EAAM6G,EAAI06C,EAASxpC,IAAMwpC,EAASrtC,SACa,MAA3C4oB,EAAMjlC,QAAQ0jC,iBAAiBnW,SACyE,KAAxG0X,EAAMjlC,QAAQ0jC,iBAAiB/Z,YAAY/J,OAAOtK,QAAQgI,EAA8B+D,EAAEmG,KAAM,KAChG6Y,EAAM8B,mBAAmB8C,EAAMjlC,QAAQ0jC,kBACvCrD,EAAMO,UAAS,KAGfqE,EAAMjlC,QAAQ6sB,mBAAmB,YAAa,qBAAyBvP,EAA8B+D,EAAEmG,KAAO,cAC9G,EAAG5J,EAA6BoiB,IAAIiF,EAAMjlC,QAASqgC,KAI/DgO,GAAwBhX,GAExB,IAAInS,GAAiB,EAAGzH,EAAsCiJ,IAAIve,EAAM5I,OAAQ,2BAC3E2lB,IACDA,GACI,EAAGzH,EAAsCiJ,KAAI,EAAG9I,EAA8B+hB,IAAItI,GAAQkJ,eAAgB,4BAE9Grb,GACA8oB,GAAS9oB,EAAgBmS,GAE7BwQ,EAAS1/B,EAAOkvB,OArCmC,aAA3ClvB,EAAM5I,OAAOsB,aAAa,aAC1BgxC,GAAkBxa,EAAQlvB,EAAM5I,QAzpN9B,SAAU4I,EAAOkvB,GACnC,IAAI9a,EAAapU,EAAM5I,OACvB83B,EAAOuN,QAAQqC,QAAQ9nB,UAAY,GACnC,IAAIg5C,EAAY,WACZ57C,EAAWzb,aAAa,MAAOu6C,EAAa16C,OAC5C4b,EAAWzb,aAAa,MAAOs3D,EAAIz3D,OACnC4b,EAAWzb,aAAa,QAASqF,EAAMxF,QAEvC0wC,EAAYnxC,SAASC,cAAc,QACvCkxC,EAAUvwC,aAAa,aAAcqb,OAAOmJ,WAAW+yC,UACvDhnB,EAAUjzB,UAAY,yCACtB,IAAIi9B,EAAen7C,SAASC,cAAc,SAC1CkxC,EAAU5xC,YAAY47C,GACtBA,EAAaj9B,UAAY,eACzBi9B,EAAav6C,aAAa,cAAeqb,OAAOmJ,WAAW+yC,UAC3Dhd,EAAa16C,MAAQ4b,EAAW1b,aAAa,QAAU,GACvDw6C,EAAa9J,QAAU,WACnB4mB,KAEJ9c,EAAa7J,UAAY,SAAU8mB,GAC/BnqB,GAAmB9W,EAAQihC,IAE/B,IAAIC,EAAUr4D,SAASC,cAAc,QACrCo4D,EAAQz3D,aAAa,aAAcqb,OAAOmJ,WAAWkzC,eACrDD,EAAQn6C,UAAY,yCACpB,IAAIg6C,EAAMl4D,SAASC,cAAc,SACjCo4D,EAAQ94D,YAAY24D,GACpBA,EAAIh6C,UAAY,eAChBg6C,EAAIt3D,aAAa,cAAeqb,OAAOmJ,WAAWkzC,eAClDJ,EAAIl3D,MAAMw1B,MAAQ,OAClB0hC,EAAIz3D,MAAQ4b,EAAW1b,aAAa,QAAU,GAC9Cu3D,EAAI7mB,QAAU,WACV4mB,KAEJC,EAAI5mB,UAAY,SAAU8mB,GACtBnqB,GAAmB9W,EAAQihC,IAE/B,IAAIG,EAAYv4D,SAASC,cAAc,QACvCs4D,EAAU33D,aAAa,aAAcqb,OAAOmJ,WAAWnf,OACvDsyD,EAAUr6C,UAAY,yCACtB,IAAIjY,EAAQjG,SAASC,cAAc,SACnCs4D,EAAUh5D,YAAY0G,GACtBA,EAAMiY,UAAY,eAClBjY,EAAMrF,aAAa,cAAeqb,OAAOmJ,WAAWnf,OACpDA,EAAMxF,MAAQ4b,EAAW1b,aAAa,UAAY,GAClDsF,EAAMorC,QAAU,WACZ4mB,KAEJhyD,EAAMqrC,UAAY,SAAU8mB,GACxBnqB,GAAmB9W,EAAQihC,IAE/B/pB,GAAShyB,EAAY8a,GACrBA,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAa+yB,GAC1Dha,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAai6C,GAC1DlhC,EAAOuN,QAAQqC,QAAQ3oB,sBAAsB,YAAam6C,GAC1DjqB,GAAmBnX,EAAQ9a,GAqmNXm8C,CAAgBvwD,EAAOkvB,MAmCnC9wB,KAAKvG,QAAQqI,iBAAiB,SAAS,SAAUF,GAC7C,IAAIA,EAAMspC,eAAe,EAAGvL,EAA0B7J,IAAIl0B,GAA1D,CAKkB,UAAdA,EAAMnH,KACN0qC,GAAarU,GAEE,cAAdlvB,EAAMnH,KAAqC,WAAdmH,EAAMnH,KACC,KAArCq2B,EAAOuN,QAAQ5kC,QAAQmf,WAAiE,IAA7CkY,EAAOuN,QAAQ5kC,QAAQmF,WAAW1C,SAC7E40B,EAAOuN,QAAQ5kC,QAAQm4B,mBAA0E,MAArDd,EAAOuN,QAAQ5kC,QAAQm4B,kBAAkB5K,SACnB,IAA/D8J,EAAOuN,QAAQ5kC,QAAQm4B,kBAAkB4qB,mBACD,KAAvC1rB,EAAOuN,QAAQ5kC,QAAQ2pB,aAA6D,OAAvC0N,EAAOuN,QAAQ5kC,QAAQ2pB,cAExE0N,EAAOuN,QAAQ5kC,QAAQmf,UAAY,IAEvC,IAAIkhB,GAAQ,EAAGziB,EAA8B+hB,IAAItI,GAUjD,GATkB,cAAdlvB,EAAMnH,MAEF,EAAGklC,EAA6BhK,OAA8C,OAArCmE,EAAME,eAAe5W,aAA8C,IAAtB0W,EAAMc,cAC5Fd,EAAME,eAAe5W,YAAc,IAI3C8jB,EAAUpW,EAAQgJ,GAClBgO,GAAwBhX,GACN,cAAdlvB,EAAMnH,KAAqC,eAAdmH,EAAMnH,KAAsC,cAAdmH,EAAMnH,KAChD,cAAdmH,EAAMnH,KAAqC,YAAdmH,EAAMnH,IAD1C,CAIkB,cAAdmH,EAAMnH,KAAqC,eAAdmH,EAAMnH,KACnCq2B,EAAO2P,KAAKY,OAAOvQ,GAGvB,IAAInS,GAAiB,EAAGzH,EAAsCiJ,IAAI2Z,EAAME,eAAgB,2BAQxF,IAPKrb,GAAoD,IAAlCmb,EAAME,eAAezB,UAAkBuB,EAAMc,YAAc,IAE1E8Q,EAAqB5R,EAAME,gBACRt3B,UAAU4f,SAAS,2BACtC3D,EAAiB+sB,EAAmBvO,kBAGvCxe,EAIL,GAAsC,SADhBA,EAAe+d,uBACjB/hC,MAAM2e,QAA1B,CASA,IAAI2K,EAActF,EAAe+d,uBAIjC,GAH4B,QAAxBzY,EAAY+C,UACZ/C,EAAcA,EAAY2N,mBAEZ,cAAdhwB,EAAMnH,KAAqC,eAAdmH,EAAMnH,IAAsB,CACzD,IAAIixC,EACAvH,EA7mQW,SAAUiuB,GAErC,IADA,IAAIjuB,EAAWiuB,EACRjuB,IAAaA,EAAShI,aACzBgI,EAAWA,EAAS9hB,cAExB,OAAO8hB,EAAShI,YAwmQWk2B,CADX3mB,EAAqB/sB,EAAe0D,eAExC,GAAI8hB,GAAkC,IAAtBA,EAAS5L,SAAgB,CAErC,IAAI+5B,EAAoBnuB,EAAS5hC,cAAc,4BAC/C,GAAI+vD,EAEA,YADA7qB,GAAS6qB,EAAmBxhC,GAKpC,GAA0B,IAAtBqT,EAAS5L,SAAgB,CAEzB,KAAuC,IAAhC4L,EAAS/gB,YAAYlnB,QAAgBioC,EAAShI,aAEjDgI,EAAWA,EAAShI,YAExBrC,EAAMM,SAAS+J,EAAU,QAIzBrK,EAAMM,SAAS+J,EAASmD,WAAY,QAIxCxN,EAAM8B,mBAAmB3X,GACzB6V,EAAMO,UAAS,OAvCG,cAAdz4B,EAAMnH,KAAqC,eAAdmH,EAAMnH,IACnCgtC,GAAS9oB,EAAgBmS,GAGzB2W,GAAS9oB,EAAgBmS,GAAQ,SAuC1Cu/B,KAKPkC,GAAoD,WACpD,IAAIv0B,EAAgB,SAAUr9B,EAAG7H,GAI7B,OAHAklC,EAAgB3lC,OAAO83C,gBAClB,CAAEC,UAAW,cAAgB1xC,OAAS,SAAUiC,EAAG7H,GAAK6H,EAAEyvC,UAAYt3C,IACvE,SAAU6H,EAAG7H,GAAK,IAAK,IAAI+D,KAAK/D,EAAOA,EAAEwQ,eAAezM,KAAI8D,EAAE9D,GAAK/D,EAAE+D,MACpD8D,EAAG7H,IAE5B,OAAO,SAAU6H,EAAG7H,GAEhB,SAASu3C,IAAOrwC,KAAKF,YAAca,EADnCq9B,EAAcr9B,EAAG7H,GAEjB6H,EAAEiD,UAAkB,OAAN9K,EAAaT,OAAOC,OAAOQ,IAAMu3C,EAAGzsC,UAAY9K,EAAE8K,UAAW,IAAIysC,IAV/B,GAmd3B,MAAM1wC,GAjaP,SAAUqxC,GAMlC,SAAStwB,EAAOhB,EAAIriB,GAChB,IAAIqhC,EAAQsS,EAAOr1B,KAAK3b,OAASA,KACjC0+B,EAAM8zB,QAAUz7C,EAA8BuI,EAC5B,iBAAPI,IACFriB,EAOKA,EAAQ2oC,MAGR3oC,EAAQ2oC,MAAMtmB,KACpBriB,EAAQ2oC,MAAMtmB,GAAK,SAAWA,GAH9BriB,EAAQ2oC,MAAQ,CAAEtmB,GAAI,SAAWA,GAPjCriB,EAAU,CACN2oC,MAAO,CACHtmB,GAAI,SAAWA,IAU3BA,EAAK/lB,SAASimB,eAAeF,IAEjC,IACI1C,EADa,IAAIyyC,GAAQpyD,GACE8Z,QAE/B,GAAK6F,EAAc8B,KAWflJ,OAAOmJ,WAAa/B,EAAc8B,KAClC4f,EAAMthC,KAAKsiB,EAAI1C,OAZM,CACrB,IAAK,CAAC,QAAS,QAAS,QAAS,QAAS,QAAS,SAASgC,SAAShC,EAAczF,MAC/E,MAAM,IAAIhT,MAAM,4EAGhB,EAAG0S,EAAyBgG,GAAGD,EAAclB,IAAM,iBAAmBkB,EAAczF,KAAO,MAAO,oBAAoBra,MAAK,WACvHwhC,EAAMthC,KAAKsiB,EAAI1C,MAQ3B,OAAO0hB,EAqXX,OA9ZA6zB,GAAY7xC,EAAQswB,GA4CpBtwB,EAAO9c,UAAUwhC,SAAW,SAAUzoB,EAAO4X,EAAcF,EAAWo+B,GAClEzyD,KAAK8wB,OAAOzzB,QAAQsf,MAAQA,EAC5ByoB,EAASplC,KAAK8wB,QACVyD,IACAv0B,KAAK8wB,OAAOzzB,QAAQyjB,QAAQnE,MAAMwC,QAAUoV,GAC5C,EAAGvd,EAAqCkI,GAAGqV,EAAck+B,GAAoBzyD,KAAK8wB,OAAOzzB,QAAQyjB,QAAQnE,MAAMyC,OAE/GiV,IACAr0B,KAAK8wB,OAAOzzB,QAAQyjB,QAAQ5E,KAAKvhB,MAAQ05B,GACzC,EAAG7T,GAA+Bf,GAAG4U,EAAWr0B,KAAK8wB,OAAOzzB,QAAQye,OAI5E4E,EAAO9c,UAAU8uD,SAAW,WACxB,OAAOx0B,EAAYl+B,KAAK8wB,SAG5BpQ,EAAO9c,UAAU+uD,eAAiB,WAC9B,OAAO3yD,KAAK8wB,OAAOO,aAGvB3Q,EAAO9c,UAAUq2B,MAAQ,WACW,OAA5Bj6B,KAAK8wB,OAAOO,YACZrxB,KAAK8wB,OAAOqN,GAAG1kC,QAAQwgC,QAEU,YAA5Bj6B,KAAK8wB,OAAOO,YACjBrxB,KAAK8wB,OAAOuN,QAAQ5kC,QAAQwgC,QAEK,OAA5Bj6B,KAAK8wB,OAAOO,aACjBrxB,KAAK8wB,OAAOyN,GAAG9kC,QAAQwgC,SAI/BvZ,EAAO9c,UAAUguC,KAAO,WACY,OAA5B5xC,KAAK8wB,OAAOO,YACZrxB,KAAK8wB,OAAOqN,GAAG1kC,QAAQm4C,OAEU,YAA5B5xC,KAAK8wB,OAAOO,YACjBrxB,KAAK8wB,OAAOuN,QAAQ5kC,QAAQm4C,OAEK,OAA5B5xC,KAAK8wB,OAAOO,aACjBrxB,KAAK8wB,OAAOyN,GAAG9kC,QAAQm4C,QAI/BlxB,EAAO9c,UAAUgvD,SAAW,WACxBxyB,EAAUpgC,KAAK8wB,OAAQ,CAAC,aAAc,OAAQ,YAC9CmP,EAAejgC,KAAK8wB,OAAOqB,QAAQoO,SAAUxpB,EAA8C+D,EAAEuG,cAAcvb,OAAO,CAAC,OAAQ,OAAQ,aAAc,eACjJ9F,KAAK8wB,OAAO9wB,KAAK8wB,OAAOO,aAAa53B,QAAQc,aAAa,kBAAmB,UAGjFmmB,EAAO9c,UAAU8Y,OAAS,WACtBsjB,EAAchgC,KAAK8wB,OAAOqB,QAAQoO,SAAUxpB,EAA8C+D,EAAEuG,cAAcvb,OAAO,CAAC,OAAQ,OAAQ,aAAc,eAChJ9F,KAAK8wB,OAAO+V,KAAKgK,UAAU7wC,KAAK8wB,QAChC9wB,KAAK8wB,OAAO9wB,KAAK8wB,OAAOO,aAAa53B,QAAQc,aAAa,kBAAmB,SAGjFmmB,EAAO9c,UAAUwV,aAAe,WAC5B,MAAgC,YAA5BpZ,KAAK8wB,OAAOO,YACL+f,GAAcpxC,KAAK8wB,OAAOuN,QAAQ5kC,SAER,OAA5BuG,KAAK8wB,OAAOO,YACV+f,GAAcpxC,KAAK8wB,OAAOqN,GAAG1kC,SAEH,OAA5BuG,KAAK8wB,OAAOO,YACV+f,GAAcpxC,KAAK8wB,OAAOyN,GAAG9kC,cADnC,GAKTinB,EAAO9c,UAAUivD,cAAgB,SAAUz4D,GACvC4F,KAAK8wB,OAAOhQ,QAAQugB,OAAOrhC,KAAK8wB,OAAQ12B,IAG5CsmB,EAAO9c,UAAU02B,kBAAoB,WACjC,OAAO,EAAGjjB,EAAiCgiB,IAAIr5B,KAAK8wB,OAAO9wB,KAAK8wB,OAAOO,aAAa53B,UAGxFinB,EAAO9c,UAAUs0C,YAAc,WAC3B,OAAOl4C,KAAK8wB,OAAOinB,OAAOG,aAG9Bx3B,EAAO9c,UAAUkvD,WAAa,WAC1Bv8B,aAAaw8B,WAAW/yD,KAAK8wB,OAAOzzB,QAAQ2oC,MAAMtmB,KAGtDgB,EAAO9c,UAAUovD,cAAgB,WAC7BhzD,KAAK8wB,OAAOzzB,QAAQ2oC,MAAMtpB,QAAS,GAGvCgE,EAAO9c,UAAUqvD,YAAc,WAC3B,IAAKjzD,KAAK8wB,OAAOzzB,QAAQ2oC,MAAMtmB,GAC3B,MAAM,IAAInb,MAAM,8EAEpBvE,KAAK8wB,OAAOzzB,QAAQ2oC,MAAMtpB,QAAS,GAGvCgE,EAAO9c,UAAUsvD,QAAU,SAAU94D,GACjC,OAAO4F,KAAK8wB,OAAO5T,KAAKgpB,QAAQ9rC,IAGpCsmB,EAAO9c,UAAUuvD,WAAa,SAAU/4D,GACpC,OAAO4F,KAAK8wB,OAAO5T,KAAKk2C,WAAWh5D,IAGvCsmB,EAAO9c,UAAUw/C,QAAU,WACvB,OAAOA,GAAQpjD,KAAK8wB,SAGxBpQ,EAAO9c,UAAU+qC,IAAM,SAAU50C,EAAMwqD,GACnCvkD,KAAK8wB,OAAO6d,IAAIpP,KAAKxlC,EAAMwqD,IAG/B7jC,EAAO9c,UAAUgiD,eAAiB,SAAU1lD,GACxC0lD,GAAe1lD,EAAMF,KAAK8wB,SAG9BpQ,EAAO9c,UAAUyvD,YAAc,WACvBz9C,OAAOwD,eAAek6C,aAG1B35D,SAASujC,YAAY,UAAU,IAGnCxc,EAAO9c,UAAU2vD,YAAc,SAAUn5D,GACrCT,SAASujC,YAAY,cAAc,EAAO9iC,IAG9CsmB,EAAO9c,UAAU4vD,YAAc,SAAUp5D,EAAOinC,QAC7B,IAAXA,IAAqBA,GAAS,GAClC,IAAIvH,GAAQ,EAAGziB,EAA8B+hB,IAAIp5B,KAAK8wB,QACtDgJ,EAAMO,UAAS,GACf,IAAIo5B,EAAa95D,SAASC,cAAc,YACxC65D,EAAW76C,UAAYxe,EACvB0/B,EAAM+C,WAAW42B,EAAWp2B,QAAQC,WAAU,IACd,OAA5Bt9B,KAAK8wB,OAAOO,aACZrxB,KAAK8wB,OAAOqN,GAAGlB,cAAe,EAC1BoE,GACAoD,EAAWzkC,KAAK8wB,SAGa,YAA5B9wB,KAAK8wB,OAAOO,aACjBrxB,KAAK8wB,OAAOuN,QAAQpB,cAAe,EAC/BoE,GACAia,GAAYt7C,KAAK8wB,OAAQ1X,eAAeG,WAAW,KAGtB,OAA5BvZ,KAAK8wB,OAAOO,cACjBrxB,KAAK8wB,OAAOyN,GAAGtB,cAAe,EAC1BoE,GACAQ,EAAM7hC,KAAK8wB,OAAQ1X,eAAeG,WAAW,IAAI,KAK7DmH,EAAO9c,UAAU8vD,SAAW,SAAUr3C,EAAUuyC,GAC5C,IAAIlwB,EAAQ1+B,UACO,IAAf4uD,IAAyBA,GAAa,GACV,OAA5B5uD,KAAK8wB,OAAOO,aACZrxB,KAAK8wB,OAAOqN,GAAG1kC,QAAQmf,UAAY5Y,KAAK8wB,OAAO5T,KAAKg6B,gBAAgB76B,GACpEqoB,GAAmB1kC,KAAK8wB,OAAQ,CAC5BuS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,KAGgB,YAA5BvjC,KAAK8wB,OAAOO,YACjBoc,GAAcztC,KAAK8wB,OAAQzU,EAAU,CACjCgnB,oBAAoB,EACpBC,YAAY,EACZC,aAAa,KAIjBvjC,KAAK8wB,OAAOyN,GAAG9kC,QAAQmf,UAAY5Y,KAAK8wB,OAAO5T,KAAKyzB,eAAet0B,GACnErc,KAAK8wB,OAAOyN,GAAG9kC,QACVsc,iBAAiB,wCACjBtd,SAAQ,SAAU2f,GACnB4oB,EAAkB5oB,EAAMsmB,EAAM5N,WAElCsS,GAA2BpjC,KAAK8wB,OAAQ,CACpCuS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,KAGrBvjC,KAAK8wB,OAAOsQ,QAAQC,OAAOrhC,KAAK8wB,QAC3BzU,IACD+jB,EAAUpgC,KAAK8wB,OAAQ,CAAC,QAAS,WAAY,UAAW,SACpD9wB,KAAK8wB,OAAOuN,QAAQqC,UACpB1gC,KAAK8wB,OAAOuN,QAAQqC,QAAQ/lC,MAAM2e,QAAU,QAEhDtZ,KAAK8yD,cAELlE,GACA5uD,KAAK4uD,cAIbluC,EAAO9c,UAAUgrD,WAAa,WAC1B5uD,KAAK8wB,OAAO+V,KAAK+nB,WAAW5uD,KAAK8wB,QACjC9wB,KAAK8wB,OAAO+V,KAAKC,eAAe9mC,KAAK8wB,SAGzCpQ,EAAO9c,UAAU+vD,QAAU,WACvB3zD,KAAK8wB,OAAOr3B,QAAQmf,UAAY5Y,KAAK8wB,OAAOmV,kBAC5CjmC,KAAK8wB,OAAOr3B,QAAQiJ,UAAUE,OAAO,UACrC5C,KAAK8wB,OAAOr3B,QAAQY,gBAAgB,SACpCV,SAASimB,eAAe,oBAAoBhd,SAC5C5C,KAAK8yD,cAGTpyC,EAAO9c,UAAUgwD,cAAgB,WAC7B,MAAgC,YAA5B5zD,KAAK8wB,OAAOO,YACL,GAEJrxB,KAAK8wB,OAAOuN,QAAQiU,YAAYtyC,KAAK8wB,QAAQ,IAGxDpQ,EAAO9c,UAAUiwD,aAAe,SAAU7iC,GACtC,GAAgC,YAA5BhxB,KAAK8wB,OAAOO,YAAhB,CAGA,IAAIyiC,EAAS,SAAU17C,GACnBA,EAAK1V,UAAUE,OAAO,yBACtBouB,EAAIv4B,SAAQ,SAAUinB,GACdtH,EAAK9d,aAAa,eAAe0G,QAAQ0e,IAAO,GAChDtH,EAAK1V,UAAUlG,IAAI,6BAI/BwD,KAAK8wB,OAAOuN,QAAQ5kC,QACfsc,iBAAiB,mBACjBtd,SAAQ,SAAU2f,GACnB07C,EAAO17C,MAEuC,SAA9CpY,KAAK8wB,OAAOhQ,QAAQrnB,QAAQkB,MAAM2e,SAClCtZ,KAAK8wB,OAAOhQ,QAAQrnB,QACfsc,iBAAiB,mBACjBtd,SAAQ,SAAU2f,GACnB07C,EAAO17C,QAKnBsI,EAAO9c,UAAUmwD,eAAiB,SAAU/iC,GACxC,GAAgC,YAA5BhxB,KAAK8wB,OAAOO,YAAhB,CAGA,IAAI2iC,EAAW,SAAU57C,GACrB4Y,EAAIv4B,SAAQ,SAAUinB,GACdtH,EAAK9d,aAAa,eAAe0G,QAAQ0e,IAAO,GAChDtH,EAAK1V,UAAUE,OAAO,6BAIlC5C,KAAK8wB,OAAOuN,QAAQ5kC,QACfsc,iBAAiB,mBACjBtd,SAAQ,SAAU2f,GACnB47C,EAAS57C,MAEqC,SAA9CpY,KAAK8wB,OAAOhQ,QAAQrnB,QAAQkB,MAAM2e,SAClCtZ,KAAK8wB,OAAOhQ,QAAQrnB,QACfsc,iBAAiB,mBACjBtd,SAAQ,SAAU2f,GACnB47C,EAAS57C,QAKrBsI,EAAO9c,UAAUqwD,iBAAmB,SAAUC,GAC1C,IAAIx1B,EAAQ1+B,KACZ,GAAgC,YAA5BA,KAAK8wB,OAAOO,YAAhB,CAGA,IAAI0hC,EAAa,SAAU36C,EAAM+7C,GAC7B,IAAInjC,EAAM5Y,EAAK9d,aAAa,eAAegI,MAAM,KACjD0uB,EAAImW,MAAK,SAAUznB,EAAI3e,GACnB,GAAI2e,IAAOy0C,EAEP,OADAnjC,EAAI/vB,OAAOF,EAAO,IACX,KAGI,IAAfiwB,EAAI90B,QACJkc,EAAKoN,UAAYpN,EAAKQ,WACtB,EAAGvB,EAA8B+hB,IAAIsF,EAAM5N,QAAQuJ,UAAS,IAG5DjiB,EAAK7d,aAAa,cAAey2B,EAAIpnB,KAAK,OAGlDsqD,EAAUz7D,SAAQ,SAAU07D,GACxBz1B,EAAM5N,OAAOuN,QAAQ5kC,QAChBsc,iBAAiB,mBACjBtd,SAAQ,SAAU2f,GACnB26C,EAAW36C,EAAM+7C,MAE8B,SAA/Cz1B,EAAM5N,OAAOhQ,QAAQrnB,QAAQkB,MAAM2e,SACnColB,EAAM5N,OAAOhQ,QAAQrnB,QAChBsc,iBAAiB,mBACjBtd,SAAQ,SAAU2f,GACnB26C,EAAW36C,EAAM+7C,SAI7B3tB,EAAiBxmC,KAAK8wB,OAAQ,CAC1BuS,oBAAoB,EACpBC,YAAY,EACZC,aAAa,MAGrB7iB,EAAO9c,UAAUxG,KAAO,SAAUsiB,EAAI1C,GAClC,IAAI0hB,EAAQ1+B,KACZA,KAAK8wB,OAAS,CACVO,YAAarU,EAAc9c,KAC3BzG,QAASimB,EACT+gB,KAAM,IAAI6gB,GAAKtkC,EAAcyjB,KAAKiS,QAClCx1B,UAAM3T,EACNlM,QAAS2f,EACTipB,kBAAmBvmB,EAAG9G,UACtBwoB,QAAS,IAAImiB,GAAQ3tC,OAAOmJ,WAAWqiB,SACvCuN,IAAK,IAAIgX,IAEb3lD,KAAK8wB,OAAOqN,GAAK,IAAImnB,GAAOtlD,KAAK8wB,QACjC9wB,KAAK8wB,OAAO+V,KAAO,IAAI4nB,GACvBzuD,KAAK8wB,OAAOuN,QAAU,IAAIgyB,GAAQrwD,KAAK8wB,QACvC9wB,KAAK8wB,OAAOyN,GAAK,IAAIwkB,GAAG/iD,KAAK8wB,QAC7B9wB,KAAK8wB,OAAOqB,QAAU,IAAIi8B,GAAQpuD,KAAK8wB,QACnC9T,EAAc0iB,OAAOhjB,SACrB1c,KAAK8wB,OAAO4O,OAAS,IAAIklB,GAAO5kD,KAAK8wB,SAErC9wB,KAAK8wB,OAAOqB,QAAQoO,SAAS5B,WAC7B3+B,KAAK8wB,OAAO6N,SAAW,IAAIH,IAE3BxhB,EAAc+6B,OAAO31C,KAAO4a,EAAc+6B,OAAOl2C,WACjD7B,KAAK8wB,OAAOinB,OAAS,IAAIE,KAE7B,EAAGhhC,EAAyBgG,GAAGD,EAAco3C,WACzCp3C,EAAclB,IAAM,4BAA6B,oBAAoB5e,MAAK,WAC1EwhC,EAAM5N,OAAO5T,MAAO,EAAG9F,GAAqB+F,GAAG,CAC3CC,UAAWshB,EAAM5N,OAAOzzB,QAAQyjB,QAAQzE,SAASe,UACjDC,iBAAkBqhB,EAAM5N,OAAOzzB,QAAQyjB,QAAQzE,SAC1CgB,iBACLC,UAAWohB,EAAM5N,OAAOzzB,QAAQojC,KAAKxkB,UACrCsB,OAAQmhB,EAAM5N,OAAOzzB,QAAQojC,KAAKD,MAClChjB,YAAakhB,EAAM5N,OAAOzzB,QAAQyjB,QAAQzE,SAASmB,YACnDC,UAAWihB,EAAM5N,OAAOzzB,QAAQyjB,QAAQzE,SAASoB,UACjDC,eAAe,EACfC,gBAAiB+gB,EAAM5N,OAAOzzB,QAAQyjB,QAAQvE,KAAKqB,YACnDE,SAAU4gB,EAAM5N,OAAOzzB,QAAQyjB,QAAQzE,SAASyB,SAChDC,WAAY2gB,EAAM5N,OAAOzzB,QAAQyjB,QAAQzE,SAAS0B,WAClDC,UAAW0gB,EAAM5N,OAAOzzB,QAAQyjB,QAAQzE,SAAS2B,UACjDC,KAAMygB,EAAM5N,OAAOzzB,QAAQyjB,QAAQzE,SAAS4B,KAC5CC,iBAAkBwgB,EAAM5N,OAAOzzB,QAAQyjB,QAAQzE,SAC1C6B,iBACLC,wBAAyBugB,EAAM5N,OAAOzzB,QAAQyjB,QAAQzE,SACjD8B,wBACLC,SAAUsgB,EAAM5N,OAAOzzB,QAAQyjB,QAAQzE,SAAS+B,SAChDC,IAAKqgB,EAAM5N,OAAOzzB,QAAQyjB,QAAQzE,SAASgC,MAE/CqgB,EAAM5N,OAAOhQ,QAAU,IAAI2iC,GAAQ/kB,EAAM5N,QAz4RxC,SAAUA,GACnBA,EAAOr3B,QAAQmf,UAAY,GAC3BkY,EAAOr3B,QAAQiJ,UAAUlG,IAAI,UAC7B4oC,EAAStU,IACT,EAAG9Z,EAAqCkI,GAAG4R,EAAOzzB,QAAQyjB,QAAQnE,MAAMwC,QAAS2R,EAAOzzB,QAAQyjB,QAAQnE,MAAMyC,MACzE,iBAA1B0R,EAAOzzB,QAAQyY,SACtBgb,EAAOr3B,QAAQkB,MAAMmb,OAASgb,EAAOzzB,QAAQyY,OAAS,MAElB,iBAA7Bgb,EAAOzzB,QAAQuoC,YACtB9U,EAAOr3B,QAAQkB,MAAMirC,UAAY9U,EAAOzzB,QAAQuoC,UAAY,MAE5B,iBAAzB9U,EAAOzzB,QAAQ8yB,MACtBW,EAAOr3B,QAAQkB,MAAMw1B,MAAQW,EAAOzzB,QAAQ8yB,MAAQ,KAGpDW,EAAOr3B,QAAQkB,MAAMw1B,MAAQW,EAAOzzB,QAAQ8yB,MAEhDW,EAAOr3B,QAAQP,YAAY43B,EAAOqB,QAAQ14B,SAC1C,IAAIm3B,EAAiBj3B,SAASC,cAAc,OA+B5C,GA9BAg3B,EAAe/Y,UAAY,iBACa,SAApCiZ,EAAOzzB,QAAQ+jC,QAAQnR,UACvBW,EAAe13B,YAAY43B,EAAOsQ,QAAQ3nC,SAE9Cm3B,EAAe13B,YAAY43B,EAAOuN,QAAQ5kC,QAAQ4oB,eAClDuO,EAAe13B,YAAY43B,EAAOqN,GAAG1kC,SACrCm3B,EAAe13B,YAAY43B,EAAOyN,GAAG9kC,QAAQ4oB,eAC7CuO,EAAe13B,YAAY43B,EAAOhQ,QAAQrnB,SACtCq3B,EAAOqB,QAAQoO,SAAS5B,UACxB/N,EAAe13B,YAAY43B,EAAO6N,SAASllC,SAEP,UAApCq3B,EAAOzzB,QAAQ+jC,QAAQnR,WACvBa,EAAOsQ,QAAQ3nC,QAAQiJ,UAAUlG,IAAI,yBACrCo0B,EAAe13B,YAAY43B,EAAOsQ,QAAQ3nC,UAE1Cq3B,EAAOinB,QACPnnB,EAAe13B,YAAY43B,EAAOinB,OAAOt+C,SAEzCq3B,EAAOzzB,QAAQqiC,OAAOhjB,QACtBkU,EAAe13B,YAAY43B,EAAO4O,OAAOjmC,SAE7Cm3B,EAAe13B,YAAY43B,EAAO2P,KAAKhnC,SACvCm3B,EAAe13B,YAAY43B,EAAO6d,IAAIl1C,SACtCq3B,EAAOr3B,QAAQP,YAAY03B,GACvBE,EAAOqB,QAAQoO,SAAS8zB,QAExBvjC,EAAOr3B,QAAQ6sB,mBAAmB,YAAa,6DAEnDgqB,GAAYxf,EAAQA,EAAOzzB,QAAQ6C,KAAM2lC,EAAY/U,IACrDn3B,SAASujC,YAAY,6BAA6B,EAAO,KACrDhH,UAAUC,UAAUn1B,QAAQ,WAAa,QAAsC,IAA1B4U,OAAO0+C,eAAgC,CAE5F,IAAIC,GAAkB,EAClBC,EAAkB,SAAU5yD,GACxB2yD,IAGJA,GAAkB,EAClBE,uBAAsB,WAClBF,GAAkB,EAClB,IAAIG,EAAiB5jC,EAAOqB,QAAQ14B,QACpCi7D,EAAe/5D,MAAMkkB,UAAY,OAC7B61C,EAAeh7C,wBAAwBC,IAAM,IAC7C+6C,EAAe/5D,MAAMkkB,UAAY,iBAAmB61C,EAAeh7C,wBAAwBC,IAAM,YAI7G/D,OAAO0+C,eAAexyD,iBAAiB,SAAU0yD,GACjD5+C,OAAO0+C,eAAexyD,iBAAiB,SAAU0yD,IAu0R7CG,CAAOj2B,EAAM5N,QACT9T,EAAcgD,OACdhD,EAAcgD,QAEdhD,EAAcZ,OAEd,EAAGnF,EAA6BgI,GAAGjC,EAAclB,IAAM,kBAAoBkB,EAAcZ,KAAO,MAAO,wBAI5GsE,GACTD,EAAO5L,UAzwUT,GA8wUAF,EAAsBA,EAAoBE,SAz9d1B,cARG/R,uBC1BnB,MAAMnC,EAAIhH,SAASC,cAAc,OAC3B8lB,EAAK,SAAWtb,KAAKwwD,MAC3Bj0D,EAAEpG,aAAa,KAAMmlB,GACrB/e,EAAEhG,MAAM2e,QAAU,OAClB,MAAMwX,EAAS,IAAIpQ,EAAO/f,EAAG,CACzBqlC,MAAO,CAAEtmB,GAAIA,KAGjB,SAASm1C,EAAkBC,EAAeh0D,GACtCzI,OAAOuuB,OAAOkuC,EAAe,CACzB1yC,YAAc3oB,GACHA,EAAQsc,iBAAiB,iBAAiBjV,MAErD2hB,QAAUhpB,GAAYA,EAAQs7D,QAAQ13B,UAyBvClI,eAAe6/B,EAAar2C,GAG/B,IADAjd,QAAQC,IAAImvB,IACJA,EAAOA,cACLmkC,EAAM,GAEhB,MAAMx5C,EAAIqV,EAAOA,OACjBpQ,EAAO1J,gBAAgByE,EAAEpe,QAAQyjB,QAAQnE,MAAMwC,QAAS1D,EAAEpe,QAAQyjB,QAAQnE,MAAMyC,MAChFsB,EAAOzL,WAAW0J,GAClB+B,EAAOtL,gBAEPqO,KAAKi9B,UAAUjlC,EAAEpe,QAAQyjB,QAAQ5E,MAAOyC,GACxC+B,EAAOjK,WAAWkI,EAAgB,CAE9BpC,KAAMkH,KAAKi9B,UAAUjlC,EAAEpe,QAAQyjB,QAAQvE,QAG3CmE,EAAO/J,cAAcgI,GACrB+B,EAAOxL,gBAAgByJ,GACvB+B,EAAOvL,eAAewJ,GAEtB+B,EAAO1L,YAAY2J,GAEnB+B,EAAO9J,cAAc+H,GACrB+B,EAAO5L,UAAU6J,GACjB+B,EAAOhK,YAAYiI,GACnB+B,EAAO5J,eAAe6H,GAE1B,SAASs2C,EAAMC,GACX,OAAO,IAAI15D,SAAS2U,IAChBxN,WAAWwN,EAAG+kD,MApDtBL,EAAkBn0C,EAAO3L,cAAc6N,kBAAmB,QAGtDiyC,EAAkBn0C,EAAO3L,cAAc8N,qBAAsB,WAC7DnC,EAAO3L,cAAc8N,qBAAqBJ,QAAWhpB,IACjDA,EAAQmf,UAAYnf,EAAQs7D,QAAQ13B,QAC7B5jC,EAAQ2pB,aAKnByxC,EAAkBn0C,EAAO3L,cAAc+N,qBAAsB,WAC7DpC,EAAO3L,cAAc+N,qBAAqBL,QAAWY,GAAOA,EAAG0xC,QAAQI,aAE3EN,EAAkBn0C,EAAO3L,cAAcgO,mBAAoB,WAC3D8xC,EAAkBn0C,EAAO3L,cAAcoN,iBAAkB,OACzD0yC,EAAkBn0C,EAAO3L,cAAciO,sBAAuB,YAC9DtC,EAAO3L,cAAciO,sBAAsBZ,YAAe3gB,GAC/CA,EAAEsU,iBAAiB,2BAE9B8+C,EAAkBn0C,EAAO3L,cAAckO,uBAAwB,aAC/D4xC,EAAkBn0C,EAAO3L,cAAcmO,sBAAuB,YCjC9DiS,iBACI,IAAIigC,EAAM,KACV,OAAU,CACN,MAAMC,EAAY9zD,EAAW7E,SAASkjB,eAAe,mBACpC,MAAby1C,IAEkC,SAA9Bz/C,OAAOwD,eAAetY,KACtBu0D,EAAU3yD,UAAUlG,IAAI,kBAGxB64D,EAAU3yD,UAAUE,OAAO,mBAGjB,OAAdyyD,GAAsBD,IAAQC,QACxB,IAAI75D,SAAS2U,GAAMxN,WAAWwN,EAAG,OAGvCzO,QAAQC,IAAI,YAAa0zD,GACzBD,EAAMC,EAENL,EAAaK,GAEblzD,EAAeK,SAASqjB,MACxBtkB,EAAWC,UAAaC,IACpB,MAAM4hB,EAAK5hB,EAAEzI,OACb,IAAIomB,EAAOiE,EAAGwC,MAAQxC,EAAG1jB,IACrByf,GACAjd,EAAeid,IAIvB1gB,MAAMC,KAAK4C,EAAW7E,SAASqZ,iBAAiB,gBAAgBxW,KAAK8jB,IACjE,GAAqC,iBAAjCA,EAAG/oB,aAAa,cAAkD,OAAf+oB,EAAG2D,QAEtD,OAEJ,MAAMsuC,EAAe37D,SAAS47D,yBAC9B,SAASC,EAAQ97D,GACb,MAAMU,EAAQipB,EAAG/oB,aAAaZ,GAC9B,GAAIU,EAAO,CACP,MAAMipB,EAAK1pB,SAASC,cAAc,OAIlC,OAHAypB,EAAGD,YAAchpB,EACjBipB,EAAG3gB,UAAUlG,IAAI,iBAAmB9C,GACpC47D,EAAap8D,YAAYmqB,IAClB,EAGP,OAAO,EAUf,GAPAmyC,EAAQ,QACRA,EAAQ,SACJA,EAAQ,UACRF,EAAan4B,iBAAiB5iC,aAAa,QAAS+6D,EAAan4B,iBAAiB/Z,aAClFkyC,EAAan4B,iBAAiB/Z,YAAc,IAEhDoyC,EAAQ,YACJF,EAAa12D,WAAW1C,OAAS,EAAG,CACpC,MAAMu5D,EAAU97D,SAASC,cAAc,OACvC67D,EAAQ/yD,UAAUlG,IAAI,gBACtBi5D,EAAQv8D,YAAYo8D,GACpBjyC,EAAGnqB,YAAYu8D,SAMnCp0B"}